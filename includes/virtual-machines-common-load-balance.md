

<span data-ttu-id="00b5d-101">Existem dois níveis de balanceamento de carga disponíveis para os serviços de infraestrutura do Azure:</span><span class="sxs-lookup"><span data-stu-id="00b5d-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="00b5d-102">**Nível de DNS**: balanceamento de carga para serviços de nuvem do tráfego toodifferent localizado nos dados de diferentes centros, toodifferent Web sites do Azure localizados em data centers diferentes ou tooexternal pontos finais.</span><span class="sxs-lookup"><span data-stu-id="00b5d-102">**DNS Level**:  Load balancing for traffic toodifferent cloud services located in different data centers, toodifferent Azure websites located in different data centers, or tooexternal endpoints.</span></span> <span data-ttu-id="00b5d-103">Isto é feito com o Gestor de tráfego do Azure e método de balanceamento de carga de Olá Round Robin.</span><span class="sxs-lookup"><span data-stu-id="00b5d-103">This is done with Azure Traffic Manager and hello Round Robin load balancing method.</span></span>
* <span data-ttu-id="00b5d-104">**Nível de rede**: de entrada Internet tráfego toodifferent máquinas virtuais de um serviço em nuvem de balanceamento de carga ou de tráfego entre máquinas virtuais numa rede virtual ou serviço em nuvem de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="00b5d-104">**Network Level**:  Load balancing of incoming Internet traffic toodifferent virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="00b5d-105">Isto é feito com Balanceador de carga do Azure de Olá.</span><span class="sxs-lookup"><span data-stu-id="00b5d-105">This is done with hello Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="00b5d-106">Gestor de tráfego balanceamento de carga para serviços em nuvem e Web sites</span><span class="sxs-lookup"><span data-stu-id="00b5d-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="00b5d-107">Gestor de tráfego permite-lhe toocontrol distribuição Olá tooendpoints de tráfego do utilizador, que pode incluir serviços em nuvem, Web sites, sites externos e outros perfis do Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="00b5d-107">Traffic Manager allows you toocontrol hello distribution of user traffic tooendpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="00b5d-108">Gestor de tráfego funciona ao aplicar uma política inteligente motor tooDomain Name System (DNS) as consultas para nomes de domínio Olá dos seus recursos de Internet.</span><span class="sxs-lookup"><span data-stu-id="00b5d-108">Traffic Manager works by applying an intelligent policy engine tooDomain Name System (DNS) queries for hello domain names of your Internet resources.</span></span> <span data-ttu-id="00b5d-109">Os serviços em nuvem ou Web sites podem estar em execução em datacenters diferentes em Olá mundo.</span><span class="sxs-lookup"><span data-stu-id="00b5d-109">Your cloud services or websites can be running in different datacenters across hello world.</span></span>

<span data-ttu-id="00b5d-110">Tem de utilizar REST ou o Windows PowerShell tooconfigure pontos finais externos ou perfis do Traffic Manager como pontos finais.</span><span class="sxs-lookup"><span data-stu-id="00b5d-110">You must use either REST or Windows PowerShell tooconfigure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="00b5d-111">Gestor de tráfego utiliza três tráfego de toodistribute de métodos de balanceamento de carga:</span><span class="sxs-lookup"><span data-stu-id="00b5d-111">Traffic Manager uses three load-balancing methods toodistribute traffic:</span></span>

* <span data-ttu-id="00b5d-112">**Ativação pós-falha**: Utilize este método quando pretender toouse um ponto final principal para todo o tráfego, mas fornecem as cópias de segurança no caso de Olá primário fica indisponível.</span><span class="sxs-lookup"><span data-stu-id="00b5d-112">**Failover**:  Use this method when you want toouse a primary endpoint for all traffic, but provide backups in case hello primary becomes unavailable.</span></span>
* <span data-ttu-id="00b5d-113">**Desempenho**: Utilize este método se tiver pontos finais em localizações geográficas diferentes e pretender que os clientes toouse Olá "mais próximo" ponto final em termos de latência mais baixa Olá a pedir.</span><span class="sxs-lookup"><span data-stu-id="00b5d-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients toouse hello "closest" endpoint in terms of hello lowest latency.</span></span>
* <span data-ttu-id="00b5d-114">**O Round Robin:** Utilize este método quando pretender que a carga de toodistribute através de um conjunto de nuvem dos serviços de no Olá mesmo datacenter ou em serviços em nuvem ou Web sites em datacenters diferentes.</span><span class="sxs-lookup"><span data-stu-id="00b5d-114">**Round Robin:**  Use this method when you want toodistribute load across a set of cloud services in hello same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="00b5d-115">Para obter mais informações, consulte [sobre tráfego Manager carga balanceamento métodos](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="00b5d-116">Olá diagrama a seguir mostra um exemplo de Olá método de balanceamento de carga Round Robin para distribuir o tráfego entre os serviços de nuvem diferente.</span><span class="sxs-lookup"><span data-stu-id="00b5d-116">hello following diagram shows an example of hello Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="00b5d-118">processo de básico Olá é seguinte Olá:</span><span class="sxs-lookup"><span data-stu-id="00b5d-118">hello basic process is hello following:</span></span>

1. <span data-ttu-id="00b5d-119">Um cliente de Internet consulta um serviço de web de tooa correspondente do domínio nome.</span><span class="sxs-lookup"><span data-stu-id="00b5d-119">An Internet client queries a domain name corresponding tooa web service.</span></span>
2. <span data-ttu-id="00b5d-120">DNS reencaminha Olá nome consulta pedido tooTraffic Manager.</span><span class="sxs-lookup"><span data-stu-id="00b5d-120">DNS forwards hello name query request tooTraffic Manager.</span></span>
3. <span data-ttu-id="00b5d-121">Gestor de tráfego escolhe o serviço em nuvem seguinte Olá no Olá lista o Round Robin e envia novamente Olá nome DNS.</span><span class="sxs-lookup"><span data-stu-id="00b5d-121">Traffic Manager chooses hello next cloud service in hello Round Robin list and sends back hello DNS name.</span></span> <span data-ttu-id="00b5d-122">servidor DNS do cliente de Internet Olá resolve o endereço IP do Olá nome tooan e envia-a clientes de Internet toohello.</span><span class="sxs-lookup"><span data-stu-id="00b5d-122">hello Internet client's DNS server resolves hello name tooan IP address and sends it toohello Internet client.</span></span>
4. <span data-ttu-id="00b5d-123">cliente de Internet Olá liga ao serviço de nuvem Olá escolhido pelo Gestor de tráfego.</span><span class="sxs-lookup"><span data-stu-id="00b5d-123">hello Internet client connects with hello cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="00b5d-124">Para obter mais informações, consulte [Gestor de tráfego](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="00b5d-125">Azure balanceamento de carga para as máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="00b5d-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="00b5d-126">Olá, máquinas virtuais no mesmo serviço em nuvem ou de rede virtual pode comunicar entre si diretamente com os respetivos endereços IP privados.</span><span class="sxs-lookup"><span data-stu-id="00b5d-126">Virtual machines in hello same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="00b5d-127">Computadores e serviços fora Olá serviço em nuvem ou de rede virtual só pode comunicar com máquinas virtuais de um serviço em nuvem ou a rede virtual com um ponto final configurado.</span><span class="sxs-lookup"><span data-stu-id="00b5d-127">Computers and services outside hello cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="00b5d-128">Um ponto final é um mapeamento de um endereço IP público e o endereço IP privado toothat porta e a porta de uma máquina virtual ou a função da web dentro de um serviço em nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="00b5d-128">An endpoint is a mapping of a public IP address and port toothat private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="00b5d-129">Olá, Azure Load Balancer distribui aleatoriamente um tipo específico de tráfego de entrada entre várias máquinas virtuais ou serviços numa configuração conhecido como um conjunto com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="00b5d-129">hello Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="00b5d-130">Por exemplo, pode propagar-se de carga do tráfego de pedido web Olá em vários servidores web ou funções da web.</span><span class="sxs-lookup"><span data-stu-id="00b5d-130">For example, you can spread hello load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="00b5d-131">Olá diagrama seguinte mostra um ponto final com balanceamento de carga para o tráfego web (sem encriptação) padrão que é partilhado entre três máquinas virtuais para Olá pública e privada a porta TCP 80.</span><span class="sxs-lookup"><span data-stu-id="00b5d-131">hello following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for hello public and private TCP port of 80.</span></span> <span data-ttu-id="00b5d-132">Estas três máquinas virtuais estão num conjunto com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="00b5d-132">These three virtual machines are in a load-balanced set.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="00b5d-134">Para obter mais informações, consulte [Balanceador de carga do Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="00b5d-135">Para obter Olá passos toocreate um conjunto com balanceamento de carga, consulte [configurar um conjunto com balanceamento de carga](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-135">For hello steps toocreate a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="00b5d-136">Azure pode também o balanceamento de carga dentro de um serviço em nuvem ou de rede virtual.</span><span class="sxs-lookup"><span data-stu-id="00b5d-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="00b5d-137">Isto é conhecido como balanceamento de carga interna e pode ser utilizado em Olá seguintes formas:</span><span class="sxs-lookup"><span data-stu-id="00b5d-137">This is known as internal load balancing and can be used in hello following ways:</span></span>

* <span data-ttu-id="00b5d-138">Saldo tooload entre servidores em diferentes escalões de uma aplicação multicamada (por exemplo, entre escalões web e a base de dados).</span><span class="sxs-lookup"><span data-stu-id="00b5d-138">tooload balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="00b5d-139">tooload saldo linha de negócio (LOB) aplicações alojadas no Azure, sem necessidade de software ou hardware de Balanceador de carga adicional.</span><span class="sxs-lookup"><span data-stu-id="00b5d-139">tooload balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="00b5d-140">tooinclude servidores no local no conjunto de Olá de computadores cujo tráfego está com balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="00b5d-140">tooinclude on-premises servers in hello set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="00b5d-141">Semelhante tooAzure balanceamento de carga, balanceamento de carga interna é facilitada ao configurar um conjunto com balanceamento de carga interno.</span><span class="sxs-lookup"><span data-stu-id="00b5d-141">Similar tooAzure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="00b5d-142">Olá diagrama a seguir mostra um exemplo de um endpoint com balanceamento de carga interno para uma aplicação de linha de negócio (LOB) que é partilhada entre três máquinas virtuais numa rede virtual em vários locais.</span><span class="sxs-lookup"><span data-stu-id="00b5d-142">hello following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="00b5d-144">Considerações de Balanceador de carga</span><span class="sxs-lookup"><span data-stu-id="00b5d-144">Load balancer considerations</span></span>
<span data-ttu-id="00b5d-145">Um balanceador de carga está configurado por predefinição tootimeout uma sessão inativa em 4 minutos.</span><span class="sxs-lookup"><span data-stu-id="00b5d-145">A load balancer is configured by default tootimeout an idle session in 4 minutes.</span></span> <span data-ttu-id="00b5d-146">Se a aplicação por trás de um balanceador de carga deixa uma ligação inativa durante mais de 4 minutos e não tem uma configuração de ligação Keep-Alive, ligação Olá será ignorada.</span><span class="sxs-lookup"><span data-stu-id="00b5d-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, hello connection will be dropped.</span></span> <span data-ttu-id="00b5d-147">Pode alterar tooallow de comportamento de Balanceador de carga Olá um [definição de tempo limite de tempo para o Balanceador de carga do Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-147">You can change hello load balancer behavior tooallow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="00b5d-148">Outra consideração é o tipo de Olá de modo de distribuição suportado pelo balanceador de carga do Azure.</span><span class="sxs-lookup"><span data-stu-id="00b5d-148">Other consideration is hello type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="00b5d-149">Pode configurar a afinidade do IP de origem (IP de origem, IP de destino) ou protocolo IP de origem (IP de origem, IP de destino e protocolo).</span><span class="sxs-lookup"><span data-stu-id="00b5d-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="00b5d-150">Veja [modo de distribuição do Balanceador de carga do Azure (afinidade do IP de origem)](../articles/load-balancer/load-balancer-distribution-mode.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="00b5d-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="00b5d-151">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="00b5d-151">Next steps</span></span>
<span data-ttu-id="00b5d-152">Para obter Olá passos toocreate um conjunto com balanceamento de carga, consulte [configurar um conjunto com balanceamento de carga interno](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-152">For hello steps toocreate a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="00b5d-153">Para mais informações sobre o Balanceador de carga, consulte [balanceamento de carga interna](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="00b5d-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>

