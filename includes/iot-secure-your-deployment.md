# <a name="secure-your-iot-deployment"></a><span data-ttu-id="a68ef-101">Proteger a sua implementação de IoT</span><span class="sxs-lookup"><span data-stu-id="a68ef-101">Secure your IoT deployment</span></span>
<span data-ttu-id="a68ef-102">Este artigo fornece patamares Olá de detalhe para proteger a infraestrutura do Olá baseado no Azure IoT Internet das coisas (IoT).</span><span class="sxs-lookup"><span data-stu-id="a68ef-102">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="a68ef-103">Hiperligações-detalhes de nível de tooimplementation para configurar e implementar cada componente.</span><span class="sxs-lookup"><span data-stu-id="a68ef-103">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="a68ef-104">Também fornece comparações e opções de entre vários métodos concorrentes.</span><span class="sxs-lookup"><span data-stu-id="a68ef-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="a68ef-105">Proteger a implementação do Azure IoT Olá pode ser dividido em Olá seguintes três áreas de segurança:</span><span class="sxs-lookup"><span data-stu-id="a68ef-105">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="a68ef-106">**Segurança de dispositivos**: Proteger dispositivos de IoT Olá enquanto está implementada numa Olá universal.</span><span class="sxs-lookup"><span data-stu-id="a68ef-106">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="a68ef-107">**Segurança de ligação**: garantir que todos os dados transmitidos entre dispositivos de IoT Olá e IoT Hub é confidencial e prova de adulteração.</span><span class="sxs-lookup"><span data-stu-id="a68ef-107">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="a68ef-108">**Segurança de nuvem**: a fornecer um meio toosecure os dados enquanto se desloca pelas e são armazenado na nuvem de Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-108">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Três áreas de segurança][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="a68ef-110">Proteger o aprovisionamento de dispositivos e autenticação</span><span class="sxs-lookup"><span data-stu-id="a68ef-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="a68ef-111">Olá, Azure IoT Suite protege os dispositivos de IoT por Olá seguintes dois métodos:</span><span class="sxs-lookup"><span data-stu-id="a68ef-111">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="a68ef-112">Ao fornecer uma chave de identidade exclusiva (tokens de segurança) para cada dispositivo, o que pode ser utilizado por Olá dispositivo toocommunicate com Olá IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a68ef-112">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="a68ef-113">Ao utilizar um dispositivo [certificado x. 509] [ lnk-x509] e a chave privada como um meio tooauthenticate Olá dispositivo toohello IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a68ef-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="a68ef-114">Este método de autenticação garante que Olá chave privada no dispositivo Olá não é conhecido fora Olá dispositivo em qualquer altura, fornecer um nível mais elevado de segurança.</span><span class="sxs-lookup"><span data-stu-id="a68ef-114">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="a68ef-115">método de token de segurança de Olá fornece autenticação para cada chamada efetuada pelo Olá dispositivo tooIoT Hub ao associar a chamada de tooeach chave simétrica Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-115">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="a68ef-116">Autenticação baseada em x. 509 permite a autenticação de um dispositivo IoT na camada física de Olá como parte do estabelecimento de ligação do Olá TLS.</span><span class="sxs-lookup"><span data-stu-id="a68ef-116">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="a68ef-117">método baseado em tokens de segurança de Olá pode ser utilizado sem a autenticação de x. 509 Olá, que é um padrão menos seguro.</span><span class="sxs-lookup"><span data-stu-id="a68ef-117">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="a68ef-118">Olá escolha entre os métodos de Olá dois é principalmente ditada pelo Olá como protegem a autenticação do dispositivo precisa de toobe e disponibilidade de armazenamento segura no dispositivo Olá (toostore Olá chave privada com segurança).</span><span class="sxs-lookup"><span data-stu-id="a68ef-118">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="a68ef-119">Tokens de segurança do Hub IoT</span><span class="sxs-lookup"><span data-stu-id="a68ef-119">IoT Hub security tokens</span></span>
<span data-ttu-id="a68ef-120">IoT Hub utiliza segurança tokens tooauthenticate dispositivos e serviços tooavoid enviar chaves na rede de Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-120">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="a68ef-121">Além disso, tokens de segurança estão limitados a validade de tempo e o âmbito.</span><span class="sxs-lookup"><span data-stu-id="a68ef-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="a68ef-122">Os SDKs IoT do Azure gerar automaticamente tokens sem necessidade de nenhuma configuração especial.</span><span class="sxs-lookup"><span data-stu-id="a68ef-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="a68ef-123">No entanto, alguns cenários, requerem Olá utilizador toogenerate e utilizam tokens de segurança diretamente.</span><span class="sxs-lookup"><span data-stu-id="a68ef-123">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="a68ef-124">Estes incluem a utilização direta do Olá de analisa MQTT, AMQP ou HTTP hello, ou a implementação de Olá padrão do serviço de tokens de Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-124">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="a68ef-125">Obter mais detalhes sobre a estrutura de Olá do token de segurança de Olá e respetiva utilização podem ser encontrados na Olá seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="a68ef-125">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="a68ef-126">[Estrutura de token de segurança][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="a68ef-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="a68ef-127">[Utilização de tokens SAS como um dispositivo][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="a68ef-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="a68ef-128">Cada IoT Hub tem um [registo de identidade] [ lnk-identity-registry] que podem ser utilizados toocreate por dispositivo recursos no serviço de Olá, tal como uma fila que contém mensagens da nuvem para o dispositivo em trânsito e tooallow acesso toohello pontos finais de orientado para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="a68ef-129">Olá registo de identidade do IoT Hub fornece armazenamento seguro de identidades de dispositivo e as chaves de segurança para uma solução.</span><span class="sxs-lookup"><span data-stu-id="a68ef-129">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="a68ef-130">Individuais ou grupos de identidades de dispositivo podem ser adicionados tooan permitem lista ou uma lista de bloqueios, ativar o controlo total sobre o acesso ao dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-130">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="a68ef-131">Olá artigos que se seguem fornecem mais detalhes na estrutura de Olá de registo de identidade Olá e operações suportadas.</span><span class="sxs-lookup"><span data-stu-id="a68ef-131">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="a68ef-132">[IoT Hub suporta os protocolos, como MQTT, AMQP e HTTP][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="a68ef-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="a68ef-133">Cada um destes protocolos de forma diferente, utilize tokens de segurança de tooIoT de dispositivo Olá IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="a68ef-133">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="a68ef-134">AMQP: SASL simples e baseada em afirmações AMQP segurança ({policyName}@sas.root. { iothubName} no caso de Olá dos tokens de nível do hub IoT; {"deviceId"} em caso de tokens no âmbito do dispositivo).</span><span class="sxs-lookup"><span data-stu-id="a68ef-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="a68ef-135">MQTT: Ligar utiliza pacotes {"deviceId"} como Olá {ClientId}, {IoThubhostname} / {"deviceId"} no Olá **Username** token de campo e uma SAS no Olá **palavra-passe** campo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-135">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="a68ef-136">HTTP: Token válido está no cabeçalho de pedido de autorização de Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-136">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="a68ef-137">Registo de identidade do IoT Hub pode ser as credenciais de segurança do tooconfigure utilizados por dispositivo e controlo de acesso.</span><span class="sxs-lookup"><span data-stu-id="a68ef-137">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="a68ef-138">No entanto, se uma solução de IoT que já tem um investimento significativo num [esquema de registo e/ou a autenticação de identidade do dispositivo personalizada][lnk-custom-auth], podem ser integrados para uma infraestrutura existente com o IoT Hub através da criação de um serviço de tokens.</span><span class="sxs-lookup"><span data-stu-id="a68ef-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="a68ef-139">Autenticação de dispositivos baseada em certificado x. 509</span><span class="sxs-lookup"><span data-stu-id="a68ef-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="a68ef-140">Olá, utilização de um [certificado baseado nos dispositivos de x. 509] [ lnk-use-x509] e respetivos associado pública e privada par de chaves permite a autenticação adicional na camada física Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-140">hello use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="a68ef-141">chave privada Olá é armazenado em segurança no dispositivo Olá, não sendo detetável fora Olá dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-141">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="a68ef-142">certificado x. 509 de Olá contém informações sobre o dispositivo de Olá, tal como ID de dispositivo e outros detalhes organizacionais.</span><span class="sxs-lookup"><span data-stu-id="a68ef-142">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="a68ef-143">Uma assinatura de certificado de Olá é gerada utilizando a chave privada Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-143">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="a68ef-144">Fluxo de aprovisionamento de dispositivos de alto nível:</span><span class="sxs-lookup"><span data-stu-id="a68ef-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="a68ef-145">Associar um dispositivo físico do identificador tooa – identidade de dispositivo e/ou os x. 509 do certificado dispositivo toohello associados durante o dispositivo de fabrico ou commissioning.</span><span class="sxs-lookup"><span data-stu-id="a68ef-145">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="a68ef-146">Crie uma entrada correspondente de identidade do IoT Hub – identidade de dispositivo e informações de dispositivo associados no Olá registo de identidade do IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a68ef-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="a68ef-147">Armazene de maneira segura o thumbprint do certificado x. 509 no registo de identidade do IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a68ef-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="a68ef-148">Certificado de raiz no dispositivo</span><span class="sxs-lookup"><span data-stu-id="a68ef-148">Root certificate on device</span></span>
<span data-ttu-id="a68ef-149">Ao estabelecer uma ligação de TLS segura com o IoT Hub, dispositivos de IoT Olá autentica o IoT Hub com um certificado de raiz que faz parte do dispositivo Olá SDK.</span><span class="sxs-lookup"><span data-stu-id="a68ef-149">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="a68ef-150">Para o cliente de Olá C SDK certificado Olá está localizado na pasta Olá "\\c\\certificados" na raiz de Olá do repositório de Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-150">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="a68ef-151">Embora estes certificados de raiz longa duração, ainda pode expirarem ou ser revogados.</span><span class="sxs-lookup"><span data-stu-id="a68ef-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="a68ef-152">Se não existir nenhuma forma de atualizar o certificado de Olá no dispositivo Olá, hello dispositivo não conseguir ligar toosubsequently toohello IoT Hub (ou qualquer outro serviço de nuvem).</span><span class="sxs-lookup"><span data-stu-id="a68ef-152">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="a68ef-153">Ter um certificado de raiz do meio tooupdate Olá depois de dispositivos de IoT Olá é implementado será eficazmente mitigar este risco.</span><span class="sxs-lookup"><span data-stu-id="a68ef-153">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="a68ef-154">Proteger a ligação de Olá</span><span class="sxs-lookup"><span data-stu-id="a68ef-154">Securing hello connection</span></span>
<span data-ttu-id="a68ef-155">Ligação à Internet entre dispositivos de IoT Olá e IoT Hub é protegida através de Olá Transport Layer Security (TLS) padrão.</span><span class="sxs-lookup"><span data-stu-id="a68ef-155">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="a68ef-156">Azure IoT suporta [TLS 1.2][lnk-tls12], TLS 1.1 e TLS 1.0, esta ordem.</span><span class="sxs-lookup"><span data-stu-id="a68ef-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="a68ef-157">Suporte para TLS 1.0 é fornecido para apenas a compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="a68ef-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="a68ef-158">É recomendado toouse TLS 1.2, uma vez que fornece maior segurança Olá.</span><span class="sxs-lookup"><span data-stu-id="a68ef-158">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="a68ef-159">Azure IoT Suite suporta Olá os seguintes conjuntos de cifras, por esta ordem.</span><span class="sxs-lookup"><span data-stu-id="a68ef-159">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="a68ef-160">Conjunto de cifras</span><span class="sxs-lookup"><span data-stu-id="a68ef-160">Cipher Suite</span></span> | <span data-ttu-id="a68ef-161">comprimento</span><span class="sxs-lookup"><span data-stu-id="a68ef-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="a68ef-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="a68ef-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="a68ef-163">FS 7680 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="a68ef-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="a68ef-164">256</span><span class="sxs-lookup"><span data-stu-id="a68ef-164">256</span></span> |
| <span data-ttu-id="a68ef-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="a68ef-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="a68ef-166">FS 3072 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="a68ef-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="a68ef-167">128</span><span class="sxs-lookup"><span data-stu-id="a68ef-167">128</span></span> |
| <span data-ttu-id="a68ef-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="a68ef-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="a68ef-169">FS 7680 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="a68ef-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="a68ef-170">256</span><span class="sxs-lookup"><span data-stu-id="a68ef-170">256</span></span> |
| <span data-ttu-id="a68ef-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="a68ef-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="a68ef-172">FS 3072 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="a68ef-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="a68ef-173">128</span><span class="sxs-lookup"><span data-stu-id="a68ef-173">128</span></span> |
| <span data-ttu-id="a68ef-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="a68ef-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="a68ef-175">256</span><span class="sxs-lookup"><span data-stu-id="a68ef-175">256</span></span> |
| <span data-ttu-id="a68ef-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="a68ef-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="a68ef-177">128</span><span class="sxs-lookup"><span data-stu-id="a68ef-177">128</span></span> |
| <span data-ttu-id="a68ef-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="a68ef-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="a68ef-179">256</span><span class="sxs-lookup"><span data-stu-id="a68ef-179">256</span></span> |
| <span data-ttu-id="a68ef-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="a68ef-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="a68ef-181">128</span><span class="sxs-lookup"><span data-stu-id="a68ef-181">128</span></span> |
| <span data-ttu-id="a68ef-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="a68ef-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="a68ef-183">256</span><span class="sxs-lookup"><span data-stu-id="a68ef-183">256</span></span> |
| <span data-ttu-id="a68ef-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="a68ef-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="a68ef-185">128</span><span class="sxs-lookup"><span data-stu-id="a68ef-185">128</span></span> |
| <span data-ttu-id="a68ef-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="a68ef-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="a68ef-187">112</span><span class="sxs-lookup"><span data-stu-id="a68ef-187">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="a68ef-188">Proteger a nuvem de Olá</span><span class="sxs-lookup"><span data-stu-id="a68ef-188">Securing hello cloud</span></span>
<span data-ttu-id="a68ef-189">IoT Hub do Azure permite a definição de [políticas de controlo de acesso] [ lnk-protocols] para cada chave de segurança.</span><span class="sxs-lookup"><span data-stu-id="a68ef-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="a68ef-190">Utiliza Olá seguinte conjunto de permissões toogrant acesso tooeach de pontos finais do IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a68ef-190">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="a68ef-191">Permissões limitam Olá acesso tooan que IOT Hub com base na funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="a68ef-191">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="a68ef-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="a68ef-192">**RegistryRead**.</span></span> <span data-ttu-id="a68ef-193">Registo de identidade do concede acesso de leitura toohello.</span><span class="sxs-lookup"><span data-stu-id="a68ef-193">Grants read access toohello identity registry.</span></span> <span data-ttu-id="a68ef-194">Para obter mais informações, consulte [registo de identidade][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="a68ef-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="a68ef-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="a68ef-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="a68ef-196">Concede acesso de escrita e leitura toohello registo de identidade.</span><span class="sxs-lookup"><span data-stu-id="a68ef-196">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="a68ef-197">Para obter mais informações, consulte [registo de identidade][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="a68ef-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="a68ef-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="a68ef-198">**ServiceConnect**.</span></span> <span data-ttu-id="a68ef-199">Concede acesso toocloud orientado para o serviço comunicação e os pontos finais de monitorização.</span><span class="sxs-lookup"><span data-stu-id="a68ef-199">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="a68ef-200">Por exemplo, atribui acesso nuvem tooback-end de permissão mensagens do dispositivo para nuvem de tooreceive de serviços, enviar mensagens da nuvem para o dispositivo e obter Olá correspondente entrega em que as confirmações.</span><span class="sxs-lookup"><span data-stu-id="a68ef-200">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="a68ef-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="a68ef-201">**DeviceConnect**.</span></span> <span data-ttu-id="a68ef-202">Concede acesso pontos finais de toodevice orientada.</span><span class="sxs-lookup"><span data-stu-id="a68ef-202">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="a68ef-203">Por exemplo, concede permissão de mensagens do dispositivo para a nuvem de toosend e receber mensagens da nuvem para o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-203">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="a68ef-204">Esta permissão é utilizado pelos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="a68ef-204">This permission is used by devices.</span></span>

<span data-ttu-id="a68ef-205">Existem duas formas tooobtain **DeviceConnect** permissões com o IoT Hub com [tokens de segurança][lnk-sas-tokens]: utilizar uma chave de identidade de dispositivo, ou uma chave de acesso partilhado.</span><span class="sxs-lookup"><span data-stu-id="a68ef-205">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="a68ef-206">Além disso, é importante toonote que todas as funcionalidades acessível a partir de dispositivos é exposta pela estrutura em pontos finais com o prefixo `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="a68ef-206">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="a68ef-207">[Componentes do serviço só é possível gerar tokens de segurança] [ lnk-service-tokens] utilizar partilhado conceder as permissões adequadas Olá as políticas de acesso.</span><span class="sxs-lookup"><span data-stu-id="a68ef-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="a68ef-208">IoT Hub do Azure e outros serviços que podem ser parte da solução de Olá permitem a gestão de utilizadores utilizando Olá do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a68ef-208">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="a68ef-209">Dados ingeridos pelo IoT Hub do Azure podem ser utilizados por uma variedade de serviços como o Azure Stream Analytics e armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="a68ef-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="a68ef-210">Estes serviços permitem o acesso de gestão.</span><span class="sxs-lookup"><span data-stu-id="a68ef-210">These services allow management access.</span></span> <span data-ttu-id="a68ef-211">Leia mais sobre estes serviços e as opções disponíveis abaixo:</span><span class="sxs-lookup"><span data-stu-id="a68ef-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="a68ef-212">[O Azure DocumentDB][lnk-docdb]: um serviço de base de dados dimensionável e totalmente indexado para dados semiestruturados que gere os metadados para dispositivos Olá aprovisionar, como atributos, configuração e propriedades de segurança.</span><span class="sxs-lookup"><span data-stu-id="a68ef-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="a68ef-213">O DocumentDB oferece processamento elevado desempenho e débito elevado, o esquema agnóstico a indexação de dados e uma interface de consulta avançada do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a68ef-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="a68ef-214">[O Azure Stream Analytics][lnk-asa]: fluxo em tempo real de processamento na nuvem de Olá que permite toorapidly desenvolver e implementar uma análise de baixo custo solução toouncover em tempo real das informações dos dispositivos, sensores, infraestrutura e aplicações.</span><span class="sxs-lookup"><span data-stu-id="a68ef-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="a68ef-215">dados Olá deste serviço completamente gerido podem dimensionar o volume de tooany um débito elevado, latência baixa e resiliência.</span><span class="sxs-lookup"><span data-stu-id="a68ef-215">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="a68ef-216">[Serviços de aplicações do Azure][lnk-appservices]: uma cloud platform toobuild poderosas web apps e móveis que se ligam toodata em qualquer lugar; na nuvem de Olá ou no local.</span><span class="sxs-lookup"><span data-stu-id="a68ef-216">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="a68ef-217">Crie aplicações móveis cativantes para iOS, Android e Windows.</span><span class="sxs-lookup"><span data-stu-id="a68ef-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="a68ef-218">Integre com o seu Software como serviço (SaaS) e o enterprise aplicações com toodozens out of box conectividade dos serviços baseados na nuvem e de aplicações da empresa.</span><span class="sxs-lookup"><span data-stu-id="a68ef-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="a68ef-219">Código no seu idioma favorito e IDE (.NET, Node.js, PHP, Python ou Java) toobuild as web apps e APIs mais rápidas do que nunca.</span><span class="sxs-lookup"><span data-stu-id="a68ef-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="a68ef-220">[As Logic Apps][lnk-logicapps]: funcionalidade de Logic Apps Olá do App Service do Azure ajuda a integrar os seus sistemas de linha de negócio existentes do IoT solução tooyour e automatizar os processos de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="a68ef-220">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="a68ef-221">As Logic Apps permite aos programadores toodesign os fluxos de trabalho que começam com acionadores e, em seguida, executam uma série de passos — regras e ações que utilizar conectores poderosas toointegrate com os processos empresariais.</span><span class="sxs-lookup"><span data-stu-id="a68ef-221">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="a68ef-222">As Logic Apps oferece ecossistema de grande tooa out of box conectividade do SaaS, baseado na nuvem e aplicações no local.</span><span class="sxs-lookup"><span data-stu-id="a68ef-222">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="a68ef-223">[Armazenamento de Blobs do Azure][lnk-blob]: armazenamento de nuvem fiável e económica para dados de Olá que os dispositivos as enviam toohello nuvem.</span><span class="sxs-lookup"><span data-stu-id="a68ef-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="a68ef-224">Conclusão</span><span class="sxs-lookup"><span data-stu-id="a68ef-224">Conclusion</span></span>
<span data-ttu-id="a68ef-225">Este artigo fornece detalhes de nível para estruturar e implementar uma infraestrutura de IoT utilizando o Azure IoT de descrição geral da implementação.</span><span class="sxs-lookup"><span data-stu-id="a68ef-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="a68ef-226">Configurar cada toobe componente segura é infraestrutura geral do IoT Olá de chave proteger.</span><span class="sxs-lookup"><span data-stu-id="a68ef-226">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="a68ef-227">Opções de design de Olá disponíveis no Azure IoT fornecem algum nível de flexibilidade e escolha; No entanto, cada escolha pode ter implicações de segurança.</span><span class="sxs-lookup"><span data-stu-id="a68ef-227">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="a68ef-228">Recomenda-se que cada uma destas opções ser avaliadas através de uma avaliação de risco/custo.</span><span class="sxs-lookup"><span data-stu-id="a68ef-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/
