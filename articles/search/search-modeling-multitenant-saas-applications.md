---
title: aaaModeling arquitetura "multitenancy" na Azure Search | Microsoft Docs
description: "Saiba mais sobre os padrões de conceção comuns para aplicações de SaaS multi-inquilino durante a utilização da Azure Search."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="84df4-103">Padrões para aplicações de SaaS multi-inquilino e da Azure Search de conceção</span><span class="sxs-lookup"><span data-stu-id="84df4-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="84df4-104">Uma aplicação multi-inquilino é aquele que fornece Olá mesmo o número de tooany de serviços e as capacidades de inquilinos que não é possível ver ou partilhar dados Olá de qualquer outro inquilino.</span><span class="sxs-lookup"><span data-stu-id="84df4-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="84df4-105">Este documento descreve as estratégias de isolamento de inquilino para multi-inquilino aplicações criadas com a Azure Search.</span><span class="sxs-lookup"><span data-stu-id="84df4-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="84df4-106">Conceitos de pesquisa do Azure</span><span class="sxs-lookup"><span data-stu-id="84df4-106">Azure Search concepts</span></span>
<span data-ttu-id="84df4-107">Como uma solução de pesquisa-como-um-serviço da Azure Search permite pesquisa avançada de tooadd programadores experiências tooapplications sem qualquer infraestrutura de gestão ou se tornar um especialista na pesquisa.</span><span class="sxs-lookup"><span data-stu-id="84df4-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="84df4-108">Os dados são carregados toohello serviço e depois armazenadas na nuvem de Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="84df4-109">Utilizar toohello pedidos simples API da Azure Search, dados Olá podem, em seguida, ser modificados e pesquisados.</span><span class="sxs-lookup"><span data-stu-id="84df4-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="84df4-110">Pode encontrar uma descrição geral do serviço de Olá [neste artigo](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="84df4-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="84df4-111">Antes de debater padrões de conceção, é importante toounderstand alguns conceitos na Azure Search.</span><span class="sxs-lookup"><span data-stu-id="84df4-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="84df4-112">Serviços de pesquisa, índices, campos e documentos</span><span class="sxs-lookup"><span data-stu-id="84df4-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="84df4-113">Ao utilizar a pesquisa do Azure, uma subscreve tooa *serviço de pesquisa*.</span><span class="sxs-lookup"><span data-stu-id="84df4-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="84df4-114">Como os dados são carregado tooAzure pesquisa, são armazenados num *índice* no âmbito do serviço de pesquisa de Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="84df4-115">Pode ser um número de índices dentro de um único serviço.</span><span class="sxs-lookup"><span data-stu-id="84df4-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="84df4-116">toouse Olá familiar os conceitos das bases de dados, o serviço de pesquisa de Olá pode ser likened tooa base de dados enquanto índices Olá dentro de um serviço podem ser tootables likened dentro de uma base de dados.</span><span class="sxs-lookup"><span data-stu-id="84df4-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="84df4-117">Cada índice dentro de um serviço de pesquisa tem o seu próprio esquema, que é definida por um número de personalizável *campos*.</span><span class="sxs-lookup"><span data-stu-id="84df4-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="84df4-118">Dados são adicionados tooan o índice da Azure Search no formato Olá indivíduo *documentos*.</span><span class="sxs-lookup"><span data-stu-id="84df4-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="84df4-119">Cada documento tem de ser índice específico tooa carregado e deve encaixar-se do esquema que indexar.</span><span class="sxs-lookup"><span data-stu-id="84df4-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="84df4-120">Quando procurar dados de utilização da Azure Search, consultas de pesquisa em texto completo Olá são emitidas em relação a um índice específico.</span><span class="sxs-lookup"><span data-stu-id="84df4-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="84df4-121">toocompare toothose estes conceitos de uma base de dados, campos podem ser toocolumns likened numa tabela e documentos podem ser likened toorows.</span><span class="sxs-lookup"><span data-stu-id="84df4-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="84df4-122">Escalabilidade</span><span class="sxs-lookup"><span data-stu-id="84df4-122">Scalability</span></span>
<span data-ttu-id="84df4-123">Qualquer serviço da Azure Search no Olá padrão [escalão de preço](https://azure.microsoft.com/pricing/details/search/) pode dimensionar de duas dimensões: armazenamento e disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="84df4-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="84df4-124">*As partições* podem ser adicionados armazenamento de Olá tooincrease de um serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="84df4-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="84df4-125">*Réplicas* podem ser adicionados tooa serviço tooincrease Olá débito pedidos que pode processar um serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="84df4-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="84df4-126">Adicionar e remover as partições e réplicas permitirá capacidade Olá Olá toogrow de serviço de pesquisa com a quantidade de Olá de dados e o tráfego de exigências de aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="84df4-127">Na ordem para um tooachieve do serviço de pesquisa, uma leitura [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), necessita de duas réplicas.</span><span class="sxs-lookup"><span data-stu-id="84df4-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="84df4-128">Na ordem para um serviço tooachieve uma leitura e escrita [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), necessita de três réplicas.</span><span class="sxs-lookup"><span data-stu-id="84df4-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="84df4-129">Limites de serviço e o índice da Azure Search</span><span class="sxs-lookup"><span data-stu-id="84df4-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="84df4-130">Existem algumas diferentes [escalões de preço](https://azure.microsoft.com/pricing/details/search/) na Azure Search, cada um dos escalões de Olá tem diferentes [limites e quotas](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="84df4-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="84df4-131">Alguns destes limites tenham Olá nível de serviço, alguns são ao nível de índice Olá e alguns são ao nível de partição Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="84df4-132">Básica</span><span class="sxs-lookup"><span data-stu-id="84df4-132">Basic</span></span> | <span data-ttu-id="84df4-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="84df4-133">Standard1</span></span> | <span data-ttu-id="84df4-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="84df4-134">Standard2</span></span> | <span data-ttu-id="84df4-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="84df4-135">Standard3</span></span> | <span data-ttu-id="84df4-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="84df4-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="84df4-137">Réplicas máximas por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="84df4-138">3</span><span class="sxs-lookup"><span data-stu-id="84df4-138">3</span></span> |<span data-ttu-id="84df4-139">12</span><span class="sxs-lookup"><span data-stu-id="84df4-139">12</span></span> |<span data-ttu-id="84df4-140">12</span><span class="sxs-lookup"><span data-stu-id="84df4-140">12</span></span> |<span data-ttu-id="84df4-141">12</span><span class="sxs-lookup"><span data-stu-id="84df4-141">12</span></span> |<span data-ttu-id="84df4-142">12</span><span class="sxs-lookup"><span data-stu-id="84df4-142">12</span></span> |
| <span data-ttu-id="84df4-143">Partições máximas por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="84df4-144">1</span><span class="sxs-lookup"><span data-stu-id="84df4-144">1</span></span> |<span data-ttu-id="84df4-145">12</span><span class="sxs-lookup"><span data-stu-id="84df4-145">12</span></span> |<span data-ttu-id="84df4-146">12</span><span class="sxs-lookup"><span data-stu-id="84df4-146">12</span></span> |<span data-ttu-id="84df4-147">12</span><span class="sxs-lookup"><span data-stu-id="84df4-147">12</span></span> |<span data-ttu-id="84df4-148">1</span><span class="sxs-lookup"><span data-stu-id="84df4-148">1</span></span> |
| <span data-ttu-id="84df4-149">Unidades de pesquisa máximo (réplicas * partições) por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="84df4-150">3</span><span class="sxs-lookup"><span data-stu-id="84df4-150">3</span></span> |<span data-ttu-id="84df4-151">36</span><span class="sxs-lookup"><span data-stu-id="84df4-151">36</span></span> |<span data-ttu-id="84df4-152">36</span><span class="sxs-lookup"><span data-stu-id="84df4-152">36</span></span> |<span data-ttu-id="84df4-153">36</span><span class="sxs-lookup"><span data-stu-id="84df4-153">36</span></span> |<span data-ttu-id="84df4-154">36 (máximas 3 partições)</span><span class="sxs-lookup"><span data-stu-id="84df4-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="84df4-155">Documentos máximos por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-155">Maximum Documents per Service</span></span> |<span data-ttu-id="84df4-156">1 milhão</span><span class="sxs-lookup"><span data-stu-id="84df4-156">1 million</span></span> |<span data-ttu-id="84df4-157">180 milhões</span><span class="sxs-lookup"><span data-stu-id="84df4-157">180 million</span></span> |<span data-ttu-id="84df4-158">milhões de 720</span><span class="sxs-lookup"><span data-stu-id="84df4-158">720 million</span></span> |<span data-ttu-id="84df4-159">1.4 milhões</span><span class="sxs-lookup"><span data-stu-id="84df4-159">1.4 billion</span></span> |<span data-ttu-id="84df4-160">milhões de 600</span><span class="sxs-lookup"><span data-stu-id="84df4-160">600 million</span></span> |
| <span data-ttu-id="84df4-161">Armazenamento máximo por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-161">Maximum Storage per Service</span></span> |<span data-ttu-id="84df4-162">2GB</span><span class="sxs-lookup"><span data-stu-id="84df4-162">2 GB</span></span> |<span data-ttu-id="84df4-163">300 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-163">300 GB</span></span> |<span data-ttu-id="84df4-164">1.2 TB</span><span class="sxs-lookup"><span data-stu-id="84df4-164">1.2 TB</span></span> |<span data-ttu-id="84df4-165">2.4 TB</span><span class="sxs-lookup"><span data-stu-id="84df4-165">2.4 TB</span></span> |<span data-ttu-id="84df4-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-166">600 GB</span></span> |
| <span data-ttu-id="84df4-167">Documentos máximos por partição</span><span class="sxs-lookup"><span data-stu-id="84df4-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="84df4-168">1 milhão</span><span class="sxs-lookup"><span data-stu-id="84df4-168">1 million</span></span> |<span data-ttu-id="84df4-169">milhões de 15</span><span class="sxs-lookup"><span data-stu-id="84df4-169">15 million</span></span> |<span data-ttu-id="84df4-170">milhões de 60</span><span class="sxs-lookup"><span data-stu-id="84df4-170">60 million</span></span> |<span data-ttu-id="84df4-171">milhões de 120</span><span class="sxs-lookup"><span data-stu-id="84df4-171">120 million</span></span> |<span data-ttu-id="84df4-172">milhões de 200</span><span class="sxs-lookup"><span data-stu-id="84df4-172">200 million</span></span> |
| <span data-ttu-id="84df4-173">Armazenamento máximo por partição</span><span class="sxs-lookup"><span data-stu-id="84df4-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="84df4-174">2GB</span><span class="sxs-lookup"><span data-stu-id="84df4-174">2 GB</span></span> |<span data-ttu-id="84df4-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-175">25 GB</span></span> |<span data-ttu-id="84df4-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-176">100 GB</span></span> |<span data-ttu-id="84df4-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-177">200 GB</span></span> |<span data-ttu-id="84df4-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="84df4-178">200 GB</span></span> |
| <span data-ttu-id="84df4-179">Índices máximos por serviço</span><span class="sxs-lookup"><span data-stu-id="84df4-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="84df4-180">5</span><span class="sxs-lookup"><span data-stu-id="84df4-180">5</span></span> |<span data-ttu-id="84df4-181">50</span><span class="sxs-lookup"><span data-stu-id="84df4-181">50</span></span> |<span data-ttu-id="84df4-182">200</span><span class="sxs-lookup"><span data-stu-id="84df4-182">200</span></span> |<span data-ttu-id="84df4-183">200</span><span class="sxs-lookup"><span data-stu-id="84df4-183">200</span></span> |<span data-ttu-id="84df4-184">3000 (máximo 1000 índices/partição)</span><span class="sxs-lookup"><span data-stu-id="84df4-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="84df4-185">S3 Alta densidade '</span><span class="sxs-lookup"><span data-stu-id="84df4-185">S3 High Density'</span></span>
<span data-ttu-id="84df4-186">No escalão de preço S3 da Azure Search, há uma opção para o modo de alta densidade (HD) Olá concebido especificamente para cenários de multi-inquilino.</span><span class="sxs-lookup"><span data-stu-id="84df4-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="84df4-187">Em muitos casos, é necessário toosupport um grande número de inquilinos mais pequenos em vantagens de Olá de tooachieve um único serviço de eficiência de simplicidade e o custo.</span><span class="sxs-lookup"><span data-stu-id="84df4-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="84df4-188">S3 HD permite Olá vários índices pequeno toobe sob gestão Olá de um serviço de procura única criados pelo assiste comerciais Olá capacidade tooscale enviados os índices com partições para Olá capacidade toohost mais índices num único serviço.</span><span class="sxs-lookup"><span data-stu-id="84df4-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="84df4-189">Concretely, um serviço de S3 ter entre 1 e 200 índices que em conjunto, podem alojar cópias de segurança billion documentos too1.4.</span><span class="sxs-lookup"><span data-stu-id="84df4-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="84df4-190">Um HD S3 no Olá por outro lado permitiria índices individuais tooonly aceda dos milhões documentos too1, mas pode processar dos índices too1000 por partição (cópia de segurança too3000 por serviço) com uma contagem de total de documento de milhões de 200 por partição (cópia de segurança too600 milhões por serviço).</span><span class="sxs-lookup"><span data-stu-id="84df4-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="84df4-191">Considerações para aplicações multi-inquilino</span><span class="sxs-lookup"><span data-stu-id="84df4-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="84df4-192">Aplicações multi-inquilino tem distribuir eficazmente recursos entre inquilinos Olá preservando algum nível de privacidade entre Olá vários inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="84df4-193">Existem algumas considerações ao estruturar a arquitetura de Olá para uma aplicação desse tipo:</span><span class="sxs-lookup"><span data-stu-id="84df4-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="84df4-194">*Isolamento de inquilinos:* tootake medidas adequadas tooensure que nenhum inquilinos tem não autorizado ou indesejável toohello de aceder aos dados de outros inquilinos tem dos programadores de aplicações.</span><span class="sxs-lookup"><span data-stu-id="84df4-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="84df4-195">Para além da perspetiva de Olá de privacidade dos dados, estratégias de isolamento de inquilino necessitam de uma gestão eficaz da proteção de vizinhos inúteis e de recursos partilhados.</span><span class="sxs-lookup"><span data-stu-id="84df4-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="84df4-196">*Custo de recursos de nuvem:* como com qualquer outra aplicação, as soluções de software têm de permanecer custo competitiva como um componente de uma aplicação multi-inquilino.</span><span class="sxs-lookup"><span data-stu-id="84df4-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="84df4-197">*Facilidade de operações:* quando desenvolver uma arquitetura multi-inquilino, Olá impacto nas operações da aplicação Olá e complexidade é uma consideração importante.</span><span class="sxs-lookup"><span data-stu-id="84df4-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="84df4-198">A pesquisa do Azure tem um [SLA de 99,9%](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="84df4-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="84df4-199">*Requisitos de espaço global:* aplicações multi-inquilino, poderão ter tooeffectively servirem inquilinos que estão distribuídos globo Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="84df4-200">*Escalabilidade:* os programadores de aplicações têm de tooconsider como de reconciliar entre manter um nível de complexidade de aplicação suficientemente baixa e estruturar Olá tooscale de aplicação com o número de inquilinos e Olá tamanho dos dados dos inquilinos e carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84df4-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="84df4-201">A Azure Search oferece limites alguns que podem ser dados dos inquilinos tooisolate utilizados e a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84df4-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="84df4-202">Modelação de arquitetura "multitenancy" com a pesquisa do Azure</span><span class="sxs-lookup"><span data-stu-id="84df4-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="84df4-203">No caso de Olá de um cenário de multi-inquilino, o programador da aplicação Olá consome um ou mais serviços de pesquisa e dividir os seus inquilinos entre serviços, índices ou ambos.</span><span class="sxs-lookup"><span data-stu-id="84df4-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="84df4-204">A pesquisa do Azure tem alguns padrões comuns quando um cenário de multi-inquilino de modelação:</span><span class="sxs-lookup"><span data-stu-id="84df4-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="84df4-205">*Índice por inquilino:* cada inquilino tem a suas próprias índice dentro de um serviço de pesquisa que é partilhado com outros inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="84df4-206">*Serviço por inquilino:* cada inquilino tem o seu próprio serviço de pesquisa do Azure dedicada, oferta nível mais elevado de separação de dados e a carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="84df4-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="84df4-207">*A combinação de ambos:* inquilinos maiores e mais-Active Directory estão atribuídos serviços dedicados enquanto inquilinos mais pequenos são atribuídos índices individuais dentro de serviços partilhados.</span><span class="sxs-lookup"><span data-stu-id="84df4-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="84df4-208">1. Índice por inquilino</span><span class="sxs-lookup"><span data-stu-id="84df4-208">1. Index per tenant</span></span>
![Um portrayal do modelo de índice por inquilino Olá](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="84df4-210">Um modelo de índice por inquilino, vários inquilinos ocupam um único serviço de pesquisa do Azure onde cada inquilino tem os seus próprios índice.</span><span class="sxs-lookup"><span data-stu-id="84df4-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="84df4-211">Os inquilinos alcançarem isolamento de dados, uma vez que todos os pedidos de pesquisa e operações de documento são emitidas um nível de índice da Azure Search.</span><span class="sxs-lookup"><span data-stu-id="84df4-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="84df4-212">Na camada da aplicação Olá, há deteção necessidade de Olá toodirect Olá índices adequada de toohello do tráfego de vários inquilinos, enquanto também gere recursos ao nível de serviço Olá em todos os inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="84df4-213">Um atributo chave do modelo de índice por inquilino Olá é a capacidade de Olá para a capacidade Olá toooversubscribe de Programador de aplicações de Olá de um serviço de pesquisa entre inquilinos da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="84df4-214">Se tem de inquilinos Olá uma distribuição desigual da carga de trabalho, combinação ideal de Olá de inquilinos pode ser distribuídas por um serviço de pesquisa indexa tooaccommodate um número de inquilinos altamente Active Directory, consome enquanto processa em simultâneo uma cauda longa do inquilinos menos ativos.</span><span class="sxs-lookup"><span data-stu-id="84df4-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="84df4-215">compromisso de Olá é a impossibilidade de Olá situações Olá modelo toohandle onde cada inquilino seja o simultaneamente altamente Active Directory.</span><span class="sxs-lookup"><span data-stu-id="84df4-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="84df4-216">modelo de índice por inquilino Olá fornece a base de Olá para um modelo de custo de variável, onde um todo o serviço da Azure Search é comprou prévio e, em seguida, subsequentemente, preenchida com inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="84df4-217">Isto permite toobe de capacidade não utilizada designado para as avaliações e as contas gratuitas.</span><span class="sxs-lookup"><span data-stu-id="84df4-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="84df4-218">Para aplicações com um requisitos de espaço global, o modelo de índice por inquilino Olá não pode ser Olá mais eficiente.</span><span class="sxs-lookup"><span data-stu-id="84df4-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="84df4-219">Se os inquilinos de uma aplicação estão distribuídos globo Olá, um serviço separado poderá ser necessário para cada região que pode duplicar os custos em cada um deles.</span><span class="sxs-lookup"><span data-stu-id="84df4-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="84df4-220">A pesquisa do Azure permite a escala de Olá de índices individuais Olá e o número total de Olá de toogrow de índices.</span><span class="sxs-lookup"><span data-stu-id="84df4-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="84df4-221">Se um preço adequado camada é escolhido, partições e réplicas podem ser adicionadas toohello o serviço de pesquisa completa quando um índice individuais no âmbito do serviço de Olá ficar demasiado grande em termos de armazenamento ou de tráfego.</span><span class="sxs-lookup"><span data-stu-id="84df4-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="84df4-222">Se o número total de Olá dos índices ficar demasiado grande para um único serviço, o serviço de outro tem tooaccommodate toobe aprovisionado Olá novos inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="84df4-223">Se índices tiverem toobe movido entre serviços de pesquisa, à medida que são adicionados novos serviços, dados de Olá desde o índice de Olá tem toobe manualmente copiada de um índice toohello outras como toobe um índice movida não permite a pesquisa do Azure.</span><span class="sxs-lookup"><span data-stu-id="84df4-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="84df4-224">2. Serviço por inquilino</span><span class="sxs-lookup"><span data-stu-id="84df4-224">2. Service per tenant</span></span>
![Um portrayal do modelo de serviço por inquilino Olá](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="84df4-226">Numa arquitetura por-inquilino de serviço, cada inquilino tem o seu próprio serviço de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="84df4-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="84df4-227">Neste modelo, a aplicação Olá distribui nível máximo de Olá de isolamento para os seus inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="84df4-228">Cada serviço tem dedicada de armazenamento e débito para processar o pedido de pesquisa, bem como as chaves de API separadas.</span><span class="sxs-lookup"><span data-stu-id="84df4-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="84df4-229">Para aplicações onde cada inquilino tem requisitos de espaço de grandes dimensões ou carga de trabalho Olá tem pouco variabilidade do inquilino tootenant, modelo de serviço por inquilino Olá é uma opção efetiva como recursos não são partilhados entre as cargas de trabalho de vários inquilinos.</span><span class="sxs-lookup"><span data-stu-id="84df4-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="84df4-230">Um serviço por modelo de inquilino também oferece o benefício de Olá de um modelo de custo previsível, fixos.</span><span class="sxs-lookup"><span data-stu-id="84df4-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="84df4-231">Há um investimento prévio num serviço de pesquisa de todo, até um toofill de inquilino, no entanto Olá custo por inquilino é superior a um modelo de índice por inquilino.</span><span class="sxs-lookup"><span data-stu-id="84df4-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="84df4-232">modelo de serviço por inquilino Olá é uma escolha eficiente para aplicações com um requisitos de espaço global.</span><span class="sxs-lookup"><span data-stu-id="84df4-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="84df4-233">Com inquilinos distribuída geograficamente, é fácil toohave serviço cada inquilino na região adequado Olá.</span><span class="sxs-lookup"><span data-stu-id="84df4-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="84df4-234">desafios de Olá Dimensionar este padrão surgem quando individuais inquilinos outgrow o seu serviço.</span><span class="sxs-lookup"><span data-stu-id="84df4-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="84df4-235">A pesquisa do Azure não suporta atualmente a atualizar Olá camada de um serviço de pesquisa de preços para que todos os dados teria toobe copiado manualmente tooa novo serviço.</span><span class="sxs-lookup"><span data-stu-id="84df4-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="84df4-236">3. A combinação de ambos os modelos</span><span class="sxs-lookup"><span data-stu-id="84df4-236">3. Mixing both models</span></span>
<span data-ttu-id="84df4-237">Outro padrão para a modelação de arquitetura "multitenancy" é a combinação de estratégias de índice por inquilino e serviço por inquilino.</span><span class="sxs-lookup"><span data-stu-id="84df4-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="84df4-238">Ao combinar padrões de Olá dois, inquilinos maiores de uma aplicação podem ocupam serviços dedicados enquanto Olá longa seguimento de menos Active Directory, mais pequenos de inquilinos pode ocupam índices num serviço partilhado.</span><span class="sxs-lookup"><span data-stu-id="84df4-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="84df4-239">Este modelo assegura que inquilinos maiores Olá têm consistentemente elevado desempenho do serviço de Olá ajudando tooprotect Olá inquilinos inferior de qualquer vizinhos inúteis.</span><span class="sxs-lookup"><span data-stu-id="84df4-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="84df4-240">No entanto, implementar esta estratégia baseia-se prospeção no prever que os inquilinos necessitam de um serviço dedicada versus um índice num serviço partilhado.</span><span class="sxs-lookup"><span data-stu-id="84df4-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="84df4-241">Aumenta a complexidade de aplicação com Olá necessidade toomanage ambas destes modelos de arquitetura "multitenancy".</span><span class="sxs-lookup"><span data-stu-id="84df4-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="84df4-242">Alcançar granularidade mesmo melhorar</span><span class="sxs-lookup"><span data-stu-id="84df4-242">Achieving even finer granularity</span></span>
<span data-ttu-id="84df4-243">Olá acima cenários multi-inquilino do toomodel de padrões de conceção da Azure Search partem do princípio de um âmbito uniform onde cada inquilino seja uma instância completa de uma aplicação.</span><span class="sxs-lookup"><span data-stu-id="84df4-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="84df4-244">No entanto, as aplicações, por vezes, podem processar vários âmbitos mais pequenos.</span><span class="sxs-lookup"><span data-stu-id="84df4-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="84df4-245">Se os modelos de serviço por inquilino e índice por inquilino não são suficientemente pequenos âmbitos, é possível toomodel tooachieve um índice um grau mesmo melhorar de granularidade.</span><span class="sxs-lookup"><span data-stu-id="84df4-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="84df4-246">toohave num índice único comportar-se de forma diferente de pontos finais de cliente diferente, um campo pode ser adicionado tooan índice que designa um determinado valor para cada cliente possíveis.</span><span class="sxs-lookup"><span data-stu-id="84df4-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="84df4-247">Sempre que um cliente chama tooquery de pesquisa do Azure ou modificar um índice, código Olá da aplicação de cliente Olá Especifica o valor adequado de Olá para esse campo através da Azure Search [filtro](https://msdn.microsoft.com/library/azure/dn798921.aspx) capacidade no momento da consulta.</span><span class="sxs-lookup"><span data-stu-id="84df4-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="84df4-248">Este método pode ser tooachieve utilizado a funcionalidade de contas de utilizador em separado, níveis de permissão separada e até mesmo completamente independente aplicações.</span><span class="sxs-lookup"><span data-stu-id="84df4-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="84df4-249">Utilizar a abordagem de Olá descrito acima tooconfigure tooserve um único índice relevância de Olá do inquilinos afeta várias dos resultados da pesquisa.</span><span class="sxs-lookup"><span data-stu-id="84df4-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="84df4-250">Pesquisa relevância pontuações são calculadas um âmbito de nível de índice, não é um âmbito de nível de inquilino, para que os dados de todos os inquilinos incorporados nas estatísticas de subjacente dos pontuações relevância Olá, tais como a frequência de prazo.</span><span class="sxs-lookup"><span data-stu-id="84df4-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="84df4-251">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="84df4-251">Next steps</span></span>
<span data-ttu-id="84df4-252">A pesquisa do Azure é uma escolha apelativa para muitas aplicações, [ler mais sobre as capacidades do serviço de Olá robustas](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="84df4-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="84df4-253">Quando avaliar Olá várias padrões para aplicações multi-inquilino de conceção, considere Olá [vários escalões de preços](https://azure.microsoft.com/pricing/details/search/) e respetiva Olá [os limites de serviço](search-limits-quotas-capacity.md) toobest personalizar toofit de pesquisa do Azure e arquiteturas de todos os tamanhos de cargas de trabalho da aplicação.</span><span class="sxs-lookup"><span data-stu-id="84df4-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="84df4-254">Quaisquer perguntas sobre a Azure Search e cenários de multi-inquilino podem ser direcionadas tooazuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="84df4-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>

