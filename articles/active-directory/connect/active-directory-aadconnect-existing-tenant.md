---
title: "O Azure AD Connect: Se já tiver do Azure AD | Microsoft Docs"
description: "Este tópico descreve a forma como toouse ligam quando tiver um inquilino do Azure AD existente."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f7b166e9e85c1f03330e8e0074d4afa4036738c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="69165-103">O Azure AD Connect: Se tiver um inquilino existente</span><span class="sxs-lookup"><span data-stu-id="69165-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="69165-104">A maioria dos tópicos de Olá para como toouse do Azure AD Connect parte do princípio de começa com um novo Azure inquilino do AD e de que não existe nenhum utilizador ou outros objetos não existe.</span><span class="sxs-lookup"><span data-stu-id="69165-104">Most of hello topics for how toouse Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="69165-105">Mas se tiver iniciado com um inquilino do Azure AD, preenchido este com utilizadores e outros objetos e agora pretende toouse ligar, em seguida, este tópico é que o utilizador.</span><span class="sxs-lookup"><span data-stu-id="69165-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want toouse Connect, then this topic is for you.</span></span>

## <a name="hello-basics"></a><span data-ttu-id="69165-106">Noções básicas de Olá</span><span class="sxs-lookup"><span data-stu-id="69165-106">hello basics</span></span>
<span data-ttu-id="69165-107">Um objeto no Azure AD ou é controlado na nuvem de Olá (Azure AD) ou no local.</span><span class="sxs-lookup"><span data-stu-id="69165-107">An object in Azure AD is either mastered in hello cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="69165-108">Para um único objeto, não é possível gerir alguns atributos no local e alguns outros atributos no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="69165-109">Cada objeto tem um sinalizador que indica onde o objecto de Olá é gerido.</span><span class="sxs-lookup"><span data-stu-id="69165-109">Each object has a flag indicating where hello object is managed.</span></span>

<span data-ttu-id="69165-110">Pode gerir alguns utilizadores no local e outros na nuvem de Olá.</span><span class="sxs-lookup"><span data-stu-id="69165-110">You can manage some users on-premises and other in hello cloud.</span></span> <span data-ttu-id="69165-111">Um cenário comum para esta configuração é uma organização com uma combinação dos técnicos de gestão de contas e técnicos de vendas.</span><span class="sxs-lookup"><span data-stu-id="69165-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="69165-112">Olá trabalhadores de gestão de contas de ter um local conta AD, mas trabalhadores de vendas Olá não compatíveis, que têm uma conta no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-112">hello accounting workers have an on-premises AD account, but hello sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="69165-113">Iria gerir alguns utilizadores no local e algumas no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="69165-114">Se tiver iniciado toomanage utilizadores no Azure AD que também estejam no AD no local e posteriormente quiser toouse ligar, em seguida, existem algumas questões adicionais que terá tooconsider.</span><span class="sxs-lookup"><span data-stu-id="69165-114">If you started toomanage users in Azure AD that are also in on-premises AD and later want toouse Connect, then there are some additional concerns you need tooconsider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="69165-115">Sincronizar com os utilizadores existentes no Azure AD</span><span class="sxs-lookup"><span data-stu-id="69165-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="69165-116">Quando instalar o Azure AD Connect e iniciá-la, hello serviço de sincronização do Azure AD (no Azure AD) faz uma verificação de cada objeto novo e tente toofind um toomatch objeto existente.</span><span class="sxs-lookup"><span data-stu-id="69165-116">When you install Azure AD Connect and you start synchronizing, hello Azure AD sync service (in Azure AD) does a check on every new object and try toofind an existing object toomatch.</span></span> <span data-ttu-id="69165-117">Existem três atributos utilizados para executar este processo: **userPrincipalName**, **proxyAddresses**, e **sourceAnchor**/**immutableID**.</span><span class="sxs-lookup"><span data-stu-id="69165-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="69165-118">Uma correspondência na **userPrincipalName** e **proxyAddresses** é conhecido como um **correspondência de forma recuperável**.</span><span class="sxs-lookup"><span data-stu-id="69165-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="69165-119">Uma correspondência na **sourceAnchor** é conhecido como **correspondência de disco rígida**.</span><span class="sxs-lookup"><span data-stu-id="69165-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="69165-120">Para Olá **proxyAddresses** atributo apenas um valor de Olá com **SMTP:**, que é o endereço de e-mail principal Olá, é utilizado para avaliação Olá.</span><span class="sxs-lookup"><span data-stu-id="69165-120">For hello **proxyAddresses** attribute only hello value with **SMTP:**, that is hello primary email address, is used for hello evaluation.</span></span>

<span data-ttu-id="69165-121">correspondência de Olá é avaliada apenas novos objetos feitos Connect.</span><span class="sxs-lookup"><span data-stu-id="69165-121">hello match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="69165-122">Se alterar um objeto exiting para esta correspondência qualquer um destes atributos, em seguida, verá um erro em vez disso.</span><span class="sxs-lookup"><span data-stu-id="69165-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="69165-123">Se o Azure AD localiza um objeto onde os valores de atributo Olá são Olá mesmo para um objeto proveniente do Connect e que já se encontra no Azure AD, em seguida, hello objeto no Azure AD é tomado over by Connect.</span><span class="sxs-lookup"><span data-stu-id="69165-123">If Azure AD finds an object where hello attribute values are hello same for an object coming from Connect and that it is already present in Azure AD, then hello object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="69165-124">Olá anteriormente objeto gerido de nuvem está assinalado como gerido no local.</span><span class="sxs-lookup"><span data-stu-id="69165-124">hello previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="69165-125">Todos os atributos no Azure AD com um valor no local no AD são substituídos com o valor do Olá no local.</span><span class="sxs-lookup"><span data-stu-id="69165-125">All attributes in Azure AD with a value in on-premises AD are overwritten with hello on-premises value.</span></span> <span data-ttu-id="69165-126">Exceção de Olá é quando um atributo tem um **nulo** valor no local.</span><span class="sxs-lookup"><span data-stu-id="69165-126">hello exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="69165-127">Neste caso, valor de Olá no Azure AD permanece, mas ainda só pode alterá-la no local toosomething pessoa.</span><span class="sxs-lookup"><span data-stu-id="69165-127">In this case, hello value in Azure AD remains, but you can still only change it on-premises toosomething else.</span></span>

> [!WARNING]
> <span data-ttu-id="69165-128">Uma vez que todos os atributos no Azure AD que vão toobe substituída pelo valor do Olá no local, certifique-se de que tem os dados no local.</span><span class="sxs-lookup"><span data-stu-id="69165-128">Since all attributes in Azure AD are going toobe overwritten by hello on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="69165-129">Por exemplo, se apenas a ter geridas endereço de correio eletrónico no Office 365 e não são mantidas atualizadas no local do AD DS, e perder quaisquer valores no Azure AD/Office 365 não está presente no AD DS.</span><span class="sxs-lookup"><span data-stu-id="69165-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="69165-130">Se utilizar a sincronização de palavra-passe, o que é sempre utilizada pelas definições rápidas, em seguida, Olá palavra-passe no Azure AD é substituído pela Olá palavra-passe no local no AD.</span><span class="sxs-lookup"><span data-stu-id="69165-130">If you use password sync, which is always used by express settings, then hello password in Azure AD is overwritten with hello password in on-premises AD.</span></span> <span data-ttu-id="69165-131">Se os utilizadores são utilizados toomanage diferentes palavras-passe, em seguida, terá de tooinform-o de que devem utilizar Olá palavra-passe de no local quando instalou o ligar.</span><span class="sxs-lookup"><span data-stu-id="69165-131">If your users are used toomanage different passwords, then you need tooinform them that they should use hello on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="69165-132">secção anterior Olá e aviso devem ser consideradas no seu planeamento.</span><span class="sxs-lookup"><span data-stu-id="69165-132">hello previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="69165-133">Se tiver efetuado alterações muitos no Azure AD não serão refletido no local do AD DS, em seguida, precisa de tooplan para como toopopulate do AD DS com Olá atualizado valores antes de poder sincronizar os objetos com o Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="69165-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need tooplan for how toopopulate AD DS with hello updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="69165-134">Se corresponder os objetos com uma correspondência de forma recuperável, em seguida, Olá **sourceAnchor** é adicionada toohello objeto no Azure AD para uma correspondência de disco rígida possam ser utilizada mais tarde.</span><span class="sxs-lookup"><span data-stu-id="69165-134">If you matched your objects with a soft-match, then hello **sourceAnchor** is added toohello object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="69165-135">Disco rígido-match vs correspondência de forma recuperável</span><span class="sxs-lookup"><span data-stu-id="69165-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="69165-136">Para uma nova instalação do Connect, não há qualquer diferença prática entre uma configuração soft - e uma disco rígido correspondência.</span><span class="sxs-lookup"><span data-stu-id="69165-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="69165-137">diferença de Olá é uma situação de recuperação após desastre.</span><span class="sxs-lookup"><span data-stu-id="69165-137">hello difference is in a disaster recovery situation.</span></span> <span data-ttu-id="69165-138">Se tiver perdido o seu servidor com o Azure AD Connect, pode reinstalar uma nova instância sem perder quaisquer dados.</span><span class="sxs-lookup"><span data-stu-id="69165-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="69165-139">Um objeto com um sourceAnchor é enviado tooConnect durante a instalação inicial.</span><span class="sxs-lookup"><span data-stu-id="69165-139">An object with a sourceAnchor is sent tooConnect during initial install.</span></span> <span data-ttu-id="69165-140">Olá correspondência pode, em seguida, ser avaliada pelo cliente de Olá (Azure AD Connect), que é muito mais rápida do que ao fazê-lo Olá mesmo no Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-140">hello match can then be evaluated by hello client (Azure AD Connect), which is a lot faster than doing hello same in Azure AD.</span></span> <span data-ttu-id="69165-141">Uma correspondência de disco rígida é avaliada por ligar e pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="69165-142">Uma correspondência de forma recuperável é avaliada apenas pelo Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="69165-143">Outros objetos que os utilizadores</span><span class="sxs-lookup"><span data-stu-id="69165-143">Other objects than users</span></span>
<span data-ttu-id="69165-144">Os utilizadores têm normalmente a userPrincipalName e proxyAddresses, efetuar correspondência Olá fácil.</span><span class="sxs-lookup"><span data-stu-id="69165-144">Users usually have both userPrincipalName and proxyAddresses, making hello match easy.</span></span> <span data-ttu-id="69165-145">Mas outros objetos, tais como grupos de segurança, não têm os.</span><span class="sxs-lookup"><span data-stu-id="69165-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="69165-146">Neste caso, só pode corresponder numa correspondência de disco rígida utilizando Olá sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="69165-146">In this case, you can only match on a hard match using hello sourceAnchor.</span></span> <span data-ttu-id="69165-147">Olá sourceAnchor é sempre Olá Base64 convertido **objectGUID** no local, pelo que tem de atualizar o valor de Olá no Azure AD quando necessita de dois objetos toomatch.</span><span class="sxs-lookup"><span data-stu-id="69165-147">hello sourceAnchor is always hello Base64 converted **objectGUID** on-premises, so you must update hello value in Azure AD when you need two objects toomatch.</span></span> <span data-ttu-id="69165-148">Olá sourceAnchor/immutableID só pode ser atualizado com o PowerShell e não através de portais de Olá.</span><span class="sxs-lookup"><span data-stu-id="69165-148">hello sourceAnchor/immutableID can only be updated with PowerShell and not through hello portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="69165-149">Criar um novo diretório Active Directory no local a partir dos dados no Azure AD</span><span class="sxs-lookup"><span data-stu-id="69165-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="69165-150">Alguns clientes começam com uma solução apenas na nuvem com o Azure AD e não têm um local AD.</span><span class="sxs-lookup"><span data-stu-id="69165-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="69165-151">Mais tarde pretende tooconsume no local recursos e pretender toobuild no local AD com base nos dados do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-151">Later they want tooconsume on-premises resources and want toobuild an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="69165-152">O Azure AD Connect não pode ajudá-lo para este cenário.</span><span class="sxs-lookup"><span data-stu-id="69165-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="69165-153">Não cria os utilizadores no local e não tem qualquer capacidade tooset Olá palavra-passe no local toohello mesmo do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="69165-153">It does not create users on-premises and it does not have any ability tooset hello password on-premises toohello same as in Azure AD.</span></span>

<span data-ttu-id="69165-154">Se o motivo apenas Olá motivo pelo qual planeia tooadd no local AD está toosupport LOBs (aplicações de linha de negócio), em seguida, talvez a considerar toouse [serviços de domínio do Azure AD](../../active-directory-domain-services/index.md) em vez disso.</span><span class="sxs-lookup"><span data-stu-id="69165-154">If hello only reason why you plan tooadd on-premises AD is toosupport LOBs (Line-of-Business apps), then maybe you should consider toouse [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="69165-155">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="69165-155">Next steps</span></span>
<span data-ttu-id="69165-156">Saiba mais sobre como [Integrar as identidades no local ao Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="69165-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
