---
title: Guia de estrutura da tabela de armazenamento de aaaAzure | Microsoft Docs
description: "Design dimensionável e tabelas de Performant no Table Storage do Azure"
services: storage
documentationcenter: na
author: jasonnewyork
manager: tadb
editor: tysonn
ms.assetid: 8e228b0c-2998-4462-8101-9f16517393ca
ms.service: storage
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage
ms.date: 02/28/2017
ms.author: jahogg
ms.openlocfilehash: bbac5e83fe994c1ba1408dd43367fbcfca6a2148
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-table-design-guide-designing-scalable-and-performant-tables"></a><span data-ttu-id="0c6db-103">Guia de Design da tabela de armazenamento do Azure: Estruturar dimensionável e tabelas Performant</span><span class="sxs-lookup"><span data-stu-id="0c6db-103">Azure Storage Table Design Guide: Designing Scalable and Performant Tables</span></span>
[!INCLUDE [storage-table-cosmos-db-tip-include](../../includes/storage-table-cosmos-db-tip-include.md)]

<span data-ttu-id="0c6db-104">toodesign dimensionável e tabelas de performant tem de considerar um número de fatores, tais como o desempenho, escalabilidade e o custo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-104">toodesign scalable and performant tables you must consider a number of factors such as performance, scalability, and cost.</span></span> <span data-ttu-id="0c6db-105">Se anteriormente tiver concebido esquemas para bases de dados relacionais, estas considerações será familiar tooyou, mas enquanto existirem alguns semelhanças entre o modelo de armazenamento de serviço de Azure Table Olá e modelos relacionais, também existem muitas importantes diferenças.</span><span class="sxs-lookup"><span data-stu-id="0c6db-105">If you have previously designed schemas for relational databases, these considerations will be familiar tooyou, but while there are some similarities between hello Azure Table service storage model and relational models, there are also many important differences.</span></span> <span data-ttu-id="0c6db-106">Estas diferenças normalmente levar toovery diferentes estruturas que poderá ser counter-intuitive ou errada toosomeone familiarizado com bases de dados relacionais, mas o que sentido boa se está a conceber um arquivo de chave/valor NoSQL, tais como Olá serviço de Azure Table.</span><span class="sxs-lookup"><span data-stu-id="0c6db-106">These differences typically lead toovery different designs that may look counter-intuitive or wrong toosomeone familiar with relational databases, but which do make good sense if you are designing for a NoSQL key/value store such as hello Azure Table service.</span></span> <span data-ttu-id="0c6db-107">Muitos dos seus diferenças de estrutura irão refletir o facto de Olá que o serviço de tabela de Olá está concebida toosupport aplicações de escala da nuvem que podem conter billions das entidades (linhas na terminologia de base de dados relacional) de dados ou para conjuntos de dados tem de suportar muito elevado volumes de transação: por conseguinte, tem de toothink diferente sobre como armazena os dados e compreender como funciona o Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-107">Many of your design differences will reflect hello fact that hello Table service is designed toosupport cloud-scale applications that can contain billions of entities (rows in relational database terminology) of data or for datasets that must support very high transaction volumes: therefore, you need toothink differently about how you store your data and understand how hello Table service works.</span></span> <span data-ttu-id="0c6db-108">Um arquivo de dados NoSQL bem estruturado pode ativar a sua solução tooscale muito mais (e um custo mais baixo) que uma solução que utiliza uma base de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="0c6db-108">A well designed NoSQL data store can enable your solution tooscale much further (and at a lower cost) than a solution that uses a relational database.</span></span> <span data-ttu-id="0c6db-109">Este guia ajuda-o com estes tópicos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-109">This guide helps you with these topics.</span></span>  

## <a name="about-hello-azure-table-service"></a><span data-ttu-id="0c6db-110">Sobre Olá serviço tabela do Azure</span><span class="sxs-lookup"><span data-stu-id="0c6db-110">About hello Azure Table service</span></span>
<span data-ttu-id="0c6db-111">Esta secção realça algumas das Olá as principais funcionalidades do serviço de tabela Olá que são especialmente relevante toodesigning para o desempenho e escalabilidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-111">This section highlights some of hello key features of hello Table service that are especially relevant toodesigning for performance and scalability.</span></span> <span data-ttu-id="0c6db-112">Se for tooAzure novo armazenamento e Olá serviço tabela, leia primeiro [introdução tooMicrosoft Storage do Azure](storage-introduction.md) e [introdução ao armazenamento de tabelas do Azure através do .NET](storage-dotnet-how-to-use-tables.md) antes de ler este resto Olá artigo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-112">If you are new tooAzure Storage and hello Table service, first read [Introduction tooMicrosoft Azure Storage](storage-introduction.md) and [Get started with Azure Table Storage using .NET](storage-dotnet-how-to-use-tables.md) before reading hello remainder of this article.</span></span> <span data-ttu-id="0c6db-113">Embora o foco Olá neste guia é Olá serviço tabela, incluirá algumas debate Olá filas do Azure e serviços de Blob, e como pode utilizá-los, juntamente com Olá serviço tabela numa solução.</span><span class="sxs-lookup"><span data-stu-id="0c6db-113">Although hello focus of this guide is on hello Table service, it will include some discussion of hello Azure Queue and Blob services, and how you might use them along with hello Table service in a solution.</span></span>  

<span data-ttu-id="0c6db-114">O que é o serviço de tabela Olá?</span><span class="sxs-lookup"><span data-stu-id="0c6db-114">What is hello Table service?</span></span> <span data-ttu-id="0c6db-115">Como seria de esperar do nome de Olá, Olá serviço tabela utiliza um toostore de dados de formato tabular.</span><span class="sxs-lookup"><span data-stu-id="0c6db-115">As you might expect from hello name, hello Table service uses a tabular format toostore data.</span></span> <span data-ttu-id="0c6db-116">Na terminologia de padrão Olá, cada linha da tabela de Olá represente uma entidade e arquivo de colunas de Olá Olá várias propriedades dessa entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-116">In hello standard terminology, each row of hello table represents an entity, and hello columns store hello various properties of that entity.</span></span> <span data-ttu-id="0c6db-117">Cada entidade tem um par de chaves toouniquely identificá-lo e uma coluna de carimbo Olá serviço tabela utiliza tootrack quando entidade Olá foi atualizada pela última vez (isto ocorre automaticamente e não é possível substituir manualmente Olá timestamp com um valor arbitrário).</span><span class="sxs-lookup"><span data-stu-id="0c6db-117">Every entity has a pair of keys toouniquely identify it, and a timestamp column that hello Table service uses tootrack when hello entity was last updated (this happens automatically and you cannot manually overwrite hello timestamp with an arbitrary value).</span></span> <span data-ttu-id="0c6db-118">Olá serviço tabela utiliza este simultaneidade otimista de toomanage last-modified timestamp (LMT).</span><span class="sxs-lookup"><span data-stu-id="0c6db-118">hello Table service uses this last-modified timestamp (LMT) toomanage optimistic concurrency.</span></span>  

> [!NOTE]
> <span data-ttu-id="0c6db-119">operações de REST API do serviço de tabela Olá também devolvem uma **ETag** valor que deriva de Olá last-modified timestamp (LMT).</span><span class="sxs-lookup"><span data-stu-id="0c6db-119">hello Table service REST API operations also return an **ETag** value that it derives from hello last-modified timestamp (LMT).</span></span> <span data-ttu-id="0c6db-120">Neste documento utilizaremos Olá termos ETag e LMT-no alternadamente porque consultarem toohello mesmo subjacente dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-120">In this document we will use hello terms ETag and LMT interchangeably because they refer toohello same underlying data.</span></span>  
> 
> 

<span data-ttu-id="0c6db-121">Olá exemplo seguinte mostra um toostore de estrutura da tabela simples entidades do empregado e departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-121">hello following example shows a simple table design toostore employee and department entities.</span></span> <span data-ttu-id="0c6db-122">Muitos dos exemplos de Olá mostrados posteriormente neste guia são baseados nesta estrutura simple.</span><span class="sxs-lookup"><span data-stu-id="0c6db-122">Many of hello examples shown later in this guide are based on this simple design.</span></span>  

<table>
<tr>
<th><span data-ttu-id="0c6db-123">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-123">PartitionKey</span></span></th>
<th><span data-ttu-id="0c6db-124">RowKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-124">RowKey</span></span></th>
<th><span data-ttu-id="0c6db-125">Timestamp</span><span class="sxs-lookup"><span data-stu-id="0c6db-125">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-126">Marketing</span><span class="sxs-lookup"><span data-stu-id="0c6db-126">Marketing</span></span></td>
<td><span data-ttu-id="0c6db-127">00001</span><span class="sxs-lookup"><span data-stu-id="0c6db-127">00001</span></span></td>
<td><span data-ttu-id="0c6db-128">2014-08-22T00:50:32Z</span><span class="sxs-lookup"><span data-stu-id="0c6db-128">2014-08-22T00:50:32Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-129">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-129">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-130">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-130">LastName</span></span></th>
<th><span data-ttu-id="0c6db-131">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-131">Age</span></span></th>
<th><span data-ttu-id="0c6db-132">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-132">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-133">Don</span><span class="sxs-lookup"><span data-stu-id="0c6db-133">Don</span></span></td>
<td><span data-ttu-id="0c6db-134">Hall</span><span class="sxs-lookup"><span data-stu-id="0c6db-134">Hall</span></span></td>
<td><span data-ttu-id="0c6db-135">34</span><span class="sxs-lookup"><span data-stu-id="0c6db-135">34</span></span></td>
<td>donh@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="0c6db-136">Marketing</span><span class="sxs-lookup"><span data-stu-id="0c6db-136">Marketing</span></span></td>
<td><span data-ttu-id="0c6db-137">00002</span><span class="sxs-lookup"><span data-stu-id="0c6db-137">00002</span></span></td>
<td><span data-ttu-id="0c6db-138">2014-08-22T00:50:34Z</span><span class="sxs-lookup"><span data-stu-id="0c6db-138">2014-08-22T00:50:34Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-139">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-139">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-140">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-140">LastName</span></span></th>
<th><span data-ttu-id="0c6db-141">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-141">Age</span></span></th>
<th><span data-ttu-id="0c6db-142">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-142">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-143">Jun</span><span class="sxs-lookup"><span data-stu-id="0c6db-143">Jun</span></span></td>
<td><span data-ttu-id="0c6db-144">CaO</span><span class="sxs-lookup"><span data-stu-id="0c6db-144">Cao</span></span></td>
<td><span data-ttu-id="0c6db-145">47</span><span class="sxs-lookup"><span data-stu-id="0c6db-145">47</span></span></td>
<td>junc@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="0c6db-146">Marketing</span><span class="sxs-lookup"><span data-stu-id="0c6db-146">Marketing</span></span></td>
<td><span data-ttu-id="0c6db-147">Departamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-147">Department</span></span></td>
<td><span data-ttu-id="0c6db-148">2014-08-22T00:50:30Z</span><span class="sxs-lookup"><span data-stu-id="0c6db-148">2014-08-22T00:50:30Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-149">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="0c6db-149">DepartmentName</span></span></th>
<th><span data-ttu-id="0c6db-150">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="0c6db-150">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-151">Marketing</span><span class="sxs-lookup"><span data-stu-id="0c6db-151">Marketing</span></span></td>
<td><span data-ttu-id="0c6db-152">153</span><span class="sxs-lookup"><span data-stu-id="0c6db-152">153</span></span></td>
</tr>
</table>
</td>
</tr>
<tr>
<td><span data-ttu-id="0c6db-153">Vendas</span><span class="sxs-lookup"><span data-stu-id="0c6db-153">Sales</span></span></td>
<td><span data-ttu-id="0c6db-154">00010</span><span class="sxs-lookup"><span data-stu-id="0c6db-154">00010</span></span></td>
<td><span data-ttu-id="0c6db-155">2014-08-22T00:50:44Z</span><span class="sxs-lookup"><span data-stu-id="0c6db-155">2014-08-22T00:50:44Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-156">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-156">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-157">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-157">LastName</span></span></th>
<th><span data-ttu-id="0c6db-158">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-158">Age</span></span></th>
<th><span data-ttu-id="0c6db-159">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-159">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-160">Manuel</span><span class="sxs-lookup"><span data-stu-id="0c6db-160">Ken</span></span></td>
<td><span data-ttu-id="0c6db-161">Kwok</span><span class="sxs-lookup"><span data-stu-id="0c6db-161">Kwok</span></span></td>
<td><span data-ttu-id="0c6db-162">23</span><span class="sxs-lookup"><span data-stu-id="0c6db-162">23</span></span></td>
<td>kenk@contoso.com</td>
</tr>
</table>
</td>
</tr>
</table>


<span data-ttu-id="0c6db-163">Até ao momento, este analisa muito semelhantes tooa tabela na base de dados relacional com principais diferenças de Olá que está a ser Olá colunas obrigatórias, e hello capacidade toostore entidade vários tipos de Olá mesma tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-163">So far, this looks very similar tooa table in a relational database with hello key differences being hello mandatory columns, and hello ability toostore multiple entity types in hello same table.</span></span> <span data-ttu-id="0c6db-164">Além disso, cada um dos Olá propriedades definidas pelo utilizador, tais como **FirstName** ou **idade** tem um tipo de dados, tais como número inteiro ou uma cadeia, apenas como uma coluna na base de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="0c6db-164">In addition, each of hello user-defined properties such as **FirstName** or **Age** has a data type, such as integer or string, just like a column in a relational database.</span></span> <span data-ttu-id="0c6db-165">Embora ao contrário numa base de dados relacional, natureza sem esquema Olá Olá significa de serviço de tabela que não precisa de ter uma propriedade Olá mesmo tipo de dados em cada entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-165">Although unlike in a relational database, hello schema-less nature of hello Table service means that a property need not have hello same data type on each entity.</span></span> <span data-ttu-id="0c6db-166">tipos de dados complexos toostore numa única propriedade, tem de utilizar um formato serializado como JSON ou XML.</span><span class="sxs-lookup"><span data-stu-id="0c6db-166">toostore complex data types in a single property, you must use a serialized format such as JSON or XML.</span></span> <span data-ttu-id="0c6db-167">Para obter mais informações sobre tipos de dados de serviço suportado, tais como de tabela Olá, intervalos de data suportados, regras de nomenclatura e restrições de tamanho, consulte [Olá compreender o modelo de dados do serviço tabela](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-167">For more information about hello table service such as supported data types, supported date ranges, naming rules, and size constraints, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>

<span data-ttu-id="0c6db-168">Como verá, à sua escolha de **PartitionKey** e **RowKey** é fundamental toogood tabela estrutura.</span><span class="sxs-lookup"><span data-stu-id="0c6db-168">As you will see, your choice of **PartitionKey** and **RowKey** is fundamental toogood table design.</span></span> <span data-ttu-id="0c6db-169">Cada entidade armazenada numa tabela tem de ter uma combinação única de **PartitionKey** e **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-169">Every entity stored in a table must have a unique combination of **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="0c6db-170">Tal como acontece com as chaves de uma tabela de base de dados relacional, Olá **PartitionKey** e **RowKey** os valores são toocreate indexada um índice em cluster que permite a rápida look-ups; no entanto, Olá serviço tabela não criar qualquer índices secundários, pelo que estes são Olá apenas dois indexado propriedades (alguns dos padrões de Olá descritos mais à frente mostram como pode contornar esta limitação aparente).</span><span class="sxs-lookup"><span data-stu-id="0c6db-170">As with keys in a relational database table, hello **PartitionKey** and **RowKey** values are indexed toocreate a clustered index that enables fast look-ups; however, hello Table service does not create any secondary indexes so these are hello only two indexed properties (some of hello patterns described later show how you can work around this apparent limitation).</span></span>  

<span data-ttu-id="0c6db-171">Uma tabela é constituída por uma ou mais partições e como verá, muitas das Olá design decisões que tomar irá ser à volta de escolher um adequado **PartitionKey** e **RowKey** toooptimize sua solução.</span><span class="sxs-lookup"><span data-stu-id="0c6db-171">A table is made up of one or more partitions, and as you will see, many of hello design decisions you make will be around choosing a suitable **PartitionKey** and **RowKey** toooptimize your solution.</span></span> <span data-ttu-id="0c6db-172">Uma solução pode consistir apenas uma única tabela que contém todas as entidades organizadas em partições, mas normalmente uma solução irá ter várias tabelas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-172">A solution could consist of just a single table that contains all your entities organized into partitions, but typically a solution will have multiple tables.</span></span> <span data-ttu-id="0c6db-173">As tabelas ajudá-lo toologically organizar as entidades, ajudam a gerir o acesso toohello dados através de listas de controlo de acesso e pode colocar uma tabela inteira utilizando uma operação de armazenamento única.</span><span class="sxs-lookup"><span data-stu-id="0c6db-173">Tables help you toologically organize your entities, help you manage access toohello data using access control lists, and you can drop an entire table using a single storage operation.</span></span>  

### <a name="table-partitions"></a><span data-ttu-id="0c6db-174">Partições da tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-174">Table partitions</span></span>
<span data-ttu-id="0c6db-175">nome da conta Olá, nome da tabela e **PartitionKey** em conjunto identificar partição Olá no âmbito do serviço de armazenamento de olá onde o serviço de tabela Olá armazena entidade Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-175">hello account name, table name and **PartitionKey** together identify hello partition within hello storage service where hello table service stores hello entity.</span></span> <span data-ttu-id="0c6db-176">Bem como a ser parte do esquema para entidades de endereçamento de Olá, partições definem um âmbito para transações (consulte [entidade grupo transações](#entity-group-transactions) abaixo) e a base de Olá do formulário da forma como o serviço de tabela Olá dimensiona.</span><span class="sxs-lookup"><span data-stu-id="0c6db-176">As well as being part of hello addressing scheme for entities, partitions define a scope for transactions (see [Entity Group Transactions](#entity-group-transactions) below), and form hello basis of how hello table service scales.</span></span> <span data-ttu-id="0c6db-177">Para obter mais informações sobre as partições Consulte [metas de desempenho e escalabilidade do Storage do Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="0c6db-177">For more information on partitions see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

<span data-ttu-id="0c6db-178">No serviço tabela Olá, um nó individual dos serviços de um ou mais partições de conclusão e Olá escalas de serviço por dinamicamente o balanceamento de carga partições entre nós.</span><span class="sxs-lookup"><span data-stu-id="0c6db-178">In hello Table service, an individual node services one or more complete partitions and hello service scales by dynamically load-balancing partitions across nodes.</span></span> <span data-ttu-id="0c6db-179">Se um nó estiver sob carga, o serviço de tabela Olá pode *dividir* intervalo Olá de partições servidos esse nó em nós diferentes; quando o tráfego subsides, o serviço de Olá pode *intercalação* partição Olá varia de fazer uma cópia de nós silenciosos para um único nó.</span><span class="sxs-lookup"><span data-stu-id="0c6db-179">If a node is under load, hello table service can *split* hello range of partitions serviced by that node onto different nodes; when traffic subsides, hello service can *merge* hello partition ranges from quiet nodes back onto a single node.</span></span>  

<span data-ttu-id="0c6db-180">Para obter mais informações sobre Olá detalhes internos de Olá serviço tabela e, em particular como serviço Olá gere partições, consulte o documento de Olá [armazenamento do Microsoft Azure: A nuvem armazenamento serviço de elevada disponibilidade com consistência forte](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-180">For more information about hello internal details of hello Table service, and in particular how hello service manages partitions, see hello paper [Microsoft Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span></span>  

### <a name="entity-group-transactions"></a><span data-ttu-id="0c6db-181">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-181">Entity Group Transactions</span></span>
<span data-ttu-id="0c6db-182">No serviço tabela Olá, transações de grupo de entidade (EGTs) são o mecanismo de apenas incorporada de Olá para executar atualizações atómicas entre várias entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-182">In hello Table service, Entity Group Transactions (EGTs) are hello only built-in mechanism for performing atomic updates across multiple entities.</span></span> <span data-ttu-id="0c6db-183">EGTs também são referidos tooas *lote de transações* em alguma documentação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-183">EGTs are also referred tooas *batch transactions* in some documentation.</span></span> <span data-ttu-id="0c6db-184">EGTs só pode operar em entidades armazenadas no Olá mesma partição (partilha Olá mesma chave de partição numa tabela fornecida), por isso sempre que necessitar de comportamento transacional atómico entre várias entidades terá tooensure dessas entidades estão a ser Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-184">EGTs can only operate on entities stored in hello same partition (share hello same partition key in a given table), so anytime you need atomic transactional behavior across multiple entities you need tooensure that those entities are in hello same partition.</span></span> <span data-ttu-id="0c6db-185">Isto é frequentemente um motivo para manter os vários tipos de entidade no Olá mesmo tabela (e partição) e não a utilizar várias tabelas para tipos de entidade diferente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-185">This is often a reason for keeping multiple entity types in hello same table (and partition) and not using multiple tables for different entity types.</span></span> <span data-ttu-id="0c6db-186">Um único EGT pode operar no máximo de 100 entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-186">A single EGT can operate on at most 100 entities.</span></span>  <span data-ttu-id="0c6db-187">Se submeter vários EGTs simultâneas para o processamento é importante tooensure esses EGTs não operar em entidades que são comuns entre EGTs como processar caso contrário, pode sofrer um atraso.</span><span class="sxs-lookup"><span data-stu-id="0c6db-187">If you submit multiple concurrent EGTs for processing it is important tooensure  those EGTs do not operate on entities that are common across EGTs as otherwise processing can be delayed.</span></span>

<span data-ttu-id="0c6db-188">EGTs também introduzir um compromisso potencial para tooevaluate na sua estrutura: utilizar mais partições irá aumentar a escalabilidade de Olá da sua aplicação porque o Azure tem mais de oportunidades de balanceamento de carga pedidos entre nós, mas isto pode limitar Olá capacidade das suas aplicações tooperform atómico transações e manter a consistência forte para os seus dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-188">EGTs also introduce a potential trade-off for you tooevaluate in your design: using more partitions will increase hello scalability of your application because Azure has more opportunities for load balancing requests across nodes, but this might limit hello ability of your application tooperform atomic transactions and maintain strong consistency for your data.</span></span> <span data-ttu-id="0c6db-189">Além disso, existem metas de escalabilidade específico ao nível de Olá da partição que pode limitar o débito de Olá de transações que pode esperar para um único nó: Para mais informações sobre metas de escalabilidade Olá para contas do storage do Azure e a tabela de Olá Service, consulte [metas de desempenho e escalabilidade do Storage do Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="0c6db-189">Furthermore, there are specific scalability targets at hello level of a partition that might limit hello throughput of transactions you can expect for a single node: for more information about hello scalability targets for Azure storage accounts and hello table service, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span> <span data-ttu-id="0c6db-190">As secções deste guia abordam vários design estratégias que o ajudam a gerir compromissos, tais como este e discutem melhor toochoose a chave de partição com base nos requisitos específicos de Olá da sua aplicação de cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-190">Later sections of this guide discuss various design strategies that help you manage trade-offs such as this one, and discuss how best toochoose your partition key based on hello specific requirements of your client application.</span></span>  

### <a name="capacity-considerations"></a><span data-ttu-id="0c6db-191">Considerações sobre a capacidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-191">Capacity considerations</span></span>
<span data-ttu-id="0c6db-192">Olá tabela que se segue inclui algumas das Olá valores de chave toobe em consideração quando está a conceber uma solução de serviço tabela:</span><span class="sxs-lookup"><span data-stu-id="0c6db-192">hello following table includes some of hello key values toobe aware of when you are designing a Table service solution:</span></span>  

| <span data-ttu-id="0c6db-193">Capacidade total de uma conta de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="0c6db-193">Total capacity of an Azure storage account</span></span> | <span data-ttu-id="0c6db-194">500 TB</span><span class="sxs-lookup"><span data-stu-id="0c6db-194">500 TB</span></span> |
| --- | --- |
| <span data-ttu-id="0c6db-195">Número de tabelas de uma conta de armazenamento do Azure</span><span class="sxs-lookup"><span data-stu-id="0c6db-195">Number of tables in an Azure storage account</span></span> |<span data-ttu-id="0c6db-196">Limitado apenas pela capacidade de Olá Olá da conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-196">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="0c6db-197">Número de partições numa tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-197">Number of partitions in a table</span></span> |<span data-ttu-id="0c6db-198">Limitado apenas pela capacidade de Olá Olá da conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-198">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="0c6db-199">Número de entidades numa partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-199">Number of entities in a partition</span></span> |<span data-ttu-id="0c6db-200">Limitado apenas pela capacidade de Olá Olá da conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-200">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="0c6db-201">Tamanho de uma entidade individuais</span><span class="sxs-lookup"><span data-stu-id="0c6db-201">Size of an individual entity</span></span> |<span data-ttu-id="0c6db-202">Configurar too1 MB com um máximo de 255 propriedades (incluindo Olá **PartitionKey**, **RowKey**, e **Timestamp**)</span><span class="sxs-lookup"><span data-stu-id="0c6db-202">Up too1 MB with a maximum of 255 properties (including hello **PartitionKey**, **RowKey**, and **Timestamp**)</span></span> |
| <span data-ttu-id="0c6db-203">Tamanho de Olá **PartitionKey**</span><span class="sxs-lookup"><span data-stu-id="0c6db-203">Size of hello **PartitionKey**</span></span> |<span data-ttu-id="0c6db-204">Uma cadeia de cópia de segurança too1 KB de tamanho</span><span class="sxs-lookup"><span data-stu-id="0c6db-204">A string up too1 KB in size</span></span> |
| <span data-ttu-id="0c6db-205">Tamanho de Olá **RowKey**</span><span class="sxs-lookup"><span data-stu-id="0c6db-205">Size of hello **RowKey**</span></span> |<span data-ttu-id="0c6db-206">Uma cadeia de cópia de segurança too1 KB de tamanho</span><span class="sxs-lookup"><span data-stu-id="0c6db-206">A string up too1 KB in size</span></span> |
| <span data-ttu-id="0c6db-207">Tamanho de uma transação de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-207">Size of an Entity Group Transaction</span></span> |<span data-ttu-id="0c6db-208">Uma transação pode incluir um máximo de 100 entidades e payload Olá tem de ser inferior a 4 MB de tamanho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-208">A transaction can include at most 100 entities and hello payload must be less than 4 MB in size.</span></span> <span data-ttu-id="0c6db-209">Uma vez, uma EGT só pode atualizar uma entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-209">An EGT can only update an entity once.</span></span> |

<span data-ttu-id="0c6db-210">Para obter mais informações, consulte [Olá compreender o modelo de dados do serviço tabela](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-210">For more information, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>  

### <a name="cost-considerations"></a><span data-ttu-id="0c6db-211">Considerações sobre o custo</span><span class="sxs-lookup"><span data-stu-id="0c6db-211">Cost considerations</span></span>
<span data-ttu-id="0c6db-212">O Table storage é relativamente barato, mas deve incluir estimativas de custos para ambos os quantidade de utilização e Olá de capacidade de transações como parte da sua avaliação de qualquer solução que utiliza o serviço de tabela Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-212">Table storage is relatively inexpensive, but you should include cost estimates for both capacity usage and hello quantity of transactions as part of your evaluation of any solution that uses hello Table service.</span></span> <span data-ttu-id="0c6db-213">No entanto, muitos cenários de armazenamento de dados duplicados ou denormalized no Olá tooimprove de ordem de desempenho ou escalabilidade da sua solução é tootake uma abordagem válido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-213">However, in many scenarios storing denormalized or duplicate data in order tooimprove hello performance or scalability of your solution is a valid approach tootake.</span></span> <span data-ttu-id="0c6db-214">Para obter mais informações sobre preços, consulte [preços do Storage do Azure](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="0c6db-214">For more information about pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

## <a name="guidelines-for-table-design"></a><span data-ttu-id="0c6db-215">Diretrizes para estruturar tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-215">Guidelines for table design</span></span>
<span data-ttu-id="0c6db-216">Estas listas resumem algumas diretrizes chave Olá que deve ter em consideração quando conceber a sua tabelas e este guia irá resolvê-los todos em mais detalhe posteriormente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-216">These lists summarize some of hello key guidelines you should keep in mind when you are designing your tables, and this guide will address them all in more detail later in.</span></span> <span data-ttu-id="0c6db-217">Estas diretrizes são muito diferentes das diretrizes Olá que normalmente seriam siga para o design da base de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="0c6db-217">These guidelines are very different from hello guidelines you would typically follow for relational database design.</span></span>  

<span data-ttu-id="0c6db-218">Conceber a sua toobe de solução do serviço tabela *ler* eficiente:</span><span class="sxs-lookup"><span data-stu-id="0c6db-218">Designing your Table service solution toobe *read* efficient:</span></span>

* <span data-ttu-id="0c6db-219">***Estrutura de consulta em aplicações pesado de leitura.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-219">***Design for querying in read-heavy applications.***</span></span> <span data-ttu-id="0c6db-220">Ao conceber a sua tabelas, tenha em consideração consultas de Olá (especialmente Olá latência aqueles confidenciais) que será executado antes de pensar sobre como atualizar as entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-220">When you are designing your tables, think about hello queries (especially hello latency sensitive ones) that you will execute before you think about how you will update your entities.</span></span> <span data-ttu-id="0c6db-221">Normalmente, isto resulta numa solução eficiente e performant.</span><span class="sxs-lookup"><span data-stu-id="0c6db-221">This typically results in an efficient and performant solution.</span></span>  
* <span data-ttu-id="0c6db-222">***Especifique PartitionKey e RowKey nas suas consultas.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-222">***Specify both PartitionKey and RowKey in your queries.***</span></span> <span data-ttu-id="0c6db-223">*Ponto de consultas* como estas são consultas de serviço de tabela Olá mais eficientes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-223">*Point queries* such as these are hello most efficient table service queries.</span></span>  
* <span data-ttu-id="0c6db-224">***Considere armazenar cópias duplicadas de entidades.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-224">***Consider storing duplicate copies of entities.***</span></span> <span data-ttu-id="0c6db-225">O Table storage é cheap, por isso, considere armazenar Olá a mesma entidade várias vezes (com chaves diferentes) tooenable consultas mais eficientes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-225">Table storage is cheap so consider storing hello same entity multiple times (with different keys) tooenable more efficient queries.</span></span>  
* <span data-ttu-id="0c6db-226">***Considere denormalizing os seus dados.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-226">***Consider denormalizing your data.***</span></span> <span data-ttu-id="0c6db-227">O Table storage é cheap por isso considere denormalizing os seus dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-227">Table storage is cheap so consider denormalizing your data.</span></span> <span data-ttu-id="0c6db-228">Por exemplo, armazene entidades de resumidas para que as consultas para agregadas dados basta tooaccess uma única entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-228">For example, store summary entities so that queries for aggregate data only need tooaccess a single entity.</span></span>  
* <span data-ttu-id="0c6db-229">***Utilize os valores da chave compostos.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-229">***Use compound key values.***</span></span> <span data-ttu-id="0c6db-230">Olá apenas chaves tiver são **PartitionKey** e **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-230">hello only keys you have are **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="0c6db-231">Por exemplo, utilize os valores da chave composta tooenable acesso codificada alternativo caminhos tooentities.</span><span class="sxs-lookup"><span data-stu-id="0c6db-231">For example, use compound key values tooenable alternate keyed access paths tooentities.</span></span>  
* <span data-ttu-id="0c6db-232">***Utilize projeção da consulta.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-232">***Use query projection.***</span></span> <span data-ttu-id="0c6db-233">Pode reduzir a quantidade de Olá de dados que são transferidos através de rede de Olá através de consultas que selecionar apenas os campos de Olá que precisa.</span><span class="sxs-lookup"><span data-stu-id="0c6db-233">You can reduce hello amount of data that you transfer over hello network by using queries that select just hello fields you need.</span></span>  

<span data-ttu-id="0c6db-234">Conceber a sua toobe de solução do serviço tabela *escrever* eficiente:</span><span class="sxs-lookup"><span data-stu-id="0c6db-234">Designing your Table service solution toobe *write* efficient:</span></span>  

* <span data-ttu-id="0c6db-235">***Não crie partições frequente.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-235">***Do not create hot partitions.***</span></span> <span data-ttu-id="0c6db-236">Escolha chaves que lhe permitem toospread os pedidos entre várias partições em qualquer ponto de tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-236">Choose keys that enable you toospread your requests across multiple partitions at any point of time.</span></span>  
* <span data-ttu-id="0c6db-237">***Evite picos de tráfego.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-237">***Avoid spikes in traffic.***</span></span> <span data-ttu-id="0c6db-238">Uniforme tráfego Olá durante um período de tempo razoável e evitar picos de tráfego.</span><span class="sxs-lookup"><span data-stu-id="0c6db-238">Smooth hello traffic over a reasonable period of time and avoid spikes in traffic.</span></span>
* <span data-ttu-id="0c6db-239">***Necessariamente não crie uma tabela separada para cada tipo de entidade.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-239">***Don't necessarily create a separate table for each type of entity.***</span></span> <span data-ttu-id="0c6db-240">Quando necessitar de transações atómicas em tipos de entidade, pode armazenar estes vários tipos de entidade no Olá mesma partição no Olá mesma tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-240">When you require atomic transactions across entity types, you can store these multiple entity types in hello same partition in hello same table.</span></span>
* <span data-ttu-id="0c6db-241">***Considere tem alcançar o débito máximo Olá.***</span><span class="sxs-lookup"><span data-stu-id="0c6db-241">***Consider hello maximum throughput you must achieve.***</span></span> <span data-ttu-id="0c6db-242">Tem de ter em consideração os objetivos de escalabilidade Olá para Olá serviço tabela e certifique-se de que a estrutura não fará com que tooexceed-los.</span><span class="sxs-lookup"><span data-stu-id="0c6db-242">You must be aware of hello scalability targets for hello Table service and ensure that your design will not cause you tooexceed them.</span></span>  

<span data-ttu-id="0c6db-243">Como ler este guia, irá ver exemplos que colocar todos estes princípios em prática.</span><span class="sxs-lookup"><span data-stu-id="0c6db-243">As you read this guide, you will see examples that put all of these principles into practice.</span></span>  

## <a name="design-for-querying"></a><span data-ttu-id="0c6db-244">Conceção para consultas</span><span class="sxs-lookup"><span data-stu-id="0c6db-244">Design for querying</span></span>
<span data-ttu-id="0c6db-245">Soluções de serviço tabela podem ser lidos intensiva, intensiva de escrita ou uma combinação de Olá dois.</span><span class="sxs-lookup"><span data-stu-id="0c6db-245">Table service solutions may be read intensive, write intensive, or a mix of hello two.</span></span> <span data-ttu-id="0c6db-246">Esta secção centra-se no Olá coisas toobear em consideração quando conceber a sua toosupport de serviço tabela operações de leitura de forma eficiente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-246">This section focuses on hello things toobear in mind when you are designing your Table service toosupport read operations efficiently.</span></span> <span data-ttu-id="0c6db-247">Normalmente, também é eficiente para operações de escrita de uma estrutura que suporta operações de leitura de forma eficiente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-247">Typically, a design that supports read operations efficiently is also efficient for write operations.</span></span> <span data-ttu-id="0c6db-248">No entanto, existem considerações adicionais toobear em consideração quando conceber toosupport escrever operações, abordadas na secção seguinte Olá, [Design de modificação de dados](#design-for-data-modification).</span><span class="sxs-lookup"><span data-stu-id="0c6db-248">However, there are additional considerations toobear in mind when designing toosupport write operations, discussed in hello next section, [Design for data modification](#design-for-data-modification).</span></span>

<span data-ttu-id="0c6db-249">Um ponto de partida para estruturar a sua tooenable de solução do serviço tabela tooread dados eficiente são tooask "que consultas serão a minha aplicação necessidade tooexecute tooretrieve Olá dados de que necessita de Olá serviço tabela?"</span><span class="sxs-lookup"><span data-stu-id="0c6db-249">A good starting point for designing your Table service solution tooenable you tooread data efficiently is tooask "What queries will my application need tooexecute tooretrieve hello data it needs from hello Table service?"</span></span>  

> [!NOTE]
> <span data-ttu-id="0c6db-250">Com o serviço tabela Olá, é importante tooget Olá design correto adiantado porque é difícil e dispendiosa toochange-lo mais tarde.</span><span class="sxs-lookup"><span data-stu-id="0c6db-250">With hello Table service, it's important tooget hello design correct up front because it's difficult and expensive toochange it later.</span></span> <span data-ttu-id="0c6db-251">Por exemplo, numa base de dados relacional é, muitas vezes, tooaddress possíveis problemas de desempenho adicionando simplesmente índices da base de dados existente tooan: não é uma opção com Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-251">For example, in a relational database it's often possible tooaddress performance issues simply by adding indexes tooan existing database: this is not an option with hello Table service.</span></span>  
> 
> 

<span data-ttu-id="0c6db-252">Esta secção centra-se nos problemas-chave Olá que devem ser abordadas ao conceber as tabelas para consultas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-252">This section focuses on hello key issues you must address when you design your tables for querying.</span></span> <span data-ttu-id="0c6db-253">tópicos de Olá abrangidos nesta secção incluem:</span><span class="sxs-lookup"><span data-stu-id="0c6db-253">hello topics covered in this section include:</span></span>

* [<span data-ttu-id="0c6db-254">Como à sua escolha de PartitionKey e RowKey tem impacto no desempenho das consultas</span><span class="sxs-lookup"><span data-stu-id="0c6db-254">How your choice of PartitionKey and RowKey impacts query performance</span></span>](#how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance)
* [<span data-ttu-id="0c6db-255">Escolher um PartitionKey adequado</span><span class="sxs-lookup"><span data-stu-id="0c6db-255">Choosing an appropriate PartitionKey</span></span>](#choosing-an-appropriate-partitionkey)
* [<span data-ttu-id="0c6db-256">Otimizar as consultas para Olá serviço tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-256">Optimizing queries for hello Table service</span></span>](#optimizing-queries-for-the-table-service)
* [<span data-ttu-id="0c6db-257">Ordenação de dados no Olá serviço tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-257">Sorting data in hello Table service</span></span>](#sorting-data-in-the-table-service)

### <a name="how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance"></a><span data-ttu-id="0c6db-258">Como à sua escolha de PartitionKey e RowKey tem impacto no desempenho das consultas</span><span class="sxs-lookup"><span data-stu-id="0c6db-258">How your choice of PartitionKey and RowKey impacts query performance</span></span>
<span data-ttu-id="0c6db-259">Olá exemplos seguintes partem do princípio de serviço de tabela Olá é o armazenamento de entidades de empregado com Olá seguir a estrutura (maioria dos exemplos de Olá omitir Olá **Timestamp** propriedade para efeitos de clareza):</span><span class="sxs-lookup"><span data-stu-id="0c6db-259">hello following examples assume hello table service is storing employee entities with hello following structure (most of hello examples omit hello **Timestamp** property for clarity):</span></span>  

| <span data-ttu-id="0c6db-260">*Nome da coluna*</span><span class="sxs-lookup"><span data-stu-id="0c6db-260">*Column name*</span></span> | <span data-ttu-id="0c6db-261">*Tipo de dados*</span><span class="sxs-lookup"><span data-stu-id="0c6db-261">*Data type*</span></span> |
| --- | --- |
| <span data-ttu-id="0c6db-262">**PartitionKey** (nome do departamento de)</span><span class="sxs-lookup"><span data-stu-id="0c6db-262">**PartitionKey** (Department Name)</span></span> |<span data-ttu-id="0c6db-263">Cadeia</span><span class="sxs-lookup"><span data-stu-id="0c6db-263">String</span></span> |
| <span data-ttu-id="0c6db-264">**RowKey** (Id de empregado)</span><span class="sxs-lookup"><span data-stu-id="0c6db-264">**RowKey** (Employee Id)</span></span> |<span data-ttu-id="0c6db-265">Cadeia</span><span class="sxs-lookup"><span data-stu-id="0c6db-265">String</span></span> |
| <span data-ttu-id="0c6db-266">**Nome próprio**</span><span class="sxs-lookup"><span data-stu-id="0c6db-266">**FirstName**</span></span> |<span data-ttu-id="0c6db-267">Cadeia</span><span class="sxs-lookup"><span data-stu-id="0c6db-267">String</span></span> |
| <span data-ttu-id="0c6db-268">**Apelido**</span><span class="sxs-lookup"><span data-stu-id="0c6db-268">**LastName**</span></span> |<span data-ttu-id="0c6db-269">Cadeia</span><span class="sxs-lookup"><span data-stu-id="0c6db-269">String</span></span> |
| <span data-ttu-id="0c6db-270">**Idade**</span><span class="sxs-lookup"><span data-stu-id="0c6db-270">**Age**</span></span> |<span data-ttu-id="0c6db-271">Número inteiro</span><span class="sxs-lookup"><span data-stu-id="0c6db-271">Integer</span></span> |
| <span data-ttu-id="0c6db-272">**Endereço de correio eletrónico**</span><span class="sxs-lookup"><span data-stu-id="0c6db-272">**EmailAddress**</span></span> |<span data-ttu-id="0c6db-273">Cadeia</span><span class="sxs-lookup"><span data-stu-id="0c6db-273">String</span></span> |

<span data-ttu-id="0c6db-274">Olá secção anterior [descrição geral do serviço de Azure Table](#overview) descreve algumas das Olá as principais funcionalidades de Olá serviço tabela do Azure que tenham uma influência direta na conceção para a consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-274">hello earlier section [Azure Table service overview](#overview) describes some of hello key features of hello Azure Table service that have a direct influence on designing for query.</span></span> <span data-ttu-id="0c6db-275">Estes resultam em Olá seguintes diretrizes gerais para conceber consultas do serviço de tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-275">These result in hello following general guidelines for designing Table service queries.</span></span> <span data-ttu-id="0c6db-276">Tenha em atenção que a sintaxe de filtro de Olá utilizado nos exemplos de Olá abaixo é de Olá tabela REST API do serviço, para obter mais informações, consulte [entidades de consulta](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-276">Note that hello filter syntax used in hello examples below is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

* <span data-ttu-id="0c6db-277">A ***ponto consulta*** é Olá toouse de pesquisa mais eficiente e é recomendada toobe utilizado para pesquisas de elevado volume ou pesquisas que necessitam de latência mais baixa.</span><span class="sxs-lookup"><span data-stu-id="0c6db-277">A ***Point Query*** is hello most efficient lookup toouse and is recommended toobe used for high-volume lookups or lookups requiring lowest latency.</span></span> <span data-ttu-id="0c6db-278">Este tipo uma consulta pode utilizar Olá índices toolocate uma entidade individuais forma muito eficiente, especificando ambos Olá **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-278">Such a query can use hello indexes toolocate an individual entity very efficiently by specifying both hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-279">Por exemplo: $filter = (PartitionKey eq 'Vendas') e (RowKey eq '2')</span><span class="sxs-lookup"><span data-stu-id="0c6db-279">For example: $filter=(PartitionKey eq 'Sales') and (RowKey eq '2')</span></span>  
* <span data-ttu-id="0c6db-280">Segundo melhor é um ***intervalo de consulta*** que utiliza Olá **PartitionKey** e os filtros num intervalo de **RowKey** valores tooreturn mais de uma entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-280">Second best is a ***Range Query*** that uses hello **PartitionKey** and filters on a range of **RowKey** values tooreturn more than one entity.</span></span> <span data-ttu-id="0c6db-281">Olá **PartitionKey** valor identifica uma partição específica e Olá **RowKey** valores identificam um subconjunto de Olá as entidades dessa partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-281">hello **PartitionKey** value identifies a specific partition, and hello **RowKey** values identify a subset of hello entities in that partition.</span></span> <span data-ttu-id="0c6db-282">Por exemplo: $filter = PartitionKey eq 'Dos vendas e do RowKey ge' e RowKey lt possível '</span><span class="sxs-lookup"><span data-stu-id="0c6db-282">For example: $filter=PartitionKey eq 'Sales' and RowKey ge 'S' and RowKey lt 'T'</span></span>  
* <span data-ttu-id="0c6db-283">É melhor terceiro um ***partição analisar*** que utiliza Olá **PartitionKey** e filtros e que a outra propriedade de chave não podem devolver mais de uma entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-283">Third best is a ***Partition Scan*** that uses hello **PartitionKey** and filters on another non-key property and that may return more than one entity.</span></span> <span data-ttu-id="0c6db-284">Olá **PartitionKey** valor identifica uma partição específica, e selecione para um subconjunto de entidades de Olá na partição de que os valores de propriedade de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-284">hello **PartitionKey** value identifies a specific partition, and hello property values select for a subset of hello entities in that partition.</span></span> <span data-ttu-id="0c6db-285">Por exemplo: $filter = PartitionKey eq 'Vendas' e LastName eq 'Santos'</span><span class="sxs-lookup"><span data-stu-id="0c6db-285">For example: $filter=PartitionKey eq 'Sales' and LastName eq 'Smith'</span></span>  
* <span data-ttu-id="0c6db-286">A ***tabela analisar*** não inclui Olá **PartitionKey** e é muito ineficaz porque este procura todas as partições de Olá que compõem a sua tabela por sua vez para qualquer entidades correspondentes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-286">A ***Table Scan*** does not include hello **PartitionKey** and is very inefficient because it searches all of hello partitions that make up your table in turn for any matching entities.</span></span> <span data-ttu-id="0c6db-287">A operação executará uma análise da tabela, independentemente se o filtro utiliza Olá **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-287">It will perform a table scan regardless of whether or not your filter uses hello **RowKey**.</span></span> <span data-ttu-id="0c6db-288">Por exemplo: $filter = LastName eq 'Jones'</span><span class="sxs-lookup"><span data-stu-id="0c6db-288">For example: $filter=LastName eq 'Jones'</span></span>  
* <span data-ttu-id="0c6db-289">As consultas que devolvem várias entidades devolvem-las ordenados **PartitionKey** e **RowKey** ordem.</span><span class="sxs-lookup"><span data-stu-id="0c6db-289">Queries that return multiple entities return them sorted in **PartitionKey** and **RowKey** order.</span></span> <span data-ttu-id="0c6db-290">entidades Olá resorting tooavoid no cliente Olá, escolha um **RowKey** que define a sequência de ordenação Olá mais comuns.</span><span class="sxs-lookup"><span data-stu-id="0c6db-290">tooavoid resorting hello entities in hello client, choose a **RowKey** that defines hello most common sort order.</span></span>  

<span data-ttu-id="0c6db-291">Tenha em atenção que utilizar um "**ou**" toospecify um filtro com base no **RowKey** valores resultados de uma análise de partição e não é tratado como uma consulta de intervalo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-291">Note that using an "**or**" toospecify a filter based on **RowKey** values results in a partition scan and is not treated as a range query.</span></span> <span data-ttu-id="0c6db-292">Por conseguinte, deve evitar consultas que utilizam os filtros, tais como: $filter = PartitionKey eq 'Vendas' e (RowKey eq '121' ou RowKey eq '322')</span><span class="sxs-lookup"><span data-stu-id="0c6db-292">Therefore, you should avoid queries that use filters such as: $filter=PartitionKey eq 'Sales' and (RowKey eq '121' or RowKey eq '322')</span></span>  

<span data-ttu-id="0c6db-293">Para obter exemplos de código do lado do cliente que utilizam Olá biblioteca de clientes de armazenamento tooexecute eficiente consultas, consulte:</span><span class="sxs-lookup"><span data-stu-id="0c6db-293">For examples of client-side code that use hello Storage Client Library tooexecute efficient queries, see:</span></span>  

* [<span data-ttu-id="0c6db-294">Executar uma consulta de ponto utilizando Olá biblioteca de clientes de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-294">Executing a point query using hello Storage Client Library</span></span>](#executing-a-point-query-using-the-storage-client-library)
* [<span data-ttu-id="0c6db-295">A obter várias entidades com LINQ</span><span class="sxs-lookup"><span data-stu-id="0c6db-295">Retrieving multiple entities using LINQ</span></span>](#retrieving-multiple-entities-using-linq)
* [<span data-ttu-id="0c6db-296">Projecção do lado do servidor</span><span class="sxs-lookup"><span data-stu-id="0c6db-296">Server-side projection</span></span>](#server-side-projection)  

<span data-ttu-id="0c6db-297">Para obter exemplos de código do lado do cliente que pode processar vários entidade tipos armazenados no Olá mesma tabela, consulte:</span><span class="sxs-lookup"><span data-stu-id="0c6db-297">For examples of client-side code that can handle multiple entity types stored in hello same table, see:</span></span>  

* [<span data-ttu-id="0c6db-298">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-298">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="choosing-an-appropriate-partitionkey"></a><span data-ttu-id="0c6db-299">Escolher um PartitionKey adequado</span><span class="sxs-lookup"><span data-stu-id="0c6db-299">Choosing an appropriate PartitionKey</span></span>
<span data-ttu-id="0c6db-300">À sua escolha de **PartitionKey** deve balancear Olá necessidade tooenables Olá utilização EGTs (consistência do tooensure) contra Olá requisito toodistribute as entidades de várias partições (tooensure uma solução dimensionável).</span><span class="sxs-lookup"><span data-stu-id="0c6db-300">Your choice of **PartitionKey** should balance hello need tooenables hello use of EGTs (tooensure consistency) against hello requirement toodistribute your entities across multiple partitions (tooensure a scalable solution).</span></span>  

<span data-ttu-id="0c6db-301">Num Alpine, pode armazenar todas as entidades numa partição única, mas isto pode limitar a escalabilidade de Olá da sua solução e seria impedem serviço de tabela Olá balancear tooload capaz de pedidos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-301">At one extreme, you could store all your entities in a single partition, but this may limit hello scalability of your solution and would prevent hello table service from being able tooload-balance requests.</span></span> <span data-ttu-id="0c6db-302">Em Olá outro Alpine, pode armazenar uma entidade por partição, que seria altamente dimensionável e que lhe permite pedidos de tooload saldo de serviços de tabela Olá, mas que iria impedi-lo da utilização de transações do grupo de entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-302">At hello other extreme, you could store one entity per partition, which would be highly scalable and which enables hello table service tooload-balance requests, but which would prevent you from using entity group transactions.</span></span>  

<span data-ttu-id="0c6db-303">Um ideal **PartitionKey** é aquele que lhe permite consultas eficiente toouse e que tem suficiente partições tooensure sua solução é dimensionável.</span><span class="sxs-lookup"><span data-stu-id="0c6db-303">An ideal **PartitionKey** is one that enables you toouse efficient queries and that has sufficient partitions tooensure your solution is scalable.</span></span> <span data-ttu-id="0c6db-304">Normalmente, irá encontrar que as entidades terão uma propriedade adequada que distribui as entidades partições suficientes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-304">Typically, you will find that your entities will have a suitable property that distributes your entities across sufficient partitions.</span></span>

> [!NOTE]
> <span data-ttu-id="0c6db-305">Por exemplo, um sistema que armazena informações sobre os utilizadores ou os funcionários, UserID pode ser uma boa PartitionKey.</span><span class="sxs-lookup"><span data-stu-id="0c6db-305">For example, in a system that stores information about users or employees, UserID may be a good PartitionKey.</span></span> <span data-ttu-id="0c6db-306">Pode ter várias entidades que utilizam um ID de utilizador especificado como chave de partição Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-306">You may have several entities that use a given UserID as hello partition key.</span></span> <span data-ttu-id="0c6db-307">Cada entidade que armazena dados sobre um utilizador se encontra agrupada para uma única partição e, por isso, estas entidades estão acessíveis através de transações do grupo de entidade, enquanto altamente dimensionável.</span><span class="sxs-lookup"><span data-stu-id="0c6db-307">Each entity that stores data about a user is grouped into a single partition, and so these entities are accessible via entity group transactions, while still being highly scalable.</span></span>
> 
> 

<span data-ttu-id="0c6db-308">Existem considerações adicionais na sua escolha de **PartitionKey** relacionadas com toohow irá inserir, atualizar e eliminar entidades: consulte a secção de Olá [Design de modificação de dados](#design-for-data-modification) abaixo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-308">There are additional considerations in your choice of **PartitionKey** that relate toohow you will insert, update, and delete entities: see hello section [Design for data modification](#design-for-data-modification) below.</span></span>  

### <a name="optimizing-queries-for-hello-table-service"></a><span data-ttu-id="0c6db-309">Otimizar as consultas para Olá serviço tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-309">Optimizing queries for hello Table service</span></span>
<span data-ttu-id="0c6db-310">Olá serviço tabela indexa automaticamente os seus entidades utilizando Olá **PartitionKey** e **RowKey** valores de um índice em cluster único, por conseguinte, Olá razão que o ponto consultas são Olá toouse mais eficiente .</span><span class="sxs-lookup"><span data-stu-id="0c6db-310">hello Table service automatically indexes your entities using hello **PartitionKey** and **RowKey** values in a single clustered index, hence hello reason that point queries are hello most efficient toouse.</span></span> <span data-ttu-id="0c6db-311">No entanto, não existem nenhum índices diferente que no índice em cluster do Olá na Olá **PartitionKey** e **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-311">However, there are no indexes other than that on hello clustered index on hello **PartitionKey** and **RowKey**.</span></span>

<span data-ttu-id="0c6db-312">Muitas estruturas têm de cumprir pesquisa de tooenable requisitos de entidades com base em vários critérios.</span><span class="sxs-lookup"><span data-stu-id="0c6db-312">Many designs must meet requirements tooenable lookup of entities based on multiple criteria.</span></span> <span data-ttu-id="0c6db-313">Por exemplo, localizar entidades de empregado com base no correio eletrónico, id de empregado ou apelido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-313">For example, locating employee entities based on email, employee id, or last name.</span></span> <span data-ttu-id="0c6db-314">Olá seguintes padrões na secção de Olá [padrões de conceção de tabela](#table-design-patterns) endereço estes tipos de requisito e descrevem formas de trabalhar em torno do facto de Olá que o serviço de tabela Olá fornecem índices secundários:</span><span class="sxs-lookup"><span data-stu-id="0c6db-314">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address these types of requirement and describe ways of working around hello fact that hello Table service does not provide secondary indexes:</span></span>  

* <span data-ttu-id="0c6db-315">[Padrão de índice secundário intra partição](#intra-partition-secondary-index-pattern) -armazenar várias cópias de cada entidade utilizando diferentes **RowKey** valores (no Olá mesma partição) tooenable rápidos e eficientes pesquisas e ordenação alternada ordena utilizando diferentes **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-315">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="0c6db-316">[Padrão de índice secundário partição entre](#inter-partition-secondary-index-pattern) - armazenar várias cópias de cada entidade com diferentes valores de RowKey em partições separadas ou em tabelas separadas tooenable rápido e eficiente pesquisas e ordenação alternada ordena utilizando diferentes**RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-316">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="0c6db-317">[Padrão de entidades do índice](#index-entities-pattern) -manter índice entidades tooenable eficiente pesquisas que devolvem apresenta uma lista de entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-317">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

### <a name="sorting-data-in-hello-table-service"></a><span data-ttu-id="0c6db-318">Ordenação de dados no Olá serviço tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-318">Sorting data in hello Table service</span></span>
<span data-ttu-id="0c6db-319">Olá serviço tabela devolve entidades ordenadas por ordem, com base no ascendente **PartitionKey** e, em seguida, **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-319">hello Table service returns entities sorted in ascending order based on **PartitionKey** and then by **RowKey**.</span></span> <span data-ttu-id="0c6db-320">Estas chaves são valores de cadeia e tooensure valores numéricos ordenar corretamente, deverá convertê-los comprimento tooa fixo e preenche-as com zeros.</span><span class="sxs-lookup"><span data-stu-id="0c6db-320">These keys are string values and tooensure that numeric values sort correctly, you should convert them tooa fixed length and pad them with zeroes.</span></span> <span data-ttu-id="0c6db-321">Por exemplo, se hello valor de id de empregado utilizar como Olá **RowKey** é um valor de número inteiro, deve converter id de empregado **123** demasiado**00000123**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-321">For example, if hello employee id value you use as hello **RowKey** is an integer value, you should convert employee id **123** too**00000123**.</span></span>  

<span data-ttu-id="0c6db-322">Muitas aplicações têm requisitos toouse dados ordenados as ordens de diferentes: por exemplo, ordenação dos empregados pelo nome ou ao associar data.</span><span class="sxs-lookup"><span data-stu-id="0c6db-322">Many applications have requirements toouse data sorted in different orders: for example, sorting employees by name, or by joining date.</span></span> <span data-ttu-id="0c6db-323">Olá seguintes padrões na secção de Olá [padrões de conceção de tabela](#table-design-patterns) como tooalternate ordenação ordena para as entidades de endereços:</span><span class="sxs-lookup"><span data-stu-id="0c6db-323">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address how tooalternate sort orders for your entities:</span></span>  

* <span data-ttu-id="0c6db-324">[Padrão de índice secundário intra partição](#intra-partition-secondary-index-pattern) -armazenar várias cópias de cada entidade com diferentes valores de RowKey (no Olá mesma partição) tooenable rápidos e eficientes pesquisas e ordenação alternada ordena utilizando valores RowKey diferentes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-324">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>  
* <span data-ttu-id="0c6db-325">[Padrão de índice secundário partição entre](#inter-partition-secondary-index-pattern) - armazenar várias cópias de cada entidade com diferentes valores de RowKey em separado partições em tabelas separadas tooenable rápido e eficiente pesquisas e ordenação alternada ordena utilizando RowKey diferentes valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-325">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions in separate tables tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>
* <span data-ttu-id="0c6db-326">[Padrão de seguimento de registo](#log-tail-pattern) -obter Olá  *n*  entidades recentemente adicionado tooa partição utilizando um **RowKey** valor ordena na data inversa e ordem de tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-326">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="design-for-data-modification"></a><span data-ttu-id="0c6db-327">Estrutura de modificação de dados</span><span class="sxs-lookup"><span data-stu-id="0c6db-327">Design for data modification</span></span>
<span data-ttu-id="0c6db-328">Esta secção centra-se em considerações de design Olá para otimizar as introduções, atualizações e elimina.</span><span class="sxs-lookup"><span data-stu-id="0c6db-328">This section focuses on hello design considerations for optimizing inserts, updates, and deletes.</span></span> <span data-ttu-id="0c6db-329">Em alguns casos, terá de compromisso de Olá tooevaluate entre estruturas otimizar para consulta contra estruturas otimizar a modificação de dados tal como o que fazer em estruturas de bases de dados relacionais (embora técnicas Olá para gerir Olá design compromissos são diferentes numa base de dados relacional).</span><span class="sxs-lookup"><span data-stu-id="0c6db-329">In some cases, you will need tooevaluate hello trade-off between designs that optimize for querying against designs that optimize for data modification just as you do in designs for relational databases (although hello techniques for managing hello design trade-offs are different in a relational database).</span></span> <span data-ttu-id="0c6db-330">Olá secção [padrões de conceção de tabela](#table-design-patterns) descreve alguns padrões de conceção de detalhado para Olá serviço tabela e realça algumas destas compromissos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-330">hello section [Table Design Patterns](#table-design-patterns) describes some detailed design patterns for hello Table service and highlights some these trade-offs.</span></span> <span data-ttu-id="0c6db-331">Na prática, irá encontrar que muitas estruturas otimizadas para consultar entidades também funcionam bem para modificar as entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-331">In practice, you will find that many designs optimized for querying entities also work well for modifying entities.</span></span>  

### <a name="optimizing-hello-performance-of-insert-update-and-delete-operations"></a><span data-ttu-id="0c6db-332">Otimizar o desempenho de Olá de inserção, atualização e eliminação de operações</span><span class="sxs-lookup"><span data-stu-id="0c6db-332">Optimizing hello performance of insert, update, and delete operations</span></span>
<span data-ttu-id="0c6db-333">tooupdate ou eliminar uma entidade, tem de ser capaz de tooidentify-lo utilizando Olá **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-333">tooupdate or delete an entity, you must be able tooidentify it by using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-334">No que esta respeita, à sua escolha de **PartitionKey** e **RowKey** para modificar as entidades deve seguir semelhante toosupport de escolha de tooyour critérios ponto consultas porque pretende tooidentify entidades como eficientemente possível.</span><span class="sxs-lookup"><span data-stu-id="0c6db-334">In this respect, your choice of **PartitionKey** and **RowKey** for modifying entities should follow similar criteria tooyour choice toosupport point queries because you want tooidentify entities as efficiently as possible.</span></span> <span data-ttu-id="0c6db-335">Não pretende toouse um ineficaz partição ou tabela análise toolocate uma entidade em Olá toodiscover de ordem **PartitionKey** e **RowKey** valores necessário tooupdate ou eliminá-lo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-335">You do not want toouse an inefficient partition or table scan toolocate an entity in order toodiscover hello **PartitionKey** and **RowKey** values you need tooupdate or delete it.</span></span>  

<span data-ttu-id="0c6db-336">Olá seguintes padrões na secção de Olá [padrões de conceção de tabela](#table-design-patterns) endereços otimizar o desempenho de Olá ou a inserção, atualização e operações de eliminação:</span><span class="sxs-lookup"><span data-stu-id="0c6db-336">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address optimizing hello performance or your insert, update, and delete operations:</span></span>  

* <span data-ttu-id="0c6db-337">[Um volume elevado eliminar padrão](#high-volume-delete-pattern) -ativar a eliminação de Olá de um grande volume de entidades armazenando todas as entidades de Olá para eliminação em simultâneo na sua própria tabela separada; eliminar entidades Olá, eliminando tabela Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-337">[High volume delete pattern](#high-volume-delete-pattern) - Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  
* <span data-ttu-id="0c6db-338">[Padrão de séries de dados](#data-series-pattern) -série de dados completa de loja uma única entidade toominimize Olá diversas pedidos que efetuar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-338">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  
* <span data-ttu-id="0c6db-339">[Padrão de entidades Wide](#wide-entities-pattern) -utilizar várias entidades lógico de toostore entidades físicas com mais do que 252 propriedades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-339">[Wide entities pattern](#wide-entities-pattern) - Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  
* <span data-ttu-id="0c6db-340">[Padrão de entidades grandes](#large-entities-pattern) -valores de propriedade grande de toostore de armazenamento de BLOBs de utilização.</span><span class="sxs-lookup"><span data-stu-id="0c6db-340">[Large entities pattern](#large-entities-pattern) - Use blob storage toostore large property values.</span></span>  

### <a name="ensuring-consistency-in-your-stored-entities"></a><span data-ttu-id="0c6db-341">Garantir a consistência no seu entidades armazenadas</span><span class="sxs-lookup"><span data-stu-id="0c6db-341">Ensuring consistency in your stored entities</span></span>
<span data-ttu-id="0c6db-342">Olá outro fator chave que influencia à sua escolha de chaves para otimizar as modificações de dados é como tooensure consistência utilizando transações atomic.</span><span class="sxs-lookup"><span data-stu-id="0c6db-342">hello other key factor that influences your choice of keys for optimizing data modifications is how tooensure consistency by using atomic transactions.</span></span> <span data-ttu-id="0c6db-343">Só pode utilizar um toooperate EGT no entidades armazenadas no Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-343">You can only use an EGT toooperate on entities stored in hello same partition.</span></span>  

<span data-ttu-id="0c6db-344">Olá seguintes padrões na secção de Olá [padrões de conceção de tabela](#table-design-patterns) endereço gerir consistência:</span><span class="sxs-lookup"><span data-stu-id="0c6db-344">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address managing consistency:</span></span>  

* <span data-ttu-id="0c6db-345">[Padrão de índice secundário intra partição](#intra-partition-secondary-index-pattern) -armazenar várias cópias de cada entidade utilizando diferentes **RowKey** valores (no Olá mesma partição) tooenable rápidos e eficientes pesquisas e ordenação alternada ordena utilizando diferentes **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-345">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="0c6db-346">[Padrão de índice secundário partição entre](#inter-partition-secondary-index-pattern) - armazenar várias cópias de cada entidade com diferentes valores de RowKey em partições separadas ou em tabelas separadas tooenable rápido e eficiente pesquisas e ordenação alternada ordena utilizando diferentes**RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-346">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="0c6db-347">[Padrão de transações eventualmente consistente](#eventually-consistent-transactions-pattern) -ativar o comportamento eventualmente consistente em limites de partição ou limites de sistema de armazenamento ao utilizar as filas do Azure.</span><span class="sxs-lookup"><span data-stu-id="0c6db-347">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) - Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>
* <span data-ttu-id="0c6db-348">[Padrão de entidades do índice](#index-entities-pattern) -manter índice entidades tooenable eficiente pesquisas que devolvem apresenta uma lista de entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-348">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  
* <span data-ttu-id="0c6db-349">[Padrão de denormalization](#denormalization-pattern) -combinar dados relacionados com o em conjunto na tooenable única entidade tooretrieve Olá todos os dados que precisa com uma ponto único de consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-349">[Denormalization pattern](#denormalization-pattern) - Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  
* <span data-ttu-id="0c6db-350">[Padrão de séries de dados](#data-series-pattern) -série de dados completa de loja uma única entidade toominimize Olá diversas pedidos que efetuar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-350">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

<span data-ttu-id="0c6db-351">Para obter informações sobre transações do grupo de entidade, consulte a secção de Olá [entidade grupo transações](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="0c6db-351">For information about entity group transactions, see hello section [Entity Group Transactions](#entity-group-transactions).</span></span>  

### <a name="ensuring-your-design-for-efficient-modifications-facilitates-efficient-queries"></a><span data-ttu-id="0c6db-352">Garantir a estrutura para que as modificações eficiente facilita eficiente consultas</span><span class="sxs-lookup"><span data-stu-id="0c6db-352">Ensuring your design for efficient modifications facilitates efficient queries</span></span>
<span data-ttu-id="0c6db-353">Em muitos casos, uma estrutura eficaz resulta consultas em modificações eficiente, mas deve sempre avaliar se este for o caso de Olá para o seu cenário específico.</span><span class="sxs-lookup"><span data-stu-id="0c6db-353">In many cases, a design for efficient querying results in efficient modifications, but you should always evaluate whether this is hello case for your specific scenario.</span></span> <span data-ttu-id="0c6db-354">Alguns dos padrões de Olá na secção de Olá [padrões de conceção de tabela](#table-design-patterns) explicitamente avaliar compromissos entre consultas e modificar as entidades e, sempre deve ter em conta Olá diversas cada tipo de operação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-354">Some of hello patterns in hello section [Table Design Patterns](#table-design-patterns) explicitly evaluate trade-offs between querying and modifying entities, and you should always take into account hello number of each type of operation.</span></span>  

<span data-ttu-id="0c6db-355">Olá seguintes padrões na secção de Olá [padrões de conceção de tabela](#table-design-patterns) compromissos entre conceber consultas eficiente e estruturar para modificação de dados eficiente de endereços:</span><span class="sxs-lookup"><span data-stu-id="0c6db-355">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address trade-offs between designing for efficient queries and designing for efficient data modification:</span></span>  

* <span data-ttu-id="0c6db-356">[Padrão de chave composta](#compound-key-pattern) -utilização composta **RowKey** valores tooenable toolookup um cliente relacionadas com a dados com um ponto único de consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-356">[Compound key pattern](#compound-key-pattern) - Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  
* <span data-ttu-id="0c6db-357">[Padrão de seguimento de registo](#log-tail-pattern) -obter Olá  *n*  entidades recentemente adicionado tooa partição utilizando um **RowKey** valor ordena na data inversa e ordem de tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-357">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="encrypting-table-data"></a><span data-ttu-id="0c6db-358">Encriptar dados da tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-358">Encrypting Table Data</span></span>
<span data-ttu-id="0c6db-359">Olá biblioteca de clientes de armazenamento de Azure .NET suporta a encriptação de propriedades de entidade para inserção da cadeia e substitua operações.</span><span class="sxs-lookup"><span data-stu-id="0c6db-359">hello .NET Azure Storage Client Library supports encryption of string entity properties for insert and replace operations.</span></span> <span data-ttu-id="0c6db-360">cadeias de Olá encriptado são armazenadas no serviço de Olá como propriedades binárias e estes são convertidos toostrings anterior depois de desencriptação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-360">hello encrypted strings are stored on hello service as binary properties, and they are converted back toostrings after decryption.</span></span>    

<span data-ttu-id="0c6db-361">Para as tabelas, além disso toohello política de encriptação, os utilizadores tem de especificar Olá propriedades toobe encriptado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-361">For tables, in addition toohello encryption policy, users must specify hello properties toobe encrypted.</span></span> <span data-ttu-id="0c6db-362">Pode fazê-lo especificando a um atributo [EncryptProperty] (para entidades POCO que derivem de TableEntity) ou um resolvedor de encriptação nas opções de pedido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-362">This can be done by either specifying an [EncryptProperty] attribute (for POCO entities that derive from TableEntity) or an encryption resolver in request options.</span></span> <span data-ttu-id="0c6db-363">Um resolvedor de encriptação é um delegado que utiliza uma chave de partição, chave de linha e nome de propriedade e devolve um valor boleano que indica se essa propriedade deve ser encriptada.</span><span class="sxs-lookup"><span data-stu-id="0c6db-363">An encryption resolver is a delegate that takes a partition key, row key, and property name and returns a Boolean that indicates whether that property should be encrypted.</span></span> <span data-ttu-id="0c6db-364">Durante a encriptação, a biblioteca de clientes do Olá irá utilizar este toodecide informações se uma propriedade deve ser encriptada durante a escrita toohello durante a transmissão.</span><span class="sxs-lookup"><span data-stu-id="0c6db-364">During encryption, hello client library will use this information toodecide whether a property should be encrypted while writing toohello wire.</span></span> <span data-ttu-id="0c6db-365">Também fornece delegado Olá para a possibilidade de Olá da lógica em torno da forma como as propriedades são encriptadas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-365">hello delegate also provides for hello possibility of logic around how properties are encrypted.</span></span> <span data-ttu-id="0c6db-366">(Por exemplo, se X, então encriptar propriedade um; caso contrário, encriptar propriedades A e B.) Tenha em atenção que é necessário não tooprovide estas informações ao ler ou consultar entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-366">(For example, if X, then encrypt property A; otherwise encrypt properties A and B.) Note that it is not necessary tooprovide this information while reading or querying entities.</span></span>

<span data-ttu-id="0c6db-367">Tenha em atenção que merge não é atualmente suportado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-367">Note that merge is not currently supported.</span></span> <span data-ttu-id="0c6db-368">Uma vez que um subconjunto de propriedades poderá ter sido encriptado anteriormente com uma chave diferente, basta intercalação novas propriedades de Olá e atualizar os metadados de Olá resultará na perda de dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-368">Since a subset of properties may have been encrypted previously using a different key, simply merging hello new properties and updating hello metadata will result in data loss.</span></span> <span data-ttu-id="0c6db-369">A intercalação um requer efetuar serviço adicional chama entidade pré-existente de Olá tooread do serviço de Olá ou utilizar uma nova chave por propriedade, que não são adequadas por motivos de desempenho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-369">Merging either requires making extra service calls tooread hello pre-existing entity from hello service, or using a new key per property, both of which are not suitable for performance reasons.</span></span>     

<span data-ttu-id="0c6db-370">Para obter informações sobre a encriptação de dados da tabela, consulte [encriptação do lado do cliente e o Cofre de chaves do Azure para armazenamento do Microsoft Azure](storage-client-side-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="0c6db-370">For information about encrypting table data, see [Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage](storage-client-side-encryption.md).</span></span>  

## <a name="modelling-relationships"></a><span data-ttu-id="0c6db-371">Modelling relações</span><span class="sxs-lookup"><span data-stu-id="0c6db-371">Modelling relationships</span></span>
<span data-ttu-id="0c6db-372">Criação de modelos de domínio é um passo chave na estrutura de Olá dos sistemas complexos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-372">Building domain models is a key step in hello design of complex systems.</span></span> <span data-ttu-id="0c6db-373">Normalmente, utilizar Olá modelling processo tooidentify entidades e Olá as relações entre-los como uma forma toounderstand Olá domínio de empresa e informam o design de Olá do seu sistema.</span><span class="sxs-lookup"><span data-stu-id="0c6db-373">Typically, you use hello modelling process tooidentify entities and hello relationships between them as a way toounderstand hello business domain and inform hello design of your system.</span></span> <span data-ttu-id="0c6db-374">Esta secção centra-se na forma como pode traduzir alguns dos tipos Olá comuns relação encontrados no domínio modelos toodesigns para Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-374">This section focuses on how you can translate some of hello common relationship types found in domain models toodesigns for hello Table service.</span></span> <span data-ttu-id="0c6db-375">processo de Olá de mapeamento de um tooa lógicas do modelo de dados físico NoSQL com base-modelo de dados é muito diferente da utilizada ao conceber a base de dados relacional.</span><span class="sxs-lookup"><span data-stu-id="0c6db-375">hello process of mapping from a logical data-model tooa physical NoSQL based data-model is very different from that used when designing a relational database.</span></span> <span data-ttu-id="0c6db-376">Estrutura de bases de dados relacionais, normalmente, assume um processo de normalização de dados otimizado para minimizando a redundância – e uma capacidade de consulta declarativa que abstracts Olá como implementação como funciona a base de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-376">Relational databases design typically assumes a data normalization process optimized for minimizing redundancy – and a declarative querying capability that abstracts how hello implementation of how hello database works.</span></span>  

### <a name="one-to-many-relationships"></a><span data-ttu-id="0c6db-377">Relações um-para-muitos</span><span class="sxs-lookup"><span data-stu-id="0c6db-377">One-to-many relationships</span></span>
<span data-ttu-id="0c6db-378">Relações um-para-muitos entre objetos de domínio do negócio ocorrerem com muita frequência: por exemplo, um departamento tem muitos colaboradores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-378">One-to-many relationships between business domain objects occur very frequently: for example, one department has many employees.</span></span> <span data-ttu-id="0c6db-379">Existem várias relações de um-para-muitos de tooimplement formas Olá serviço tabela cada com os profissionais de TI e contras que podem ser relevantes toohello cenário em particular.</span><span class="sxs-lookup"><span data-stu-id="0c6db-379">There are several ways tooimplement one-to-many relationships in hello Table service each with pros and cons that may be relevant toohello particular scenario.</span></span>  

<span data-ttu-id="0c6db-380">Tenha em conta o exemplo de Olá de uma grande empresa múltiplos national com dezenas de milhares de departamentos e entidades de empregado onde cada departamento tem muitos colaboradores e cada empregado como associados com um departamento específico.</span><span class="sxs-lookup"><span data-stu-id="0c6db-380">Consider hello example of a large multi-national corporation with tens of thousands of departments and employee entities where every department has many employees and each employee as associated with one specific department.</span></span> <span data-ttu-id="0c6db-381">Uma abordagem é departamento separado toostore e entidades de empregado como estas:</span><span class="sxs-lookup"><span data-stu-id="0c6db-381">One approach is toostore separate department and employee entities such as these:</span></span>  

![][1]

<span data-ttu-id="0c6db-382">Este exemplo mostra uma relação um-para-muitos implícita entre tipos de Olá com base no Olá **PartitionKey** valor.</span><span class="sxs-lookup"><span data-stu-id="0c6db-382">This example shows an implicit one-to-many relationship between hello types based on hello **PartitionKey** value.</span></span> <span data-ttu-id="0c6db-383">Cada departamento pode ter muitos colaboradores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-383">Each department can have many employees.</span></span>  

<span data-ttu-id="0c6db-384">Este exemplo mostra também uma entidade de departamento e respetivos entidades de empregado relacionados no Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-384">This example also shows a department entity and its related employee entities in hello same partition.</span></span> <span data-ttu-id="0c6db-385">Poderia escolher toouse de partições diferente, tabelas ou contas do storage, mesmo para tipos de entidade diferentes Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-385">You could choose toouse different partitions, tables, or even storage accounts for hello different entity types.</span></span>  

<span data-ttu-id="0c6db-386">Uma abordagem alternativa é toodenormalize as entidades de empregado apenas e arquivo de dados com dados de departamento denormalized conforme mostrado no seguinte exemplo de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-386">An alternative approach is toodenormalize your data and store only employee entities with denormalized department data as shown in hello following example.</span></span> <span data-ttu-id="0c6db-387">Neste cenário específico, esta abordagem denormalized não pode ser Olá melhor se tiver um requisito toobe toochange capaz de Olá os detalhes de um Gestor de departamento porque toodo isto é necessário tooupdate todos os funcionários do departamento de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-387">In this particular scenario, this denormalized approach may not be hello best if you have a requirement toobe able toochange hello details of a department manager because toodo this you need tooupdate every employee in hello department.</span></span>  

![][2]

<span data-ttu-id="0c6db-388">Para obter mais informações, consulte Olá [padrão Denormalization](#denormalization-pattern) mais à frente neste guia.</span><span class="sxs-lookup"><span data-stu-id="0c6db-388">For more information, see hello [Denormalization pattern](#denormalization-pattern) later in this guide.</span></span>  

<span data-ttu-id="0c6db-389">Olá tabela seguinte resume os profissionais de Olá e contras de cada uma das abordagens Olá descritas acima para armazenar o empregado e entidades de departamento que tenham uma relação um-para-muitos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-389">hello following table summarizes hello pros and cons of each of hello approaches outlined above for storing employee and department entities that have a one-to-many relationship.</span></span> <span data-ttu-id="0c6db-390">Deve também considerar a frequência esperada tooperform várias operações: pode ser toohave aceitável uma estrutura que inclui uma operação dispendiosa, se essa operação só acontece com pouca frequência.</span><span class="sxs-lookup"><span data-stu-id="0c6db-390">You should also consider how often you expect tooperform various operations: it may be acceptable toohave a design that includes an expensive operation if that operation only happens infrequently.</span></span>  

<table>
<tr>
<th><span data-ttu-id="0c6db-391">Abordagem</span><span class="sxs-lookup"><span data-stu-id="0c6db-391">Approach</span></span></th>
<th><span data-ttu-id="0c6db-392">Profissionais de TI</span><span class="sxs-lookup"><span data-stu-id="0c6db-392">Pros</span></span></th>
<th><span data-ttu-id="0c6db-393">Contras</span><span class="sxs-lookup"><span data-stu-id="0c6db-393">Cons</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-394">Separe os tipos de entidade, a mesma partição, a mesma tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-394">Separate entity types, same partition, same table</span></span></td>
<td>
<ul>
<li><span data-ttu-id="0c6db-395">Pode atualizar uma entidade de departamento com uma única operação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-395">You can update a department entity with a single operation.</span></span></li>
<li><span data-ttu-id="0c6db-396">Pode utilizar uma consistência de toomaintain EGT se tiver um requisito toomodify uma entidade de departamento sempre que atualizar/insert/eliminar uma entidade do empregado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-396">You can use an EGT toomaintain consistency if you have a requirement toomodify a department entity whenever you update/insert/delete an employee entity.</span></span> <span data-ttu-id="0c6db-397">Por exemplo, se mantém uma contagem de empregado departamentais para cada departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-397">For example if you maintain a departmental employee count for each department.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="0c6db-398">Poderá ser necessário tooretrieve um empregado e uma entidade de departamento para algumas atividades de cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-398">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="0c6db-399">Operações de armazenamento acontecer na Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-399">Storage operations happen in hello same partition.</span></span> <span data-ttu-id="0c6db-400">Em volumes de transação elevada, isto pode resultar num hotspot.</span><span class="sxs-lookup"><span data-stu-id="0c6db-400">At high transaction volumes, this may result in a hotspot.</span></span></li>
<li><span data-ttu-id="0c6db-401">Não é possível mover um departamento novo de empregado tooa utilizando um EGT.</span><span class="sxs-lookup"><span data-stu-id="0c6db-401">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="0c6db-402">Tipos de entidade separado, partições diferentes ou tabelas ou contas de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-402">Separate entity types, different partitions or tables or storage accounts</span></span></td>
<td>
<ul>
<li><span data-ttu-id="0c6db-403">Pode atualizar uma entidade do departamento ou uma entidade de empregado com uma única operação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-403">You can update a department entity or employee entity with a single operation.</span></span></li>
<li><span data-ttu-id="0c6db-404">Em volumes de transação elevada, isto pode ajudar a propagação Olá carga entre mais partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-404">At high transaction volumes, this may help spread hello load across more partitions.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="0c6db-405">Poderá ser necessário tooretrieve um empregado e uma entidade de departamento para algumas atividades de cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-405">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="0c6db-406">Não é possível utilizar EGTs toomaintain consistência quando a atualização/insert/eliminar um empregado e a atualização de um departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-406">You cannot use EGTs toomaintain consistency when you update/insert/delete an employee and update a department.</span></span> <span data-ttu-id="0c6db-407">Por exemplo, ao atualizar uma contagem do empregado na entidade de um departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-407">For example, updating an employee count in a department entity.</span></span></li>
<li><span data-ttu-id="0c6db-408">Não é possível mover um departamento novo de empregado tooa utilizando um EGT.</span><span class="sxs-lookup"><span data-stu-id="0c6db-408">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="0c6db-409">Denormalize para o tipo de entidade única</span><span class="sxs-lookup"><span data-stu-id="0c6db-409">Denormalize into single entity type</span></span></td>
<td>
<ul>
<li><span data-ttu-id="0c6db-410">Pode obter todas as informações de Olá que terá com um único pedido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-410">You can retrieve all hello information you need with a single request.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="0c6db-411">Poderá ser toomaintain dispendiosas consistência se precisar de informações de departamento tooupdate (isto precisaria tooupdate todos os funcionários de Olá de um departamento).</span><span class="sxs-lookup"><span data-stu-id="0c6db-411">It may be expensive toomaintain consistency if you need tooupdate department information (this would require you tooupdate all hello employees in a department).</span></span></li>
</ul>
</td>
</tr>
</table>

<span data-ttu-id="0c6db-412">Como optar entre estas opções e em que os profissionais de Olá e contras são mais importantes, depende os cenários de aplicação específica.</span><span class="sxs-lookup"><span data-stu-id="0c6db-412">How you choose between these options, and which of hello pros and cons are most significant, depends on your specific application scenarios.</span></span> <span data-ttu-id="0c6db-413">Por exemplo, com que frequência modificar entidades departamento; todas as consultas de empregado precisa Olá departamentais obter informações adicionais; como fechar tem a limites de escalabilidade toohello no seu partições ou a sua conta de armazenamento?</span><span class="sxs-lookup"><span data-stu-id="0c6db-413">For example, how often do you modify department entities; do all your employee queries need hello additional departmental information; how close are you toohello scalability limits on your partitions or your storage account?</span></span>  

### <a name="one-to-one-relationships"></a><span data-ttu-id="0c6db-414">Relações um para um</span><span class="sxs-lookup"><span data-stu-id="0c6db-414">One-to-one relationships</span></span>
<span data-ttu-id="0c6db-415">Modelos de domínio podem incluir um para um relações entre entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-415">Domain models may include one-to-one relationships between entities.</span></span> <span data-ttu-id="0c6db-416">Se precisar de tooimplement uma relação unívoca no Olá serviço tabela, também tem de escolher como toolink Olá duas entidades relacionadas quando precisar de tooretrieve-los ambas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-416">If you need tooimplement a one-to-one relationship in hello Table service, you must also choose how toolink hello two related entities when you need tooretrieve them both.</span></span> <span data-ttu-id="0c6db-417">Esta ligação pode ser implícita, com base na Convenção de valores de chave Olá ou explícito armazenando uma ligação na forma de Olá de **PartitionKey** e **RowKey** valores em cada tooits entidade relacionada com entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-417">This link can be either implicit, based on a convention in hello key values, or explicit by storing a link in hello form of **PartitionKey** and **RowKey** values in each entity tooits related entity.</span></span> <span data-ttu-id="0c6db-418">Para ver um debate do se deve armazenar Olá relacionadas com entidades na mesma partição de Olá, consulte a secção Olá [um-para-muitos relações](#one-to-many-relationships).</span><span class="sxs-lookup"><span data-stu-id="0c6db-418">For a discussion of whether you should store hello related entities in hello same partition, see hello section [One-to-many relationships](#one-to-many-relationships).</span></span>  

<span data-ttu-id="0c6db-419">Tenha em atenção que também existem considerações de implementação que podem tomar relações um para um tooimplement no serviço de tabela Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-419">Note that there are also implementation considerations that might lead you tooimplement one-to-one relationships in hello Table service:</span></span>  

* <span data-ttu-id="0c6db-420">Processamento de entidades grandes (para obter mais informações, consulte [padrão de entidades grandes](#large-entities-pattern)).</span><span class="sxs-lookup"><span data-stu-id="0c6db-420">Handling large entities (for more information, see [Large Entities Pattern](#large-entities-pattern)).</span></span>  
* <span data-ttu-id="0c6db-421">Implementar controlos de acesso (para obter mais informações, consulte [controlar o acesso com assinaturas de acesso partilhado](#controlling-access-with-shared-access-signatures)).</span><span class="sxs-lookup"><span data-stu-id="0c6db-421">Implementing access controls (for more information, see [Controlling access with Shared Access Signatures](#controlling-access-with-shared-access-signatures)).</span></span>  

### <a name="join-in-hello-client"></a><span data-ttu-id="0c6db-422">Associação no cliente Olá</span><span class="sxs-lookup"><span data-stu-id="0c6db-422">Join in hello client</span></span>
<span data-ttu-id="0c6db-423">Embora não existam relações de toomodel formas no Olá serviço tabela, deve não se esqueça que Olá dois prime algumas das razões para utilizar o serviço de tabela Olá são escalabilidade e desempenho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-423">Although there are ways toomodel relationships in hello Table service, you should not forget that hello two prime reasons for using hello Table service are scalability and performance.</span></span> <span data-ttu-id="0c6db-424">Se encontrar que são modelling muitas relações comprometer desempenho Olá e de escalabilidade da sua solução, deverá solicitar a si que se for necessário toobuild Olá todas as relações de dados para a estrutura da tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-424">If you find you are modelling many relationships that compromise hello performance and scalability of your solution, you should ask yourself if it is necessary toobuild all hello data relationships into your table design.</span></span> <span data-ttu-id="0c6db-425">Pode ser toosimplify capaz de estrutura de Olá e melhorar a escalabilidade de Olá e o desempenho da sua solução se permitir que a aplicação de cliente, efetuar quaisquer associações necessárias.</span><span class="sxs-lookup"><span data-stu-id="0c6db-425">You may be able toosimplify hello design and improve hello scalability and performance of your solution if you let your client application perform any necessary joins.</span></span>  

<span data-ttu-id="0c6db-426">Por exemplo, se tiver pequenas tabelas que contêm dados que não se altera com muita frequência, em seguida, pode obter estes dados uma vez e cache-la no cliente Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-426">For example, if you have small tables that contain data that does not change very often, then you can retrieve this data once and cache it on hello client.</span></span> <span data-ttu-id="0c6db-427">Isto pode evitar e voltas repetidas tooretrieve Olá mesmos dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-427">This can avoid repeated roundtrips tooretrieve hello same data.</span></span> <span data-ttu-id="0c6db-428">Nos exemplos de Olá que iremos consultou neste guia, hello conjunto de departamentos numa organização pequeno é provavelmente toobe pequeno e altere raramente tornando um bom candidato para dados que a aplicação cliente pode transferir uma vez e cache como aspeto dos dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-428">In hello examples we have looked at in this guide, hello set of departments in a small organization is likely toobe small and change infrequently making it a good candidate for data that client application can download once and cache as look up data.</span></span>  

### <a name="inheritance-relationships"></a><span data-ttu-id="0c6db-429">Relações de herança</span><span class="sxs-lookup"><span data-stu-id="0c6db-429">Inheritance relationships</span></span>
<span data-ttu-id="0c6db-430">Se a aplicação de cliente utiliza um conjunto de classes que fazem parte de um entidades de negócio de toorepresent de relação de herança, facilmente, pode manter as entidades numa Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-430">If your client application uses a set of classes that form part of an inheritance relationship toorepresent business entities, you can easily persist those entities in hello Table service.</span></span> <span data-ttu-id="0c6db-431">Por exemplo, poderá ter Olá seguinte conjunto de classes definidas na sua aplicação de cliente onde **pessoa** é uma classe abstracta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-431">For example, you might have hello following set of classes defined in your client application where **Person** is an abstract class.</span></span>

![][3]

<span data-ttu-id="0c6db-432">Pode manter as instâncias de duas classes concretas Olá no Olá serviço tabela utilizando uma única tabela de pessoa utilizar entidades em que aspeto este:</span><span class="sxs-lookup"><span data-stu-id="0c6db-432">You can persist instances of hello two concrete classes in hello Table service using a single Person table using entities in that look like this:</span></span>  

![][4]

<span data-ttu-id="0c6db-433">Para obter mais informações sobre como trabalhar com vários tipos de entidade Olá mesmo tabela no código de cliente, consulte a secção de Olá [trabalhar com tipos de entidade heterogéneos](#working-with-heterogeneous-entity-types) mais à frente neste guia.</span><span class="sxs-lookup"><span data-stu-id="0c6db-433">For more information about working with multiple entity types in hello same table in client code, see hello section [Working with heterogeneous entity types](#working-with-heterogeneous-entity-types) later in this guide.</span></span> <span data-ttu-id="0c6db-434">Esta opção fornece exemplos de como toorecognize Olá o tipo de entidade no código de cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-434">This provides examples of how toorecognize hello entity type in client code.</span></span>  

## <a name="table-design-patterns"></a><span data-ttu-id="0c6db-435">Padrões de conceção da tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-435">Table Design Patterns</span></span>
<span data-ttu-id="0c6db-436">Nas secções anteriores, constatou algumas debates detalhadas sobre como toooptimize a tabela de design para ambos os dados de entidade obter utilizando consultas e para inserir, atualizar e eliminar dados de entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-436">In previous sections, you have seen some detailed discussions about how toooptimize your table design for both retrieving entity data using queries and for inserting, updating, and deleting entity data.</span></span> <span data-ttu-id="0c6db-437">Esta secção descreve alguns padrões adequados para utilização com soluções de serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-437">This section describes some patterns appropriate for use with Table service solutions.</span></span> <span data-ttu-id="0c6db-438">Além disso, verá como pode praticamente abordar alguns dos problemas de Olá e compromissos gerados anteriormente neste guia.</span><span class="sxs-lookup"><span data-stu-id="0c6db-438">In addition, you will see how you can practically address some of hello issues and trade-offs raised previously in this guide.</span></span> <span data-ttu-id="0c6db-439">Olá diagrama a seguir resume as relações de Olá entre padrões diferentes de Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-439">hello following diagram summarizes hello relationships between hello different patterns:</span></span>  

![][5]

<span data-ttu-id="0c6db-440">mapa de padrão de Olá acima destaca algumas relações entre padrões (azul) e padrões anti (cor de laranja) que estão documentados neste guia.</span><span class="sxs-lookup"><span data-stu-id="0c6db-440">hello pattern map above highlights some relationships between patterns (blue) and anti-patterns (orange) that are documented in this guide.</span></span> <span data-ttu-id="0c6db-441">Obviamente, não existem muitos padrões merecem considerar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-441">There are of course many other patterns that are worth considering.</span></span> <span data-ttu-id="0c6db-442">Por exemplo, é um dos cenários-chave para o serviço tabela Olá toouse Olá [padrão de vista materializada](https://msdn.microsoft.com/library/azure/dn589782.aspx) de Olá [segregação de responsabilidade de consulta de comando (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) padrão.</span><span class="sxs-lookup"><span data-stu-id="0c6db-442">For example, one of hello key scenarios for Table Service is toouse hello [Materialized View Pattern](https://msdn.microsoft.com/library/azure/dn589782.aspx) from hello [Command Query Responsibility Segregation (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) pattern.</span></span>  

### <a name="intra-partition-secondary-index-pattern"></a><span data-ttu-id="0c6db-443">Padrão de índice secundário intra partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-443">Intra-partition secondary index pattern</span></span>
<span data-ttu-id="0c6db-444">Armazenar várias cópias de cada entidade utilizando diferentes **RowKey** valores (no Olá mesma partição) tooenable rápidos e eficientes pesquisas e ordenação alternada ordena utilizando diferentes **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-444">Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span> <span data-ttu-id="0c6db-445">Atualizações entre cópias podem ser mantidas consistentes através do EGT.</span><span class="sxs-lookup"><span data-stu-id="0c6db-445">Updates between copies can be kept consistent using EGT's.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-446">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-446">Context and problem</span></span>
<span data-ttu-id="0c6db-447">Olá serviço tabela indexa automaticamente entidades utilizando Olá **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-447">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-448">Isto permite que um tooretrieve de aplicação de cliente uma entidade eficiente, utilizando estes valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-448">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="0c6db-449">Por exemplo, utilizando a estrutura da tabela Olá mostrada abaixo, uma aplicação cliente pode utilizar um tooretrieve de consulta do ponto de uma entidade de empregado individuais utilizando o nome do departamento de Olá e id de empregado Olá (Olá **PartitionKey** e  **RowKey** valores).</span><span class="sxs-lookup"><span data-stu-id="0c6db-449">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="0c6db-450">Um cliente também pode obter entidades ordenadas por id de empregado dentro de cada departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-450">A client can also retrieve entities sorted by employee id within each department.</span></span>

![][6]

<span data-ttu-id="0c6db-451">Se também pretender toobe capaz de toofind uma entidade de empregado com base no valor de Olá de outra propriedade, tal como endereço de e-mail, tem de utilizar um menos eficiente toofind de análise de partição uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="0c6db-451">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="0c6db-452">Isto acontece porque o serviço de tabela Olá não fornece índices secundários.</span><span class="sxs-lookup"><span data-stu-id="0c6db-452">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="0c6db-453">Além disso, não há toorequest nenhuma opção uma lista dos funcionários ordenados por uma ordem diferente que **RowKey** ordem.</span><span class="sxs-lookup"><span data-stu-id="0c6db-453">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-454">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-454">Solution</span></span>
<span data-ttu-id="0c6db-455">toowork à volta de falta de Olá de índices secundários, pode armazenar várias cópias de cada entidade com cada cópia utilizando outro **RowKey** valor.</span><span class="sxs-lookup"><span data-stu-id="0c6db-455">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using a different **RowKey** value.</span></span> <span data-ttu-id="0c6db-456">Se armazenar uma entidade com estruturas de Olá mostradas abaixo, pode obter eficientemente entidades de empregado com base no id de endereço ou empregado de correio eletrónico. Olá valores de prefixo para Olá **RowKey**, "empid_" e "email_" permitem-lhe tooquery para um empregado único ou um intervalo de funcionários através da utilização de um intervalo de endereços de e-mail ou os ids de funcionário.</span><span class="sxs-lookup"><span data-stu-id="0c6db-456">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **RowKey**, "empid_" and "email_" enable you tooquery for a single employee or a range of employees by using a range of email addresses or employee ids.</span></span>  

![][7]

<span data-ttu-id="0c6db-457">Olá seguir dois critérios de filtro (uma pesquisa por id de empregado e uma pesquisa por endereço de e-mail) ambos especificar ponto consultas:</span><span class="sxs-lookup"><span data-stu-id="0c6db-457">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="0c6db-458">$filter = (PartitionKey eq 'Vendas') e (RowKey eq 'empid_000223')</span><span class="sxs-lookup"><span data-stu-id="0c6db-458">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'empid_000223')</span></span>  
* <span data-ttu-id="0c6db-459">$filter = (PartitionKey eq 'Vendas') e (RowKey eq 'email_jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="0c6db-459">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'email_jonesj@contoso.com')</span></span>  

<span data-ttu-id="0c6db-460">Se a consulta para um intervalo de entidades de empregado, pode especificar um intervalo ordenados por ordem de id de empregado ou um intervalo ordenados por ordem de endereço de e-mail através da consulta para entidades com o prefixo adequado do Olá no Olá **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-460">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="0c6db-461">utilizarem de todos os funcionários de Olá no departamento de vendas Olá com um id de empregado Olá intervalo 000100 too000199 toofind: $filter = (PartitionKey eq 'Vendas') e (RowKey ge 'empid_000100') e (RowKey le 'empid_000199')</span><span class="sxs-lookup"><span data-stu-id="0c6db-461">toofind all hello employees in hello Sales department with an employee id in hello range 000100 too000199 use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000100') and (RowKey le 'empid_000199')</span></span>  
* <span data-ttu-id="0c6db-462">toofind Olá todos os funcionários do departamento de vendas Olá, com um endereço de e-mail a partir Olá letra "a" utilização: $filter = (PartitionKey eq 'Vendas') e (RowKey ge 'email_a') e (RowKey lt 'email_b')</span><span class="sxs-lookup"><span data-stu-id="0c6db-462">toofind all hello employees in hello Sales department with an email address starting with hello letter 'a' use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'email_a') and (RowKey lt 'email_b')</span></span>  
  
  <span data-ttu-id="0c6db-463">Tenha em atenção que a sintaxe de filtro de Olá utilizado nos exemplos de Olá acima é de Olá tabela REST API do serviço, para obter mais informações, consulte [entidades de consulta](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-463">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-464">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-464">Issues and considerations</span></span>
<span data-ttu-id="0c6db-465">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-465">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-466">O Table storage é relativamente cheap toouse pelo Olá custo do armazenamento de dados duplicados a sobrecarga não deve ser uma preocupação principal.</span><span class="sxs-lookup"><span data-stu-id="0c6db-466">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="0c6db-467">No entanto, deve sempre avaliar o custo de Olá da estrutura com base nos seus requisitos de armazenamento previsto e adicione apenas consultas de Olá entidades duplicado toosupport que irá executar a aplicação cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-467">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="0c6db-468">Porque as entidades de índice secundário Olá são armazenadas no Olá mesma partição como entidades original Olá, deve certificar-se de que não exceda os objetivos de escalabilidade Olá para uma partição individual.</span><span class="sxs-lookup"><span data-stu-id="0c6db-468">Because hello secondary index entities are stored in hello same partition as hello original entities, you should ensure that you do not exceed hello scalability targets for an individual partition.</span></span>  
* <span data-ttu-id="0c6db-469">Pode manter as entidades duplicadas consistentes entre si utilizando EGTs tooupdate Olá duas cópias da entidade de Olá atomically.</span><span class="sxs-lookup"><span data-stu-id="0c6db-469">You can keep your duplicate entities consistent with each other by using EGTs tooupdate hello two copies of hello entity atomically.</span></span> <span data-ttu-id="0c6db-470">Isto implica que deve armazenar todas as cópias de uma entidade no Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-470">This implies that you should store all copies of an entity in hello same partition.</span></span> <span data-ttu-id="0c6db-471">Para obter mais informações, consulte a secção de Olá [utilizando transações de grupo de entidade](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="0c6db-471">For more information, see hello section [Using Entity Group Transactions](#entity-group-transactions).</span></span>  
* <span data-ttu-id="0c6db-472">Olá valor utilizado para Olá **RowKey** tem de ser exclusivo para cada entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-472">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="0c6db-473">Considere utilizar os valores da chave compostos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-473">Consider using compound key values.</span></span>  
* <span data-ttu-id="0c6db-474">Preenchimento valores numéricos na Olá **RowKey** (por exemplo, id de empregado Olá 000223), permite corrigir ordenar e filtrar com base nas maiúscula e limites inferiores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-474">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="0c6db-475">Não é necessariamente necessário tooduplicate todas as propriedades de Olá de entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-475">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="0c6db-476">Por exemplo, se hello consultas que o e-mail de entidades de Olá pesquisa utilizando Olá endereços no Olá **RowKey** nunca precisam de idade do empregado Olá, estas entidades podem ter Olá seguir a estrutura:</span><span class="sxs-lookup"><span data-stu-id="0c6db-476">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>

![][8]

* <span data-ttu-id="0c6db-477">É melhores normalmente dados duplicados do toostore e certifique-se de que pode obter todos os dados de Olá terá com uma única consulta, que toouse uma consulta toolocate uma entidade outro toolookup Olá necessários e dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-477">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query, than toouse one query toolocate an entity and another toolookup hello required data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-478">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-478">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-479">Utilize este padrão quando a aplicação de cliente precisa de entidades tooretrieve utilizando uma variedade de diferentes chaves, quando o cliente tem de entidades tooretrieve as ordens de ordenação diferente e, em que possa identificar cada entidade utilizando uma variedade de valores exclusivos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-479">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="0c6db-480">No entanto, deve ser se de que não excede os limites de escalabilidade de partição Olá quando estiver a efetuar pesquisas de entidades com diferentes Olá **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-480">However, you should be sure that you do not exceed hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-481">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-481">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-482">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-482">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-483">Padrão de índice secundário entre partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-483">Inter-partition secondary index pattern</span></span>](#inter-partition-secondary-index-pattern)
* [<span data-ttu-id="0c6db-484">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-484">Compound key pattern</span></span>](#compound-key-pattern)
* [<span data-ttu-id="0c6db-485">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-485">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="0c6db-486">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-486">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="inter-partition-secondary-index-pattern"></a><span data-ttu-id="0c6db-487">Padrão de índice secundário entre partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-487">Inter-partition secondary index pattern</span></span>
<span data-ttu-id="0c6db-488">Armazenar várias cópias de cada entidade utilizando diferentes **RowKey** valores em partições separadas ou em tabelas separadas tooenable rápidos e eficientes pesquisas êxito e as ordens de ordenação alternada utilizando diferentes **RowKey**valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-488">Store multiple copies of each entity using different **RowKey** values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-489">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-489">Context and problem</span></span>
<span data-ttu-id="0c6db-490">Olá serviço tabela indexa automaticamente entidades utilizando Olá **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-490">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-491">Isto permite que um tooretrieve de aplicação de cliente uma entidade eficiente, utilizando estes valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-491">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="0c6db-492">Por exemplo, utilizando a estrutura da tabela Olá mostrada abaixo, uma aplicação cliente pode utilizar um tooretrieve de consulta do ponto de uma entidade de empregado individuais utilizando o nome do departamento de Olá e id de empregado Olá (Olá **PartitionKey** e  **RowKey** valores).</span><span class="sxs-lookup"><span data-stu-id="0c6db-492">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="0c6db-493">Um cliente também pode obter entidades ordenadas por id de empregado dentro de cada departamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-493">A client can also retrieve entities sorted by employee id within each department.</span></span>  

![][9]

<span data-ttu-id="0c6db-494">Se também pretender toobe capaz de toofind uma entidade de empregado com base no valor de Olá de outra propriedade, tal como endereço de e-mail, tem de utilizar um menos eficiente toofind de análise de partição uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="0c6db-494">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="0c6db-495">Isto acontece porque o serviço de tabela Olá não fornece índices secundários.</span><span class="sxs-lookup"><span data-stu-id="0c6db-495">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="0c6db-496">Além disso, não há toorequest nenhuma opção uma lista dos funcionários ordenados por uma ordem diferente que **RowKey** ordem.</span><span class="sxs-lookup"><span data-stu-id="0c6db-496">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

<span data-ttu-id="0c6db-497">São prevendo um volume muito elevado de transações em relação a estas entidades e pretende risco de Olá toominimize de Olá serviço tabela, o cliente de limitação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-497">You are anticipating a very high volume of transactions against these entities and want toominimize hello risk of hello Table service throttling your client.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-498">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-498">Solution</span></span>
<span data-ttu-id="0c6db-499">toowork à volta de falta de Olá de índices secundários, pode armazenar várias cópias de cada entidade com cada cópia utilizando diferentes **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-499">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using different **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-500">Se armazenar uma entidade com estruturas de Olá mostradas abaixo, pode obter eficientemente entidades de empregado com base no id de endereço ou empregado de correio eletrónico. Olá valores de prefixo para Olá **PartitionKey**, "empid_" e "email_" permitem-lhe tooidentify que índice pretende toouse para uma consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-500">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **PartitionKey**, "empid_" and "email_" enable you tooidentify which index you want toouse for a query.</span></span>  

![][10]

<span data-ttu-id="0c6db-501">Olá seguir dois critérios de filtro (uma pesquisa por id de empregado e uma pesquisa por endereço de e-mail) ambos especificar ponto consultas:</span><span class="sxs-lookup"><span data-stu-id="0c6db-501">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="0c6db-502">$filter = (PartitionKey eq ' empid_Sales') e (RowKey eq '000223')</span><span class="sxs-lookup"><span data-stu-id="0c6db-502">$filter=(PartitionKey eq 'empid_Sales') and (RowKey eq '000223')</span></span>
* <span data-ttu-id="0c6db-503">$filter = (PartitionKey eq ' email_Sales') e (RowKey eq 'jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="0c6db-503">$filter=(PartitionKey eq 'email_Sales') and (RowKey eq 'jonesj@contoso.com')</span></span>  

<span data-ttu-id="0c6db-504">Se a consulta para um intervalo de entidades de empregado, pode especificar um intervalo ordenados por ordem de id de empregado ou um intervalo ordenados por ordem de endereço de e-mail através da consulta para entidades com o prefixo adequado do Olá no Olá **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-504">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="0c6db-505">toofind Olá todos os empregados na Olá departamento de vendas com um id de empregado no intervalo de Olá **000100** demasiado**000199** ordenado na utilização de ordem de id de empregado: $filter = (PartitionKey eq ' empid_Sales') e (RowKey ge ' 000100') e (RowKey le '000199')</span><span class="sxs-lookup"><span data-stu-id="0c6db-505">toofind all hello employees in hello Sales department with an employee id in hello range **000100** too**000199** sorted in employee id order use: $filter=(PartitionKey eq 'empid_Sales') and (RowKey ge '000100') and (RowKey le '000199')</span></span>  
* <span data-ttu-id="0c6db-506">toofind todos os funcionários de Olá no departamento de vendas Olá com um endereço de e-mail que começa com "a" ordenado na utilização de ordem de endereço de e-mail: $filter = (PartitionKey eq ' email_Sales') e (RowKey ge "a") e (RowKey lt 'b')</span><span class="sxs-lookup"><span data-stu-id="0c6db-506">toofind all hello employees in hello Sales department with an email address that starts with 'a' sorted in email address order use: $filter=(PartitionKey eq 'email_Sales') and (RowKey ge 'a') and (RowKey lt 'b')</span></span>  

<span data-ttu-id="0c6db-507">Tenha em atenção que a sintaxe de filtro de Olá utilizado nos exemplos de Olá acima é de Olá tabela REST API do serviço, para obter mais informações, consulte [entidades de consulta](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-507">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-508">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-508">Issues and considerations</span></span>
<span data-ttu-id="0c6db-509">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-509">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-510">Pode manter as entidades duplicadas eventualmente consistente entre si utilizando Olá [padrão de transações eventualmente consistente](#eventually-consistent-transactions-pattern) entidades do toomaintain Olá índice principal e secundário.</span><span class="sxs-lookup"><span data-stu-id="0c6db-510">You can keep your duplicate entities eventually consistent with each other by using hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain hello primary and secondary index entities.</span></span>  
* <span data-ttu-id="0c6db-511">O Table storage é relativamente cheap toouse pelo Olá custo do armazenamento de dados duplicados a sobrecarga não deve ser uma preocupação principal.</span><span class="sxs-lookup"><span data-stu-id="0c6db-511">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="0c6db-512">No entanto, deve sempre avaliar o custo de Olá da estrutura com base nos seus requisitos de armazenamento previsto e adicione apenas consultas de Olá entidades duplicado toosupport que irá executar a aplicação cliente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-512">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="0c6db-513">Olá valor utilizado para Olá **RowKey** tem de ser exclusivo para cada entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-513">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="0c6db-514">Considere utilizar os valores da chave compostos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-514">Consider using compound key values.</span></span>  
* <span data-ttu-id="0c6db-515">Preenchimento valores numéricos na Olá **RowKey** (por exemplo, id de empregado Olá 000223), permite corrigir ordenar e filtrar com base nas maiúscula e limites inferiores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-515">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="0c6db-516">Não é necessariamente necessário tooduplicate todas as propriedades de Olá de entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-516">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="0c6db-517">Por exemplo, se hello consultas que o e-mail de entidades de Olá pesquisa utilizando Olá endereços no Olá **RowKey** nunca precisam de idade do empregado Olá, estas entidades podem ter Olá seguir a estrutura:</span><span class="sxs-lookup"><span data-stu-id="0c6db-517">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>
  
  ![][11]
* <span data-ttu-id="0c6db-518">É normalmente uma melhor toostore de dados duplicados e certifique-se de que pode obter todos os dados de Olá que terá com uma única consulta que toouse toolocate de uma consulta para uma entidade utilizando Olá índice secundário e outro toolookup Olá dados necessários no índice principal Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-518">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query than toouse one query toolocate an entity using hello secondary index and another toolookup hello required data in hello primary index.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-519">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-519">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-520">Utilize este padrão quando a aplicação de cliente precisa de entidades tooretrieve utilizando uma variedade de diferentes chaves, quando o cliente tem de entidades tooretrieve as ordens de ordenação diferente e, em que possa identificar cada entidade utilizando uma variedade de valores exclusivos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-520">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="0c6db-521">Utilize este padrão quando pretender que tooavoid exceder os limites de escalabilidade da partição Olá quando estiver a efetuar pesquisas de entidades com diferentes Olá **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-521">Use this pattern when you want tooavoid exceeding hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-522">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-522">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-523">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-523">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-524">Padrão de transações eventualmente consistente</span><span class="sxs-lookup"><span data-stu-id="0c6db-524">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="0c6db-525">Padrão de índice secundário intra partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-525">Intra-partition secondary index pattern</span></span>](#intra-partition-secondary-index-pattern)  
* [<span data-ttu-id="0c6db-526">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-526">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="0c6db-527">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-527">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="0c6db-528">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-528">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="eventually-consistent-transactions-pattern"></a><span data-ttu-id="0c6db-529">Padrão de transações eventualmente consistente</span><span class="sxs-lookup"><span data-stu-id="0c6db-529">Eventually consistent transactions pattern</span></span>
<span data-ttu-id="0c6db-530">Ative o comportamento eventualmente consistente em limites de partição ou limites de sistema de armazenamento ao utilizar as filas do Azure.</span><span class="sxs-lookup"><span data-stu-id="0c6db-530">Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-531">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-531">Context and problem</span></span>
<span data-ttu-id="0c6db-532">EGTs ativar transações atómicas entre várias entidades que partilham Olá mesma chave de partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-532">EGTs enable atomic transactions across multiple entities that share hello same partition key.</span></span> <span data-ttu-id="0c6db-533">Para o desempenho e as razões de escalabilidade, poderá decidir toostore entidades que têm requisitos de consistência em partições separadas ou num sistema de armazenamento separada: neste cenário, não é possível utilizar EGTs toomaintain consistência.</span><span class="sxs-lookup"><span data-stu-id="0c6db-533">For performance and scalability reasons, you might decide toostore entities that have consistency requirements in separate partitions or in a separate storage system: in such a scenario, you cannot use EGTs toomaintain consistency.</span></span> <span data-ttu-id="0c6db-534">Por exemplo, poderá ter uma consistência eventual do toomaintain requisito entre:</span><span class="sxs-lookup"><span data-stu-id="0c6db-534">For example, you might have a requirement toomaintain eventual consistency between:</span></span>  

* <span data-ttu-id="0c6db-535">Entidades armazenadas no duas partições diferentes na Olá mesmo tabela em tabelas diferentes, em contas de armazenamento diferente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-535">Entities stored in two different partitions in hello same table, in different tables, in in different storage accounts.</span></span>  
* <span data-ttu-id="0c6db-536">Uma entidade armazenados no Olá serviço tabela e um blob armazenados no Olá serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="0c6db-536">An entity stored in hello Table service and a blob stored in hello Blob service.</span></span>  
* <span data-ttu-id="0c6db-537">Uma entidade armazenada no serviço de tabela Olá e um ficheiro num sistema de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="0c6db-537">An entity stored in hello Table service and a file in a file system.</span></span>  
* <span data-ttu-id="0c6db-538">Uma entidade armazenar no Olá serviço tabela ainda indexado com o serviço de pesquisa do Azure Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-538">An entity store in hello Table service yet indexed using hello Azure Search service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-539">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-539">Solution</span></span>
<span data-ttu-id="0c6db-540">Ao utilizar as filas do Azure, pode implementar uma solução que fornece a consistência eventual entre dois ou mais partições ou sistemas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-540">By using Azure queues, you can implement a solution that delivers eventual consistency across two or more partitions or storage systems.</span></span>
<span data-ttu-id="0c6db-541">tooillustrate esta abordagem, suponha que tem um requisito toobe tooarchive capaz de antigo empregado as entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-541">tooillustrate this approach, assume you have a requirement toobe able tooarchive old employee entities.</span></span> <span data-ttu-id="0c6db-542">Entidades de empregado antigo raramente são consultadas e devem ser excluídas da todas as atividades que lidam com os empregados atuais.</span><span class="sxs-lookup"><span data-stu-id="0c6db-542">Old employee entities are rarely queried and should be excluded from any activities that deal with current employees.</span></span> <span data-ttu-id="0c6db-543">tooimplement este requisito armazenar funcionários ativos no Olá **atual** tabela e funcionários antigos Olá **arquivo** tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-543">tooimplement this requirement you store active employees in hello **Current** table and old employees in hello **Archive** table.</span></span> <span data-ttu-id="0c6db-544">Arquivar um empregado requer entidade de Olá toodelete do Olá **atual** uma tabela e adicionar Olá entidade toohello **arquivo** tabela, mas não é possível utilizar um tooperform EGT estas duas operações.</span><span class="sxs-lookup"><span data-stu-id="0c6db-544">Archiving an employee requires you toodelete hello entity from hello **Current** table and add hello entity toohello **Archive** table, but you cannot use an EGT tooperform these two operations.</span></span> <span data-ttu-id="0c6db-545">risco de Olá tooavoid que uma falha faz com que um tooappear de entidade em ambas ou nenhuma das tabelas, a operação de arquivo de Olá tem de ser eventualmente consistente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-545">tooavoid hello risk that a failure causes an entity tooappear in both or neither tables, hello archive operation must be eventually consistent.</span></span> <span data-ttu-id="0c6db-546">Olá diagrama sequência seguinte descreve os passos de Olá nesta operação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-546">hello following sequence diagram outlines hello steps in this operation.</span></span> <span data-ttu-id="0c6db-547">É fornecido mais detalhadamente para caminhos de exceção na seguinte de texto Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-547">More detail is provided for exception paths in hello text following.</span></span>  

![][12]

<span data-ttu-id="0c6db-548">Um cliente inicia uma operação do arquivo de Olá colocando a uma mensagem sobre uma fila do Azure, este empregado tooarchive de exemplo #456.</span><span class="sxs-lookup"><span data-stu-id="0c6db-548">A client initiates hello archive operation by placing a message on an Azure queue, in this example tooarchive employee #456.</span></span> <span data-ttu-id="0c6db-549">Uma função de trabalho consulta fila Olá para novas mensagens; Quando encontrar um, lê a mensagem de saudação e mantém uma cópia oculta na fila de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-549">A worker role polls hello queue for new messages; when it finds one, it reads hello message and leaves a hidden copy on hello queue.</span></span> <span data-ttu-id="0c6db-550">função de trabalho de Olá seguinte obtém uma cópia da entidade de Olá de Olá **atual** tabela, insere uma cópia no Olá **arquivo** de tabela e, em seguida, elimina Olá original de Olá **atual**tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-550">hello worker role next fetches a copy of hello entity from hello **Current** table, inserts a copy in hello **Archive** table, and then deletes hello original from hello **Current** table.</span></span> <span data-ttu-id="0c6db-551">Por fim, se não existirem erros de nenhum dos passos anteriores Olá, função de trabalho de Olá elimina mensagem de saudação oculto da fila de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-551">Finally, if there were no errors from hello previous steps, hello worker role deletes hello hidden message from hello queue.</span></span>  

<span data-ttu-id="0c6db-552">Neste exemplo, o passo 4 insere empregado Olá na Olá **arquivo** tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-552">In this example, step 4 inserts hello employee into hello **Archive** table.</span></span> <span data-ttu-id="0c6db-553">Foi possível adicionar Olá empregado tooa um blob no Olá serviço Blob ou um ficheiro num sistema de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="0c6db-553">It could add hello employee tooa blob in hello Blob service or a file in a file system.</span></span>  

#### <a name="recovering-from-failures"></a><span data-ttu-id="0c6db-554">Recuperar de falhas</span><span class="sxs-lookup"><span data-stu-id="0c6db-554">Recovering from failures</span></span>
<span data-ttu-id="0c6db-555">É importante que Olá operações nos passos **4** e **5** tem de ser *idempotent* no caso de função de trabalho de Olá tem de operação de arquivo de Olá toorestart.</span><span class="sxs-lookup"><span data-stu-id="0c6db-555">It is important that hello operations in steps **4** and **5** must be *idempotent* in case hello worker role needs toorestart hello archive operation.</span></span> <span data-ttu-id="0c6db-556">Se estiver a utilizar o serviço de tabela Olá, para o passo **4** deve utilizar uma operação "Inserir ou substituir"; para o passo **5** deve utilizar um "eliminar se existe" operação na biblioteca de clientes de Olá estiver a utilizar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-556">If you are using hello Table service, for step **4** you should use an "insert or replace" operation; for step **5** you should use a "delete if exists" operation in hello client library you are using.</span></span> <span data-ttu-id="0c6db-557">Se estiver a utilizar outro sistema de armazenamento, tem de utilizar uma operação idempotent adequado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-557">If you are using another storage system, you must use an appropriate idempotent operation.</span></span>  

<span data-ttu-id="0c6db-558">Se a função de trabalho de Olá nunca conclui passo **6**, em seguida, depois de uma mensagem de saudação do tempo limite reappears na fila de Olá prontos a Olá trabalho função tootry tooreprocess-lo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-558">If hello worker role never completes step **6**, then after a timeout hello message reappears on hello queue ready for hello worker role tootry tooreprocess it.</span></span> <span data-ttu-id="0c6db-559">função de trabalho de Olá pode verificar o número de vezes uma mensagem na fila de Olá foram lidos e, se necessário, o sinalizador é uma mensagem de "nocivas" para investigação enviando-tooa separar fila.</span><span class="sxs-lookup"><span data-stu-id="0c6db-559">hello worker role can check how many times a message on hello queue has been read and, if necessary, flag it is a "poison" message for investigation by sending it tooa separate queue.</span></span> <span data-ttu-id="0c6db-560">Para obter mais informações sobre a leitura de mensagens de fila e a verificação de Olá anular contagem, consulte [obter mensagens](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-560">For more information about reading queue messages and checking hello dequeue count, see [Get Messages](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span></span>  

<span data-ttu-id="0c6db-561">Alguns erros dos serviços de tabela e fila Olá erros transitórios e a aplicação cliente deve incluem toohandle de lógica de repetição adequado-los.</span><span class="sxs-lookup"><span data-stu-id="0c6db-561">Some errors from hello Table and Queue services are transient errors, and your client application should include suitable retry logic toohandle them.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-562">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-562">Issues and considerations</span></span>
<span data-ttu-id="0c6db-563">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-563">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-564">Esta solução fornece para isolamento da transação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-564">This solution does not provide for transaction isolation.</span></span> <span data-ttu-id="0c6db-565">Por exemplo, um cliente pode ler Olá **atual** e **arquivo** tabelas quando a função de trabalho de Olá foi entre passos **4** e **5**e ver um inconsistente vista dos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-565">For example, a client could read hello **Current** and **Archive** tables when hello worker role was between steps **4** and **5**, and see an inconsistent view of hello data.</span></span> <span data-ttu-id="0c6db-566">Tenha em atenção que os dados de Olá serão consistentes eventualmente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-566">Note that hello data will be consistent eventually.</span></span>  
* <span data-ttu-id="0c6db-567">Tem de ser se de que os passos 4 e 5 idempotent na consistência eventual de tooensure de ordem.</span><span class="sxs-lookup"><span data-stu-id="0c6db-567">You must be sure that steps 4 and 5 are idempotent in order tooensure eventual consistency.</span></span>  
* <span data-ttu-id="0c6db-568">Pode dimensionar solução Olá utilizando várias filas e instâncias de função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-568">You can scale hello solution by using multiple queues and worker role instances.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-569">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-569">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-570">Utilize este padrão quando quiser tooguarantee a consistência eventual entre entidades que existe nas tabelas ou partições diferentes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-570">Use this pattern when you want tooguarantee eventual consistency between entities that exist in different partitions or tables.</span></span> <span data-ttu-id="0c6db-571">Pode expandir este consistência eventual do tooensure padrão para operações em serviço de tabela Olá e serviço de Blob Olá e outras origens de dados de armazenamento não do Azure, tais como o sistema de ficheiros de base de dados ou Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-571">You can extend this pattern tooensure eventual consistency for operations across hello Table service and hello Blob service and other non-Azure Storage data sources such as database or hello file system.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-572">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-572">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-573">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-573">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-574">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-574">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="0c6db-575">Intercalação ou substituir</span><span class="sxs-lookup"><span data-stu-id="0c6db-575">Merge or replace</span></span>](#merge-or-replace)  

> [!NOTE]
> <span data-ttu-id="0c6db-576">Se o isolamento da transação é importante tooyour solução, deve considerar ao reestruturar o tooenable de tabelas que toouse EGTs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-576">If transaction isolation is important tooyour solution, you should consider redesigning your tables tooenable you toouse EGTs.</span></span>  
> 
> 

### <a name="index-entities-pattern"></a><span data-ttu-id="0c6db-577">Padrão de entidades de índice</span><span class="sxs-lookup"><span data-stu-id="0c6db-577">Index Entities Pattern</span></span>
<span data-ttu-id="0c6db-578">Manter o índice entidades tooenable eficiente pesquisas que devolvem apresenta uma lista de entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-578">Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-579">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-579">Context and problem</span></span>
<span data-ttu-id="0c6db-580">Olá serviço tabela indexa automaticamente entidades utilizando Olá **PartitionKey** e **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-580">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-581">Isto permite que um tooretrieve de aplicação de cliente uma entidade eficiente, utilizando uma consulta de ponto.</span><span class="sxs-lookup"><span data-stu-id="0c6db-581">This enables a client application tooretrieve an entity efficiently using a point query.</span></span> <span data-ttu-id="0c6db-582">Por exemplo, utilizando a estrutura da tabela Olá mostrada abaixo, uma aplicação cliente pode eficientemente obter uma entidade de empregado individuais utilizando o nome do departamento de Olá e id de empregado Olá (Olá **PartitionKey** e **RowKey** ).</span><span class="sxs-lookup"><span data-stu-id="0c6db-582">For example, using hello table structure shown below, a client application can efficiently retrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey**).</span></span>  

![][13]

<span data-ttu-id="0c6db-583">Se também pretender tooretrieve capaz de toobe uma lista de entidades de empregado com base no valor de Olá de outra propriedade exclusivos, como o seu apelido, tem de utilizar uma partição menos eficiente toofind correspondências de análise, em vez de utilizar um índice toolook-los diretamente de segurança.</span><span class="sxs-lookup"><span data-stu-id="0c6db-583">If you also want toobe able tooretrieve a list of employee entities based on hello value of another non-unique property, such as their last name, you must use a less efficient partition scan toofind matches rather than using an index toolook them up directly.</span></span> <span data-ttu-id="0c6db-584">Isto acontece porque o serviço de tabela Olá não fornece índices secundários.</span><span class="sxs-lookup"><span data-stu-id="0c6db-584">This is because hello table service does not provide secondary indexes.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-585">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-585">Solution</span></span>
<span data-ttu-id="0c6db-586">pesquisa de tooenable por apelido com uma estrutura de entidade Olá mostrado acima, tem de manter as listas de ids de funcionário.</span><span class="sxs-lookup"><span data-stu-id="0c6db-586">tooenable lookup by last name with hello entity structure shown above, you must maintain lists of employee ids.</span></span> <span data-ttu-id="0c6db-587">Se pretender que as entidades do empregado de Olá tooretrieve com um nome de último específico, como Jones, tem de primeiro localizar lista Olá de ids de empregado para os funcionários com Jones como o seu apelido e, em seguida, obter as entidades de empregado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-587">If you want tooretrieve hello employee entities with a particular last name, such as Jones, you must first locate hello list of employee ids for employees with Jones as their last name, and then retrieve those employee entities.</span></span> <span data-ttu-id="0c6db-588">Existem três opções principais para armazenar as listas de Olá de ids de empregado:</span><span class="sxs-lookup"><span data-stu-id="0c6db-588">There are three main options for storing hello lists of employee ids:</span></span>  

* <span data-ttu-id="0c6db-589">Utilize o blob storage.</span><span class="sxs-lookup"><span data-stu-id="0c6db-589">Use blob storage.</span></span>  
* <span data-ttu-id="0c6db-590">Crie entidades de índice no Olá mesma partição como entidades de empregado Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-590">Create index entities in hello same partition as hello employee entities.</span></span>  
* <span data-ttu-id="0c6db-591">Crie entidades de índice numa partição separada ou tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-591">Create index entities in a separate partition or table.</span></span>  

<span data-ttu-id="0c6db-592"><u>Opção #1: Armazenamento de BLOBs de utilização</u></span><span class="sxs-lookup"><span data-stu-id="0c6db-592"><u>Option #1: Use blob storage</u></span></span>  

<span data-ttu-id="0c6db-593">Para a primeira opção Olá, pode criar um blob para cada apelido exclusivo e, no arquivo de cada blob uma lista de Olá **PartitionKey** (departamento) e **RowKey** (id de empregado) os valores para os empregados que têm ou pela última vez nome.</span><span class="sxs-lookup"><span data-stu-id="0c6db-593">For hello first option, you create a blob for every unique last name, and in each blob store a list of hello **PartitionKey** (department) and **RowKey** (employee id) values for employees that have that last name.</span></span> <span data-ttu-id="0c6db-594">Quando adicionar ou eliminar um empregado deve certificar-se de que o conteúdo de Olá do blob relevantes Olá é eventualmente consistente com as entidades de empregado Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-594">When you add or delete an employee you should ensure that hello content of hello relevant blob is eventually consistent with hello employee entities.</span></span>  

<span data-ttu-id="0c6db-595"><u>Opção #2:</u> Olá, criar entidades de índice na mesma partição</span><span class="sxs-lookup"><span data-stu-id="0c6db-595"><u>Option #2:</u> Create index entities in hello same partition</span></span>  

<span data-ttu-id="0c6db-596">Para a segunda opção Olá, utilizam as entidades de índice que armazenam Olá dados os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c6db-596">For hello second option, use index entities that store hello following data:</span></span>  

![][14]

<span data-ttu-id="0c6db-597">Olá **EmployeeIDs** propriedade contém uma lista de ids de empregado para os funcionários com apelido Olá armazenado no Olá **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-597">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="0c6db-598">Olá passos seguintes descrevem o processo de Olá que deve seguir quando estiver a adicionar um empregado a nova se estiver a utilizar a segunda opção de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-598">hello following steps outline hello process you should follow when you are adding a new employee if you are using hello second option.</span></span> <span data-ttu-id="0c6db-599">Neste exemplo, que estamos a adicionar um empregado com Id 000152 e um apelido Jones no departamento de vendas Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-599">In this example, we are adding an employee with Id 000152 and a last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="0c6db-600">Obter o índice de Olá entidade com uma **PartitionKey** valor "Vendas" e Olá **RowKey** valor "Jones."</span><span class="sxs-lookup"><span data-stu-id="0c6db-600">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span> <span data-ttu-id="0c6db-601">Guarde Olá ETag de toouse esta entidade no passo 2.</span><span class="sxs-lookup"><span data-stu-id="0c6db-601">Save hello ETag of this entity toouse in step 2.</span></span>  
2. <span data-ttu-id="0c6db-602">Criar uma transação de grupo de entidade (ou seja, uma operação em lote) insere a entidade de empregado novo Olá (**PartitionKey** valor "Vendas" e **RowKey** valor "000152"), e atualizações Olá entidade índice ( **PartitionKey** valor "Vendas" e **RowKey** valor "Jones") ao adicionar Olá nova empregado id toohello lista no campo de EmployeeIDs Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-602">Create an entity group transaction (that is, a batch operation) that inserts hello new employee entity (**PartitionKey** value "Sales" and **RowKey** value "000152"), and updates hello index entity (**PartitionKey** value "Sales" and **RowKey** value "Jones") by adding hello new employee id toohello list in hello EmployeeIDs field.</span></span> <span data-ttu-id="0c6db-603">Para mais informações sobre transações do grupo de entidade, consulte [entidade grupo transações](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="0c6db-603">For more information about entity group transactions, see [Entity Group Transactions](#entity-group-transactions).</span></span>  
3. <span data-ttu-id="0c6db-604">Se a transação de grupo de entidade Olá falhar devido a um erro de simultaneidade otimista (alguém tem apenas modificou Olá índice entidade), em seguida, terá de toostart através no passo 1 novamente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-604">If hello entity group transaction fails because of an optimistic concurrency error (someone else has just modified hello index entity), then you need toostart over at step 1 again.</span></span>  

<span data-ttu-id="0c6db-605">Pode utilizar um toodeleting abordagem semelhante um empregado se estiver a utilizar a segunda opção de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-605">You can use a similar approach toodeleting an employee if you are using hello second option.</span></span> <span data-ttu-id="0c6db-606">A alteração do apelido um empregado é ligeiramente mais complexa pois precisará tooexecute uma transação de grupo de entidade que atualiza três entidades: Olá entidade empregado, a entidade de índice de Olá para Apelido antigo Olá e a entidade de índice de Olá para novo nome do último Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-606">Changing an employee's last name is slightly more complex because you will need tooexecute an entity group transaction that updates three entities: hello employee entity, hello index entity for hello old last name, and hello index entity for hello new last name.</span></span> <span data-ttu-id="0c6db-607">Tem de obter cada entidade antes de efetuar quaisquer alterações por ordem de valores de ETag tooretrieve Olá que, em seguida, pode utilizar atualizações de Olá tooperform utilizar simultaneidade otimista.</span><span class="sxs-lookup"><span data-stu-id="0c6db-607">You must retrieve each entity before making any changes in order tooretrieve hello ETag values that you can then use tooperform hello updates using optimistic concurrency.</span></span>  

<span data-ttu-id="0c6db-608">Olá passos seguintes descrevem o processo de Olá que deve seguir quando for necessário toolook segurança todos os funcionários de Olá com um determinado apelido, um departamento, se estiver a utilizar a segunda opção de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-608">hello following steps outline hello process you should follow when you need toolook up all hello employees with a given last name in a department if you are using hello second option.</span></span> <span data-ttu-id="0c6db-609">Neste exemplo, vamos são procurar todos os funcionários de Olá com apelido Jones no departamento de vendas Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-609">In this example, we are looking up all hello employees with last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="0c6db-610">Obter o índice de Olá entidade com uma **PartitionKey** valor "Vendas" e Olá **RowKey** valor "Jones."</span><span class="sxs-lookup"><span data-stu-id="0c6db-610">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span>  
2. <span data-ttu-id="0c6db-611">Analisar a lista de Olá de empregado Ids no campo de EmployeeIDs Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-611">Parse hello list of employee Ids in hello EmployeeIDs field.</span></span>  
3. <span data-ttu-id="0c6db-612">Se precisar de informações adicionais sobre cada um destes funcionários (por exemplo, os respetivos endereços de e-mail), cada uma das entidades de empregado Olá utilizando obter **PartitionKey** valor "Vendas" e **RowKey** valores do lista de Olá de funcionários que obteve no passo 2.</span><span class="sxs-lookup"><span data-stu-id="0c6db-612">If you need additional information about each of these employees (such as their email addresses), retrieve each of hello employee entities using **PartitionKey** value "Sales" and **RowKey** values from hello list of employees you obtained in step 2.</span></span>  

<span data-ttu-id="0c6db-613"><u>Opção #3:</u> criar entidades de índice numa partição separada ou tabela</span><span class="sxs-lookup"><span data-stu-id="0c6db-613"><u>Option #3:</u> Create index entities in a separate partition or table</span></span>  

<span data-ttu-id="0c6db-614">Opção de terceiro Olá, utilizam as entidades de índice que armazenam Olá dados os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c6db-614">For hello third option, use index entities that store hello following data:</span></span>  

![][15]

<span data-ttu-id="0c6db-615">Olá **EmployeeIDs** propriedade contém uma lista de ids de empregado para os funcionários com apelido Olá armazenado no Olá **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-615">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="0c6db-616">Com a opção de terceira Olá, não é possível utilizar EGTs toomaintain consistência porque são entidades de índice de Olá numa partição separada da entidades de empregado Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-616">With hello third option, you cannot use EGTs toomaintain consistency because hello index entities are in a separate partition from hello employee entities.</span></span> <span data-ttu-id="0c6db-617">Deve certificar-se de que as entidades de índice de Olá são eventualmente consistentes com as entidades de empregado Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-617">You should ensure that hello index entities are eventually consistent with hello employee entities.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-618">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-618">Issues and considerations</span></span>
<span data-ttu-id="0c6db-619">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-619">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-620">Esta solução requer tooretrieve, pelo menos, duas consultas entidades de correspondência: um tooquery Olá índice entidades tooobtain Olá lista de **RowKey** os valores e, em seguida, consulta tooretrieve cada entidade na lista de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-620">This solution requires at least two queries tooretrieve matching entities: one tooquery hello index entities tooobtain hello list of **RowKey** values, and then queries tooretrieve each entity in hello list.</span></span>  
* <span data-ttu-id="0c6db-621">Uma vez que uma entidade individuais tem um tamanho máximo de 1 MB, opção #2 e a opção #3 na solução de Olá partem do princípio que lista Olá de ids de empregado para qualquer apelido determinado nunca é maior que 1 MB.</span><span class="sxs-lookup"><span data-stu-id="0c6db-621">Given that an individual entity has a maximum size of 1 MB, option #2 and option #3 in hello solution assume that hello list of employee ids for any given last name is never greater than 1 MB.</span></span> <span data-ttu-id="0c6db-622">Se Olá a lista de ids de empregado está provavelmente toobe superior a 1 MB de tamanho, utilize a opção #1 e armazenar dados do índice Olá no blob storage.</span><span class="sxs-lookup"><span data-stu-id="0c6db-622">If hello list of employee ids is likely toobe greater than 1 MB in size, use option #1 and store hello index data in blob storage.</span></span>  
* <span data-ttu-id="0c6db-623">Se utilizar a opção #2 (utilizando EGTs toohandle adicionar e eliminar os funcionários e a alteração do apelido um empregado), tem de avaliar se o volume Olá de transações irão abordar os limites de escalabilidade Olá numa determinada partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-623">If you use option #2 (using EGTs toohandle adding and deleting employees, and changing an employee's last name) you must evaluate if hello volume of transactions will approach hello scalability limits in a given partition.</span></span> <span data-ttu-id="0c6db-624">Se for este caso de Olá, deve considerar uma solução eventualmente consistente (opção #1 ou opção #3) que utiliza filas toohandle Olá update pedidos e permite-lhe toostore as entidades de índice numa partição separada da entidades de empregado Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-624">If this is hello case, you should consider an eventually consistent solution (option #1 or option #3) that uses queues toohandle hello update requests and enables you toostore your index entities in a separate partition from hello employee entities.</span></span>  
* <span data-ttu-id="0c6db-625">Opção #2 nesta solução parte do princípio de que pretende que toolook cópias de segurança por apelido dentro de um departamento: por exemplo, pretende tooretrieve uma lista dos empregados com um apelido Jones no departamento de vendas Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-625">Option #2 in this solution assumes that you want toolook up by last name within a department: for example, you want tooretrieve a list of employees with a last name Jones in hello Sales department.</span></span> <span data-ttu-id="0c6db-626">Se quiser toobe toolook capaz de segurança de todos os funcionários de Olá com um apelido Jones em toda a organização Olá, utilize a opção #1 ou a opção #3.</span><span class="sxs-lookup"><span data-stu-id="0c6db-626">If you want toobe able toolook up all hello employees with a last name Jones across hello whole organization, use either option #1 or option #3.</span></span>
* <span data-ttu-id="0c6db-627">Pode implementar uma solução baseada em fila que fornece a consistência eventual (consulte Olá [padrão de transações eventualmente consistente](#eventually-consistent-transactions-pattern) para obter mais detalhes).</span><span class="sxs-lookup"><span data-stu-id="0c6db-627">You can implement a queue-based solution that delivers eventual consistency (see hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) for more details).</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-628">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-628">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-629">Utilize este padrão quando quiser toolookup um conjunto de entidades que todos os partilham um valor de propriedade comuns, como todos os funcionários com apelido Olá Jones.</span><span class="sxs-lookup"><span data-stu-id="0c6db-629">Use this pattern when you want toolookup a set of entities that all share a common property value, such as all employees with hello last name Jones.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-630">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-630">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-631">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-631">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-632">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-632">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="0c6db-633">Padrão de transações eventualmente consistente</span><span class="sxs-lookup"><span data-stu-id="0c6db-633">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="0c6db-634">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-634">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="0c6db-635">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-635">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="denormalization-pattern"></a><span data-ttu-id="0c6db-636">Padrão de denormalization</span><span class="sxs-lookup"><span data-stu-id="0c6db-636">Denormalization pattern</span></span>
<span data-ttu-id="0c6db-637">Combinar os dados relacionados num tooenable única entidade tooretrieve Olá todos os dados que precisa com uma ponto único de consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-637">Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-638">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-638">Context and problem</span></span>
<span data-ttu-id="0c6db-639">Numa base de dados relacional, normalmente normalizar dados tooremove duplicados, resultando em consultas que obtêm dados de várias tabelas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-639">In a relational database, you typically normalize data tooremove duplication resulting in queries that retrieve data from multiple tables.</span></span> <span data-ttu-id="0c6db-640">Se normalizar os dados nas tabelas do Azure, tem de se vários ida e volta de Olá cliente toohello servidor tooretrieve os dados relacionados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-640">If you normalize your data in Azure tables, you must make multiple round trips from hello client toohello server tooretrieve your related data.</span></span> <span data-ttu-id="0c6db-641">Por exemplo, com a estrutura da tabela Olá mostrada abaixo, precisam de dois arredondar detalhes de Olá tooretrieve viagens para um departamento: um toofetch Olá departamento entidade que inclui o id do Gestor de Olá e os detalhes, em seguida, outro pedido toofetch Olá do Gestor num empregado entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-641">For example, with hello table structure shown below you need two round trips tooretrieve hello details for a department: one toofetch hello department entity that includes hello manager's id, and then another request toofetch hello manager's details in an employee entity.</span></span>  

![][16]

#### <a name="solution"></a><span data-ttu-id="0c6db-642">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-642">Solution</span></span>
<span data-ttu-id="0c6db-643">Em vez de armazenar dados de Olá em duas entidades separadas, denormalize dados Olá e manter uma cópia dos detalhes do Gestor de Olá na entidade de departamento Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-643">Instead of storing hello data in two separate entities, denormalize hello data and keep a copy of hello manager's details in hello department entity.</span></span> <span data-ttu-id="0c6db-644">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="0c6db-644">For example:</span></span>  

![][17]

<span data-ttu-id="0c6db-645">Com entidades de departamento armazenadas com estas propriedades, agora pode obter todos os detalhes de Olá que terá sobre um departamento utilizando uma consulta de ponto.</span><span class="sxs-lookup"><span data-stu-id="0c6db-645">With department entities stored with these properties, you can now retrieve all hello details you need about a department using a point query.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-646">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-646">Issues and considerations</span></span>
<span data-ttu-id="0c6db-647">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-647">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-648">Há alguns custos de sobrecarga associados ao armazenamento alguns dados duas vezes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-648">There is some cost overhead associated with storing some data twice.</span></span> <span data-ttu-id="0c6db-649">Olá desempenho benefício (resultante do serviço de armazenamento de toohello pedidos menos), normalmente, prevalece sobre aumento marginal Olá os custos de armazenamento (e este custo é parcialmente deslocamento por uma redução do número de Olá de transações requerem os detalhes de Olá toofetch de um departamento).</span><span class="sxs-lookup"><span data-stu-id="0c6db-649">hello performance benefit (resulting from fewer requests toohello storage service) typically outweighs hello marginal increase in storage costs (and this cost is partially offset by a reduction in hello number of transactions you require toofetch hello details of a department).</span></span>  
* <span data-ttu-id="0c6db-650">Tem de manter consistência Olá de entidades de dois Olá que armazenam informações sobre os gestores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-650">You must maintain hello consistency of hello two entities that store information about managers.</span></span> <span data-ttu-id="0c6db-651">Pode processar problema de consistência Olá utilizando EGTs tooupdate várias entidades numa única transação atómica: neste caso, Olá departamento entidade e entidade de empregado Olá para Gestor de departamento Olá são armazenados no Olá mesma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-651">You can handle hello consistency issue by using EGTs tooupdate multiple entities in a single atomic transaction: in this case, hello department entity, and hello employee entity for hello department manager are stored in hello same partition.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-652">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-652">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-653">Utilize este padrão quando precisar de toolook das informações relacionadas com frequência.</span><span class="sxs-lookup"><span data-stu-id="0c6db-653">Use this pattern when you frequently need toolook up related information.</span></span> <span data-ttu-id="0c6db-654">Este padrão reduz o número de Olá das consultas, que o cliente tem de se dados de Olá tooretrieve requer.</span><span class="sxs-lookup"><span data-stu-id="0c6db-654">This pattern reduces hello number of queries your client must make tooretrieve hello data it requires.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-655">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-655">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-656">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-656">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-657">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-657">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="0c6db-658">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-658">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="0c6db-659">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-659">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="compound-key-pattern"></a><span data-ttu-id="0c6db-660">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-660">Compound key pattern</span></span>
<span data-ttu-id="0c6db-661">Utilize composta **RowKey** valores tooenable toolookup um cliente relacionadas com a dados com um ponto único de consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-661">Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-662">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-662">Context and problem</span></span>
<span data-ttu-id="0c6db-663">Base de dados relacional, é bastante natural toouse associações em consultas tooreturn relacionadas com partes do cliente de toohello dados numa única consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-663">In a relational database, it is quite natural toouse joins in queries tooreturn related pieces of data toohello client in a single query.</span></span> <span data-ttu-id="0c6db-664">Por exemplo, poderá utilizar toolook de id de empregado Olá uma lista de entidades relacionadas que contenham o desempenho e reveja os dados para esse empregado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-664">For example, you might use hello employee id toolook up a list of related entities that contain performance and review data for that employee.</span></span>  

<span data-ttu-id="0c6db-665">Suponha que estão a armazenar as entidades de empregado no serviço de tabela Olá utilizando Olá seguir a estrutura:</span><span class="sxs-lookup"><span data-stu-id="0c6db-665">Assume you are storing employee entities in hello Table service using hello following structure:</span></span>  

![][18]

<span data-ttu-id="0c6db-666">Também precisa de dados históricos toostore referentes tooreviews e desempenho para cada empregado de Olá ano trabalhou para a sua organização e precisa tooaccess capaz de toobe estas informações por ano.</span><span class="sxs-lookup"><span data-stu-id="0c6db-666">You also need toostore historical data relating tooreviews and performance for each year hello employee has worked for your organization and you need toobe able tooaccess this information by year.</span></span> <span data-ttu-id="0c6db-667">Uma opção é toocreate outra tabela que armazena as entidades com Olá seguir a estrutura:</span><span class="sxs-lookup"><span data-stu-id="0c6db-667">One option is toocreate another table that stores entities with hello following structure:</span></span>  

![][19]

<span data-ttu-id="0c6db-668">Tenha em atenção que, com esta abordagem, pode decidir tooduplicate algumas informações (por exemplo, o nome próprio e apelido) no Olá nova entidade tooenable tooretrieve os dados com um único pedido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-668">Notice that with this approach you may decide tooduplicate some information (such as first name and last name) in hello new entity tooenable you tooretrieve your data with a single request.</span></span> <span data-ttu-id="0c6db-669">No entanto, não é possível manter a consistência forte porque não é possível utilizar um EGT tooupdate Olá duas entidades atomically.</span><span class="sxs-lookup"><span data-stu-id="0c6db-669">However, you cannot maintain strong consistency because you cannot use an EGT tooupdate hello two entities atomically.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-670">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-670">Solution</span></span>
<span data-ttu-id="0c6db-671">Armazene um novo tipo de entidade na tabela original com entidades Olá seguir a estrutura:</span><span class="sxs-lookup"><span data-stu-id="0c6db-671">Store a new entity type in your original table using entities with hello following structure:</span></span>  

![][20]

<span data-ttu-id="0c6db-672">Repare como Olá **RowKey** é agora uma chave composta constituída por id de empregado Olá e ano de Olá Olá revisão de dados de que permite-lhe tooretrieve Olá desempenho do empregado e analisar dados com um único pedido de uma única entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-672">Notice how hello **RowKey** is now a compound key made up of hello employee id and hello year of hello review data that enables you tooretrieve hello employee's performance and review data with a single request for a single entity.</span></span>  

<span data-ttu-id="0c6db-673">Olá exemplo a seguir descreve como pode obter todos os dados de revisão Olá para um funcionário específico (por exemplo, um empregado 000123 no departamento de vendas Olá):</span><span class="sxs-lookup"><span data-stu-id="0c6db-673">hello following example outlines how you can retrieve all hello review data for a particular employee (such as employee 000123 in hello Sales department):</span></span>  

<span data-ttu-id="0c6db-674">$filter = (PartitionKey eq 'Vendas') e (RowKey ge 'empid_000123') e (RowKey lt 'empid_000124') & $select = RowKey, Gestor de classificação, ponto a ponto de classificação, comentários</span><span class="sxs-lookup"><span data-stu-id="0c6db-674">$filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000123') and (RowKey lt 'empid_000124')&$select=RowKey,Manager Rating,Peer Rating,Comments</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-675">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-675">Issues and considerations</span></span>
<span data-ttu-id="0c6db-676">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-676">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-677">Deve utilizar um caráter de separação adequado que torna mais fácil tooparse Olá **RowKey** valor: por exemplo, **000123_2012**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-677">You should use a suitable separator character that makes it easy tooparse hello **RowKey** value: for example, **000123_2012**.</span></span>  
* <span data-ttu-id="0c6db-678">Também estão a armazenar esta entidade no Olá mesma partição como outras entidades que contêm dados relacionados de Olá empregado mesmo, o que significa que pode utilizar EGTs toomaintain a consistência forte.</span><span class="sxs-lookup"><span data-stu-id="0c6db-678">You are also storing this entity in hello same partition as other entities that contain related data for hello same employee, which means you can use EGTs toomaintain strong consistency.</span></span>
* <span data-ttu-id="0c6db-679">Deve considerar a frequência irá consultar Olá dados toodetermine se este padrão é adequado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-679">You should consider how frequently you will query hello data toodetermine whether this pattern is appropriate.</span></span>  <span data-ttu-id="0c6db-680">Por exemplo, se forem aceder ao hello com pouca frequência a data de revisão e Olá dados empregado principal, muitas vezes, que deve mantê-las como entidades separadas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-680">For example, if you will access hello review data infrequently and hello main employee data often you should keep them as separate entities.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-681">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-681">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-682">Utilize este padrão quando precisar de toostore um ou mais relacionadas com entidades essa consulta frequentemente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-682">Use this pattern when you need toostore one or more related entities that you query frequently.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-683">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-683">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-684">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-684">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-685">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-685">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="0c6db-686">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-686">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  
* [<span data-ttu-id="0c6db-687">Padrão de transações eventualmente consistente</span><span class="sxs-lookup"><span data-stu-id="0c6db-687">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  

### <a name="log-tail-pattern"></a><span data-ttu-id="0c6db-688">Padrão de seguimento de registo</span><span class="sxs-lookup"><span data-stu-id="0c6db-688">Log tail pattern</span></span>
<span data-ttu-id="0c6db-689">Obter Olá  *n*  entidades recentemente adicionado tooa partição utilizando um **RowKey** valor ordena na data inversa e ordem de tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-689">Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-690">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-690">Context and problem</span></span>
<span data-ttu-id="0c6db-691">Um requisito comum é tooretrieve capaz de ser entidades Olá criado mais recentemente, por exemplo Olá dez mais recentes despesa afirmações submetidas por um funcionário.</span><span class="sxs-lookup"><span data-stu-id="0c6db-691">A common requirement is be able tooretrieve hello most recently created entities, for example hello ten most recent expense claims submitted by an employee.</span></span> <span data-ttu-id="0c6db-692">Suporte de consulta de tabela um **$top** Olá tooreturn de operação de consulta primeiro  *n*  entidades de um conjunto: não há nenhuma consulta equivalente operação tooreturn Olá últimas n entidades com um conjunto.</span><span class="sxs-lookup"><span data-stu-id="0c6db-692">Table queries support a **$top** query operation tooreturn hello first *n* entities from a set: there is no equivalent query operation tooreturn hello last n entities in a set.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-693">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-693">Solution</span></span>
<span data-ttu-id="0c6db-694">Arquivo Olá entidades utilizando uma **RowKey** que naturalmente ordena no inversa data/hora ordem utilizando, para a entrada mais recente Olá é sempre Olá um primeiro na tabela de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-694">Store hello entities using a **RowKey** that naturally sorts in reverse date/time order by using so hello most recent entry is always hello first one in hello table.</span></span>  

<span data-ttu-id="0c6db-695">Por exemplo, tooretrieve capaz de toobe Olá dez afirmações despesa mais recentes submetidas por um empregado, pode utilizar um valor de escala inversa derivado Olá data/hora atual.</span><span class="sxs-lookup"><span data-stu-id="0c6db-695">For example, toobe able tooretrieve hello ten most recent expense claims submitted by an employee, you can use a reverse tick value derived from hello current date/time.</span></span> <span data-ttu-id="0c6db-696">Olá c# código exemplo seguinte mostra uma forma toocreate um valor de "inverted ticks" adequado para uma **RowKey** que ordena de Olá toohello mais recente mais antigo:</span><span class="sxs-lookup"><span data-stu-id="0c6db-696">hello following C# code sample shows one way toocreate a suitable "inverted ticks" value for a **RowKey** that sorts from hello most recent toohello oldest:</span></span>  

`string invertedTicks = string.Format("{0:D19}", DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks);`  

<span data-ttu-id="0c6db-697">Pode voltar valor de tempo de data toohello utilizando Olá seguinte código:</span><span class="sxs-lookup"><span data-stu-id="0c6db-697">You can get back toohello date time value using hello following code:</span></span>  

`DateTime dt = new DateTime(DateTime.MaxValue.Ticks - Int64.Parse(invertedTicks));`  

<span data-ttu-id="0c6db-698">consulta de tabela Olá tem o seguinte aspeto:</span><span class="sxs-lookup"><span data-stu-id="0c6db-698">hello table query looks like this:</span></span>  

`https://myaccount.table.core.windows.net/EmployeeExpense(PartitionKey='empid')?$top=10`  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-699">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-699">Issues and considerations</span></span>
<span data-ttu-id="0c6db-700">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-700">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-701">Deve preencher o valor de escala inversa Olá com líderes zeros valor de cadeia de Olá tooensure ordena conforme esperado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-701">You must pad hello reverse tick value with leading zeroes tooensure hello string value sorts as expected.</span></span>  
* <span data-ttu-id="0c6db-702">Tem de ser em consideração os objetivos de escalabilidade Olá ao nível de Olá de uma partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-702">You must be aware of hello scalability targets at hello level of a partition.</span></span> <span data-ttu-id="0c6db-703">Seja cuidadoso não criar partições do ponto ativo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-703">Be careful not create hot spot partitions.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-704">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-704">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-705">Utilize este padrão quando precisar de entidades tooaccess por ordem inversa de data/hora ou quando for necessário tooaccess Olá mais recentemente adicionado entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-705">Use this pattern when you need tooaccess entities in reverse date/time order or when you need tooaccess hello most recently added entities.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-706">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-706">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-707">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-707">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-708">Preceder / acrescentar anti padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-708">Prepend / append anti-pattern</span></span>](#prepend-append-anti-pattern)  
* [<span data-ttu-id="0c6db-709">Obter entidades</span><span class="sxs-lookup"><span data-stu-id="0c6db-709">Retrieving entities</span></span>](#retrieving-entities)  

### <a name="high-volume-delete-pattern"></a><span data-ttu-id="0c6db-710">Padrão de eliminação de um volume elevado</span><span class="sxs-lookup"><span data-stu-id="0c6db-710">High volume delete pattern</span></span>
<span data-ttu-id="0c6db-711">Ativar a eliminação de um grande volume de entidades Olá armazenando todas as entidades de Olá para eliminação em simultâneo na sua própria tabela separada; eliminar entidades Olá, eliminando tabela Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-711">Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-712">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-712">Context and problem</span></span>
<span data-ttu-id="0c6db-713">Muitas aplicações eliminar dados antigos que já não necessita de aplicação de cliente disponíveis tooa toobe ou essa aplicação Olá tem arquivados tooanother média de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-713">Many applications delete old data which no longer needs toobe available tooa client application, or that hello application has archived tooanother storage medium.</span></span> <span data-ttu-id="0c6db-714">Normalmente, identificar esses dados por uma data: por exemplo, tiver registos toodelete requisito de todos os pedidos de início de sessão que são mais de 60 dias.</span><span class="sxs-lookup"><span data-stu-id="0c6db-714">You typically identify such data by a date: for example, you have a requirement toodelete records of all login requests that are more than 60 days old.</span></span>  

<span data-ttu-id="0c6db-715">Um design de possíveis é toouse Olá data e hora pedido de início de sessão de Olá no Olá **RowKey**:</span><span class="sxs-lookup"><span data-stu-id="0c6db-715">One possible design is toouse hello date and time of hello login request in hello **RowKey**:</span></span>  

![][21]

<span data-ttu-id="0c6db-716">Esta abordagem evita a hotspots de partição porque a aplicação Olá pode inserir e eliminar entidades de início de sessão para cada utilizador numa partição separada.</span><span class="sxs-lookup"><span data-stu-id="0c6db-716">This approach avoids partition hotspots because hello application can insert and delete login entities for each user in a separate partition.</span></span> <span data-ttu-id="0c6db-717">No entanto, esta abordagem poderá ser dispendiosa e demorada se tiver um grande número de entidades porque tem primeiro tooperform uma tabela de análise na ordem tooidentify toodelete de entidades de Olá todas as e, em seguida, tem de eliminar cada entidade antiga.</span><span class="sxs-lookup"><span data-stu-id="0c6db-717">However, this approach may be costly and time consuming if you have a large number of entities because first you need tooperform a table scan in order tooidentify all hello entities toodelete, and then you must delete each old entity.</span></span> <span data-ttu-id="0c6db-718">Tenha em atenção que pode reduzir o número Olá de ida e volta toohello servidor necessário toodelete Olá antigo entidades por vários pedidos de eliminação de criação de batches para EGTs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-718">Note that you can reduce hello number of round trips toohello server required toodelete hello old entities by batching multiple delete requests into EGTs.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-719">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-719">Solution</span></span>
<span data-ttu-id="0c6db-720">Utilize uma tabela em separado para cada dia de início de sessão falhadas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-720">Use a separate table for each day of login attempts.</span></span> <span data-ttu-id="0c6db-721">Pode utilizar o design de entidade Olá acima tooavoid hotspots quando são inserir entidades e eliminar entidades antigas agora é simplesmente uma pergunta de eliminação de uma tabela de todos os dias (uma operação de armazenamento única) em vez de localizar e eliminar centenas e milhares de entidades de início de sessão individuais todos os dias.</span><span class="sxs-lookup"><span data-stu-id="0c6db-721">You can use hello entity design above tooavoid hotspots when you are inserting entities, and deleting old entities is now simply a question of deleting one table every day (a single storage operation) instead of finding and deleting hundreds and thousands of individual login entities every day.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-722">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-722">Issues and considerations</span></span>
<span data-ttu-id="0c6db-723">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-723">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-724">A estrutura suporta outras formas a aplicação utilizará dados Olá como procurar entidades específicas, com outros dados ou gerar agregam informações de ligação?</span><span class="sxs-lookup"><span data-stu-id="0c6db-724">Does your design support other ways your application will use hello data such as looking up specific entities, linking with other data, or generating aggregate information?</span></span>  
* <span data-ttu-id="0c6db-725">O design evitar frequente oportunidades quando são inserir novas entidades?</span><span class="sxs-lookup"><span data-stu-id="0c6db-725">Does your design avoid hot spots when you are inserting new entities?</span></span>  
* <span data-ttu-id="0c6db-726">Esperar um atraso se quiser tooreuse Olá mesmo depois de eliminar o nome da tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-726">Expect a delay if you want tooreuse hello same table name after deleting it.</span></span> <span data-ttu-id="0c6db-727">É melhor tooalways utilize tabela exclusivo nomes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-727">It's better tooalways use unique table names.</span></span>  
* <span data-ttu-id="0c6db-728">Espere alguns limitação ao primeiro utilizar uma nova tabela enquanto Olá serviço tabela aprende padrões de acesso de Olá e distribui as partições de Olá nós.</span><span class="sxs-lookup"><span data-stu-id="0c6db-728">Expect some throttling when you first use a new table while hello Table service learns hello access patterns and distributes hello partitions across nodes.</span></span> <span data-ttu-id="0c6db-729">Deve considerar a frequência tem de toocreate novas tabelas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-729">You should consider how frequently you need toocreate new tables.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-730">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-730">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-731">Utilize este padrão se tiver um grande volume de entidades que tem de eliminar em Olá mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-731">Use this pattern when you have a high volume of entities that you must delete at hello same time.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-732">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-732">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-733">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-733">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-734">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-734">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="0c6db-735">A modificação de entidades</span><span class="sxs-lookup"><span data-stu-id="0c6db-735">Modifying entities</span></span>](#modifying-entities)  

### <a name="data-series-pattern"></a><span data-ttu-id="0c6db-736">Padrão de séries de dados</span><span class="sxs-lookup"><span data-stu-id="0c6db-736">Data series pattern</span></span>
<span data-ttu-id="0c6db-737">Série de dados completa de loja uma única entidade toominimize Olá diversas pedidos que efetuar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-737">Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-738">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-738">Context and problem</span></span>
<span data-ttu-id="0c6db-739">Um cenário comum é para uma aplicação toostore uma série de dados que, normalmente, necessita de tooretrieve ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-739">A common scenario is for an application toostore a series of data that it typically needs tooretrieve all at once.</span></span> <span data-ttu-id="0c6db-740">Por exemplo, a aplicação poderá registar como muitas mensagens de MI cada empregado envia a cada hora e, em seguida, utilize este tooplot informações quantidade de mensagens enviada a cada utilizador Olá 24 horas anteriores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-740">For example, your application might record how many IM messages each employee sends every hour, and then use this information tooplot how many messages each user sent over hello preceding 24 hours.</span></span> <span data-ttu-id="0c6db-741">Uma estrutura poderá ser toostore 24 entidades para cada empregado:</span><span class="sxs-lookup"><span data-stu-id="0c6db-741">One design might be toostore 24 entities for each employee:</span></span>  

![][22]

<span data-ttu-id="0c6db-742">Com esta conceção, pode localizar e atualizar Olá tooupdate de entidade para cada empregado sempre que a aplicação de Olá tem o valor de contagem de mensagens de Olá tooupdate facilmente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-742">With this design, you can easily locate and update hello entity tooupdate for each employee whenever hello application needs tooupdate hello message count value.</span></span> <span data-ttu-id="0c6db-743">No entanto, tooretrieve Olá informações tooplot um gráfico de atividade de Olá para Olá anterior a 24 horas, tem de obter 24 entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-743">However, tooretrieve hello information tooplot a chart of hello activity for hello preceding 24 hours, you must retrieve 24 entities.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-744">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-744">Solution</span></span>
<span data-ttu-id="0c6db-745">Utilize Olá seguir a estrutura com uma contagem de mensagens de Olá de toostore propriedade separado para cada hora:</span><span class="sxs-lookup"><span data-stu-id="0c6db-745">Use hello following design with a separate property toostore hello message count for each hour:</span></span>  

![][23]

<span data-ttu-id="0c6db-746">Com esta conceção, pode utilizar uma contagem de mensagens hello de tooupdate de operação de intercalação do empregado para uma hora específica.</span><span class="sxs-lookup"><span data-stu-id="0c6db-746">With this design, you can use a merge operation tooupdate hello message count for an employee for a specific hour.</span></span> <span data-ttu-id="0c6db-747">Agora, pode obter todas as informações de Olá precisa de gráfico de Olá tooplot utilizando um pedido para uma única entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-747">Now, you can retrieve all hello information you need tooplot hello chart using a request for a single entity.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-748">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-748">Issues and considerations</span></span>
<span data-ttu-id="0c6db-749">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-749">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-750">Se a série de dados completo não se ajusta uma única entidade (uma entidade pode ter propriedades de too252), utilize um arquivo de dados alternativos, tais como um blob.</span><span class="sxs-lookup"><span data-stu-id="0c6db-750">If your complete data series does not fit into a single entity (an entity can have up too252 properties), use an alternative data store such as a blob.</span></span>  
* <span data-ttu-id="0c6db-751">Se tiver vários clientes em simultâneo a atualizar uma entidade, terá de toouse Olá **ETag** simultaneidade otimista tooimplement.</span><span class="sxs-lookup"><span data-stu-id="0c6db-751">If you have multiple clients updating an entity simultaneously, you will need toouse hello **ETag** tooimplement optimistic concurrency.</span></span> <span data-ttu-id="0c6db-752">Se tiver muitos clientes, pode deparar-se elevada contenção.</span><span class="sxs-lookup"><span data-stu-id="0c6db-752">If you have many clients, you may experience high contention.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-753">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-753">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-754">Utilize este padrão quando precisar tooupdate e obter uma série de dados associada a uma entidade individuais.</span><span class="sxs-lookup"><span data-stu-id="0c6db-754">Use this pattern when you need tooupdate and retrieve a data series associated with an individual entity.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-755">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-755">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-756">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-756">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-757">Padrão de entidades grandes</span><span class="sxs-lookup"><span data-stu-id="0c6db-757">Large entities pattern</span></span>](#large-entities-pattern)  
* [<span data-ttu-id="0c6db-758">Intercalação ou substituir</span><span class="sxs-lookup"><span data-stu-id="0c6db-758">Merge or replace</span></span>](#merge-or-replace)  
* <span data-ttu-id="0c6db-759">[Padrão de transações eventualmente consistente](#eventually-consistent-transactions-pattern) (se estiver a armazenar série de dados de Olá num blob)</span><span class="sxs-lookup"><span data-stu-id="0c6db-759">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) (if you are storing hello data series in a blob)</span></span>  

### <a name="wide-entities-pattern"></a><span data-ttu-id="0c6db-760">Padrão de entidades Wide</span><span class="sxs-lookup"><span data-stu-id="0c6db-760">Wide entities pattern</span></span>
<span data-ttu-id="0c6db-761">Utilize várias entidades lógico de toostore entidades físicas com mais do que 252 propriedades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-761">Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-762">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-762">Context and problem</span></span>
<span data-ttu-id="0c6db-763">Uma entidade individual pode ter mais do que 252 propriedades (excluindo as propriedades de sistema obrigatório Olá) e não é possível armazenar mais de 1 MB de dados no total.</span><span class="sxs-lookup"><span data-stu-id="0c6db-763">An individual entity can have no more than 252 properties (excluding hello mandatory system properties) and cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="0c6db-764">Numa base de dados relacional, normalmente, obterá arredondar os limites de tamanho de Olá de uma linha ao adicionar uma nova tabela e impor uma relação de 1 para 1 entre eles.</span><span class="sxs-lookup"><span data-stu-id="0c6db-764">In a relational database, you would typically get round any limits on hello size of a row by adding a new table and enforcing a 1-to-1 relationship between them.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-765">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-765">Solution</span></span>
<span data-ttu-id="0c6db-766">Utilizar o serviço de tabela Olá, pode armazenar várias entidades toorepresent um objeto de empresas de grandes dimensões única com mais do que 252 propriedades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-766">Using hello Table service, you can store multiple entities toorepresent a single large business object with more than 252 properties.</span></span> <span data-ttu-id="0c6db-767">Por exemplo, se quiser toostore uma contagem do número de Olá de mensagens de MI enviadas por cada funcionário para Olá últimos 365 dias, pode utilizar Olá estrutura que utiliza duas entidades com diferentes esquemas os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c6db-767">For example, if you want toostore a count of hello number of IM messages sent by each employee for hello last 365 days, you could use hello following design that uses two entities with different schemas:</span></span>  

![][24]

<span data-ttu-id="0c6db-768">Se precisar de toomake uma alteração que requer a atualização de ambos os tookeep entidades-los sincronizados entre si pode utilizar um EGT.</span><span class="sxs-lookup"><span data-stu-id="0c6db-768">If you need toomake a change that requires updating both entities tookeep them synchronized with each other you can use an EGT.</span></span> <span data-ttu-id="0c6db-769">Caso contrário, pode utilizar uma contagem de mensagens do intercalação única operação tooupdate Olá num dia específico.</span><span class="sxs-lookup"><span data-stu-id="0c6db-769">Otherwise, you can use a single merge operation tooupdate hello message count for a specific day.</span></span> <span data-ttu-id="0c6db-770">tooretrieve todas hello dados para um empregado individuais, tem de obter as entidades, o que pode fazer com dois pedidos eficiente que utilizam ambos um **PartitionKey** e um **RowKey** valor.</span><span class="sxs-lookup"><span data-stu-id="0c6db-770">tooretrieve all hello data for an individual employee you must retrieve both entities, which you can do with two efficient requests that use both a **PartitionKey** and a **RowKey** value.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-771">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-771">Issues and considerations</span></span>
<span data-ttu-id="0c6db-772">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-772">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-773">Obter uma entidade lógica completa envolve transações de armazenamento, pelo menos, duas: entidade física um tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="0c6db-773">Retrieving a complete logical entity involves at least two storage transactions: one tooretrieve each physical entity.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-774">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-774">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-775">Utilize este padrão quando necessidade toostore entidades cujo tamanho ou o número de propriedades excede os limites de Olá para uma entidade individuais em Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-775">Use this pattern when  need toostore entities whose size or number of properties exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-776">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-776">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-777">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-777">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-778">Transações de grupo de entidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-778">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="0c6db-779">Intercalação ou substituir</span><span class="sxs-lookup"><span data-stu-id="0c6db-779">Merge or replace</span></span>](#merge-or-replace)

### <a name="large-entities-pattern"></a><span data-ttu-id="0c6db-780">Padrão de entidades grandes</span><span class="sxs-lookup"><span data-stu-id="0c6db-780">Large entities pattern</span></span>
<span data-ttu-id="0c6db-781">Utilize os valores de propriedade grande de toostore de armazenamento de Blobs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-781">Use blob storage toostore large property values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-782">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-782">Context and problem</span></span>
<span data-ttu-id="0c6db-783">Uma entidade individuais não é possível armazenar mais de 1 MB de dados no total.</span><span class="sxs-lookup"><span data-stu-id="0c6db-783">An individual entity cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="0c6db-784">Se uma ou várias das suas propriedades armazenarem valores causam este valor de tamanho total do Olá dos seus tooexceed de entidade, não é possível armazenar a entidade todo Olá no Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-784">If one or several of your properties store values that cause hello total size of your entity tooexceed this value, you cannot store hello entire entity in hello Table service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="0c6db-785">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-785">Solution</span></span>
<span data-ttu-id="0c6db-786">Se a entidade exceder 1 MB de tamanho, porque uma ou mais propriedades contém uma grande quantidade de dados, pode armazenar dados numa Olá serviço Blob e, em seguida, armazenar endereço Olá do blob Olá numa propriedade na entidade de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-786">If your entity exceeds 1 MB in size because one or more properties contain a large amount of data, you can store data in hello Blob service and then store hello address of hello blob in a property in hello entity.</span></span> <span data-ttu-id="0c6db-787">Por exemplo, pode armazenar fotografia de Olá de um empregado no blob storage e armazenar uma fotografia de toohello de ligação no Olá **fotografia** propriedade de entidade empregado:</span><span class="sxs-lookup"><span data-stu-id="0c6db-787">For example, you can store hello photo of an employee in blob storage and store a link toohello photo in hello **Photo** property of your employee entity:</span></span>  

![][25]

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-788">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-788">Issues and considerations</span></span>
<span data-ttu-id="0c6db-789">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-789">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-790">toomaintain a consistência eventual entre entidade Olá no Olá serviço tabela e dados Olá Olá serviço Blob, utilize Olá [padrão de transações eventualmente consistente](#eventually-consistent-transactions-pattern) toomaintain as entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-790">toomaintain eventual consistency between hello entity in hello Table service and hello data in hello Blob service, use hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain your entities.</span></span>
* <span data-ttu-id="0c6db-791">Obter uma entidade completa envolve a, pelo menos, dois transações de armazenamento: uma entidade de Olá tooretrieve e Olá um tooretrieve blob de dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-791">Retrieving a complete entity involves at least two storage transactions: one tooretrieve hello entity and one tooretrieve hello blob data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-792">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-792">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-793">Utilize este padrão quando necessita de entidades toostore cujo tamanho excede os limites de Olá para uma entidade no serviço de tabela Olá individuais.</span><span class="sxs-lookup"><span data-stu-id="0c6db-793">Use this pattern when you need toostore entities whose size exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-794">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-794">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-795">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-795">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-796">Padrão de transações eventualmente consistente</span><span class="sxs-lookup"><span data-stu-id="0c6db-796">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="0c6db-797">Padrão de entidades Wide</span><span class="sxs-lookup"><span data-stu-id="0c6db-797">Wide entities pattern</span></span>](#wide-entities-pattern)

<a name="prepend-append-anti-pattern"></a>

### <a name="prependappend-anti-pattern"></a><span data-ttu-id="0c6db-798">Preceder/acrescentar anti padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-798">Prepend/append anti-pattern</span></span>
<span data-ttu-id="0c6db-799">Aumentar a escalabilidade quando tiver um grande volume de inserções pelo Olá inserções entre várias partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-799">Increase scalability when you have a high volume of inserts by spreading hello inserts across multiple partitions.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-800">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-800">Context and problem</span></span>
<span data-ttu-id="0c6db-801">Prefixação ou acrescentando entidades de tooyour armazenado entidades normalmente resulta numa aplicação Olá adicionar novas entidades toohello primeiro ou último partição de uma sequência de partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-801">Prepending or appending entities tooyour stored entities typically results in hello application adding new entities toohello first or last partition of a sequence of partitions.</span></span> <span data-ttu-id="0c6db-802">Neste caso, todos Olá inserções em qualquer momento são executadas no Olá insere mesma partição, criar um hotspot que impede que o serviço de tabela Olá balanceamento de carga entre múltiplos nós e, possivelmente, fazendo com que a escalabilidade de Olá toohit aplicação destinos para a partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-802">In this case, all of hello inserts at any given time are taking place in hello same partition, creating a hotspot that prevents hello table service from load balancing inserts across multiple nodes, and possibly causing your application toohit hello scalability targets for partition.</span></span> <span data-ttu-id="0c6db-803">Por exemplo, se tiver uma aplicação que aceder a recursos de rede de registos e pelos funcionários, em seguida, uma estrutura de entidade, conforme mostrado abaixo pode resultar na partição de hora atual se tornar um hotspot se volume Olá de transações atingir o destino de escalabilidade Olá para Olá uma partição individual:</span><span class="sxs-lookup"><span data-stu-id="0c6db-803">For example, if you have an application that logs network and resource access by employees, then an entity structure as shown below could result in hello current hour's partition becoming a hotspot if hello volume of transactions reaches hello scalability target for an individual partition:</span></span>  

![][26]

#### <a name="solution"></a><span data-ttu-id="0c6db-804">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-804">Solution</span></span>
<span data-ttu-id="0c6db-805">Olá seguinte estrutura de entidade alternativa evita um hotspot em qualquer partição específica como eventos de registos de aplicação Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-805">hello following alternative entity structure avoids a hotspot on any particular partition as hello application logs events:</span></span>  

![][27]

<span data-ttu-id="0c6db-806">Tenha em atenção com este exemplo como ambos Olá **PartitionKey** e **RowKey** são chaves compostas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-806">Notice with this example how both hello **PartitionKey** and **RowKey** are compound keys.</span></span> <span data-ttu-id="0c6db-807">Olá **PartitionKey** utiliza o departamento de Olá e o registo de Olá de toodistribute de id de empregado em várias partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-807">hello **PartitionKey** uses both hello department and employee id toodistribute hello logging across multiple partitions.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-808">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-808">Issues and considerations</span></span>
<span data-ttu-id="0c6db-809">Considere Olá seguintes pontos ao decidir como tooimplement este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-809">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="0c6db-810">Does Olá alternativa estrutura chave que evita a criar partições frequente no inserções de forma eficiente suporte Olá consultas torna a sua aplicação cliente?</span><span class="sxs-lookup"><span data-stu-id="0c6db-810">Does hello alternative key structure that avoids creating hot partitions on inserts efficiently support hello queries your client application makes?</span></span>  
* <span data-ttu-id="0c6db-811">O volume previsto de transações significa que são tooreach provável metas de escalabilidade Olá para uma partição individual e limitadas pelo serviço de armazenamento Olá?</span><span class="sxs-lookup"><span data-stu-id="0c6db-811">Does your anticipated volume of transactions mean that you are likely tooreach hello scalability targets for an individual partition and be throttled by hello storage service?</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="0c6db-812">Quando toouse este padrão</span><span class="sxs-lookup"><span data-stu-id="0c6db-812">When toouse this pattern</span></span>
<span data-ttu-id="0c6db-813">Evite padrão anti de preceder/acrescentar Olá quando o volume de transações é provavelmente tooresult na limitação pelo serviço de armazenamento Olá ao aceder a uma partição de acesso frequente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-813">Avoid hello prepend/append anti-pattern when your volume of transactions is likely tooresult in throttling by hello storage service when you access a hot partition.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="0c6db-814">Padrões relacionados e as orientações</span><span class="sxs-lookup"><span data-stu-id="0c6db-814">Related patterns and guidance</span></span>
<span data-ttu-id="0c6db-815">Olá padrões e orientações seguintes também podem ser relevantes ao implementar este padrão:</span><span class="sxs-lookup"><span data-stu-id="0c6db-815">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="0c6db-816">Padrão de chave composta</span><span class="sxs-lookup"><span data-stu-id="0c6db-816">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="0c6db-817">Padrão de seguimento de registo</span><span class="sxs-lookup"><span data-stu-id="0c6db-817">Log tail pattern</span></span>](#log-tail-pattern)  
* [<span data-ttu-id="0c6db-818">A modificação de entidades</span><span class="sxs-lookup"><span data-stu-id="0c6db-818">Modifying entities</span></span>](#modifying-entities)  

### <a name="log-data-anti-pattern"></a><span data-ttu-id="0c6db-819">Padrão de anti de dados do registo</span><span class="sxs-lookup"><span data-stu-id="0c6db-819">Log data anti-pattern</span></span>
<span data-ttu-id="0c6db-820">Normalmente, deve utilizar Olá serviço Blob em vez de Olá dados de registo do serviço toostore da tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-820">Typically, you should use hello Blob service instead of hello Table service toostore log data.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="0c6db-821">Contexto e do problema</span><span class="sxs-lookup"><span data-stu-id="0c6db-821">Context and problem</span></span>
<span data-ttu-id="0c6db-822">Caso de utilização de um comuns para dados de registo são tooretrieve uma seleção de entradas de registo de um intervalo de data/hora específico: por exemplo, pretende toofind Olá, todas as mensagens de erro e críticas que a aplicação, registada entre 15:04 e 15:06 numa data específica.</span><span class="sxs-lookup"><span data-stu-id="0c6db-822">A common use case for log data is tooretrieve a selection of log entries for a specific date/time range: for example, you want toofind all hello error and critical messages that your application logged between 15:04 and 15:06 on a specific date.</span></span> <span data-ttu-id="0c6db-823">Não pretende toouse Olá data e hora as partições de Olá mensagem de registo do Olá toodetermine Guardar entidades de registo para: que resultados numa partição frequente porque em qualquer momento, todas as entidades de registo de Olá irão partilhar Olá mesmo **PartitionKey** valor (consulte a secção de Olá [Prepend/acrescentar anti padrão](#prepend-append-anti-pattern)).</span><span class="sxs-lookup"><span data-stu-id="0c6db-823">You do not want toouse hello date and time of hello log message toodetermine hello partition you save log entities to: that results in a hot partition because at any given time, all hello log entities will share hello same **PartitionKey** value (see hello section [Prepend/append anti-pattern](#prepend-append-anti-pattern)).</span></span> <span data-ttu-id="0c6db-824">Por exemplo, Olá seguir o esquema de entidade de uma mensagem de registo resulta numa partição frequente porque a aplicação Olá escreve todas as mensagens de registo toohello partição para Olá atual data e hora:</span><span class="sxs-lookup"><span data-stu-id="0c6db-824">For example, hello following entity schema for a log message results in a hot partition because hello application writes all log messages toohello partition for hello current date and hour:</span></span>  

![][28]

<span data-ttu-id="0c6db-825">Neste exemplo, Olá **RowKey** inclui Olá data e hora tooensure de mensagem de registo de Olá que as mensagens do registo são armazenadas ordenados por ordem de data/hora e inclui um id de mensagem no caso de várias mensagens de registo partilham Olá mesmo data e hora.</span><span class="sxs-lookup"><span data-stu-id="0c6db-825">In this example, hello **RowKey** includes hello date and time of hello log message tooensure that log messages are stored sorted in date/time order, and includes a message id in case multiple log messages share hello same date and time.</span></span>  

<span data-ttu-id="0c6db-826">Outra abordagem é toouse um **PartitionKey** que garante que a aplicação Olá escreve mensagens através de um intervalo de partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-826">Another approach is toouse a **PartitionKey** that ensures that hello application writes messages across a range of partitions.</span></span> <span data-ttu-id="0c6db-827">Por exemplo, se a origem Olá Olá da mensagem do registo fornece uma forma toodistribute mensagens através de várias partições, pode utilizar Olá esquema de entidade a seguir:</span><span class="sxs-lookup"><span data-stu-id="0c6db-827">For example, if hello source of hello log message provides a way toodistribute messages across many partitions, you could use hello following entity schema:</span></span>  

![][29]

<span data-ttu-id="0c6db-828">No entanto, o problema de Olá com este esquema é essa tooretrieve Olá todas as mensagens do registo para um intervalo de tempo específico tem de procurar cada partição na tabela de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-828">However, hello problem with this schema is that tooretrieve all hello log messages for a specific time span you must search every partition in hello table.</span></span>

#### <a name="solution"></a><span data-ttu-id="0c6db-829">Solução</span><span class="sxs-lookup"><span data-stu-id="0c6db-829">Solution</span></span>
<span data-ttu-id="0c6db-830">Olá anterior secção Olá realçado problema de tentar toouse Olá entradas de registo de toostore de serviço tabela e sugerida dois, unsatisfactory, designs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-830">hello previous section highlighted hello problem of trying toouse hello Table service toostore log entries and suggested two, unsatisfactory, designs.</span></span> <span data-ttu-id="0c6db-831">Uma solução guiada tooa frequente a partição com o risco de Olá de fraco desempenho ao escrever as mensagens do registo; Olá outra solução resultou no desempenho das consultas fraco devido a Olá requisito tooscan cada partição num Olá tabela tooretrieve as mensagens do registo para um intervalo de tempo específico.</span><span class="sxs-lookup"><span data-stu-id="0c6db-831">One solution led tooa hot partition with hello risk of poor performance writing log messages; hello other solution resulted in poor query performance because of hello requirement tooscan every partition in hello table tooretrieve log messages for a specific time span.</span></span> <span data-ttu-id="0c6db-832">O blob storage oferece a melhor solução para este tipo de cenário e este é o Azure como armazenamento arquivos Olá registo dados de análise recolhe.</span><span class="sxs-lookup"><span data-stu-id="0c6db-832">Blob storage offers a better solution for this type of scenario and this is how Azure Storage Analytics stores hello log data it collects.</span></span>  

<span data-ttu-id="0c6db-833">Esta secção descreve como o análise de armazenamento armazena dados de registo no armazenamento de BLOBs, como uma ilustração destas abordagem toostoring de dados de que consulta normalmente por intervalo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-833">This section outlines how Storage Analytics stores log data in blob storage as an illustration of this approach toostoring data that you typically query by range.</span></span>  

<span data-ttu-id="0c6db-834">Análise de armazenamento armazena as mensagens do registo num formato delimitado em vários blobs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-834">Storage Analytics stores log messages in a delimited format in multiple blobs.</span></span> <span data-ttu-id="0c6db-835">formato delimitado Olá torna mais fácil para um cliente dados da aplicação tooparse Olá na mensagem do registo de saudação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-835">hello delimited format makes it easy for a client application tooparse hello data in hello log message.</span></span>  

<span data-ttu-id="0c6db-836">Análise de armazenamento utiliza uma convenção de nomenclatura de blobs que lhe permite toolocate Olá blob (ou blobs) que contém mensagens hello do registo para o qual esteja a pesquisar.</span><span class="sxs-lookup"><span data-stu-id="0c6db-836">Storage Analytics uses a naming convention for blobs that enables you toolocate hello blob (or blobs) that contain hello log messages for which you are searching.</span></span> <span data-ttu-id="0c6db-837">Por exemplo, um blob com o nome "queue/2014/07/31/1800/000001.log" contém mensagens de registo relacionados com o serviço de fila toohello para hora Olá começando 18:00 em 31 de Julho de 2014.</span><span class="sxs-lookup"><span data-stu-id="0c6db-837">For example, a blob named "queue/2014/07/31/1800/000001.log" contains log messages that relate toohello queue service for hello hour starting at 18:00 on 31 July 2014.</span></span> <span data-ttu-id="0c6db-838">Olá "000001" indica que é Olá primeiro ficheiro de registo para este período.</span><span class="sxs-lookup"><span data-stu-id="0c6db-838">hello "000001" indicates that this is hello first log file for this period.</span></span> <span data-ttu-id="0c6db-839">Análise de armazenamento também regista Olá carimbos de Olá primeiro e último registar mensagens armazenadas no ficheiro de Olá como parte dos metadados do blob Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-839">Storage Analytics also records hello timestamps of hello first and last log messages stored in hello file as part of hello blob's metadata.</span></span> <span data-ttu-id="0c6db-840">Olá API para ativa de armazenamento de BLOBs localizar os blobs num contentor com base no prefixo de nome: toolocate todos os blobs Olá que contêm a fila de registo de dados para a hora de Olá começando 18:00, pode utilizar Olá prefixo "fila/2014/07/31/1800."</span><span class="sxs-lookup"><span data-stu-id="0c6db-840">hello API for blob storage enables you locate blobs in a container based on a name prefix: toolocate all hello blobs that contain queue log data for hello hour starting at 18:00, you can use hello prefix "queue/2014/07/31/1800."</span></span>  

<span data-ttu-id="0c6db-841">Análise de armazenamento coloca internamente mensagens de registo e, em seguida, atualiza periodicamente blob adequado Olá ou cria uma nova com o batch mais recente do Olá de entradas de registo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-841">Storage Analytics buffers log messages internally and then periodically updates hello appropriate blob or creates a new one with hello latest batch of log entries.</span></span> <span data-ttu-id="0c6db-842">Isto reduz o número de Olá de gravações tem de efetuar toohello serviço de blob.</span><span class="sxs-lookup"><span data-stu-id="0c6db-842">This reduces hello number of writes it must perform toohello blob service.</span></span>  

<span data-ttu-id="0c6db-843">Se estiver a implementar uma solução semelhante na sua própria aplicação, tem de considerar como toomanage Olá compromisso entre fiabilidade (escrever cada armazenamento de tooblob de entrada de registo como ocorre) e o custo e escalabilidade (colocação em memória intermédia atualizações na sua aplicação e escrever tooblob armazenamento em lotes).</span><span class="sxs-lookup"><span data-stu-id="0c6db-843">If you are implementing a similar solution in your own application, you must consider how toomanage hello trade-off between reliability (writing every log entry tooblob storage as it happens) and cost and scalability (buffering updates in your application and writing them tooblob storage in batches).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="0c6db-844">Problemas e considerações</span><span class="sxs-lookup"><span data-stu-id="0c6db-844">Issues and considerations</span></span>
<span data-ttu-id="0c6db-845">Considere Olá ao decidir como toostore registar dados os seguintes pontos:</span><span class="sxs-lookup"><span data-stu-id="0c6db-845">Consider hello following points when deciding how toostore log data:</span></span>  

* <span data-ttu-id="0c6db-846">Se criar um design de tabela que evita partições frequente potenciais, pode constatar que não é possível aceder os dados de registo de forma eficiente.</span><span class="sxs-lookup"><span data-stu-id="0c6db-846">If you create a table design that avoids potential hot partitions, you may find that you cannot access your log data efficiently.</span></span>  
* <span data-ttu-id="0c6db-847">tooprocess registar dados, um cliente precisar frequentemente tooload vários registos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-847">tooprocess log data, a client often needs tooload many records.</span></span>  
* <span data-ttu-id="0c6db-848">Apesar dos dados de registo, muitas vezes, estão estruturados, armazenamento de blob pode ser a melhor solução.</span><span class="sxs-lookup"><span data-stu-id="0c6db-848">Although log data is often structured, blob storage may be a better solution.</span></span>  

### <a name="implementation-considerations"></a><span data-ttu-id="0c6db-849">Considerações de implementação</span><span class="sxs-lookup"><span data-stu-id="0c6db-849">Implementation considerations</span></span>
<span data-ttu-id="0c6db-850">Esta secção descreve algumas das considerações de Olá toobear em consideração quando implementar padrões Olá descritos nas secções anteriores Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-850">This section discusses some of hello considerations toobear in mind when you implement hello patterns described in hello previous sections.</span></span> <span data-ttu-id="0c6db-851">Na maioria desta secção utiliza exemplos escritos em c# que utilizam Olá biblioteca de clientes de armazenamento (versão 4.3.0 momento Olá da escrita).</span><span class="sxs-lookup"><span data-stu-id="0c6db-851">Most of this section uses examples written in C# that use hello Storage Client Library (version 4.3.0 at hello time of writing).</span></span>  

### <a name="retrieving-entities"></a><span data-ttu-id="0c6db-852">Obter entidades</span><span class="sxs-lookup"><span data-stu-id="0c6db-852">Retrieving entities</span></span>
<span data-ttu-id="0c6db-853">Tal como explicado na secção de Olá [estrutura para consultar](#design-for-querying), consulta mais eficiente Olá é uma consulta de ponto.</span><span class="sxs-lookup"><span data-stu-id="0c6db-853">As discussed in hello section [Design for querying](#design-for-querying), hello most efficient query is a point query.</span></span> <span data-ttu-id="0c6db-854">No entanto, em alguns cenários poderá ser necessário tooretrieve várias entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-854">However, in some scenarios you may need tooretrieve multiple entities.</span></span> <span data-ttu-id="0c6db-855">Esta secção descreve algumas entidades de tooretrieving abordagens comuns utilizando Olá biblioteca de clientes de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-855">This section describes some common approaches tooretrieving entities using hello Storage Client Library.</span></span>  

#### <a name="executing-a-point-query-using-hello-storage-client-library"></a><span data-ttu-id="0c6db-856">Executar uma consulta de ponto utilizando Olá biblioteca de clientes de armazenamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-856">Executing a point query using hello Storage Client Library</span></span>
<span data-ttu-id="0c6db-857">Olá tooexecute da forma mais fácil uma consulta de ponto é toouse Olá **obter** operação de tabela, conforme mostrado no Olá seguinte fragmento de código c# que obtém uma entidade com uma **PartitionKey** de valor "vendas" e um  **RowKey** do valor "212":</span><span class="sxs-lookup"><span data-stu-id="0c6db-857">hello easiest way tooexecute a point query is toouse hello **Retrieve** table operation as shown in hello following C# code snippet that retrieves an entity with a **PartitionKey** of value "Sales" and a **RowKey** of value "212":</span></span>  

```csharp
TableOperation retrieveOperation = TableOperation.Retrieve<EmployeeEntity>("Sales", "212");
var retrieveResult = employeeTable.Execute(retrieveOperation);
if (retrieveResult.Result != null)
{
    EmployeeEntity employee = (EmployeeEntity)retrieveResult.Result;
    ...
}  
```

<span data-ttu-id="0c6db-858">Repare como neste exemplo espera entidade Olá obtém toobe do tipo **EmployeeEntity**.</span><span class="sxs-lookup"><span data-stu-id="0c6db-858">Notice how this example expects hello entity it retrieves toobe of type **EmployeeEntity**.</span></span>  

#### <a name="retrieving-multiple-entities-using-linq"></a><span data-ttu-id="0c6db-859">A obter várias entidades com LINQ</span><span class="sxs-lookup"><span data-stu-id="0c6db-859">Retrieving multiple entities using LINQ</span></span>
<span data-ttu-id="0c6db-860">Pode obter várias entidades utilizando LINQ com bibliotecas de cliente de armazenamento e especificar uma consulta com um **onde** cláusula.</span><span class="sxs-lookup"><span data-stu-id="0c6db-860">You can retrieve multiple entities by using LINQ with Storage Client Library and specifying a query with a **where** clause.</span></span> <span data-ttu-id="0c6db-861">tooavoid uma análise da tabela, sempre deve incluir Olá **PartitionKey** valor olá onde cláusula e se for possível Olá **RowKey** valor tooavoid análises de tabela e partição.</span><span class="sxs-lookup"><span data-stu-id="0c6db-861">tooavoid a table scan, you should always include hello **PartitionKey** value in hello where clause, and if possible hello **RowKey** value tooavoid table and partition scans.</span></span> <span data-ttu-id="0c6db-862">Olá serviço tabela suporta um conjunto limitado de comparação operadores (maior, maior ou igual, menos a, menor que ou igual, igual e não igual) toouse olá onde cláusula.</span><span class="sxs-lookup"><span data-stu-id="0c6db-862">hello table service supports a limited set of comparison operators (greater than, greater than or equal, less than, less than or equal, equal, and not equal) toouse in hello where clause.</span></span> <span data-ttu-id="0c6db-863">Olá seguinte fragmento de código da c# localiza todos os funcionários de Olá cuja última começa de nome com "B" (partindo do princípio que Olá **RowKey** arquivos Olá apelido) no departamento de vendas Olá (partindo do princípio de Olá **PartitionKey** armazena o nome do departamento de Olá):</span><span class="sxs-lookup"><span data-stu-id="0c6db-863">hello following C# code snippet finds all hello employees whose last name starts with "B" (assuming that hello **RowKey** stores hello last name) in hello sales department (assuming hello **PartitionKey** stores hello department name):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = employeeTable.CreateQuery<EmployeeEntity>();
var query = (from employee in employeeQuery
            where employee.PartitionKey == "Sales" &&
            employee.RowKey.CompareTo("B") >= 0 &&
            employee.RowKey.CompareTo("C") < 0
            select employee).AsTableQuery();
var employees = query.Execute();  
```

<span data-ttu-id="0c6db-864">Repare como a consulta de Olá especifica ambos um **RowKey** e um **PartitionKey** tooensure um melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-864">Notice how hello query specifies both a **RowKey** and a **PartitionKey** tooensure better performance.</span></span>  

<span data-ttu-id="0c6db-865">Olá exemplo de código seguinte mostra a funcionalidade equivalente com a API fluent Olá (para obter mais informações sobre as APIs fluent em geral, consulte o artigo [melhores práticas para criar uma API Fluent](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span><span class="sxs-lookup"><span data-stu-id="0c6db-865">hello following code sample shows equivalent functionality using hello fluent API (for more information about fluent APIs in general, see [Best Practices for Designing a Fluent API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = new TableQuery<EmployeeEntity>().Where(
    TableQuery.CombineFilters(
    TableQuery.CombineFilters(
        TableQuery.GenerateFilterCondition(
    "PartitionKey", QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.GenerateFilterCondition(
    "RowKey", QueryComparisons.GreaterThanOrEqual, "B")
),
TableOperators.And,
TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.LessThan, "C")
    )
);
var employees = employeeTable.ExecuteQuery(employeeQuery);  
```

> [!NOTE]
> <span data-ttu-id="0c6db-866">Olá exemplo nests vários **CombineFilters** métodos tooinclude Olá três condições de filtro.</span><span class="sxs-lookup"><span data-stu-id="0c6db-866">hello sample nests multiple **CombineFilters** methods tooinclude hello three filter conditions.</span></span>  
> 
> 

#### <a name="retrieving-large-numbers-of-entities-from-a-query"></a><span data-ttu-id="0c6db-867">A obter grande número de entidades de uma consulta</span><span class="sxs-lookup"><span data-stu-id="0c6db-867">Retrieving large numbers of entities from a query</span></span>
<span data-ttu-id="0c6db-868">Uma consulta ideal devolve uma entidade individuais com base num **PartitionKey** valor e um **RowKey** valor.</span><span class="sxs-lookup"><span data-stu-id="0c6db-868">An optimal query returns an individual entity based on a **PartitionKey** value and a **RowKey** value.</span></span> <span data-ttu-id="0c6db-869">No entanto, em alguns cenários pode ter um requisito tooreturn muitas entidades de Olá mesma partição ou mesmo a partir de várias partições.</span><span class="sxs-lookup"><span data-stu-id="0c6db-869">However, in some scenarios you may have a requirement tooreturn many entities from hello same partition or even from many partitions.</span></span>  

<span data-ttu-id="0c6db-870">Sempre totalmente deve testar o desempenho de Olá da sua aplicação no tais cenários.</span><span class="sxs-lookup"><span data-stu-id="0c6db-870">You should always fully test hello performance of your application in such scenarios.</span></span>  

<span data-ttu-id="0c6db-871">Uma consulta ao serviço de tabela Olá pode devolver um máximo de 1000 entidades em simultâneo e poderá ser executada para um máximo de cinco segundos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-871">A query against hello table service may return a maximum of 1,000 entities at one time and may execute for a maximum of five seconds.</span></span> <span data-ttu-id="0c6db-872">Se hello conjunto de resultados contém mais de 1000 entidades, se a consulta de Olá não foi concluído dentro de cinco segundos, ou se a consulta de Olá atravesse limites de partição Olá, Olá serviço tabela devolve um tooenable de token de continuação Olá hello do cliente aplicação toorequest seguinte conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-872">If hello result set contains more than 1,000 entities, if hello query did not complete within five seconds, or if hello query crosses hello partition boundary, hello Table service returns a continuation token tooenable hello client application toorequest hello next set of entities.</span></span> <span data-ttu-id="0c6db-873">Para obter mais informações sobre como continuação tokens trabalho, consulte [tempo limite de consulta e paginação](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span><span class="sxs-lookup"><span data-stu-id="0c6db-873">For more information about how continuation tokens work, see [Query Timeout and Pagination](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span></span>  

<span data-ttu-id="0c6db-874">Se estiver a utilizar Olá biblioteca de clientes de armazenamento, pode processar de automaticamente tokens de continuação para si como devolve entidades de Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-874">If you are using hello Storage Client Library, it can automatically handle continuation tokens for you as it returns entities from hello Table service.</span></span> <span data-ttu-id="0c6db-875">Olá seguinte c# exemplo de código utilizando automaticamente Olá biblioteca de clientes de armazenamento processa tokens de continuação se o serviço de tabela Olá devolve-os numa resposta:</span><span class="sxs-lookup"><span data-stu-id="0c6db-875">hello following C# code sample using hello Storage Client Library automatically handles continuation tokens if hello table service returns them in a response:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

var employees = employeeTable.ExecuteQuery(employeeQuery);
foreach (var emp in employees)
{
        ...
}  
```

<span data-ttu-id="0c6db-876">Olá seguinte código c# processa tokens de continuação explicitamente:</span><span class="sxs-lookup"><span data-stu-id="0c6db-876">hello following C# code handles continuation tokens explicitly:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

TableContinuationToken continuationToken = null;

do
{
        var employees = employeeTable.ExecuteQuerySegmented(
        employeeQuery, continuationToken);
    foreach (var emp in employees)
    {
    ...
    }
    continuationToken = employees.ContinuationToken;
} while (continuationToken != null);  
```

<span data-ttu-id="0c6db-877">Utilizando os tokens de continuação explicitamente, pode controlar quando a aplicação obtém segmento seguinte do Olá de dados.</span><span class="sxs-lookup"><span data-stu-id="0c6db-877">By using continuation tokens explicitly, you can control when your application retrieves hello next segment of data.</span></span> <span data-ttu-id="0c6db-878">Por exemplo, se a aplicação de cliente permite que os utilizadores toopage através de entidades de Olá armazenados numa tabela, um utilizador pode decidir não toopage através de todas as entidades de Olá obtidos pela consulta Olá para a aplicação apenas utilizará um Olá token tooretrieve de continuação seguinte segmento quando o utilizador Olá tinha concluído paginação através de todas as entidades de Olá no segmento atual Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-878">For example, if your client application enables users toopage through hello entities stored in a table, a user may decide not toopage through all hello entities retrieved by hello query so your application would only use a continuation token tooretrieve hello next segment when hello user had finished paging through all hello entities in hello current segment.</span></span> <span data-ttu-id="0c6db-879">Esta abordagem tem várias vantagens:</span><span class="sxs-lookup"><span data-stu-id="0c6db-879">This approach has several benefits:</span></span>  

* <span data-ttu-id="0c6db-880">Permite-lhe quantidade de Olá toolimit de tooretrieve de dados do serviço tabela de Olá e mover rede Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-880">It enables you toolimit hello amount of data tooretrieve from hello Table service and that you move over hello network.</span></span>  
* <span data-ttu-id="0c6db-881">Permite-lhe tooperform assíncrono e/s no .NET.</span><span class="sxs-lookup"><span data-stu-id="0c6db-881">It enables you tooperform asynchronous IO in .NET.</span></span>  
* <span data-ttu-id="0c6db-882">Permite-lhe armazenamento de token toopersistent de continuação de Olá tooserialize para poder continuar no evento Olá de uma falha de aplicação.</span><span class="sxs-lookup"><span data-stu-id="0c6db-882">It enables you tooserialize hello continuation token toopersistent storage so you can continue in hello event of an application crash.</span></span>  

> [!NOTE]
> <span data-ttu-id="0c6db-883">Um token de continuação normalmente devolve um segmento de 1.000 entidades, embora possam ser menos.</span><span class="sxs-lookup"><span data-stu-id="0c6db-883">A continuation token typically returns a segment containing 1,000 entities, although it may be fewer.</span></span> <span data-ttu-id="0c6db-884">Este é também caso Olá se limite Olá número de entradas de uma consulta devolve utilizando **demorar** tooreturn Olá primeiro n entidades que correspondam aos critérios de pesquisa: serviço de tabela Olá pode devolver um segmento que contenham menos de entidades n ao longo com um tooenable de token de continuação tooretrieve Olá entidades restantes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-884">This is also hello case if you limit hello number of entries a query returns by using **Take** tooreturn hello first n entities that match your lookup criteria: hello table service may return a segment containing fewer than n entities along with a continuation token tooenable you tooretrieve hello remaining entities.</span></span>  
> 
> 

<span data-ttu-id="0c6db-885">Olá c# código seguinte mostra como foi devolvido um número de entidades toomodify Olá dentro de um segmento de:</span><span class="sxs-lookup"><span data-stu-id="0c6db-885">hello following C# code shows how toomodify hello number of entities returned inside a segment:</span></span>  

```csharp
employeeQuery.TakeCount = 50;  
```

#### <a name="server-side-projection"></a><span data-ttu-id="0c6db-886">Projecção do lado do servidor</span><span class="sxs-lookup"><span data-stu-id="0c6db-886">Server-side projection</span></span>
<span data-ttu-id="0c6db-887">Uma única entidade pode ter propriedades de too255 e ser segurança too1 MB de tamanho.</span><span class="sxs-lookup"><span data-stu-id="0c6db-887">A single entity can have up too255 properties and be up too1 MB in size.</span></span> <span data-ttu-id="0c6db-888">Quando consultar a tabela de Olá e obter entidades, pode não necessitar de todas as propriedades de Olá e pode evitar desnecessariamente a transferência de dados (toohelp reduzir a latência e o custo).</span><span class="sxs-lookup"><span data-stu-id="0c6db-888">When you query hello table and retrieve entities, you may not need all hello properties and can avoid transferring data unnecessarily (toohelp reduce latency and cost).</span></span> <span data-ttu-id="0c6db-889">Pode utilizar propriedades de Olá apenas de tootransfer de projeção do lado do servidor que é necessário.</span><span class="sxs-lookup"><span data-stu-id="0c6db-889">You can use server-side projection tootransfer just hello properties you need.</span></span> <span data-ttu-id="0c6db-890">Olá exemplo seguinte é obtém apenas Olá **E-Mail** propriedade (juntamente com **PartitionKey**, **RowKey**, **Timestamp**e  **ETag**) de entidades de Olá selecionadas por consulta Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-890">hello following example is retrieves just hello **Email** property (along with **PartitionKey**, **RowKey**, **Timestamp**, and **ETag**) from hello entities selected by hello query.</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
List<string> columns = new List<string>() { "Email" };
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter).Select(columns);

var entities = employeeTable.ExecuteQuery(employeeQuery);
foreach (var e in entities)
{
        Console.WriteLine("RowKey: {0}, EmployeeEmail: {1}", e.RowKey, e.Email);
}  
```

<span data-ttu-id="0c6db-891">Repare como Olá **RowKey** valor está disponível, apesar de não estava incluído na lista de Olá de tooretrieve de propriedades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-891">Notice how hello **RowKey** value is available even though it was not included in hello list of properties tooretrieve.</span></span>  

### <a name="modifying-entities"></a><span data-ttu-id="0c6db-892">A modificação de entidades</span><span class="sxs-lookup"><span data-stu-id="0c6db-892">Modifying entities</span></span>
<span data-ttu-id="0c6db-893">Olá biblioteca de clientes de armazenamento permite toomodify as entidades armazenadas no serviço de tabela de Olá por inserir, eliminar e entidades de atualização.</span><span class="sxs-lookup"><span data-stu-id="0c6db-893">hello Storage Client Library enables you toomodify your entities stored in hello table service by inserting, deleting, and updating entities.</span></span> <span data-ttu-id="0c6db-894">Pode utilizar EGTs toobatch vários insert, update e as operações delete em conjunto tooreduce Olá diversas ida e volta necessário e melhorar o desempenho de Olá da sua solução.</span><span class="sxs-lookup"><span data-stu-id="0c6db-894">You can use EGTs toobatch multiple insert, update, and delete operations together tooreduce hello number of round trips required and improve hello performance of your solution.</span></span>  

<span data-ttu-id="0c6db-895">Tenha em atenção de que exceções acionadas quando Olá biblioteca de clientes de armazenamento executa um EGT normalmente incluem o índice de Olá da entidade de Olá que causou Olá batch toofail.</span><span class="sxs-lookup"><span data-stu-id="0c6db-895">Note that exceptions thrown when hello Storage Client Library executes an EGT typically include hello index of hello entity that caused hello batch toofail.</span></span> <span data-ttu-id="0c6db-896">Isto é útil quando está a depurar código que utiliza EGTs.</span><span class="sxs-lookup"><span data-stu-id="0c6db-896">This is helpful when you are debugging code that uses EGTs.</span></span>  

<span data-ttu-id="0c6db-897">Deve também considerar como a estrutura afeta a forma como a aplicação cliente processa as operações de simultaneidade e atualização.</span><span class="sxs-lookup"><span data-stu-id="0c6db-897">You should also consider how your design affects how your client application handles concurrency and update operations.</span></span>  

#### <a name="managing-concurrency"></a><span data-ttu-id="0c6db-898">Gerir a simultaneidade</span><span class="sxs-lookup"><span data-stu-id="0c6db-898">Managing concurrency</span></span>
<span data-ttu-id="0c6db-899">Por predefinição, o serviço de tabela Olá implementa otimista simultaneidade verifica ao nível de Olá de entidades individuais para **inserir**, **intercalar**, e **eliminar** operações, Embora seja possível para um hello do cliente tooforce tabela serviço toobypass estas verificações.</span><span class="sxs-lookup"><span data-stu-id="0c6db-899">By default, hello table service implements optimistic concurrency checks at hello level of individual entities for **Insert**, **Merge**, and **Delete** operations, although it is possible for a client tooforce hello table service toobypass these checks.</span></span> <span data-ttu-id="0c6db-900">Para obter mais informações sobre como o serviço de tabela Olá gere a simultaneidade, consulte [gerir simultaneidade no armazenamento do Microsoft Azure](storage-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="0c6db-900">For more information about how hello table service manages concurrency, see  [Managing Concurrency in Microsoft Azure Storage](storage-concurrency.md).</span></span>  

#### <a name="merge-or-replace"></a><span data-ttu-id="0c6db-901">Intercalação ou substituir</span><span class="sxs-lookup"><span data-stu-id="0c6db-901">Merge or replace</span></span>
<span data-ttu-id="0c6db-902">Olá **substituir** método de Olá **TableOperation** classe substitui sempre entidade completa de Olá no Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-902">hello **Replace** method of hello **TableOperation** class always replaces hello complete entity in hello Table service.</span></span> <span data-ttu-id="0c6db-903">Se não incluir uma propriedade no pedido de Olá quando essa propriedade existe na entidade de Olá armazenado, o pedido Olá remove a que a propriedade de Olá armazenados entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-903">If you do not include a property in hello request when that property exists in hello stored entity, hello request removes that property from hello stored entity.</span></span> <span data-ttu-id="0c6db-904">A menos que queira tooremove uma propriedade explicitamente a partir de uma entidade armazenada, tem de incluir cada propriedade no pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-904">Unless you want tooremove a property explicitly from a stored entity, you must include every property in hello request.</span></span>  

<span data-ttu-id="0c6db-905">Pode utilizar Olá **intercalar** método de Olá **TableOperation** quantidade de Olá tooreduce classe de dados a enviar serviço de tabela toohello quando quiser tooupdate uma entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-905">You can use hello **Merge** method of hello **TableOperation** class tooreduce hello amount of data that you send toohello Table service when you want tooupdate an entity.</span></span> <span data-ttu-id="0c6db-906">Olá **intercalar** método substitui quaisquer propriedades de entidade Olá armazenado com valores de propriedade de entidade Olá incluídas no pedido de Olá, mas mantém intactos quaisquer propriedades no Olá armazenados entidade que não estão incluídos no pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="0c6db-906">hello **Merge** method replaces any properties in hello stored entity with property values from hello entity included in hello request, but leaves intact any properties in hello stored entity that are not included in hello request.</span></span> <span data-ttu-id="0c6db-907">Isto é útil se tiver entidades grandes e só precisa de tooupdate um pequeno número de propriedades de um pedido.</span><span class="sxs-lookup"><span data-stu-id="0c6db-907">This is useful if you have large entities and only need tooupdate a small number of properties in a request.</span></span>  

> [!NOTE]
> <span data-ttu-id="0c6db-908">Olá **substituir** e **intercalar** métodos falharem se Olá entidade não existe.</span><span class="sxs-lookup"><span data-stu-id="0c6db-908">hello **Replace** and **Merge** methods fail if hello entity does not exist.</span></span> <span data-ttu-id="0c6db-909">Como alternativa, pode utilizar Olá **InsertOrReplace** e **InsertOrMerge** métodos que se não existir, crie uma nova entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-909">As an alternative, you can use hello **InsertOrReplace** and **InsertOrMerge** methods that create a new entity if it doesn't exist.</span></span>  
> 
> 

### <a name="working-with-heterogeneous-entity-types"></a><span data-ttu-id="0c6db-910">Trabalhar com tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-910">Working with heterogeneous entity types</span></span>
<span data-ttu-id="0c6db-911">Olá serviço tabela é um *sem esquema* arquivo de tabela, que significa que uma única tabela pode armazenar as entidades de vários tipos de fornecer uma grande flexibilidade na sua estrutura.</span><span class="sxs-lookup"><span data-stu-id="0c6db-911">hello Table service is a *schema-less* table store that means that a single table can store entities of multiple types providing great flexibility in your design.</span></span> <span data-ttu-id="0c6db-912">Olá exemplo a seguir ilustra uma armazenar empregado e entidades do departamento de tabela:</span><span class="sxs-lookup"><span data-stu-id="0c6db-912">hello following example illustrates a table storing both employee and department entities:</span></span>  

<table>
<tr>
<th><span data-ttu-id="0c6db-913">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-913">PartitionKey</span></span></th>
<th><span data-ttu-id="0c6db-914">RowKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-914">RowKey</span></span></th>
<th><span data-ttu-id="0c6db-915">Timestamp</span><span class="sxs-lookup"><span data-stu-id="0c6db-915">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-916">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-916">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-917">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-917">LastName</span></span></th>
<th><span data-ttu-id="0c6db-918">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-918">Age</span></span></th>
<th><span data-ttu-id="0c6db-919">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-919">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-920">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-920">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-921">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-921">LastName</span></span></th>
<th><span data-ttu-id="0c6db-922">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-922">Age</span></span></th>
<th><span data-ttu-id="0c6db-923">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-923">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-924">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="0c6db-924">DepartmentName</span></span></th>
<th><span data-ttu-id="0c6db-925">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="0c6db-925">EmployeeCount</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-926">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-926">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-927">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-927">LastName</span></span></th>
<th><span data-ttu-id="0c6db-928">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-928">Age</span></span></th>
<th><span data-ttu-id="0c6db-929">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-929">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="0c6db-930">Tenha em atenção que cada entidade ainda tem de ter **PartitionKey**, **RowKey**, e **Timestamp** valores, mas pode ter qualquer conjunto de propriedades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-930">Note that each entity must still have **PartitionKey**, **RowKey**, and **Timestamp** values, but may have any set of properties.</span></span> <span data-ttu-id="0c6db-931">Além disso, não há nada tooindicate Olá tipo de entidade, exceto se optar por toostore algures essas informações.</span><span class="sxs-lookup"><span data-stu-id="0c6db-931">Furthermore, there is nothing tooindicate hello type of an entity unless you choose toostore that information somewhere.</span></span> <span data-ttu-id="0c6db-932">Existem duas opções para identificar o tipo de entidade Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-932">There are two options for identifying hello entity type:</span></span>  

* <span data-ttu-id="0c6db-933">Preceder toohello de tipo de entidade Olá **RowKey** (ou possivelmente Olá **PartitionKey**).</span><span class="sxs-lookup"><span data-stu-id="0c6db-933">Prepend hello entity type toohello **RowKey** (or possibly hello **PartitionKey**).</span></span> <span data-ttu-id="0c6db-934">Por exemplo, **EMPLOYEE_000123** ou **DEPARTMENT_SALES** como **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-934">For example, **EMPLOYEE_000123** or **DEPARTMENT_SALES** as **RowKey** values.</span></span>  
* <span data-ttu-id="0c6db-935">Utilize um propriedade de diferentes toorecord Olá tipo de entidade conforme mostrado na tabela de Olá abaixo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-935">Use a separate property toorecord hello entity type as shown in hello table below.</span></span>  

<table>
<tr>
<th><span data-ttu-id="0c6db-936">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-936">PartitionKey</span></span></th>
<th><span data-ttu-id="0c6db-937">RowKey</span><span class="sxs-lookup"><span data-stu-id="0c6db-937">RowKey</span></span></th>
<th><span data-ttu-id="0c6db-938">Timestamp</span><span class="sxs-lookup"><span data-stu-id="0c6db-938">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-939">EntityType</span><span class="sxs-lookup"><span data-stu-id="0c6db-939">EntityType</span></span></th>
<th><span data-ttu-id="0c6db-940">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-940">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-941">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-941">LastName</span></span></th>
<th><span data-ttu-id="0c6db-942">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-942">Age</span></span></th>
<th><span data-ttu-id="0c6db-943">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-943">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-944">Empregado</span><span class="sxs-lookup"><span data-stu-id="0c6db-944">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-945">EntityType</span><span class="sxs-lookup"><span data-stu-id="0c6db-945">EntityType</span></span></th>
<th><span data-ttu-id="0c6db-946">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-946">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-947">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-947">LastName</span></span></th>
<th><span data-ttu-id="0c6db-948">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-948">Age</span></span></th>
<th><span data-ttu-id="0c6db-949">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-949">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-950">Empregado</span><span class="sxs-lookup"><span data-stu-id="0c6db-950">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-951">EntityType</span><span class="sxs-lookup"><span data-stu-id="0c6db-951">EntityType</span></span></th>
<th><span data-ttu-id="0c6db-952">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="0c6db-952">DepartmentName</span></span></th>
<th><span data-ttu-id="0c6db-953">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="0c6db-953">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-954">Departamento</span><span class="sxs-lookup"><span data-stu-id="0c6db-954">Department</span></span></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="0c6db-955">EntityType</span><span class="sxs-lookup"><span data-stu-id="0c6db-955">EntityType</span></span></th>
<th><span data-ttu-id="0c6db-956">Nome próprio</span><span class="sxs-lookup"><span data-stu-id="0c6db-956">FirstName</span></span></th>
<th><span data-ttu-id="0c6db-957">Apelido</span><span class="sxs-lookup"><span data-stu-id="0c6db-957">LastName</span></span></th>
<th><span data-ttu-id="0c6db-958">Idade</span><span class="sxs-lookup"><span data-stu-id="0c6db-958">Age</span></span></th>
<th><span data-ttu-id="0c6db-959">E-mail</span><span class="sxs-lookup"><span data-stu-id="0c6db-959">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="0c6db-960">Empregado</span><span class="sxs-lookup"><span data-stu-id="0c6db-960">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="0c6db-961">Olá primeira opção, prefixação toohello de tipo de entidade Olá **RowKey**, é útil se existir a possibilidade de que duas entidades de diferentes tipos de poderão ter Olá mesmo valor de chave.</span><span class="sxs-lookup"><span data-stu-id="0c6db-961">hello first option, prepending hello entity type toohello **RowKey**, is useful if there is a possibility that two entities of different types might have hello same key value.</span></span> <span data-ttu-id="0c6db-962">-Grupos de entidades de Olá mesmo tipo em conjunto na partição de Olá também.</span><span class="sxs-lookup"><span data-stu-id="0c6db-962">It also groups entities of hello same type together in hello partition.</span></span>  

<span data-ttu-id="0c6db-963">Olá técnicas abordadas nesta secção são especialmente relevantes toohello debate [relações de herança](#inheritance-relationships) anteriormente neste guia na secção de Olá [Modelling relações](#modelling-relationships).</span><span class="sxs-lookup"><span data-stu-id="0c6db-963">hello techniques discussed in this section are especially relevant toohello discussion [Inheritance relationships](#inheritance-relationships) earlier in this guide in hello section [Modelling relationships](#modelling-relationships).</span></span>  

> [!NOTE]
> <span data-ttu-id="0c6db-964">Deve incluir um número de versão no Olá tipo valor tooenable cliente aplicações tooevolve POCO objetos de entidade e trabalhar com versões diferentes.</span><span class="sxs-lookup"><span data-stu-id="0c6db-964">You should consider including a version number in hello entity type value tooenable client applications tooevolve POCO objects and work with different versions.</span></span>  
> 
> 

<span data-ttu-id="0c6db-965">Olá resto esta secção descreve algumas das funcionalidades de Olá no Olá biblioteca de clientes de armazenamento que o facilitam a trabalhar com vários tipos de entidade Olá mesma tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-965">hello remainder of this section describes some of hello features in hello Storage Client Library that facilitate working with multiple entity types in hello same table.</span></span>  

#### <a name="retrieving-heterogeneous-entity-types"></a><span data-ttu-id="0c6db-966">Obter os tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-966">Retrieving heterogeneous entity types</span></span>
<span data-ttu-id="0c6db-967">Se estiver a utilizar Olá biblioteca de clientes de armazenamento, tem três opções para trabalhar com diversos tipos de entidade.</span><span class="sxs-lookup"><span data-stu-id="0c6db-967">If you are using hello Storage Client Library, you have three options for working with multiple entity types.</span></span>  

<span data-ttu-id="0c6db-968">Se sabe que o tipo de Olá da entidade de Olá armazenado com específico **RowKey** e **PartitionKey** valores, em seguida, pode especificar o tipo de entidade Olá ao obter a entidade de Olá, conforme ilustrado nos exemplos de Olá dois anterior que obter entidades de tipo **EmployeeEntity**: [executar uma consulta de ponto utilizando Olá biblioteca de clientes de armazenamento](#executing-a-point-query-using-the-storage-client-library) e [obter várias entidades com LINQ](#retrieving-multiple-entities-using-linq).</span><span class="sxs-lookup"><span data-stu-id="0c6db-968">If you know hello type of hello entity stored with a specific **RowKey** and **PartitionKey** values, then you can specify hello entity type when you retrieve hello entity as shown in hello previous two examples that retrieve entities of type **EmployeeEntity**: [Executing a point query using hello Storage Client Library](#executing-a-point-query-using-the-storage-client-library) and [Retrieving multiple entities using LINQ](#retrieving-multiple-entities-using-linq).</span></span>  

<span data-ttu-id="0c6db-969">segunda opção de Olá é toouse Olá **DynamicTableEntity** tipo (uma matriz de propriedades) em vez de um tipo de entidade POCO concreto (esta opção pode também melhorar o desempenho porque não há nenhum tooserialize necessidade e anular a serialização da entidade de Olá demasiado. Tipos de redes).</span><span class="sxs-lookup"><span data-stu-id="0c6db-969">hello second option is toouse hello **DynamicTableEntity** type (a property bag) instead of a concrete POCO entity type (this option may also improve performance because there is no need tooserialize and deserialize hello entity too.NET types).</span></span> <span data-ttu-id="0c6db-970">Olá seguinte código c# potencialmente obtém várias entidades de diferentes tipos de tabela de Olá, mas devolve todas as entidades como **DynamicTableEntity** instâncias.</span><span class="sxs-lookup"><span data-stu-id="0c6db-970">hello following C# code potentially retrieves multiple entities of different types from hello table, but returns all entities as **DynamicTableEntity** instances.</span></span> <span data-ttu-id="0c6db-971">Em seguida, utiliza Olá **EntityType** toodetermine Olá o tipo de propriedade de cada entidade:</span><span class="sxs-lookup"><span data-stu-id="0c6db-971">It then uses hello **EntityType** property toodetermine hello type of each entity:</span></span>  

```csharp
string filter = TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("PartitionKey",
    QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("RowKey",
                    QueryComparisons.GreaterThanOrEqual, "B"),
        TableOperators.And,
        TableQuery.GenerateFilterCondition("RowKey",
        QueryComparisons.LessThan, "F")
    )
);
TableQuery<DynamicTableEntity> entityQuery =
    new TableQuery<DynamicTableEntity>().Where(filter);
var employees = employeeTable.ExecuteQuery(entityQuery);

IEnumerable<DynamicTableEntity> entities = employeeTable.ExecuteQuery(entityQuery);
foreach (var e in entities)
{
EntityProperty entityTypeProperty;
if (e.Properties.TryGetValue("EntityType", out entityTypeProperty))
{
    if (entityTypeProperty.StringValue == "Employee")
    {
        // Use entityTypeProperty, RowKey, PartitionKey, Etag, and Timestamp
        }
    }
}  
```

<span data-ttu-id="0c6db-972">Tenha em atenção que tooretrieve outras propriedades tem de utilizar Olá **TryGetValue** método no Olá **propriedades** propriedade Olá **DynamicTableEntity** classe.</span><span class="sxs-lookup"><span data-stu-id="0c6db-972">Note that tooretrieve other properties you must use hello **TryGetValue** method on hello **Properties** property of hello **DynamicTableEntity** class.</span></span>  

<span data-ttu-id="0c6db-973">Uma terceira opção está toocombine utilizando Olá **DynamicTableEntity** tipo e um **EntityResolver** instância.</span><span class="sxs-lookup"><span data-stu-id="0c6db-973">A third option is toocombine using hello **DynamicTableEntity** type and an **EntityResolver** instance.</span></span> <span data-ttu-id="0c6db-974">Isto permite que tooresolve toomultiple POCO tipos Olá mesma consulta.</span><span class="sxs-lookup"><span data-stu-id="0c6db-974">This enables you tooresolve toomultiple POCO types in hello same query.</span></span> <span data-ttu-id="0c6db-975">Neste exemplo, Olá **EntityResolver** delegado está a utilizar Olá **EntityType** propriedade toodistinguish entre Olá dois os tipos de entidade que Olá consulta devolve.</span><span class="sxs-lookup"><span data-stu-id="0c6db-975">In this example, hello **EntityResolver** delegate is using hello **EntityType** property toodistinguish between hello two types of entity that hello query returns.</span></span> <span data-ttu-id="0c6db-976">Olá **resolver** método utiliza Olá **resolução** delegar tooresolve **DynamicTableEntity** instâncias demasiado**TableEntity** instâncias.</span><span class="sxs-lookup"><span data-stu-id="0c6db-976">hello **Resolve** method uses hello **resolver** delegate tooresolve **DynamicTableEntity** instances too**TableEntity** instances.</span></span>  

```csharp
EntityResolver<TableEntity> resolver = (pk, rk, ts, props, etag) =>
{

        TableEntity resolvedEntity = null;
        if (props["EntityType"].StringValue == "Department")
        {
        resolvedEntity = new DepartmentEntity();
        }
        else if (props["EntityType"].StringValue == "Employee")
        {
        resolvedEntity = new EmployeeEntity();
        }
        else throw new ArgumentException("Unrecognized entity", "props");

        resolvedEntity.PartitionKey = pk;
        resolvedEntity.RowKey = rk;
        resolvedEntity.Timestamp = ts;
        resolvedEntity.ETag = etag;
        resolvedEntity.ReadEntity(props, null);
        return resolvedEntity;
};

string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<DynamicTableEntity> entityQuery =
        new TableQuery<DynamicTableEntity>().Where(filter);

var entities = employeeTable.ExecuteQuery(entityQuery, resolver);
foreach (var e in entities)
{
        if (e is DepartmentEntity)
        {
    ...
        }
        if (e is EmployeeEntity)
        {
    ...
        }
}  
```

#### <a name="modifying-heterogeneous-entity-types"></a><span data-ttu-id="0c6db-977">Modificar os tipos de entidade heterogénea</span><span class="sxs-lookup"><span data-stu-id="0c6db-977">Modifying heterogeneous entity types</span></span>
<span data-ttu-id="0c6db-978">Não é necessário o tipo de Olá tooknow de uma entidade toodelete e que saiba sempre tipo Olá de uma entidade ao inseri-lo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-978">You do not need tooknow hello type of an entity toodelete it, and you always know hello type of an entity when you insert it.</span></span> <span data-ttu-id="0c6db-979">No entanto, pode utilizar **DynamicTableEntity** tooupdate uma entidade de tipo sem saberem o respetivo tipo e sem utilizar uma classe de entidade POCO.</span><span class="sxs-lookup"><span data-stu-id="0c6db-979">However, you can use **DynamicTableEntity** type tooupdate an entity without knowing its type and without using a POCO entity class.</span></span> <span data-ttu-id="0c6db-980">Olá exemplo de código seguinte obtém uma única entidade e verifica Olá **EmployeeCount** existe uma propriedade antes de atualizá-la.</span><span class="sxs-lookup"><span data-stu-id="0c6db-980">hello following code sample retrieves a single entity, and checks hello **EmployeeCount** property exists before updating it.</span></span>  

```csharp
TableResult result =
        employeeTable.Execute(TableOperation.Retrieve(partitionKey, rowKey));
DynamicTableEntity department = (DynamicTableEntity)result.Result;

EntityProperty countProperty;

if (!department.Properties.TryGetValue("EmployeeCount", out countProperty))
{
        throw new
        InvalidOperationException("Invalid entity, EmployeeCount property not found.");
}
countProperty.Int32Value += 1;
employeeTable.Execute(TableOperation.Merge(department));  
```

### <a name="controlling-access-with-shared-access-signatures"></a><span data-ttu-id="0c6db-981">Controlar o acesso com assinaturas de acesso partilhado</span><span class="sxs-lookup"><span data-stu-id="0c6db-981">Controlling access with Shared Access Signatures</span></span>
<span data-ttu-id="0c6db-982">Pode utilizar a assinatura de acesso partilhado (SAS) tokens tooenable cliente aplicações toomodify (e consultar) diretamente, sem necessidade de Olá tooauthenticate diretamente com o serviço de tabela Olá as entidades da tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-982">You can use Shared Access Signature (SAS) tokens tooenable client applications toomodify (and query) table entities directly without hello need tooauthenticate directly with hello table service.</span></span> <span data-ttu-id="0c6db-983">Normalmente, existem três toousing vantagens principais SAS na sua aplicação:</span><span class="sxs-lookup"><span data-stu-id="0c6db-983">Typically, there are three main benefits toousing SAS in your application:</span></span>  

* <span data-ttu-id="0c6db-984">Não é necessário toodistribute seu armazenamento conta tooan chave plataforma inseguras (por exemplo, um dispositivo móvel) na ordem tooallow tooaccess desse dispositivo e modificar as entidades de Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-984">You do not need toodistribute your storage account key tooan insecure platform (such as a mobile device) in order tooallow that device tooaccess and modify entities in hello Table service.</span></span>  
* <span data-ttu-id="0c6db-985">Pode descarregar algum do trabalho Olá nesse web e funções de trabalho executar gerir os dispositivos de tooclient entidades, tais como computadores do utilizador final e de dispositivos móveis.</span><span class="sxs-lookup"><span data-stu-id="0c6db-985">You can offload some of hello work that web and worker roles perform in managing your entities tooclient devices such as end-user computers and mobile devices.</span></span>  
* <span data-ttu-id="0c6db-986">Pode atribuir um restrita e tempo conjunto limitado de cliente de tooa de permissões (por exemplo, permitir o acesso só de leitura toospecific recursos).</span><span class="sxs-lookup"><span data-stu-id="0c6db-986">You can assign a constrained and time limited set of permissions tooa client (such as allowing read-only access toospecific resources).</span></span>  

<span data-ttu-id="0c6db-987">Para obter mais informações sobre como utilizar os tokens SAS com Olá serviço tabela, consulte [através de acesso partilhado assinaturas (SAS)](storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="0c6db-987">For more information about using SAS tokens with hello Table service, see [Using Shared Access Signatures (SAS)](storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="0c6db-988">No entanto, tem ainda de gerar tokens SAS Olá que um cliente de conceder as entidades da aplicação toohello no serviço de tabela Olá: deve fazê-lo num ambiente que tem acesso seguro tooyour chaves de conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="0c6db-988">However, you must still generate hello SAS tokens that grant a client application toohello entities in hello table service: you should do this in an environment that has secure access tooyour storage account keys.</span></span> <span data-ttu-id="0c6db-989">Normalmente, utilizar um web ou de trabalho função toogenerate Olá SAS tokens e entregá-los toohello aplicações de cliente que precisam de aceder tooyour entidades.</span><span class="sxs-lookup"><span data-stu-id="0c6db-989">Typically, you use a web or worker role toogenerate hello SAS tokens and deliver them toohello client applications that need access tooyour entities.</span></span> <span data-ttu-id="0c6db-990">Porque não existe ainda um overhead inerente ao gerar e entrega tooclients de tokens SAS, deve considerar como melhor tooreduce esta sobrecarga, especialmente em cenários de elevado volume.</span><span class="sxs-lookup"><span data-stu-id="0c6db-990">Because there is still an overhead involved in generating and delivering SAS tokens tooclients, you should consider how best tooreduce this overhead, especially in high-volume scenarios.</span></span>  

<span data-ttu-id="0c6db-991">É possível toogenerate um token SAS, que concede acesso tooa subconjunto de entidades de Olá numa tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-991">It is possible toogenerate a SAS token that grants access tooa subset of hello entities in a table.</span></span> <span data-ttu-id="0c6db-992">Por predefinição, cria um token SAS para uma tabela inteira, mas também é possível toospecify que tooeither do acesso de concessão de token SAS Olá um intervalo de **PartitionKey** valores ou um intervalo de **PartitionKey** e  **RowKey** valores.</span><span class="sxs-lookup"><span data-stu-id="0c6db-992">By default, you create a SAS token for an entire table, but it is also possible toospecify that hello SAS token grant access tooeither a range of **PartitionKey** values, or a range of **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="0c6db-993">Poderá escolher toogenerate tokens SAS para utilizadores individuais do seu sistema, de modo a que o token SAS de cada utilizador só permite-lhes acesso tootheir entidades própria Olá serviço tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-993">You might choose toogenerate SAS tokens for individual users of your system such that each user's SAS token only allows them access tootheir own entities in hello table service.</span></span>  

### <a name="asynchronous-and-parallel-operations"></a><span data-ttu-id="0c6db-994">Operações assíncronas e paralelas</span><span class="sxs-lookup"><span data-stu-id="0c6db-994">Asynchronous and parallel operations</span></span>
<span data-ttu-id="0c6db-995">Fornecidas são propagando-se os pedidos entre várias partições, pode melhorar a capacidade de resposta de débito e o cliente utilizando as consultas paralelas ou assíncronas.</span><span class="sxs-lookup"><span data-stu-id="0c6db-995">Provided you are spreading your requests across multiple partitions, you can improve throughput and client responsiveness by using asynchronous or parallel queries.</span></span>
<span data-ttu-id="0c6db-996">Por exemplo, pode ter duas ou mais trabalho instâncias de função de aceder as tabelas em paralelo.</span><span class="sxs-lookup"><span data-stu-id="0c6db-996">For example, you might have two or more worker role instances accessing your tables in parallel.</span></span> <span data-ttu-id="0c6db-997">Foi tem funções de trabalho individuais responsáveis por conjuntos de específicos de partições ou simplesmente tem várias instâncias de função de trabalho, cada tooaccess capaz de Olá todas as partições numa tabela.</span><span class="sxs-lookup"><span data-stu-id="0c6db-997">You could have individual worker roles responsible for particular sets of partitions, or simply have multiple worker role instances, each able tooaccess all hello partitions in a table.</span></span>  

<span data-ttu-id="0c6db-998">Dentro de uma instância de cliente, pode melhorar o débito ao executar operações de armazenamento de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="0c6db-998">Within a client instance, you can improve throughput by executing storage operations asynchronously.</span></span> <span data-ttu-id="0c6db-999">Olá biblioteca de clientes de armazenamento permite consultas assíncrona toowrite fácil e modificações.</span><span class="sxs-lookup"><span data-stu-id="0c6db-999">hello Storage Client Library makes it easy toowrite asynchronous queries and modifications.</span></span> <span data-ttu-id="0c6db-1000">Por exemplo, poderá começar com o método síncrono Olá que obtém todas as entidades de Olá numa partição, conforme mostrado no Olá código c# os seguintes:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1000">For example, you might start with hello synchronous method that retrieves all hello entities in a partition as shown in hello following C# code:</span></span>  

```csharp
private static void ManyEntitiesQuery(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

        TableContinuationToken continuationToken = null;

        do
        {
        var employees = employeeTable.ExecuteQuerySegmented(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
    {
        ...
    }
        continuationToken = employees.ContinuationToken;
        } while (continuationToken != null);
}  
```

<span data-ttu-id="0c6db-1001">Pode facilmente modificar este código para que essa consulta Olá seja executada de forma assíncrona, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1001">You can easily modify this code so that hello query runs asynchronously as follows:</span></span>  

```csharp
private static async Task ManyEntitiesQueryAsync(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);
        TableContinuationToken continuationToken = null;

        do
        {
        var employees = await employeeTable.ExecuteQuerySegmentedAsync(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
        {
            ...
        }
        continuationToken = employees.ContinuationToken;
            } while (continuationToken != null);
}  
```

<span data-ttu-id="0c6db-1002">Neste exemplo assíncrona, pode ver a seguinte Olá é alterado de versão síncrona Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1002">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="0c6db-1003">a assinatura do método Olá inclui agora Olá **async** modificador e devolve um **tarefas** instância.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1003">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="0c6db-1004">Em vez de chamar Olá **ExecuteSegmented** resultados do método tooretrieve, Olá método agora chamadas Olá **ExecuteSegmentedAsync** Olá método e utiliza **await** modificador tooretrieve resulta no modo assíncrono.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1004">Instead of calling hello **ExecuteSegmented** method tooretrieve results, hello method now calls hello **ExecuteSegmentedAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="0c6db-1005">aplicação de cliente Olá pode chamar este método várias vezes (com valores diferentes para Olá **departamento** parâmetro), e cada consulta será executado num thread separado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1005">hello client application can call this method multiple times (with different values for hello **department** parameter), and each query will run on a separate thread.</span></span>  

<span data-ttu-id="0c6db-1006">Tenha em atenção que não há nenhuma versão assíncrona de Olá **executar** método Olá **TableQuery** classe porque Olá **IEnumerable** interface não suporta assíncrona enumeração.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1006">Note that there is no asynchronous version of hello **Execute** method in hello **TableQuery** class because hello **IEnumerable** interface does not support asynchronous enumeration.</span></span>  

<span data-ttu-id="0c6db-1007">Também pode inserir, atualizar e eliminar entidades no modo assíncrono.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1007">You can also insert, update, and delete entities asynchronously.</span></span> <span data-ttu-id="0c6db-1008">Olá c# exemplo a seguir mostra um método simples, síncrona tooinsert ou substituir uma entidade de empregado:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1008">hello following C# example shows a simple, synchronous method tooinsert or replace an employee entity:</span></span>  

```csharp
private static void SimpleEmployeeUpsert(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = employeeTable
        .Execute(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="0c6db-1009">Pode facilmente modificar este código, para que a atualização de Olá funciona de forma assíncrona, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1009">You can easily modify this code so that hello update runs asynchronously as follows:</span></span>  

```csharp
private static async Task SimpleEmployeeUpsertAsync(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = await employeeTable
        .ExecuteAsync(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="0c6db-1010">Neste exemplo assíncrona, pode ver a seguinte Olá é alterado de versão síncrona Olá:</span><span class="sxs-lookup"><span data-stu-id="0c6db-1010">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="0c6db-1011">a assinatura do método Olá inclui agora Olá **async** modificador e devolve um **tarefas** instância.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1011">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="0c6db-1012">Em vez de chamar Olá **executar** entidade do método tooupdate Olá, Olá método agora chamadas Olá **ExecuteAsync** Olá método e utiliza **await** tooretrieve modificador resulta no modo assíncrono.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1012">Instead of calling hello **Execute** method tooupdate hello entity, hello method now calls hello **ExecuteAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="0c6db-1013">aplicação de cliente Olá pode chamar vários métodos assíncronos como este, e cada invocação do método será executado num thread separado.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1013">hello client application can call multiple asynchronous methods like this one, and each method invocation will run on a separate thread.</span></span>  

### <a name="credits"></a><span data-ttu-id="0c6db-1014">Créditos</span><span class="sxs-lookup"><span data-stu-id="0c6db-1014">Credits</span></span>
<span data-ttu-id="0c6db-1015">Gostaríamos Olá toothank seguintes membros Olá equipa do Azure para as respetivas contribuições: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Irwin Jorge, Vamshidhar Kommineni, Vinay Shah e Serdar Ozler, bem como Hollander personalizada da Microsoft DX.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1015">We would like toothank hello following members of hello Azure team for their contributions: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah and Serdar Ozler as well as  Tom Hollander from Microsoft DX.</span></span> 

<span data-ttu-id="0c6db-1016">Também Gostaríamos Olá toothank seguir da Microsoft MVP para os seus comentários importantes ciclos de revisão: Igor Papirov e Edward Bakker.</span><span class="sxs-lookup"><span data-stu-id="0c6db-1016">We would also like toothank hello following Microsoft MVP's for their valuable feedback during review cycles: Igor Papirov and Edward Bakker.</span></span>

[1]: ./media/storage-table-design-guide/storage-table-design-IMAGE01.png
[2]: ./media/storage-table-design-guide/storage-table-design-IMAGE02.png
[3]: ./media/storage-table-design-guide/storage-table-design-IMAGE03.png
[4]: ./media/storage-table-design-guide/storage-table-design-IMAGE04.png
[5]: ./media/storage-table-design-guide/storage-table-design-IMAGE05.png
[6]: ./media/storage-table-design-guide/storage-table-design-IMAGE06.png
[7]: ./media/storage-table-design-guide/storage-table-design-IMAGE07.png
[8]: ./media/storage-table-design-guide/storage-table-design-IMAGE08.png
[9]: ./media/storage-table-design-guide/storage-table-design-IMAGE09.png
[10]: ./media/storage-table-design-guide/storage-table-design-IMAGE10.png
[11]: ./media/storage-table-design-guide/storage-table-design-IMAGE11.png
[12]: ./media/storage-table-design-guide/storage-table-design-IMAGE12.png
[13]: ./media/storage-table-design-guide/storage-table-design-IMAGE13.png
[14]: ./media/storage-table-design-guide/storage-table-design-IMAGE14.png
[15]: ./media/storage-table-design-guide/storage-table-design-IMAGE15.png
[16]: ./media/storage-table-design-guide/storage-table-design-IMAGE16.png
[17]: ./media/storage-table-design-guide/storage-table-design-IMAGE17.png
[18]: ./media/storage-table-design-guide/storage-table-design-IMAGE18.png
[19]: ./media/storage-table-design-guide/storage-table-design-IMAGE19.png
[20]: ./media/storage-table-design-guide/storage-table-design-IMAGE20.png
[21]: ./media/storage-table-design-guide/storage-table-design-IMAGE21.png
[22]: ./media/storage-table-design-guide/storage-table-design-IMAGE22.png
[23]: ./media/storage-table-design-guide/storage-table-design-IMAGE23.png
[24]: ./media/storage-table-design-guide/storage-table-design-IMAGE24.png
[25]: ./media/storage-table-design-guide/storage-table-design-IMAGE25.png
[26]: ./media/storage-table-design-guide/storage-table-design-IMAGE26.png
[27]: ./media/storage-table-design-guide/storage-table-design-IMAGE27.png
[28]: ./media/storage-table-design-guide/storage-table-design-IMAGE28.png
[29]: ./media/storage-table-design-guide/storage-table-design-IMAGE29.png

