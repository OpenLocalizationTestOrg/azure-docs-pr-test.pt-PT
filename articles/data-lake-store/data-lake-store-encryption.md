---
title: aaaEncryption no Azure Data Lake Store | Microsoft Docs
description: "Compreender como funciona a encriptação e a rotação de chaves no Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="e6486-103">Encriptação de dados no Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="e6486-104">A encriptação no Azure Data Lake Store ajuda-o a proteger os seus dados, implementar políticas de segurança da empresa e cumprir os requisitos de conformidade normativa.</span><span class="sxs-lookup"><span data-stu-id="e6486-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="e6486-105">Este artigo fornece uma descrição geral do design Olá e descreve alguns dos aspetos técnicos do Olá de implementação.</span><span class="sxs-lookup"><span data-stu-id="e6486-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="e6486-106">O Data Lake Store suporta a encriptação de dados inativos e em trânsito.</span><span class="sxs-lookup"><span data-stu-id="e6486-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="e6486-107">No caso dos dados inativos, o Data Lake Store suporta a encriptação transparente "ativada por predefinição".</span><span class="sxs-lookup"><span data-stu-id="e6486-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="e6486-108">Eis o que cada um destes termos significa em maior detalhe:</span><span class="sxs-lookup"><span data-stu-id="e6486-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="e6486-109">**Por predefinição**: ao criar uma nova conta de Data Lake Store, predefinição Olá ativa a encriptação.</span><span class="sxs-lookup"><span data-stu-id="e6486-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="e6486-110">Depois disso, os dados armazenados no Data Lake Store são sempre encriptado toostoring anterior no suporte de dados persistente.</span><span class="sxs-lookup"><span data-stu-id="e6486-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="e6486-111">Este é o comportamento de Olá para todos os dados e não pode ser alterada depois de ser criada uma conta.</span><span class="sxs-lookup"><span data-stu-id="e6486-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="e6486-112">**Transparente**: Data Lake Store automaticamente toopersisting anteriores de dados de encripta e desencripta tooretrieval anteriores de dados.</span><span class="sxs-lookup"><span data-stu-id="e6486-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="e6486-113">encriptação de Olá é configurada e gerida de Olá ao nível do Data Lake Store por um administrador.</span><span class="sxs-lookup"><span data-stu-id="e6486-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="e6486-114">Não são efetuadas alterações toohello dados acesso a APIs.</span><span class="sxs-lookup"><span data-stu-id="e6486-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="e6486-115">Assim, não é preciso fazer alterações nas aplicações e serviços que interagem com o Data Lake Store devido à encriptação.</span><span class="sxs-lookup"><span data-stu-id="e6486-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="e6486-116">Os dados em trânsito (também denominados dados em movimento) também são sempre encriptados no Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="e6486-117">Além disso tooencrypting dados toostoring anterior toopersistent suporte de dados Olá dados sempre também estão protegidos em trânsito através de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e6486-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="e6486-118">HTTPS é Olá único protocolo é suportado para Olá que interfaces de REST do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="e6486-119">Olá diagrama seguinte mostra como os dados torna-se encriptados no Data Lake Store:</span><span class="sxs-lookup"><span data-stu-id="e6486-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagrama de encriptação de dados no Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="e6486-121">Configurar a encriptação com o Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="e6486-122">A encriptação no Data Lake Store é configurada durante a criação da conta e está sempre ativada por predefinição.</span><span class="sxs-lookup"><span data-stu-id="e6486-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="e6486-123">Pode gerir chaves de Olá manualmente ou permitir que o Data Lake Store toomanage-las por si (esta é a predefinição de Olá).</span><span class="sxs-lookup"><span data-stu-id="e6486-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="e6486-124">Para obter mais informações, veja o artigo [Introdução](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="e6486-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="e6486-125">Como funciona a encriptação no Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="e6486-126">Olá seguintes informações abrange como chaves de encriptação mestra toomanage explica Olá três diferentes tipos de chaves, pode utilizar a encriptação de dados do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="e6486-127">Chaves de encriptação mestras</span><span class="sxs-lookup"><span data-stu-id="e6486-127">Master encryption keys</span></span>

<span data-ttu-id="e6486-128">O Data Lake Store disponibiliza dois modos para gerir as chaves de encriptação mestras (Master Encryption Keys, MEKs).</span><span class="sxs-lookup"><span data-stu-id="e6486-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="e6486-129">Por agora, assuma a que essa chave de encriptação mestra Olá é a chave de nível superior de Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="e6486-130">Chave de encriptação mestra do acesso toohello é necessário toodecrypt quaisquer dados armazenados no Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="e6486-131">modos de Olá duas para gerir a chave de encriptação mestra Olá são os seguintes:</span><span class="sxs-lookup"><span data-stu-id="e6486-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="e6486-132">Chaves geridas por serviços</span><span class="sxs-lookup"><span data-stu-id="e6486-132">Service managed keys</span></span>
*   <span data-ttu-id="e6486-133">Chaves geridas pelo cliente</span><span class="sxs-lookup"><span data-stu-id="e6486-133">Customer managed keys</span></span>

<span data-ttu-id="e6486-134">Em ambos os modos, chave de encriptação mestra Olá está protegida por armazenar no Cofre de chaves do Azure.</span><span class="sxs-lookup"><span data-stu-id="e6486-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="e6486-135">O Cofre de chaves é um serviço completamente gerido, altamente seguro no Azure que pode ser utilizados toosafeguard de chaves criptográficas.</span><span class="sxs-lookup"><span data-stu-id="e6486-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="e6486-136">Para obter mais informações, veja [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="e6486-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="e6486-137">Eis uma breve comparação das funcionalidades fornecidas pelo dois modos de Olá de gerir Olá MEKs.</span><span class="sxs-lookup"><span data-stu-id="e6486-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="e6486-138">Chaves geridas por serviços</span><span class="sxs-lookup"><span data-stu-id="e6486-138">Service managed keys</span></span> | <span data-ttu-id="e6486-139">Chaves geridas pelo cliente</span><span class="sxs-lookup"><span data-stu-id="e6486-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="e6486-140">Como são armazenados os dados?</span><span class="sxs-lookup"><span data-stu-id="e6486-140">How is data stored?</span></span>|<span data-ttu-id="e6486-141">Sempre encriptado toobeing anterior armazenado.</span><span class="sxs-lookup"><span data-stu-id="e6486-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="e6486-142">Sempre encriptado toobeing anterior armazenado.</span><span class="sxs-lookup"><span data-stu-id="e6486-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="e6486-143">Onde está armazenado a chave de encriptação mestra do Olá?</span><span class="sxs-lookup"><span data-stu-id="e6486-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="e6486-144">Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="e6486-144">Key Vault</span></span>|<span data-ttu-id="e6486-145">Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="e6486-145">Key Vault</span></span>|
|<span data-ttu-id="e6486-146">São qualquer encriptação chaves armazenadas no Olá limpar fora do Cofre de chaves?</span><span class="sxs-lookup"><span data-stu-id="e6486-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="e6486-147">Não</span><span class="sxs-lookup"><span data-stu-id="e6486-147">No</span></span>|<span data-ttu-id="e6486-148">Não</span><span class="sxs-lookup"><span data-stu-id="e6486-148">No</span></span>|
|<span data-ttu-id="e6486-149">Olá MEK pode ser obtida pelo Cofre de chaves?</span><span class="sxs-lookup"><span data-stu-id="e6486-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="e6486-150">Não.</span><span class="sxs-lookup"><span data-stu-id="e6486-150">No.</span></span> <span data-ttu-id="e6486-151">Após Olá que MEK é armazenado no Cofre de chaves, pode apenas ser utilizado para encriptação e desencriptação.</span><span class="sxs-lookup"><span data-stu-id="e6486-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="e6486-152">Não.</span><span class="sxs-lookup"><span data-stu-id="e6486-152">No.</span></span> <span data-ttu-id="e6486-153">Após Olá que MEK é armazenado no Cofre de chaves, pode apenas ser utilizado para encriptação e desencriptação.</span><span class="sxs-lookup"><span data-stu-id="e6486-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="e6486-154">Proprietário de instância do Cofre de chaves de Olá e Olá MEK?</span><span class="sxs-lookup"><span data-stu-id="e6486-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="e6486-155">Olá serviço do Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-155">hello Data Lake Store service</span></span>|<span data-ttu-id="e6486-156">É proprietário de instância de Cofre de chaves de Olá, que pertence na sua própria subscrição do Azure.</span><span class="sxs-lookup"><span data-stu-id="e6486-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="e6486-157">Olá MEK no Cofre de chaves pode ser gerido pelo software ou hardware.</span><span class="sxs-lookup"><span data-stu-id="e6486-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="e6486-158">Pode revogar acesso toohello MEK para Olá serviço do Data Lake Store?</span><span class="sxs-lookup"><span data-stu-id="e6486-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="e6486-159">Não</span><span class="sxs-lookup"><span data-stu-id="e6486-159">No</span></span>|<span data-ttu-id="e6486-160">Sim.</span><span class="sxs-lookup"><span data-stu-id="e6486-160">Yes.</span></span> <span data-ttu-id="e6486-161">Pode gerir listas de controlo de acesso no Cofre de chaves e remover a identidade serviço toohello de entradas de controlo de acesso para Olá serviço do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="e6486-162">Pode eliminar permanentemente Olá MEK?</span><span class="sxs-lookup"><span data-stu-id="e6486-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="e6486-163">Não</span><span class="sxs-lookup"><span data-stu-id="e6486-163">No</span></span>|<span data-ttu-id="e6486-164">Sim.</span><span class="sxs-lookup"><span data-stu-id="e6486-164">Yes.</span></span> <span data-ttu-id="e6486-165">Se eliminar Olá MEK do Cofre de chaves, não não possível desencriptar os dados de Olá no Olá conta do Data Lake Store a qualquer pessoa, incluindo o serviço de arquivo Data Lake Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="e6486-166">Se tem explicitamente efetuada a cópia de segurança Olá MEK anterior toodeleting do Cofre de chaves, Olá MEK pode ser restaurado e, em seguida, podem ser recuperados dados Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="e6486-167">No entanto, se não efetuou cópia de segurança Olá MEK anterior toodeleting-lo do Cofre de chaves, Olá no Olá conta do Data Lake Store podem nunca possível desencriptar os dados após essa data.</span><span class="sxs-lookup"><span data-stu-id="e6486-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="e6486-168">Para além desta diferença de quem gere Olá MEK e Olá Cofre de chaves instância em que reside, rest Olá da estrutura de Olá é Olá mesmo para ambos os modos.</span><span class="sxs-lookup"><span data-stu-id="e6486-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="e6486-169">É importante tooremember seguinte de Olá Quando seleciona o modo de Olá Olá chaves de encriptação principal:</span><span class="sxs-lookup"><span data-stu-id="e6486-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="e6486-170">Pode escolher se o cliente toouse gerido chaves ou chaves de serviço gerida quando aprovisionar uma conta de Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="e6486-171">Depois de uma conta de Data Lake Store está aprovisionada, não é possível alterar o modo de Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="e6486-172">Encriptação e desencriptação de dados</span><span class="sxs-lookup"><span data-stu-id="e6486-172">Encryption and decryption of data</span></span>

<span data-ttu-id="e6486-173">Existem três tipos de chaves que são utilizadas na estrutura de Olá de encriptação de dados.</span><span class="sxs-lookup"><span data-stu-id="e6486-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="e6486-174">Olá, a tabela seguinte fornece um resumo:</span><span class="sxs-lookup"><span data-stu-id="e6486-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="e6486-175">Chave</span><span class="sxs-lookup"><span data-stu-id="e6486-175">Key</span></span>                   | <span data-ttu-id="e6486-176">Abreviatura</span><span class="sxs-lookup"><span data-stu-id="e6486-176">Abbreviation</span></span> | <span data-ttu-id="e6486-177">Associada a</span><span class="sxs-lookup"><span data-stu-id="e6486-177">Associated with</span></span> | <span data-ttu-id="e6486-178">Localização do armazenamento</span><span class="sxs-lookup"><span data-stu-id="e6486-178">Storage location</span></span>                             | <span data-ttu-id="e6486-179">Tipo</span><span class="sxs-lookup"><span data-stu-id="e6486-179">Type</span></span>       | <span data-ttu-id="e6486-180">Notas</span><span class="sxs-lookup"><span data-stu-id="e6486-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e6486-181">Chave de Encriptação Mestra</span><span class="sxs-lookup"><span data-stu-id="e6486-181">Master Encryption Key</span></span> | <span data-ttu-id="e6486-182">MEK</span><span class="sxs-lookup"><span data-stu-id="e6486-182">MEK</span></span>          | <span data-ttu-id="e6486-183">Uma conta do Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-183">A Data Lake Store account</span></span> | <span data-ttu-id="e6486-184">Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="e6486-184">Key Vault</span></span>                              | <span data-ttu-id="e6486-185">Assimétrica</span><span class="sxs-lookup"><span data-stu-id="e6486-185">Asymmetric</span></span> | <span data-ttu-id="e6486-186">Pode ser gerida pelo Data Lake Store ou por si.</span><span class="sxs-lookup"><span data-stu-id="e6486-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="e6486-187">Chave de Encriptação de Dados</span><span class="sxs-lookup"><span data-stu-id="e6486-187">Data Encryption Key</span></span>   | <span data-ttu-id="e6486-188">DEK</span><span class="sxs-lookup"><span data-stu-id="e6486-188">DEK</span></span>          | <span data-ttu-id="e6486-189">Uma conta do Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-189">A Data Lake Store account</span></span> | <span data-ttu-id="e6486-190">Armazenamento persistente, gerido pelo serviço Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="e6486-191">Simétrica</span><span class="sxs-lookup"><span data-stu-id="e6486-191">Symmetric</span></span>  | <span data-ttu-id="e6486-192">Olá DEK é encriptado pelo Olá MEK.</span><span class="sxs-lookup"><span data-stu-id="e6486-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="e6486-193">Olá que DEK encriptado é o que é armazenado no suporte de dados persistente.</span><span class="sxs-lookup"><span data-stu-id="e6486-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="e6486-194">Chave de Encriptação de Blocos</span><span class="sxs-lookup"><span data-stu-id="e6486-194">Block Encryption Key</span></span>  | <span data-ttu-id="e6486-195">BEK</span><span class="sxs-lookup"><span data-stu-id="e6486-195">BEK</span></span>          | <span data-ttu-id="e6486-196">Um bloco de dados</span><span class="sxs-lookup"><span data-stu-id="e6486-196">A block of data</span></span> | <span data-ttu-id="e6486-197">Nenhuma</span><span class="sxs-lookup"><span data-stu-id="e6486-197">None</span></span>                                         | <span data-ttu-id="e6486-198">Simétrica</span><span class="sxs-lookup"><span data-stu-id="e6486-198">Symmetric</span></span>  | <span data-ttu-id="e6486-199">Olá BEK é derivado de Olá DEK e blocos de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="e6486-200">Olá seguinte diagrama ilustra estes conceitos:</span><span class="sxs-lookup"><span data-stu-id="e6486-200">hello following diagram illustrates these concepts:</span></span>

![Chaves na encriptação de dados](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="e6486-202">Algoritmo de pseudo quando um ficheiro é toobe desencriptado:</span><span class="sxs-lookup"><span data-stu-id="e6486-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="e6486-203">Verifique se Olá DEK para a conta de Data Lake Store Olá em cache e pronto a ser utilizado.</span><span class="sxs-lookup"><span data-stu-id="e6486-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="e6486-204">Caso contrário, leia Olá encriptados DEK do armazenamento persistente e enviá-lo tooKey cofre toobe desencriptado.</span><span class="sxs-lookup"><span data-stu-id="e6486-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="e6486-205">Olá cache desencriptar o DEK na memória.</span><span class="sxs-lookup"><span data-stu-id="e6486-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="e6486-206">Está agora pronto toouse.</span><span class="sxs-lookup"><span data-stu-id="e6486-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="e6486-207">Para cada bloco de dados no ficheiro de Olá:</span><span class="sxs-lookup"><span data-stu-id="e6486-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="e6486-208">Olá leitura encriptados bloco de dados do armazenamento persistente.</span><span class="sxs-lookup"><span data-stu-id="e6486-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="e6486-209">Gere Olá BEK de Olá DEK e bloco de encriptados Olá de dados.</span><span class="sxs-lookup"><span data-stu-id="e6486-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="e6486-210">Utilize Olá BEK toodecrypt dados.</span><span class="sxs-lookup"><span data-stu-id="e6486-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="e6486-211">Algoritmo de pseudo quando um bloco de dados é toobe encriptado:</span><span class="sxs-lookup"><span data-stu-id="e6486-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="e6486-212">Verifique se Olá DEK para a conta de Data Lake Store Olá em cache e pronto a ser utilizado.</span><span class="sxs-lookup"><span data-stu-id="e6486-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="e6486-213">Caso contrário, leia Olá encriptados DEK do armazenamento persistente e enviá-lo tooKey cofre toobe desencriptado.</span><span class="sxs-lookup"><span data-stu-id="e6486-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="e6486-214">Olá cache desencriptar o DEK na memória.</span><span class="sxs-lookup"><span data-stu-id="e6486-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="e6486-215">Está agora pronto toouse.</span><span class="sxs-lookup"><span data-stu-id="e6486-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="e6486-216">Gere um BEK exclusivo para o bloco de Olá de dados de Olá DEK.</span><span class="sxs-lookup"><span data-stu-id="e6486-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="e6486-217">Encriptar o bloco de dados de Olá com Olá BEK, utilizando a encriptação AES 256.</span><span class="sxs-lookup"><span data-stu-id="e6486-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="e6486-218">Bloco de dados encriptados de Olá de arquivo de dados no armazenamento persistente.</span><span class="sxs-lookup"><span data-stu-id="e6486-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="e6486-219">Por motivos de desempenho, Olá DEK em Olá limpar é colocado em cache na memória para um curto período de tempo e é imediatamente eliminado posteriormente.</span><span class="sxs-lookup"><span data-stu-id="e6486-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="e6486-220">No suporte de dados persistente, este é armazenado sempre encriptados pela Olá MEK.</span><span class="sxs-lookup"><span data-stu-id="e6486-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="e6486-221">Rotação de chaves</span><span class="sxs-lookup"><span data-stu-id="e6486-221">Key rotation</span></span>

<span data-ttu-id="e6486-222">Quando estiver a utilizar chaves gerida pelo cliente, pode rodar Olá MEK.</span><span class="sxs-lookup"><span data-stu-id="e6486-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="e6486-223">toolearn como tooset uma conta de Data Lake Store com chaves gerida pelo cliente, consulte [introdução](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="e6486-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="e6486-224">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="e6486-224">Prerequisites</span></span>

<span data-ttu-id="e6486-225">Quando configurar Olá conta do Data Lake Store, que escolheu toouse as suas próprias chaves.</span><span class="sxs-lookup"><span data-stu-id="e6486-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="e6486-226">Esta opção não pode ser alterada depois Olá conta foi criada.</span><span class="sxs-lookup"><span data-stu-id="e6486-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="e6486-227">Olá passos partem do princípio de que está a utilizar chaves gerida pelo cliente (ou seja, tiver escolhido as suas próprias chaves do Cofre de chaves).</span><span class="sxs-lookup"><span data-stu-id="e6486-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="e6486-228">Tenha em atenção que se utilizar opções predefinidas de Olá para encriptação, os dados são sempre encriptados através da utilização de chaves geridas pelo Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="e6486-229">Nesta opção, não tem as chaves de Olá capacidade toorotate, como são geridos pelo Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="e6486-230">Como toorotate Olá MEK no Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="e6486-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="e6486-231">Inicie sessão no toohello [portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e6486-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="e6486-232">Procure a instância do Cofre de chaves de toohello que armazena as chaves associadas à sua conta do Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="e6486-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="e6486-233">Selecione **Chaves**.</span><span class="sxs-lookup"><span data-stu-id="e6486-233">Select **Keys**.</span></span>

    ![Captura de ecrã do Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="e6486-235">Selecione a chave de Olá associada com a sua conta do Data Lake Store e crie uma nova versão desta chave.</span><span class="sxs-lookup"><span data-stu-id="e6486-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="e6486-236">Tenha em atenção que Data Lake Store atualmente apenas suporta a rotação da chave tooa nova versão de uma chave.</span><span class="sxs-lookup"><span data-stu-id="e6486-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="e6486-237">Não suporta a rotação dos tooa outra chave.</span><span class="sxs-lookup"><span data-stu-id="e6486-237">It doesn't support rotating tooa different key.</span></span>

   ![Captura de ecrã da janela Chaves, com a opção Nova Versão realçada](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="e6486-239">Procurar conta de armazenamento do Data Lake Store toohello e selecione **encriptação**.</span><span class="sxs-lookup"><span data-stu-id="e6486-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Captura de ecrã da janela da conta de armazenamento do Data Lake Store, com a opção Encriptação realçada](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="e6486-241">Uma mensagem notifica-o de que está disponível uma nova versão de chave da chave de Olá.</span><span class="sxs-lookup"><span data-stu-id="e6486-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="e6486-242">Clique em **rodar chave** nova versão do tooupdate Olá toohello chave.</span><span class="sxs-lookup"><span data-stu-id="e6486-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Captura de ecrã da janela do Data Lake Store com a mensagem e a opção Rodar Chave realçadas](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="e6486-244">Esta operação deve demorar menos de dois minutos e não existe nenhum período de indisponibilidade esperado devido tookey rotação.</span><span class="sxs-lookup"><span data-stu-id="e6486-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="e6486-245">Depois de concluída a operação de Olá, a nova versão de Olá da chave de Olá está em utilização.</span><span class="sxs-lookup"><span data-stu-id="e6486-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
