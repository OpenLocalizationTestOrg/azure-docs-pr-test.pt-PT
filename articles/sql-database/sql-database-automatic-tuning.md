---
title: "aaaSQL base de dados - otimização automática | Microsoft Docs"
description: Base de dados SQL analisa a consulta SQL e automaticaly feita toouser carga de trabalho.
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/05/2017
ms.author: jovanpop
ms.openlocfilehash: 897a8deaabedb6727dc49958c64d0433c5f2e4f4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-tuning"></a><span data-ttu-id="b9620-103">Ajuste automático</span><span class="sxs-lookup"><span data-stu-id="b9620-103">Automatic tuning</span></span>

<span data-ttu-id="b9620-104">Base de dados SQL do Azure é um serviço de dados completamente gerido que monitoriza consultas Olá que são executadas na base de dados de Olá e automaticamente podem melhorar o desempenho da carga de trabalho Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-104">Azure SQL Database is a fully managed data service that monitors hello queries that are executed on hello database and can automatically improve performance of hello workload.</span></span> <span data-ttu-id="b9620-105">Base de dados SQL do Azure tem um mecanismo de intelligence incorporadas que pode otimizar e melhorar o desempenho das consultas através da adaptação dinamicamente a carga de trabalho de tooyour de base de dados de Olá automaticamente.</span><span class="sxs-lookup"><span data-stu-id="b9620-105">Azure SQL Database has a built-in intelligence mechanism that can automatically tune and improve performance of your queries by dynamically adapting hello database tooyour workload.</span></span> <span data-ttu-id="b9620-106">A otimização automática na SQL Database do Azure pode ser uma das funcionalidades mais importantes de Olá que pode ativar no desempenho da base de dados do Azure SQL toooptimize das suas consultas.</span><span class="sxs-lookup"><span data-stu-id="b9620-106">Automatic tuning in Azure SQL Database might be one of hello most important features that you can enable on Azure SQL Database toooptimize performance of your queries.</span></span>

<span data-ttu-id="b9620-107">Consulte este artigo para obter os passos Olá demasiado[ativar a otimização automática](sql-database-automatic-tuning-enable.md) utilizando Olá portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9620-107">See this article for hello steps too[enable automatic tuning](sql-database-automatic-tuning-enable.md) using hello Azure portal.</span></span>

## <a name="why-automatic-tuning"></a><span data-ttu-id="b9620-108">Por que razão a otimização automática?</span><span class="sxs-lookup"><span data-stu-id="b9620-108">Why automatic tuning?</span></span>

<span data-ttu-id="b9620-109">Uma das tarefas principais de Olá na administração clássico da base de dados está a monitorizar carga de trabalho Olá, identificar SQL crítico consulta índices que devem ser adicionados tooimprove desempenho e raramente utilizado índices.</span><span class="sxs-lookup"><span data-stu-id="b9620-109">One of hello main tasks in classic database administration is monitoring hello workload, identifying critical SQL queries, indexes that should be added tooimprove performance, and rarely used indexes.</span></span> <span data-ttu-id="b9620-110">Base de dados SQL do Azure fornece detalhadas aprofundadas índices e consultas de Olá terá toomonitor.</span><span class="sxs-lookup"><span data-stu-id="b9620-110">Azure SQL Database provides detailed insight into hello queries and indexes that you need toomonitor.</span></span> <span data-ttu-id="b9620-111">No entanto, a monitorização contínua de bases de dados é uma tarefa difícil e entediante, especialmente se forem muitas.</span><span class="sxs-lookup"><span data-stu-id="b9620-111">However, constantly monitoring database is a hard and tedious task, especially when dealing with many databases.</span></span> <span data-ttu-id="b9620-112">Gerir um grande número de bases de dados poderá ser toodo impossível eficientemente mesmo com todas as ferramentas disponíveis e relatórios que fornecem a SQL Database do Azure e o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9620-112">Managing a huge number of databases might be impossible toodo efficiently even with all available tools and reports that Azure SQL Database and Azure portal provide.</span></span> <span data-ttu-id="b9620-113">Em vez de monitorização e otimizar a sua base de dados manualmente, poderá considerar delegar algumas das Olá monitorização e otimização ações tooAzure base de dados do SQL Server utilizando a funcionalidade de otimização automática.</span><span class="sxs-lookup"><span data-stu-id="b9620-113">Instead of monitoring and tuning your database manually, you might consider delegating some of hello monitoring and tuning actions tooAzure SQL Database using automatic tuning feature.</span></span> 


> [!VIDEO https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT/player]
>

## <a name="how-does-automatic-tuning-work"></a><span data-ttu-id="b9620-114">Como funciona o trabalho de otimização automático?</span><span class="sxs-lookup"><span data-stu-id="b9620-114">How does automatic tuning work?</span></span>

<span data-ttu-id="b9620-115">Base de dados SQL do Azure tem um processo de análise e monitorização contínua de desempenho que constantemente aprende Olá características da sua carga de trabalho e identificar potenciais problemas e melhorias.</span><span class="sxs-lookup"><span data-stu-id="b9620-115">Azure SQL Database has a continuous performance monitoring and analysis process that constantly learns about hello characteristic of your workload and identify potential issues and improvements.</span></span>

![Processo automático de otimização](./media/sql-database-automatic-tuning/tuning-process.png)

<span data-ttu-id="b9620-117">Ativa este processo SQL Database do Azure toodynamically adaptar tooyour carga de trabalho por localizar os índices e planos poderão melhorar o desempenho das cargas de trabalho e o que indexa afeta as cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-117">This process enables Azure SQL Database toodynamically adapt tooyour workload by finding what indexes and plans might improve performance of your workloads and what indexes affect your workloads.</span></span> <span data-ttu-id="b9620-118">Com base nestes findings, a otimização automática aplica-se ações de otimização que melhoram o desempenho da sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-118">Based on these findings, automatic tuning applies tuning actions that improve performance of your workload.</span></span> <span data-ttu-id="b9620-119">Além disso, o SQL Database do Azure monitoriza continuamente o desempenho após qualquer alteração efetuada pelo tooensure otimização automática, que melhora o desempenho da sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-119">In addition, Azure SQL Database continuously monitors performance after any change made by automatic tuning tooensure that it improves performance of your workload.</span></span> <span data-ttu-id="b9620-120">Qualquer ação que não tenha a melhorar o desempenho é automaticamente revertida.</span><span class="sxs-lookup"><span data-stu-id="b9620-120">Any action that didn’t improve performance is automatically reverted.</span></span> <span data-ttu-id="b9620-121">O processo de verificação é uma funcionalidade chave que assegura que qualquer alteração efetuada pelo otimização automática não diminuir o desempenho de Olá da sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-121">This verification process is a key feature that ensures that any change made by automatic tuning does not decrease hello performance of your workload.</span></span>

<span data-ttu-id="b9620-122">Existem dois aspetos de otimização automáticos, que estão disponíveis no SQL Database do Azure:</span><span class="sxs-lookup"><span data-stu-id="b9620-122">There are two automatic tuning aspects that are available in Azure SQL Database:</span></span>

 -  <span data-ttu-id="b9620-123">**A gestão automática de índices** que identifica os índices devem ser adicionados na base de dados e índices que devem ser removidos.</span><span class="sxs-lookup"><span data-stu-id="b9620-123">**Automatic index management** that identifies indexes that should be added in your database, and indexes that should be removed.</span></span>
 -  <span data-ttu-id="b9620-124">**Correção automática plano** (disponível em breve, já disponível no SQL Server 2017) que identifica os planos problemáticos e correções SQL planear problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="b9620-124">**Automatic plan correction** (coming soon, already available in SQL Server 2017) that identifies problematic plans and fixes SQL plan performance problems.</span></span>

## <a name="automatic-index-management"></a><span data-ttu-id="b9620-125">Gestão automática de índices</span><span class="sxs-lookup"><span data-stu-id="b9620-125">Automatic index management</span></span>

<span data-ttu-id="b9620-126">Na base de dados SQL do Azure, a gestão de índices é fácil porque a base de dados do Azure SQL aprende a carga de trabalho e garante que os dados sempre ideal estão indexados.</span><span class="sxs-lookup"><span data-stu-id="b9620-126">In Azure SQL Database, index management is easy because Azure SQL Database learns about your workload and ensures that your data is always optimally indexed.</span></span> <span data-ttu-id="b9620-127">Conceção do índice adequada é fundamental para otimizar o desempenho da sua carga de trabalho e a gestão automática de índices pode ajudar a otimizar os índices.</span><span class="sxs-lookup"><span data-stu-id="b9620-127">Proper index design is crucial for optimal performance of your workload, and automatic index management can help you optimize your indexes.</span></span> <span data-ttu-id="b9620-128">A gestão automática de índices pode corrigir problemas de desempenho nas bases de dados incorretamente indexadas, ou manter e melhorar os índices no esquema de base de dados existente Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-128">Automatic index management can either fix performance issues in incorrectly indexed databases, or maintain and improve indexes on hello existing database schema.</span></span> 

### <a name="why-do-you-need-index-management"></a><span data-ttu-id="b9620-129">Por que motivo precisa de gestão de índice?</span><span class="sxs-lookup"><span data-stu-id="b9620-129">Why do you need index management?</span></span>

<span data-ttu-id="b9620-130">Os índices acelerar a algumas das suas consultas que leiam os dados das tabelas de Olá; No entanto, estas podem atrasar consultas Olá que atualizam dados.</span><span class="sxs-lookup"><span data-stu-id="b9620-130">Indexes speed up some of your queries that read data from hello tables; however, they can slow down hello queries that update data.</span></span> <span data-ttu-id="b9620-131">Terá de toocarefully analisar quando toocreate um índice e as colunas terá tooinclude no Olá índice.</span><span class="sxs-lookup"><span data-stu-id="b9620-131">You need toocarefully analyze when toocreate an index and what columns you need tooinclude in hello index.</span></span> <span data-ttu-id="b9620-132">Não podem ser necessários alguns índices após algum tempo.</span><span class="sxs-lookup"><span data-stu-id="b9620-132">Some indexes might not be needed after some time.</span></span> <span data-ttu-id="b9620-133">Por conseguinte, terá de tooperiodically identificar e remover os índices de Olá não coloque qualquer benefícios.</span><span class="sxs-lookup"><span data-stu-id="b9620-133">Therefore, you would need tooperiodically identify and drop hello indexes that do not bring any benefits.</span></span> <span data-ttu-id="b9620-134">Se ignorar Olá índices não utilizados, o desempenho das consultas de Olá que atualizam dados deverá ser diminuído sem qualquer benefício em consultas de Olá que leu os dados.</span><span class="sxs-lookup"><span data-stu-id="b9620-134">If you ignore hello unused indexes, performance of hello queries that update data would be decreased without any benefit on hello queries that read data.</span></span> <span data-ttu-id="b9620-135">Os índices afetam também desempenho global do sistema de Olá porque atualizações adicionais exigem registo desnecessário.</span><span class="sxs-lookup"><span data-stu-id="b9620-135">Unused indexes also affect overall performance of hello system because additional updates require unnecessary logging.</span></span>

<span data-ttu-id="b9620-136">Ao localizar o conjunto de ideal Olá dos índices melhorar o desempenho das consultas de Olá ler os dados das tabelas e que tenham um impacto mínimo sobre atualizações poderão exigir análise contínua e complexa.</span><span class="sxs-lookup"><span data-stu-id="b9620-136">Finding hello optimal set of indexes that improve performance of hello queries that read data from your tables and have minimal impact on updates might require continuous and complex analysis.</span></span>

<span data-ttu-id="b9620-137">Base de dados SQL do Azure utiliza intelligence incorporada e regras avançadas que analisar as suas consultas, identifique os índices que seriam ideais para cargas de trabalho atuais e índices de Olá podem ser removidos.</span><span class="sxs-lookup"><span data-stu-id="b9620-137">Azure SQL Database uses built-in intelligence and advanced rules that analyze your queries, identify indexes that would be optimal for your current workloads, and hello indexes might be removed.</span></span> <span data-ttu-id="b9620-138">Base de dados SQL do Azure garante que tem um conjunto mínimo necessário de índices otimizar as consultas de Olá que leu os dados, afetar Olá minimizado Olá outras consultas.</span><span class="sxs-lookup"><span data-stu-id="b9620-138">Azure SQL Database ensures that you have a minimal necessary set of indexes that optimize hello queries that read data, with hello minimized impact on hello other queries.</span></span>

### <a name="how-tooidentify-indexes-that-need-toobe-changed-in-your-database"></a><span data-ttu-id="b9620-139">Como tooidentify indexa toobe essa necessidade alterado na base de dados?</span><span class="sxs-lookup"><span data-stu-id="b9620-139">How tooidentify indexes that need toobe changed in your database?</span></span>

<span data-ttu-id="b9620-140">Base de dados SQL do Azure com o processo de gestão de índice mais fácil.</span><span class="sxs-lookup"><span data-stu-id="b9620-140">Azure SQL Database makes index management process easy.</span></span> <span data-ttu-id="b9620-141">Em vez do processo de Olá tedious de análise de carga de trabalho manual e monitorização do índice, SQL Database do Azure analisa a carga de trabalho, identifica as consultas de Olá que foi executadas mais rapidamente com um novo índice e identifica os índices utilizados ou duplicados.</span><span class="sxs-lookup"><span data-stu-id="b9620-141">Instead of hello tedious process of manual workload analysis and index monitoring, Azure SQL Database analyzes your workload, identifies hello queries that could be executed faster with a new index, and identifies unused or duplicated indexes.</span></span> <span data-ttu-id="b9620-142">Encontrar mais informações sobre a identificação dos índices que devem ser alteradas em [encontrar recomendações do índice no portal do Azure](sql-database-advisor-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b9620-142">Find more information about identification of indexes that should be changed at [Find index recommendations in Azure portal](sql-database-advisor-portal.md).</span></span>

### <a name="automatic-index-management-considerations"></a><span data-ttu-id="b9620-143">Considerações sobre a gestão automática de índice</span><span class="sxs-lookup"><span data-stu-id="b9620-143">Automatic index management considerations</span></span>

<span data-ttu-id="b9620-144">Se achar que regras incorporadas Olá melhorar o desempenho de Olá da base de dados, poderá permitem gerir automaticamente os índices de base de dados do SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9620-144">If you find that hello built-in rules improve hello performance of your database, you might let Azure SQL database automatically manage your indexes.</span></span>

<span data-ttu-id="b9620-145">Ações necessárias toocreate índices necessários bases de dados do Azure SQL Server podem consumir recursos e temporariamente afetam o desempenho da carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-145">Actions required toocreate necessary indexes in Azure SQL Databases might consume resources and temporally affect workload performance.</span></span> <span data-ttu-id="b9620-146">impacto de Olá toominimize da criação do índice no desempenho da carga de trabalho, SQL Database do Azure localiza a janela de tempo adequados Olá em nenhuma operação de gestão do índice.</span><span class="sxs-lookup"><span data-stu-id="b9620-146">toominimize hello impact of index creation on workload performance, Azure SQL Database finds hello appropriate time window for any index management operation.</span></span> <span data-ttu-id="b9620-147">Otimização de ação é adiada se precisar de base de dados de Olá recursos tooexecute a carga de trabalho e iniciada quando a base de dados de Olá tem espaço suficiente os recursos que podem ser utilizados para tarefas de manutenção de Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-147">Tuning action is postponed if hello database needs resources tooexecute your workload, and started when hello database has enough unused resources that can be used for hello maintenance task.</span></span> <span data-ttu-id="b9620-148">Uma funcionalidade importante na gestão automática de índices é uma verificação de ações de Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-148">One important feature in automatic index management is a verification of hello actions.</span></span> <span data-ttu-id="b9620-149">Quando a SQL Database do Azure cria ou ignora índice, um processo de monitorização analisa o desempenho da sua tooverify de carga de trabalho que a ação de Olá melhorada desempenho Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-149">When Azure SQL Database creates or drops index, a monitoring process analyzes performance of your workload tooverify that hello action improved hello performance.</span></span> <span data-ttu-id="b9620-150">Se não coloque melhoria significativa – ação Olá imediatamente for revertida.</span><span class="sxs-lookup"><span data-stu-id="b9620-150">If it didn’t bring significant improvement – hello action is immediately reverted.</span></span> <span data-ttu-id="b9620-151">Desta forma, SQL Database do Azure garante que ações automáticas não afetar negativamente o desempenho da sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="b9620-151">This way, Azure SQL Database ensures that automatic actions do not negatively impact performance of your workload.</span></span> <span data-ttu-id="b9620-152">Os índices criados pela otimização automática estão transparentes para a operação de manutenção de Olá no esquema subjacente Olá.</span><span class="sxs-lookup"><span data-stu-id="b9620-152">Indexes created by automatic tuning are transparent for hello maintenance operation on hello underlying schema.</span></span> <span data-ttu-id="b9620-153">Alterações do esquema, tais como remover ou mudar o nome de colunas não são bloqueadas por presença Olá índices criados automaticamente.</span><span class="sxs-lookup"><span data-stu-id="b9620-153">Schema changes such as dropping or renaming columns are not blocked by hello presence of automatically created indexes.</span></span> <span data-ttu-id="b9620-154">Os índices são criados automaticamente pelo SQL Database do Azure são imediatamente removidos quando relacionadas com a tabela ou de colunas é ignorado.</span><span class="sxs-lookup"><span data-stu-id="b9620-154">Indexes that are automatically created by Azure SQL Database are immediately dropped when related table or columns is dropped.</span></span>

## <a name="automatic-plan-choice-correction"></a><span data-ttu-id="b9620-155">Correção de escolha do plano automática</span><span class="sxs-lookup"><span data-stu-id="b9620-155">Automatic plan choice correction</span></span>

<span data-ttu-id="b9620-156">Correção automática plano é uma nova funcionalidade otimização automática adicionada no SQL Server 2017 CTP2.0 que identifica os planos SQL que misbehave.</span><span class="sxs-lookup"><span data-stu-id="b9620-156">Automatic plan correction is a new automatic tuning feature added in SQL Server 2017 CTP2.0 that identifies SQL plans that misbehave.</span></span> <span data-ttu-id="b9620-157">Esta opção de otimização automática está disponível em breve na SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="b9620-157">This automatic tuning option is coming soon on Azure SQL Database.</span></span> <span data-ttu-id="b9620-158">Encontrar mais informações em [otimização automática no SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span><span class="sxs-lookup"><span data-stu-id="b9620-158">Find more information at [Automatic tuning in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b9620-159">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="b9620-159">Next steps</span></span>

- <span data-ttu-id="b9620-160">tooenable automática otimização na SQL Database do Azure e permitem automática totalmente a funcionalidade de otimização gerir a sua carga de trabalho, consulte [ativar a otimização automática](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="b9620-160">tooenable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="b9620-161">toouse manual de otimização, pode rever [otimização recomendações no portal do Azure](sql-database-advisor-portal.md) e aplicar manualmente Olá aqueles que melhoram o desempenho das consultas.</span><span class="sxs-lookup"><span data-stu-id="b9620-161">toouse manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply hello ones that improve performance of your queries.</span></span>
