---
title: aaaMoving dados entre bases de dados de nuvem de escalamento horizontal | Microsoft Docs
description: "Explica como toomanipulate shards e mover dados através de um serviço alojado automática utilizando elástico da base de dados APIs."
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 629dee06e22609e9b61edf93ba5c38d997132d8c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="392a3-103">Mover dados entre bases de dados de nuvem aumentadas horizontalmente</span><span class="sxs-lookup"><span data-stu-id="392a3-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="392a3-104">Se for um Software como um programador de serviço e subitamente a sua aplicação sofre a pedido imenso, terá de crescimento de Olá tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="392a3-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need tooaccommodate hello growth.</span></span> <span data-ttu-id="392a3-105">Para adicionar mais bases de dados (shards).</span><span class="sxs-lookup"><span data-stu-id="392a3-105">So you add more databases (shards).</span></span> <span data-ttu-id="392a3-106">Como redistribuir Olá dados toohello novas bases de dados sem perturbar a integridade dos dados de Olá?</span><span class="sxs-lookup"><span data-stu-id="392a3-106">How do you redistribute hello data toohello new databases without disrupting hello data integrity?</span></span> <span data-ttu-id="392a3-107">Olá utilize **ferramenta de intercalação de divisão** dados toomove restrita toohello novas bases de dados de bases de dados.</span><span class="sxs-lookup"><span data-stu-id="392a3-107">Use hello **split-merge tool** toomove data from constrained databases toohello new databases.</span></span>  

<span data-ttu-id="392a3-108">ferramenta de intercalação de divisão de Olá é executada como um serviço web do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-108">hello split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="392a3-109">Um administrador ou programador utiliza Olá ferramenta toomove shardlets (dados a partir de um ID de partição horizontal) entre bases de dados diferentes (shards).</span><span class="sxs-lookup"><span data-stu-id="392a3-109">An administrator or developer uses hello tool toomove shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="392a3-110">ferramenta de Olá utiliza partições horizontais mapa gestão toomaintain Olá serviço metadados da base de dados e certifique-se consistente mapeamentos.</span><span class="sxs-lookup"><span data-stu-id="392a3-110">hello tool uses shard map management toomaintain hello service metadata database, and ensure consistent mappings.</span></span>

![Descrição geral][1]

## <a name="download"></a><span data-ttu-id="392a3-112">Transferência</span><span class="sxs-lookup"><span data-stu-id="392a3-112">Download</span></span>
[<span data-ttu-id="392a3-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="392a3-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="392a3-114">Documentação</span><span class="sxs-lookup"><span data-stu-id="392a3-114">Documentation</span></span>
1. [<span data-ttu-id="392a3-115">Tutorial de ferramenta de intercalação de divisão de base de dados elástica</span><span class="sxs-lookup"><span data-stu-id="392a3-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="392a3-116">Configuração de segurança de divisão de intercalação</span><span class="sxs-lookup"><span data-stu-id="392a3-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="392a3-117">Considerações de segurança de divisão de intercalação</span><span class="sxs-lookup"><span data-stu-id="392a3-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="392a3-118">Gestão de mapas de partições horizontais</span><span class="sxs-lookup"><span data-stu-id="392a3-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="392a3-119">Migrar tooscale-out de bases de dados existente</span><span class="sxs-lookup"><span data-stu-id="392a3-119">Migrate existing databases tooscale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="392a3-120">Ferramentas de base de dados elástica</span><span class="sxs-lookup"><span data-stu-id="392a3-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="392a3-121">Glossário de ferramentas de base de dados elástico</span><span class="sxs-lookup"><span data-stu-id="392a3-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-hello-split-merge-tool"></a><span data-ttu-id="392a3-122">Porquê utilizar a ferramenta de intercalação de divisão de Olá?</span><span class="sxs-lookup"><span data-stu-id="392a3-122">Why use hello split-merge tool?</span></span>
<span data-ttu-id="392a3-123">**Flexibilidade**</span><span class="sxs-lookup"><span data-stu-id="392a3-123">**Flexibility**</span></span>

<span data-ttu-id="392a3-124">As aplicações precisam de toostretch flexivelmente se para além dos limites de Olá de uma única base de dados de BD SQL do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-124">Applications need toostretch flexibly beyond hello limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="392a3-125">Utilize dados de toomove Olá ferramenta como toonew necessários bases de dados, mantendo o integridade.</span><span class="sxs-lookup"><span data-stu-id="392a3-125">Use hello tool toomove data as needed toonew databases while retaining integrity.</span></span>

<span data-ttu-id="392a3-126">**Dividir toogrow**</span><span class="sxs-lookup"><span data-stu-id="392a3-126">**Split toogrow**</span></span> 

<span data-ttu-id="392a3-127">Terá de tooincrease geral crescimento explosive de toohandle de capacidade.</span><span class="sxs-lookup"><span data-stu-id="392a3-127">You need tooincrease overall capacity toohandle explosive growth.</span></span> <span data-ttu-id="392a3-128">toodo, crie capacidade adicional por dados de Olá de fragmentação e distribui-lo em bases de dados de forma incremental mais até que as necessidades de capacidade são verdadeiras.</span><span class="sxs-lookup"><span data-stu-id="392a3-128">toodo so, create additional capacity by sharding hello data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="392a3-129">Este é um exemplo de prime Olá 'Dividir' funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="392a3-129">This is a prime example of hello ‘split’ feature.</span></span> 

<span data-ttu-id="392a3-130">**Intercalar tooshrink**</span><span class="sxs-lookup"><span data-stu-id="392a3-130">**Merge tooshrink**</span></span>

<span data-ttu-id="392a3-131">Capacidade tem de reduzir devido toohello natureza sazonais de uma empresa.</span><span class="sxs-lookup"><span data-stu-id="392a3-131">Capacity needs shrink due toohello seasonal nature of a business.</span></span> <span data-ttu-id="392a3-132">Olá ferramenta permite, reduzir verticalmente unidades de escala toofewer quando abrandar de negócio.</span><span class="sxs-lookup"><span data-stu-id="392a3-132">hello tool lets you scale down toofewer scale units when business slows.</span></span> <span data-ttu-id="392a3-133">funcionalidade de 'merge' Olá no Olá serviço de intercalação de divisão do dimensionamento elástico aborda este requisito.</span><span class="sxs-lookup"><span data-stu-id="392a3-133">hello ‘merge’ feature in hello Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="392a3-134">**Gerir hotspots movendo shardlets**</span><span class="sxs-lookup"><span data-stu-id="392a3-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="392a3-135">Com múltiplos inquilinos por base de dados, alocação de Olá de shardlets tooshards pode levar toocapacity constrangimentos no algumas shards.</span><span class="sxs-lookup"><span data-stu-id="392a3-135">With multiple tenants per database, hello allocation of shardlets tooshards can lead toocapacity bottlenecks on some shards.</span></span> <span data-ttu-id="392a3-136">É necessário voltar a atribuir shardlets ou movendo toonew shardlets ocupado ou menos shards sobreutilizados.</span><span class="sxs-lookup"><span data-stu-id="392a3-136">This requires re-allocating shardlets or moving busy shardlets toonew or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="392a3-137">Conceitos e as principais funcionalidades</span><span class="sxs-lookup"><span data-stu-id="392a3-137">Concepts & key features</span></span>
<span data-ttu-id="392a3-138">**Serviços alojados de cliente**</span><span class="sxs-lookup"><span data-stu-id="392a3-138">**Customer-hosted services**</span></span>

<span data-ttu-id="392a3-139">Olá divisão-intercalação é fornecida como um serviço alojado de cliente.</span><span class="sxs-lookup"><span data-stu-id="392a3-139">hello split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="392a3-140">Tem de implementar e alojar o serviço de Olá na sua subscrição do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-140">You must deploy and host hello service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="392a3-141">pacote de Olá, transferir a partir do NuGet contém um toocomplete de modelo de configuração com as informações de Olá para a sua implementação específica.</span><span class="sxs-lookup"><span data-stu-id="392a3-141">hello package you download from NuGet contains a configuration template toocomplete with hello information for your specific deployment.</span></span> <span data-ttu-id="392a3-142">Consulte Olá [tutorial de divisão de intercalação](sql-database-elastic-scale-configure-deploy-split-and-merge.md) para obter mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="392a3-142">See hello [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="392a3-143">Uma vez que o serviço de Olá é executado na sua subscrição do Azure, pode controlar e configurar a maioria dos aspetos de segurança do serviço de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-143">Since hello service runs in your Azure subscription, you can control and configure most security aspects of hello service.</span></span> <span data-ttu-id="392a3-144">modelo predefinido de Olá inclui Olá opções tooconfigure SSL, autenticação de cliente baseada em certificados, a encriptação de credenciais armazenadas, DoS guarding e restrições de IP.</span><span class="sxs-lookup"><span data-stu-id="392a3-144">hello default template includes hello options tooconfigure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="392a3-145">Pode encontrar mais informações sobre Olá aspetos de segurança no Olá seguinte documento [configuração de segurança de divisão de intercalação](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="392a3-145">You can find more information on hello security aspects in hello following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="392a3-146">predefinição de Olá implementado execuções de serviço com um trabalho e uma função da web.</span><span class="sxs-lookup"><span data-stu-id="392a3-146">hello default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="392a3-147">Cada utiliza o tamanho da A1 VM de Olá na Cloud Services do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-147">Each uses hello A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="392a3-148">Enquanto que não pode modificar estas definições quando implementar o pacote de Olá, pode alterá-los após uma implementação com êxito no Olá a executar o serviço em nuvem, (através do portal do Azure Olá).</span><span class="sxs-lookup"><span data-stu-id="392a3-148">While you cannot modify these settings when deploying hello package, you could change them after a successful deployment in hello running cloud service, (through hello Azure portal).</span></span> <span data-ttu-id="392a3-149">Tenha em atenção de que essa função de trabalho Olá não deve ser configurada para a mais do que uma única instância por motivos de técnicos.</span><span class="sxs-lookup"><span data-stu-id="392a3-149">Note that hello worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="392a3-150">**Integração de mapa de partições horizontais**</span><span class="sxs-lookup"><span data-stu-id="392a3-150">**Shard map integration**</span></span>

<span data-ttu-id="392a3-151">serviço de intercalação de divisão de Olá interage com o mapa de partições horizontais Olá da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-151">hello split-merge service interacts with hello shard map of hello application.</span></span> <span data-ttu-id="392a3-152">Quando utilizar toosplit do serviço de intercalação de divisão de Olá ou intervalos de intercalação ou toomove shardlets entre shards, o serviço de Olá mantém automaticamente Olá mapa de partições horizontais se toodate.</span><span class="sxs-lookup"><span data-stu-id="392a3-152">When using hello split-merge service toosplit or merge ranges or toomove shardlets between shards, hello service automatically keeps hello shard map up toodate.</span></span> <span data-ttu-id="392a3-153">toodo por isso, o serviço de Olá liga toohello partições horizontais mapa Gestor da base de dados da aplicação Olá e mantém intervalos e mapeamentos como progresso de divisão/intercalação/mover pedidos.</span><span class="sxs-lookup"><span data-stu-id="392a3-153">toodo so, hello service connects toohello shard map manager database of hello application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="392a3-154">Isto garante que mapa de partições horizontais Olá apresenta sempre uma vista atualizada quando são acontecimentos operações de intercalação de divisão.</span><span class="sxs-lookup"><span data-stu-id="392a3-154">This ensures that hello shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="392a3-155">As operações de movimento de intercalação e shardlet dividir, são implementadas por mover um lote de shardlets de partições horizontais partições horizontais Olá origem toohello destino.</span><span class="sxs-lookup"><span data-stu-id="392a3-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from hello source shard toohello target shard.</span></span> <span data-ttu-id="392a3-156">Durante a Olá shardlet movimento operação Olá shardlets requerente toohello lote atual está marcada como offline no mapa de partições horizontais Olá e está disponível para ligações de encaminhamento de dados dependentes utilizando Olá **OpenConnectionForKey** API.</span><span class="sxs-lookup"><span data-stu-id="392a3-156">During hello shardlet movement operation hello shardlets subject toohello current batch are marked as offline in hello shard map and are unavailable for data-dependent routing connections using hello **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="392a3-157">**Ligações de shardlet consistente**</span><span class="sxs-lookup"><span data-stu-id="392a3-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="392a3-158">Quando é iniciado o movimento de dados para um lote novo de shardlets, qualquer mapa de partições horizontais fornecido dados dependentes encaminhamento ligações toohello partições horizontais armazenar Olá shardlet são desativadas e subsequentes ligações do mapa de partições horizontais Olá toohello APIs estes shardlets estão bloqueadas enquanto movimento de dados de Olá está em curso no inconsistências tooavoid de ordem.</span><span class="sxs-lookup"><span data-stu-id="392a3-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections toohello shard storing hello shardlet are killed and subsequent connections from hello shard map APIs toohello these shardlets are blocked while hello data movement is in progress in order tooavoid inconsistencies.</span></span> <span data-ttu-id="392a3-159">Ligações tooother shardlets no Olá partições horizontais mesmo também irão obter desativados, mas serão concluída com êxito novamente imediatamente da repetição.</span><span class="sxs-lookup"><span data-stu-id="392a3-159">Connections tooother shardlets on hello same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="392a3-160">Depois de batch de Olá for movido, Olá shardlets estão marcados online novamente para partições horizontais de destino Olá e dados de origem Olá são removidos do Olá origem de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-160">Once hello batch is moved, hello shardlets are marked online again for hello target shard and hello source data is removed from hello source shard.</span></span> <span data-ttu-id="392a3-161">serviço de Olá atravessa estes passos para cada lote até que todos os shardlets terem sido movidos.</span><span class="sxs-lookup"><span data-stu-id="392a3-161">hello service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="392a3-162">Isto irá originar a operações de eliminação de ligação tooseveral decorrer Olá de concluir a operação intercalação/divisão/movimentação Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-162">This will lead tooseveral connection kill operations during hello course of hello complete split/merge/move operation.</span></span>  

<span data-ttu-id="392a3-163">**Gerir a disponibilidade de shardlet**</span><span class="sxs-lookup"><span data-stu-id="392a3-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="392a3-164">Limitar a ligação de Olá o cancelamento toohello lote atual de shardlets conforme mencionado acima restringe o âmbito de Olá do lote de tooone de indisponibilidade de shardlets cada vez.</span><span class="sxs-lookup"><span data-stu-id="392a3-164">Limiting hello connection killing toohello current batch of shardlets as discussed above restricts hello scope of unavailability tooone batch of shardlets at a time.</span></span> <span data-ttu-id="392a3-165">Isto é preferencial através de uma abordagem onde partições horizontais completa de Olá permanecerá offline para todos os respetivos shardlets Olá durante uma operação de intercalação ou divisão.</span><span class="sxs-lookup"><span data-stu-id="392a3-165">This is preferred over an approach where hello complete shard would remain offline for all its shardlets during hello course of a split or merge operation.</span></span> <span data-ttu-id="392a3-166">tamanho de Olá do batch, definido como número de Olá de shardlets distintos toomove cada vez, é um parâmetro de configuração.</span><span class="sxs-lookup"><span data-stu-id="392a3-166">hello size of a batch, defined as hello number of distinct shardlets toomove at a time, is a configuration parameter.</span></span> <span data-ttu-id="392a3-167">Pode ser definido para cada operação de divisão e intercalação consoante as necessidades de disponibilidade e o desempenho da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-167">It can be defined for each split and merge operation depending on hello application’s availability and performance needs.</span></span> <span data-ttu-id="392a3-168">Tenha em atenção que o intervalo de Olá que está a ser bloqueado no mapa de partições horizontais Olá pode ser superior ao tamanho de lote de Olá especificado.</span><span class="sxs-lookup"><span data-stu-id="392a3-168">Note that hello range that is being locked in hello shard map may be larger than hello batch size specified.</span></span> <span data-ttu-id="392a3-169">Isto acontece porque o serviço de Olá escolhe o tamanho do intervalo de Olá, de forma a que o número real de Olá dos valores de chave de fragmentação nos dados de Olá aproximadamente corresponde ao tamanho do lote Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-169">This is because hello service picks hello range size such that hello actual number of sharding key values in hello data approximately matches hello batch size.</span></span> <span data-ttu-id="392a3-170">Isto é importante tooremember em particular para chaves de fragmentação sparsely povoada.</span><span class="sxs-lookup"><span data-stu-id="392a3-170">This is important tooremember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="392a3-171">**Armazenamento de metadados**</span><span class="sxs-lookup"><span data-stu-id="392a3-171">**Metadata storage**</span></span>

<span data-ttu-id="392a3-172">serviço de intercalação de divisão de Olá utiliza um toomaintain de base de dados, o estado e tookeep registos durante o processamento do pedido.</span><span class="sxs-lookup"><span data-stu-id="392a3-172">hello split-merge service uses a database toomaintain its status and tookeep logs during request processing.</span></span> <span data-ttu-id="392a3-173">utilizador Olá cria esta base de dados na sua subscrição e fornece a cadeia de ligação de Olá-lo no ficheiro de configuração de Olá para implementação do serviço Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-173">hello user creates this database in their subscription and provides hello connection string for it in hello configuration file for hello service deployment.</span></span> <span data-ttu-id="392a3-174">Os administradores da organização do utilizador Olá também podem ligar toothis tooinvestigate e o progresso de pedido de tooreview de base de dados informações sobre potenciais falhas de detalhado.</span><span class="sxs-lookup"><span data-stu-id="392a3-174">Administrators from hello user’s organization can also connect toothis database tooreview request progress and tooinvestigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="392a3-175">**Deteção de fragmentação**</span><span class="sxs-lookup"><span data-stu-id="392a3-175">**Sharding-awareness**</span></span>

<span data-ttu-id="392a3-176">serviço de intercalação de divisão de Olá distingue entre (1) a tabelas, as tabelas de referência (2) e (3) normais tabelas.</span><span class="sxs-lookup"><span data-stu-id="392a3-176">hello split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="392a3-177">semântica de Olá de uma operação de intercalação/divisão/movimentação dependem do tipo Olá da tabela de Olá utilizado e é definida do seguinte modo:</span><span class="sxs-lookup"><span data-stu-id="392a3-177">hello semantics of a split/merge/move operation depend on hello type of hello table used and are defined as follows:</span></span> 

* <span data-ttu-id="392a3-178">**Tabelas em partição horizontal**: as operações de movimentação, intercalação e divisão movem shardlets de partições horizontais tootarget de origem.</span><span class="sxs-lookup"><span data-stu-id="392a3-178">**Sharded tables**: Split, merge, and move operations move shardlets from source tootarget shard.</span></span> <span data-ttu-id="392a3-179">Após a conclusão bem-sucedida da Olá pedir global, esses shardlets já não estão presentes na origem de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-179">After successful completion of hello overall request, those shardlets are no longer present on hello source.</span></span> <span data-ttu-id="392a3-180">Tenha em atenção que as tabelas de destino Olá têm tooexist em partição horizontal de destino Olá e não pode conter os dados no Olá destino intervalo tooprocessing anterior da operação de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-180">Note that hello target tables need tooexist on hello target shard and must not contain data in hello target range prior tooprocessing of hello operation.</span></span> 
* <span data-ttu-id="392a3-181">**As tabelas de referência**: as tabelas de referência, divisão Olá, intercalar e mover operações copiar dados de Olá de Olá origem toohello destino ID de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-181">**Reference tables**: For reference tables, hello split, merge and move operations copy hello data from hello source toohello target shard.</span></span> <span data-ttu-id="392a3-182">Tenha em atenção, no entanto, de que nenhuma alteração ocorre em partição horizontal do destino de Olá para uma determinada tabela se qualquer linha já se encontra presente nesta tabela no destino Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-182">Note, however, that no changes occur on hello target shard for a given table if any row is already present in this table on hello target.</span></span> <span data-ttu-id="392a3-183">a tabela de Olá tem toobe vazia para qualquer referência tabela cópia operação tooget processado.</span><span class="sxs-lookup"><span data-stu-id="392a3-183">hello table has toobe empty for any reference table copy operation tooget processed.</span></span>
* <span data-ttu-id="392a3-184">**Outras tabelas**: outras tabelas podem estar presentes no Olá origem ou destino de Olá de uma operação de divisão e intercalação.</span><span class="sxs-lookup"><span data-stu-id="392a3-184">**Other Tables**: Other tables can be present on either hello source or hello target of a split and merge operation.</span></span> <span data-ttu-id="392a3-185">serviço de intercalação de divisão de Olá disregards estas tabelas para o movimento de dados ou operações de cópia.</span><span class="sxs-lookup"><span data-stu-id="392a3-185">hello split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="392a3-186">Tenha em atenção, no entanto, que pode interferir com estas operações em caso de restrições.</span><span class="sxs-lookup"><span data-stu-id="392a3-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="392a3-187">informações de Olá numa referência vs tabelas em partição horizontal são fornecidas pelo Olá **SchemaInfo** APIs no mapa de partições horizontais Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-187">hello information on reference vs. sharded tables is provided by hello **SchemaInfo** APIs on hello shard map.</span></span> <span data-ttu-id="392a3-188">Olá seguinte o exemplo ilustra a utilização de Olá destas APIs numa determinada partição horizontal mapa manager objeto smm:</span><span class="sxs-lookup"><span data-stu-id="392a3-188">hello following example illustrates hello use of these APIs on a given shard map manager object smm:</span></span> 

    // Create hello schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="392a3-189">Olá tabelas 'region' e 'nation' estão definidas como tabelas de referência e serão copiados com operações de divisão/intercalação/mover.</span><span class="sxs-lookup"><span data-stu-id="392a3-189">hello tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="392a3-190">'Cliente' e 'ordens' por sua vez são definidas como tabelas em partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="392a3-191">C_CUSTKEY e O_CUSTKEY servem como chave de fragmentação Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-191">C_CUSTKEY and O_CUSTKEY serve as hello sharding key.</span></span> 

<span data-ttu-id="392a3-192">**Integridade referencial**</span><span class="sxs-lookup"><span data-stu-id="392a3-192">**Referential Integrity**</span></span>

<span data-ttu-id="392a3-193">o serviço de intercalação de divisão de Olá analisa as dependências entre tabelas e utiliza as operações de Olá toostage relações de chave primária de chave externa para mover as tabelas de referência e shardlets.</span><span class="sxs-lookup"><span data-stu-id="392a3-193">hello split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships toostage hello operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="392a3-194">Em geral, as tabelas de referência são copiadas primeiro por ordem de dependência, em seguida, shardlets são copiados por ordem das respetivas dependências em cada lote.</span><span class="sxs-lookup"><span data-stu-id="392a3-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="392a3-195">Isto é necessário para que as restrições de FK-PK em partição horizontal de destino Olá são cumpridas como dados novos Olá chega.</span><span class="sxs-lookup"><span data-stu-id="392a3-195">This is necessary so that FK-PK constraints on hello target shard are honored as hello new data arrives.</span></span> 

<span data-ttu-id="392a3-196">**Consistência de mapa de partições horizontais e Eventual conclusão**</span><span class="sxs-lookup"><span data-stu-id="392a3-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="392a3-197">Na presença de Olá de falhas, o serviço de intercalação de divisão de Olá retoma operações após qualquer falha e visa toocomplete qualquer nos pedidos de progresso.</span><span class="sxs-lookup"><span data-stu-id="392a3-197">In hello presence of failures, hello split-merge service resumes operations after any outage and aims toocomplete any in progress requests.</span></span> <span data-ttu-id="392a3-198">No entanto, poderão existir situações irrecuperáveis, por exemplo, quando Olá destino ID de partição horizontal for roubado ou comprometido para além de reparação.</span><span class="sxs-lookup"><span data-stu-id="392a3-198">However, there may be unrecoverable situations, e.g., when hello target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="392a3-199">Esses circunstâncias, alguns shardlets que foram deveria toobe movido podem continuar tooreside no Olá origem de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-199">Under those circumstances, some shardlets that were supposed toobe moved may continue tooreside on hello source shard.</span></span> <span data-ttu-id="392a3-200">serviço Olá garante que os mapeamentos de shardlet apenas são atualizados após Olá necessário dos dados copiados com êxito toohello destino.</span><span class="sxs-lookup"><span data-stu-id="392a3-200">hello service ensures that shardlet mappings are only updated after hello necessary data has been successfully copied toohello target.</span></span> <span data-ttu-id="392a3-201">Shardlets apenas são eliminados na origem de Olá depois de todos os seus dados tem sido copiados toohello destino e mapeamentos correspondente Olá foram atualizados com êxito.</span><span class="sxs-lookup"><span data-stu-id="392a3-201">Shardlets are only deleted on hello source once all their data has been copied toohello target and hello corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="392a3-202">operação de eliminação de Olá ocorre em segundo plano de Olá enquanto o intervalo de Olá já se encontra online em partição horizontal de destino Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-202">hello deletion operation happens in hello background while hello range is already online on hello target shard.</span></span> <span data-ttu-id="392a3-203">serviço de intercalação de divisão de Olá garante sempre correcção de mapeamentos de Olá armazenados no mapa de partições horizontais Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-203">hello split-merge service always ensures correctness of hello mappings stored in hello shard map.</span></span>

## <a name="hello-split-merge-user-interface"></a><span data-ttu-id="392a3-204">interface de utilizador de intercalação de divisão de Olá</span><span class="sxs-lookup"><span data-stu-id="392a3-204">hello split-merge user interface</span></span>
<span data-ttu-id="392a3-205">pacote de serviço de intercalação de divisão de Olá inclui uma função de trabalho e uma função da web.</span><span class="sxs-lookup"><span data-stu-id="392a3-205">hello split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="392a3-206">função da web Olá é utilizado toosubmit pedidos de divisão de intercalação de uma forma interativa.</span><span class="sxs-lookup"><span data-stu-id="392a3-206">hello web role is used toosubmit split-merge requests in an interactive way.</span></span> <span data-ttu-id="392a3-207">componentes principais do Olá de interface de utilizador Olá são os seguintes:</span><span class="sxs-lookup"><span data-stu-id="392a3-207">hello main components of hello user interface are as follows:</span></span>

* <span data-ttu-id="392a3-208">Tipo de operação: o tipo de operação de Olá é um botão de opção que controla o tipo de Olá da operação efetuada pelo serviço de Olá para este pedido.</span><span class="sxs-lookup"><span data-stu-id="392a3-208">Operation Type: hello operation type is a radio button that controls hello kind of operation performed by hello service for this request.</span></span> <span data-ttu-id="392a3-209">Pode escolher entre divisão Olá, intercalar e mover cenários.</span><span class="sxs-lookup"><span data-stu-id="392a3-209">You can choose between hello split, merge and move scenarios.</span></span> <span data-ttu-id="392a3-210">Também pode cancelar uma operação anteriormente submetida.</span><span class="sxs-lookup"><span data-stu-id="392a3-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="392a3-211">Pode utilizar a divisão, intercalar e mover pedidos para o intervalo de partição horizontal maps.</span><span class="sxs-lookup"><span data-stu-id="392a3-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="392a3-212">ID de partição horizontal lista mapeia apenas operações de movimentação de suporte.</span><span class="sxs-lookup"><span data-stu-id="392a3-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="392a3-213">Mapa de partições horizontais: Olá seguinte secção pedido parâmetros abrange informações sobre o mapa de partições horizontais Olá e base de dados de Olá que aloja o mapa de partições horizontais.</span><span class="sxs-lookup"><span data-stu-id="392a3-213">Shard Map: hello next section of request parameters cover information about hello shard map and hello database hosting your shard map.</span></span> <span data-ttu-id="392a3-214">Em particular, terá de nome de Olá tooprovide do servidor de base de dados do Azure SQL Olá e Olá shardmap de alojamento de base de dados, credenciais tooconnect toohello ID de partição horizontal mapear a base de dados e Olá, finalmente, o nome do mapa de partições horizontais Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-214">In particular, you need tooprovide hello name of hello Azure SQL Database server and database hosting hello shardmap, credentials tooconnect toohello shard map database, and finally hello name of hello shard map.</span></span> <span data-ttu-id="392a3-215">Atualmente, a operação de Olá só aceita um único conjunto de credenciais.</span><span class="sxs-lookup"><span data-stu-id="392a3-215">Currently, hello operation only accepts a single set of credentials.</span></span> <span data-ttu-id="392a3-216">Estas credenciais têm permissões suficientes toohave tooperform altera o mapa de partições horizontais toohello, bem como os dados do utilizador toohello no shards Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-216">These credentials need toohave sufficient permissions tooperform changes toohello shard map as well as toohello user data on hello shards.</span></span>
* <span data-ttu-id="392a3-217">Intervalo de origem (de divisão e intercalação): uma operação de divisão e intercalação processa um intervalo utilizando a respetiva chave baixa e alta.</span><span class="sxs-lookup"><span data-stu-id="392a3-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="392a3-218">toospecify uma operação com um unbounded elevado valor de chave, verificação Olá "chave superior é máximo" da caixa de verificação e deixe o campo de chave elevada Olá em branco.</span><span class="sxs-lookup"><span data-stu-id="392a3-218">toospecify an operation with an unbounded high key value, check hello “High key is max” check box and leave hello high key field empty.</span></span> <span data-ttu-id="392a3-219">Olá intervalo valores de chave que especificou não não corresponde a necessidade de tooprecisely um mapeamento e os respetivos limites no seu mapa de partições horizontais.</span><span class="sxs-lookup"><span data-stu-id="392a3-219">hello range key values that you specify do not need tooprecisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="392a3-220">Se não especificar quaisquer limites de intervalo em todos os serviço Olá irá inferir intervalo mais próximo Olá por si automaticamente.</span><span class="sxs-lookup"><span data-stu-id="392a3-220">If you do not specify any range boundaries at all hello service will infer hello closest range for you automatically.</span></span> <span data-ttu-id="392a3-221">Pode utilizar Olá GetMappings.ps1 PowerShell script tooretrieve Olá atuais mapeamentos de um mapa de partições horizontais indicado.</span><span class="sxs-lookup"><span data-stu-id="392a3-221">You can use hello GetMappings.ps1 PowerShell script tooretrieve hello current mappings in a given shard map.</span></span>
* <span data-ttu-id="392a3-222">Comportamento de origem de divisão (divisão): para operações de divisão, definir o intervalo de origem do Olá ponto toosplit Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-222">Split Source Behavior (split): For split operations, define hello point toosplit hello source range.</span></span> <span data-ttu-id="392a3-223">Para tal, fornecendo a chave de fragmentação olá onde pretende Olá divide toooccur.</span><span class="sxs-lookup"><span data-stu-id="392a3-223">You do this by providing hello sharding key where you want hello split toooccur.</span></span> <span data-ttu-id="392a3-224">Botão de opção utilizar Olá Especifique se pretende Olá inferior parte Olá toomove de intervalo (excluindo Olá dividir a chave) ou se pretende Olá parte superior toomove (incluindo Olá divisão chave).</span><span class="sxs-lookup"><span data-stu-id="392a3-224">Use hello radio button specify whether you want hello lower part of hello range (excluding hello split key) toomove, or whether you want hello upper part toomove (including hello split key).</span></span>
* <span data-ttu-id="392a3-225">Origem Shardlet (mover): operações são diferentes da divisão de mover ou operações de intercalação não necessitam de uma origem de Olá toodescribe intervalo.</span><span class="sxs-lookup"><span data-stu-id="392a3-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range toodescribe hello source.</span></span> <span data-ttu-id="392a3-226">Uma origem para mover simplesmente identificada pelo valor da chave de fragmentação Olá que planeia toomove.</span><span class="sxs-lookup"><span data-stu-id="392a3-226">A source for move is simply identified by hello sharding key value that you plan toomove.</span></span>
* <span data-ttu-id="392a3-227">Destino de partições horizontais (divisão): uma vez que forneceu informações de Olá na origem de Olá da operação de divisão, terá de toodefine onde pretende Olá dados toobe copiados tooby com servidor de BD SQL do Azure de Olá e nome de base de dados para o destino de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-227">Target Shard (split): Once you have provided hello information on hello source of your split operation, you need toodefine where you want hello data toobe copied tooby providing hello Azure SQL Db server and database name for hello target.</span></span>
* <span data-ttu-id="392a3-228">Intervalo de destino (intercalação): operações de intercalação mover shardlets tooan existente ID de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-228">Target Range (merge): Merge operations move shardlets tooan existing shard.</span></span> <span data-ttu-id="392a3-229">Identificar o ID de partição horizontal existente Olá fornecendo limites de intervalo de Olá do intervalo existente Olá que pretende que sejam toomerge com.</span><span class="sxs-lookup"><span data-stu-id="392a3-229">You identify hello existing shard by providing hello range boundaries of hello existing range that you want toomerge with.</span></span>
* <span data-ttu-id="392a3-230">Tamanho do lote: controlos de tamanho de lote Olá Olá diversas shardlets passará offline num momento durante o movimento de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-230">Batch Size: hello batch size controls hello number of shardlets that will go offline at a time during hello data movement.</span></span> <span data-ttu-id="392a3-231">Este é um valor inteiro em que pode utilizar valores mais pequenos quando são toolong confidenciais períodos de indisponibilidade para shardlets.</span><span class="sxs-lookup"><span data-stu-id="392a3-231">This is an integer value where you can use smaller values when you are sensitive toolong periods of downtime for shardlets.</span></span> <span data-ttu-id="392a3-232">Valores maiores aumentará Olá tempo de um determinado shardlet mas offline poderão melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="392a3-232">Larger values will increase hello time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="392a3-233">Id da operação (Cancelar): Se tiver uma operação em curso que não são necessários, pode cancelar a operação de Olá ao fornecer o respetivo ID de operação neste campo.</span><span class="sxs-lookup"><span data-stu-id="392a3-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel hello operation by providing its operation ID in this field.</span></span> <span data-ttu-id="392a3-234">Pode obter o ID de operação de Olá da tabela de estado de pedido de Olá (consulte a secção 8.1) ou da saída de Olá no browser olá onde submeter o pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-234">You can retrieve hello operation ID from hello request status table (see Section 8.1) or from hello output in hello web browser where you submitted hello request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="392a3-235">Requisitos e limitações</span><span class="sxs-lookup"><span data-stu-id="392a3-235">Requirements and Limitations</span></span>
<span data-ttu-id="392a3-236">implementação atual do Olá do serviço de intercalação de divisão de Olá é requerente toohello os seguintes requisitos e limitações:</span><span class="sxs-lookup"><span data-stu-id="392a3-236">hello current implementation of hello split-merge service is subject toohello following requirements and limitations:</span></span> 

* <span data-ttu-id="392a3-237">shards Olá necessário tooexist e estar registados no mapa de partições horizontais Olá antes de uma operação de intercalação de divisão nestes shards pode ser efetuada.</span><span class="sxs-lookup"><span data-stu-id="392a3-237">hello shards need tooexist and be registered in hello shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="392a3-238">serviço de Olá não criar tabelas ou outros objetos de base de dados automaticamente como parte das suas operações.</span><span class="sxs-lookup"><span data-stu-id="392a3-238">hello service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="392a3-239">Isto significa que Olá esquema para a todas as tabelas e tabelas de referência tem tooexist de operação de intercalação/divisão/movimentação do Olá destino partições horizontais tooany anterior.</span><span class="sxs-lookup"><span data-stu-id="392a3-239">This means that hello schema for all sharded tables and reference tables need tooexist on hello target shard prior tooany split/merge/move operation.</span></span> <span data-ttu-id="392a3-240">Tabelas em partição horizontal em particular são necessária toobe vazio no intervalo de olá onde shardlets novo são toobe adicionado por uma operação de intercalação/divisão/mover.</span><span class="sxs-lookup"><span data-stu-id="392a3-240">Sharded tables in particular are required toobe empty in hello range where new shardlets are toobe added by a split/merge/move operation.</span></span> <span data-ttu-id="392a3-241">Caso contrário, a operação de Olá falhará verificação de consistência inicial Olá Olá destino ID de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-241">Otherwise, hello operation will fail hello initial consistency check on hello target shard.</span></span> <span data-ttu-id="392a3-242">Tenha em atenção que os dados de referência só foi copiados esteja tabela de referência de Olá vazia e que não existem nenhum consistência ação garante também com operações de escrita simultâneos tooother regard em tabelas de referência de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-242">Also note that reference data is only copied if hello reference table is empty and that there are no consistency guarantees with regard tooother concurrent write operations on hello reference tables.</span></span> <span data-ttu-id="392a3-243">Recomendamos esta: ao executar operações de divisão/intercalação, não existem outras operações de escrita de efetuar alterações toohello as tabelas de referência.</span><span class="sxs-lookup"><span data-stu-id="392a3-243">We recommend this: when running split/merge operations, no other write operations make changes toohello reference tables.</span></span>
* <span data-ttu-id="392a3-244">serviço de Olá baseia-se na identidade de linha estabelecida através de um índice exclusivo ou uma chave que inclui o desempenho de chave tooimprove Olá fragmentação e fiabilidade para shardlets grandes.</span><span class="sxs-lookup"><span data-stu-id="392a3-244">hello service relies on row identity established by a unique index or key that includes hello sharding key tooimprove performance and reliability for large shardlets.</span></span> <span data-ttu-id="392a3-245">Isto permite que os dados do serviço toomove para Olá granularidade melhorar, mesmo que apenas Olá fragmentação valor da chave.</span><span class="sxs-lookup"><span data-stu-id="392a3-245">This allows hello service toomove data at an even finer granularity than just hello sharding key value.</span></span> <span data-ttu-id="392a3-246">Isto ajuda a quantidade máxima de Olá tooreduce de espaço de registo e de bloqueios que são necessários durante a operação de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-246">This helps tooreduce hello maximum amount of log space and locks that are required during hello operation.</span></span> <span data-ttu-id="392a3-247">Considere a criação de um índice exclusivo ou uma chave primária, incluindo a chave de fragmentação de Olá numa determinada tabela, se quiser toouse nessa tabela com pedidos de divisão/intercalação/mover.</span><span class="sxs-lookup"><span data-stu-id="392a3-247">Consider creating a unique index or a primary key including hello sharding key on a given table if you want toouse that table with split/merge/move requests.</span></span> <span data-ttu-id="392a3-248">Por motivos de desempenho, a chave de fragmentação Olá deve ser Olá à esquerda coluna chave Olá ou o índice de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-248">For performance reasons, hello sharding key should be hello leading column in hello key or hello index.</span></span>
* <span data-ttu-id="392a3-249">Decorrer Olá de processamento de pedidos, alguns dados shardlet podem existir no origem Olá e Olá destino ID de partição horizontal.</span><span class="sxs-lookup"><span data-stu-id="392a3-249">During hello course of request processing, some shardlet data may be present both on hello source and hello target shard.</span></span> <span data-ttu-id="392a3-250">Isto é necessário tooprotect contra falhas durante o movimento de shardlet Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-250">This is necessary tooprotect against failures during hello shardlet movement.</span></span> <span data-ttu-id="392a3-251">Olá integração da divisão de intercalação com o mapa de partições horizontais Olá assegura que as ligações através de Olá dados dependentes encaminhamento APIs utilizando Olá **OpenConnectionForKey** método no mapa de partições horizontais Olá não vir quaisquer Estados intermédios inconsistentes.</span><span class="sxs-lookup"><span data-stu-id="392a3-251">hello integration of split-merge with hello shard map ensures that connections through hello data dependent routing APIs using hello **OpenConnectionForKey** method on hello shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="392a3-252">No entanto, quando ligação toohello origem ou Olá destino shards sem utilizar Olá **OpenConnectionForKey** método, Estados intermédios inconsistentes poderão estar visíveis quando são acontecimentos divisão/intercalação/mover pedidos.</span><span class="sxs-lookup"><span data-stu-id="392a3-252">However, when connecting toohello source or hello target shards without using hello **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="392a3-253">Estas ligações podem mostrar resultados parciais ou duplicados, consoante a temporização de Olá ou a ligação de Olá subjacente do Olá partições horizontais.</span><span class="sxs-lookup"><span data-stu-id="392a3-253">These connections may show partial or duplicate results depending on hello timing or hello shard underlying hello connection.</span></span> <span data-ttu-id="392a3-254">Esta limitação atualmente inclui ligações de Olá graças à escala elástica várias-Shard-consultas.</span><span class="sxs-lookup"><span data-stu-id="392a3-254">This limitation currently includes hello connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="392a3-255">base de dados para o serviço de intercalação de divisão de Olá Olá metadados não tem de ser partilhada entre diferentes funções.</span><span class="sxs-lookup"><span data-stu-id="392a3-255">hello metadata database for hello split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="392a3-256">Por exemplo, uma função do serviço de intercalação de divisão de Olá em execução no modo de transição tem toopoint tooa diferentes de metadados da base de dados de função de produção Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-256">For example, a role of hello split-merge service running in staging needs toopoint tooa different metadata database than hello production role.</span></span>

## <a name="billing"></a><span data-ttu-id="392a3-257">Faturação</span><span class="sxs-lookup"><span data-stu-id="392a3-257">Billing</span></span>
<span data-ttu-id="392a3-258">serviço de intercalação de divisão de Olá é executado como um serviço em nuvem na sua subscrição do Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-258">hello split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="392a3-259">Por conseguinte para serviços em nuvem são aplicáveis encargos tooyour instância do serviço de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-259">Therefore charges for cloud services apply tooyour instance of hello service.</span></span> <span data-ttu-id="392a3-260">A menos que frequentemente efetuar operações de divisão/intercalação/mover, recomendamos a que eliminar o serviço de nuvem de divisão de intercalação.</span><span class="sxs-lookup"><span data-stu-id="392a3-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="392a3-261">Que guarda os custos para executar ou implementados instâncias de serviço de nuvem.</span><span class="sxs-lookup"><span data-stu-id="392a3-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="392a3-262">Pode voltar a implementar e iniciar a configuração prontamente passíveis de execução sempre que necessário tooperform dividir ou operações de intercalação.</span><span class="sxs-lookup"><span data-stu-id="392a3-262">You can re-deploy and start your readily runnable configuration whenever you need tooperform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="392a3-263">Monitorização</span><span class="sxs-lookup"><span data-stu-id="392a3-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="392a3-264">Tabelas de estado</span><span class="sxs-lookup"><span data-stu-id="392a3-264">Status tables</span></span>
<span data-ttu-id="392a3-265">Olá divisão intercalação serviço fornece Olá **RequestStatus** tabela na base de dados do Olá metadados arquivo para a monitorização de pedidos concluídos e contínuas.</span><span class="sxs-lookup"><span data-stu-id="392a3-265">hello split-merge Service provides hello **RequestStatus** table in hello metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="392a3-266">tabela de Olá apresenta uma lista de uma linha para cada pedido de divisão de intercalação que foi submetido toothis instância do serviço de intercalação de divisão de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-266">hello table lists a row for each split-merge request that has been submitted toothis instance of hello split-merge service.</span></span> <span data-ttu-id="392a3-267">Proporciona Olá seguintes informações para cada pedido:</span><span class="sxs-lookup"><span data-stu-id="392a3-267">It gives hello following information for each request:</span></span>

* <span data-ttu-id="392a3-268">**Timestamp**: Olá hora e data quando o pedido de Olá foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="392a3-268">**Timestamp**: hello time and date when hello request was started.</span></span>
* <span data-ttu-id="392a3-269">**OperationId**: um GUID que identifica exclusivamente o pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-269">**OperationId**: A GUID that uniquely identifies hello request.</span></span> <span data-ttu-id="392a3-270">Este pedido também pode ser utilizados toocancel Olá operação enquanto está ainda em curso.</span><span class="sxs-lookup"><span data-stu-id="392a3-270">This request can also be used toocancel hello operation while it is still ongoing.</span></span>
* <span data-ttu-id="392a3-271">**Estado**: Olá estado actual do pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-271">**Status**: hello current state of hello request.</span></span> <span data-ttu-id="392a3-272">Para pedidos em curso, também lista Olá fase atual no qual Olá é pedido.</span><span class="sxs-lookup"><span data-stu-id="392a3-272">For ongoing requests, it also lists hello current phase in which hello request is.</span></span>
* <span data-ttu-id="392a3-273">**CancelRequest**: um sinalizador que indica se Olá pedido foi cancelado.</span><span class="sxs-lookup"><span data-stu-id="392a3-273">**CancelRequest**: A flag that indicates whether hello request has been cancelled.</span></span>
* <span data-ttu-id="392a3-274">**Progresso**: uma estimativa de percentagem de conclusão da operação de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-274">**Progress**: A percentage estimate of completion for hello operation.</span></span> <span data-ttu-id="392a3-275">Um valor de 50 indica que a operação de Olá é aproximadamente 50% concluída.</span><span class="sxs-lookup"><span data-stu-id="392a3-275">A value of 50 indicates that hello operation is approximately 50% complete.</span></span>
* <span data-ttu-id="392a3-276">**Detalhes**: valor de um XML que fornece um relatório de progresso mais detalhado.</span><span class="sxs-lookup"><span data-stu-id="392a3-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="392a3-277">relatório de progresso Olá é atualizado periodicamente como conjuntos de linhas são copiados do tootarget de origem.</span><span class="sxs-lookup"><span data-stu-id="392a3-277">hello progress report is periodically updated as sets of rows are copied from source tootarget.</span></span> <span data-ttu-id="392a3-278">Em caso de falhas ou exceções, esta coluna também inclui informações mais detalhadas sobre falhas de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-278">In case of failures or exceptions, this column also includes more detailed information about hello failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="392a3-279">Diagnóstico do Azure</span><span class="sxs-lookup"><span data-stu-id="392a3-279">Azure Diagnostics</span></span>
<span data-ttu-id="392a3-280">serviço de intercalação de divisão de Olá utiliza baseado no Azure SDK 2.5 de monitorização e diagnóstico do diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-280">hello split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="392a3-281">Controlar a configuração de diagnósticos de Olá, conforme explicado aqui: [ativar diagnósticos no Cloud Services do Azure e máquinas virtuais](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="392a3-281">You control hello diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="392a3-282">Olá pacote de transferência inclui duas configurações de diagnóstico - uma para a função da web Olá e um Olá na função de trabalho.</span><span class="sxs-lookup"><span data-stu-id="392a3-282">hello download package includes two diagnostics configurations - one for hello web role and one for hello worker role.</span></span> <span data-ttu-id="392a3-283">Estas configurações de diagnóstico para o serviço de Olá siga orientação Olá da [Noções básicas do serviço de nuvem no Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="392a3-283">These diagnostics configurations for hello service follow hello guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="392a3-284">Inclui Olá definições toolog contadores de desempenho, os registos IIS, registos de eventos do Windows e registos de eventos da aplicação de divisão de intercalação.</span><span class="sxs-lookup"><span data-stu-id="392a3-284">It includes hello definitions toolog Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="392a3-285">Implementar o diagnóstico</span><span class="sxs-lookup"><span data-stu-id="392a3-285">Deploy Diagnostics</span></span>
<span data-ttu-id="392a3-286">tooenable monitorização e diagnóstico utilizando a configuração de diagnóstico de Olá para Olá trabalho funções da web e fornecidas pelo pacote NuGet de Olá, execute Olá os seguintes comandos com o Azure PowerShell:</span><span class="sxs-lookup"><span data-stu-id="392a3-286">tooenable monitoring and diagnostics using hello diagnostic configuration for hello web and worker roles provided by hello NuGet package, run hello following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="392a3-287">Pode encontrar mais informações sobre como tooconfigure e implementar as definições de diagnóstico aqui: [ativar diagnósticos no Cloud Services do Azure e máquinas virtuais](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="392a3-287">You can find more information on how tooconfigure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="392a3-288">Obter um diagnóstico</span><span class="sxs-lookup"><span data-stu-id="392a3-288">Retrieve diagnostics</span></span>
<span data-ttu-id="392a3-289">Pode aceder facilmente o diagnóstico de Olá Explorador de servidores do Visual Studio no Olá Azure parte da árvore Explorador de servidores de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-289">You can easily access your diagnostics from hello Visual Studio Server Explorer in hello Azure part of hello Server Explorer tree.</span></span> <span data-ttu-id="392a3-290">Abra uma instância do Visual Studio e, na barra de menus Olá clique vista e o Explorador de servidores.</span><span class="sxs-lookup"><span data-stu-id="392a3-290">Open a Visual Studio instance, and in hello menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="392a3-291">Clique em Olá ícone do Azure tooconnect tooyour subscrição do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-291">Click hello Azure icon tooconnect tooyour Azure subscription.</span></span> <span data-ttu-id="392a3-292">Em seguida, navegue tooAzure -> armazenamento -> <your storage account> -> tabelas-WADLogsTable >.</span><span class="sxs-lookup"><span data-stu-id="392a3-292">Then navigate tooAzure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="392a3-293">Para obter mais informações, consulte [navegação nos recursos de armazenamento com o Explorador de servidores](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="392a3-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="392a3-295">Olá WADLogsTable realçado na figura Olá acima contém Olá detalhado de eventos do registo de aplicação do serviço de divisão de intercalação Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-295">hello WADLogsTable highlighted in hello figure above contains hello detailed events from hello split-merge service’s application log.</span></span> <span data-ttu-id="392a3-296">Tenha em atenção que Olá predefinido a configuração de Olá transferido pacote é adaptado para uma implementação de produção.</span><span class="sxs-lookup"><span data-stu-id="392a3-296">Note that hello default configuration of hello downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="392a3-297">Por conseguinte o intervalo de Olá que contadores e os registos são solicitados de instâncias de serviço Olá é grande (5 minutos).</span><span class="sxs-lookup"><span data-stu-id="392a3-297">Therefore hello interval at which logs and counters are pulled from hello service instances is large (5 minutes).</span></span> <span data-ttu-id="392a3-298">Para desenvolvimento e teste, inferior Olá intervalo ao ajustar as definições de diagnóstico de Olá de web de Olá ou tooyour de função de trabalho Olá tem.</span><span class="sxs-lookup"><span data-stu-id="392a3-298">For test and development, lower hello interval by adjusting hello diagnostics settings of hello web or hello worker role tooyour needs.</span></span> <span data-ttu-id="392a3-299">Faça duplo clique na função de Olá no Olá Explorador de servidores do Visual Studio (consultar acima) e, em seguida, ajustar Olá período transferência na caixa de diálogo Olá para definições de configuração de diagnósticos de Olá:</span><span class="sxs-lookup"><span data-stu-id="392a3-299">Right-click on hello role in hello Visual Studio Server Explorer (see above) and then adjust hello Transfer Period in hello dialog for hello Diagnostics configuration settings:</span></span> 

![Configuração][3]

## <a name="performance"></a><span data-ttu-id="392a3-301">Desempenho</span><span class="sxs-lookup"><span data-stu-id="392a3-301">Performance</span></span>
<span data-ttu-id="392a3-302">Em geral, um melhor desempenho é toobe esperado de Olá superior, mais escalões de serviço performant na SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="392a3-302">In general, better performance is toobe expected from hello higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="392a3-303">Superiores alocações de e/s, CPU e memória para os escalões de serviço superiores Olá beneficiam cópia em massa de Olá e eliminar as operações que Olá utiliza o serviço de divisão de intercalação.</span><span class="sxs-lookup"><span data-stu-id="392a3-303">Higher IO, CPU and memory allocations for hello higher service tiers benefit hello bulk copy and delete operations that hello split-merge service uses.</span></span> <span data-ttu-id="392a3-304">Por esse motivo, aumente a camada de serviços de Olá apenas para essas bases de dados durante um período definido, limitado de tempo.</span><span class="sxs-lookup"><span data-stu-id="392a3-304">For that reason, increase hello service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="392a3-305">serviço de Olá também efetua consultas de validação como parte do respetivas operações normais.</span><span class="sxs-lookup"><span data-stu-id="392a3-305">hello service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="392a3-306">Estas consultas de validação verificar inesperada presença de dados no intervalo de destino Olá e certifique-se de que nenhuma operação de intercalação/divisão/movimentação inicia a partir de um estado consistente.</span><span class="sxs-lookup"><span data-stu-id="392a3-306">These validation queries check for unexpected presence of data in hello target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="392a3-307">Estas consultas de todos os funcionar através de intervalos de chaves de fragmentação definidos pelo âmbito de Olá Olá da operação do e tamanho de lote Olá fornecidas como parte da definição de pedido de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-307">These queries all work over sharding key ranges defined by hello scope of hello operation and hello batch size provided as part of hello request definition.</span></span> <span data-ttu-id="392a3-308">Estas consultas melhor efetuar quando é de um índice que tem a chave de fragmentação Olá Olá coluna à esquerda.</span><span class="sxs-lookup"><span data-stu-id="392a3-308">These queries perform best when an index is present that has hello sharding key as hello leading column.</span></span> 

<span data-ttu-id="392a3-309">Além disso, uma propriedade de exclusividade com a chave de fragmentação Olá como coluna à esquerda Olá permitirá Olá serviço toouse uma abordagem otimizada que limita o consumo de recursos em termos de memória e espaço de registo.</span><span class="sxs-lookup"><span data-stu-id="392a3-309">In addition, a uniqueness property with hello sharding key as hello leading column will allow hello service toouse an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="392a3-310">Esta propriedade de exclusividade é necessário toomove tamanhos de dados de grandes dimensões (normalmente acima 1GB).</span><span class="sxs-lookup"><span data-stu-id="392a3-310">This uniqueness property is required toomove large data sizes (typically above 1GB).</span></span> 

## <a name="how-tooupgrade"></a><span data-ttu-id="392a3-311">Como tooupgrade</span><span class="sxs-lookup"><span data-stu-id="392a3-311">How tooupgrade</span></span>
1. <span data-ttu-id="392a3-312">Siga os passos Olá [implementar um serviço de divisão de intercalação](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="392a3-312">Follow hello steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="392a3-313">Altere o ficheiro de configuração do serviço de nuvem para os implementação de divisão de intercalação tooreflect Olá novo os parâmetros de configuração.</span><span class="sxs-lookup"><span data-stu-id="392a3-313">Change your cloud service configuration file for your split-merge deployment tooreflect hello new configuration parameters.</span></span> <span data-ttu-id="392a3-314">Um novo parâmetro necessário é Olá obter informações sobre Olá certificado utilizado para encriptação.</span><span class="sxs-lookup"><span data-stu-id="392a3-314">A new required parameter is hello information about hello certificate used for encryption.</span></span> <span data-ttu-id="392a3-315">Uma forma fácil toodo trata toocompare Olá novo modelo ficheiro de configuração de transferência de Olá contra a sua configuração existente.</span><span class="sxs-lookup"><span data-stu-id="392a3-315">An easy way toodo this is toocompare hello new configuration template file from hello download against your existing configuration.</span></span> <span data-ttu-id="392a3-316">Certifique-se de que adicionar Olá as definições de "DataEncryptionPrimaryCertificateThumbprint" e "DataEncryptionPrimary" para o web Olá e função de trabalho de Olá.</span><span class="sxs-lookup"><span data-stu-id="392a3-316">Make sure you add hello settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both hello web and hello worker role.</span></span>
3. <span data-ttu-id="392a3-317">Antes de implementar Olá tooAzure de atualização, certifique-se de que todas as operações de intercalação divisão atualmente em execução tem concluído.</span><span class="sxs-lookup"><span data-stu-id="392a3-317">Before deploying hello update tooAzure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="392a3-318">Pode facilmente fazê-consultar Olá RequestStatus e PendingWorkflows tabelas na base de dados de metadados de intercalação de divisão de Olá para pedidos em curso.</span><span class="sxs-lookup"><span data-stu-id="392a3-318">You can easily do this by querying hello RequestStatus and PendingWorkflows tables in hello split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="392a3-319">Atualize a implementação de serviço de nuvem existente para a divisão de intercalação na sua subscrição do Azure com o novo pacote de Olá e o ficheiro de configuração de serviço atualizado.</span><span class="sxs-lookup"><span data-stu-id="392a3-319">Update your existing cloud service deployment for split-merge in your Azure subscription with hello new package and your updated service configuration file.</span></span>

<span data-ttu-id="392a3-320">Não é necessário tooprovision uma nova base de dados de metadados de intercalação de divisão tooupgrade.</span><span class="sxs-lookup"><span data-stu-id="392a3-320">You do not need tooprovision a new metadata database for split-merge tooupgrade.</span></span> <span data-ttu-id="392a3-321">nova versão de Olá automaticamente irá atualizar o metadados da base de dados toohello nova versão existente.</span><span class="sxs-lookup"><span data-stu-id="392a3-321">hello new version will automatically upgrade your existing metadata database toohello new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="392a3-322">Melhores práticas e resolução de problemas</span><span class="sxs-lookup"><span data-stu-id="392a3-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="392a3-323">Definir um inquilino de teste e exercer as operações de divisão/intercalação/mover mais importantes com inquilino de teste de Olá entre várias partições horizontais.</span><span class="sxs-lookup"><span data-stu-id="392a3-323">Define a test tenant and exercise your most important split/merge/move operations with hello test tenant across several shards.</span></span> <span data-ttu-id="392a3-324">Certifique-se de que todos os metadados está definido corretamente no seu mapa de partições horizontais e que as operações de Olá não violam restrições ou chaves externas.</span><span class="sxs-lookup"><span data-stu-id="392a3-324">Ensure that all metadata is defined correctly in your shard map and that hello operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="392a3-325">Tamanho de dados do inquilino de teste do Keep Olá acima Olá tamanho máximo de dados do seu inquilino maior tooensure não tiver com tamanho dos dados relacionados com problemas.</span><span class="sxs-lookup"><span data-stu-id="392a3-325">Keep hello test tenant data size above hello maximum data size of your largest tenant tooensure you are not encountering data size related issues.</span></span> <span data-ttu-id="392a3-326">Isto ajuda-o a avaliar um limite superior no tempo de Olá demora toomove um único inquilino à volta.</span><span class="sxs-lookup"><span data-stu-id="392a3-326">This helps you assess an upper bound on hello time it takes toomove a single tenant around.</span></span> 
* <span data-ttu-id="392a3-327">Certifique-se de que o esquema permite eliminações.</span><span class="sxs-lookup"><span data-stu-id="392a3-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="392a3-328">serviço de intercalação de divisão de Olá requer Olá capacidade tooremove dados Olá origem de partição horizontal depois dos dados de Olá foi copiado com êxito toohello destino.</span><span class="sxs-lookup"><span data-stu-id="392a3-328">hello split-merge service requires hello ability tooremove data from hello source shard once hello data has been successfully copied toohello target.</span></span> <span data-ttu-id="392a3-329">Por exemplo, **eliminar acionadores** pode impedir que o serviço de Olá eliminar dados de Olá na origem de Olá e pode provocar toofail de operações.</span><span class="sxs-lookup"><span data-stu-id="392a3-329">For example, **delete triggers** can prevent hello service from deleting hello data on hello source and may cause operations toofail.</span></span>
* <span data-ttu-id="392a3-330">chave de fragmentação Olá deve ser uma coluna à esquerda Olá na sua chave primária ou a definição de índice exclusivo.</span><span class="sxs-lookup"><span data-stu-id="392a3-330">hello sharding key should be hello leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="392a3-331">Garante que Olá obter o melhor desempenho para Olá consultas de validação de intercalação ou divisão e para Olá real movimento e a eliminação operações de dados que operam sempre em intervalos de chaves de fragmentação.</span><span class="sxs-lookup"><span data-stu-id="392a3-331">That ensures hello best performance for hello split or merge validation queries, and for hello actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="392a3-332">Colocar o serviço de divisão de intercalação no Centro de dados e a região de olá onde residem as bases de dados.</span><span class="sxs-lookup"><span data-stu-id="392a3-332">Collocate your split-merge service in hello region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

