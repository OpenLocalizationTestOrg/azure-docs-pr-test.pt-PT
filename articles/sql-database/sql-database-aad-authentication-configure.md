---
title: "autenticação no Azure Active Directory aaaConfigure - SQL | Microsoft Docs"
description: "Saiba como tooconnect tooSQL base de dados e o SQL Data Warehouse, utilizando a autenticação do Active Directory do Azure."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="f363e-103">Configurar e gerir a autenticação do Azure Active Directory com a base de dados SQL ou SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="f363e-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="f363e-104">Este artigo mostra como toocreate preencher do Azure AD e, em seguida, utilizar o Azure AD com o SQL Database do Azure e o SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="f363e-105">Para obter uma descrição geral, consulte [autenticação do Active Directory do Azure](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="f363e-106">Ligar tooSQL servidor em execução numa VM do Azure não é suportado com uma conta do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="f363e-107">Em alternativa, utilize um domínio de conta do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="f363e-108">Criar e preencher um Azure AD</span><span class="sxs-lookup"><span data-stu-id="f363e-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="f363e-109">Criar um Azure AD e preenchê-lo com os utilizadores e grupos.</span><span class="sxs-lookup"><span data-stu-id="f363e-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="f363e-110">Azure AD pode ser Olá domínio inicial do Azure AD um domínio gerido.</span><span class="sxs-lookup"><span data-stu-id="f363e-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="f363e-111">Azure AD também pode ser um local no Active Directory Domain Services que está federada com Olá do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="f363e-112">Para obter mais informações, consulte [integrar as identidades no local ao Azure Active Directory](../active-directory/active-directory-aadconnect.md), [adicionar o seus próprios tooAzure de nome de domínio AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure suporta agora a Federação com o Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [administrar o seu diretório do Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [gerir do Azure AD com o Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), e [identidade híbrida Portas e protocolos necessários](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="f363e-113">Opcional: Associar ou alterar Olá active directory está atualmente associado a sua subscrição do Azure</span><span class="sxs-lookup"><span data-stu-id="f363e-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="f363e-114">tooassociate a base de dados com o diretório de Olá do Azure AD para a sua organização, certifique-diretório Olá um diretório fidedigno para Olá subscrição do Azure alojamento Olá da base de dados.</span><span class="sxs-lookup"><span data-stu-id="f363e-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="f363e-115">Para obter mais informações, consulte [Como associar as subscrições do Azure ao Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="f363e-116">**Informações adicionais:** subscrição do Azure cada tem uma relação de confiança com uma instância do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="f363e-117">Isto significa que confia nesse diretório tooauthenticate utilizadores, serviços e dispositivos.</span><span class="sxs-lookup"><span data-stu-id="f363e-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="f363e-118">Várias subscrições podem confiar Olá mesmo diretório, mas uma subscrição confianças apenas um diretório.</span><span class="sxs-lookup"><span data-stu-id="f363e-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="f363e-119">Pode ver o diretório de confiança através da sua subscrição em Olá **definições** separador em [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="f363e-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="f363e-120">Esta relação de confiança de uma subscrição com um diretório é ao contrário da relação de Olá que tem uma subscrição com todos os outros recursos no Azure (sites, bases de dados e assim sucessivamente), que são mais como recursos subordinados de uma subscrição.</span><span class="sxs-lookup"><span data-stu-id="f363e-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="f363e-121">Se uma subscrição expirar, em seguida, aceder a outros recursos associados à subscrição Olá toothose também deixa de.</span><span class="sxs-lookup"><span data-stu-id="f363e-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="f363e-122">Mas Olá diretório permanece no Azure, pode associar outra subscrição esse diretório e os utilizadores do diretório de Olá toomanage de continuar.</span><span class="sxs-lookup"><span data-stu-id="f363e-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="f363e-123">Para obter mais informações sobre os recursos, consulte [compreender o acesso a recursos no Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="f363e-124">Olá procedimentos seguintes mostram como toochange Olá associados diretório para uma determinada subscrição.</span><span class="sxs-lookup"><span data-stu-id="f363e-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="f363e-125">Ligar tooyour [Portal clássico do Azure](https://manage.windowsazure.com/) através da utilização de um administrador de subscrição do Azure.</span><span class="sxs-lookup"><span data-stu-id="f363e-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="f363e-126">Na faixa do Olá esquerdo, selecione **definições**.</span><span class="sxs-lookup"><span data-stu-id="f363e-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="f363e-127">As subscrições são apresentadas no ecrã de definições de Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="f363e-128">Se assim pretender Olá a subscrição não aparecer, clique em **subscrições** pendente na parte superior do Olá, Olá **filtro por DIRETÓRIO** e selecione o diretório de Olá que contém as suas subscrições e, em seguida, clique em **Aplicar**.</span><span class="sxs-lookup"><span data-stu-id="f363e-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![Selecione a subscrição][4]
4. <span data-ttu-id="f363e-130">No Olá **definições** área, clique a sua subscrição e, em seguida, clique em **editar DIRETÓRIO** em Olá parte inferior da página Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![portal de definições do AD][5]
5. <span data-ttu-id="f363e-132">No Olá **editar DIRETÓRIO** caixa, selecione Olá do Azure Active Directory que estão associados com o SQL Server ou SQL Data Warehouse e, em seguida, clique em seta Olá seguinte.</span><span class="sxs-lookup"><span data-stu-id="f363e-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![Selecione de diretório de edição][6]
6. <span data-ttu-id="f363e-134">No Olá **confirmar** diretório caixa de diálogo mapeamento, confirme que "**todos os coadministradores serão removidos.**"</span><span class="sxs-lookup"><span data-stu-id="f363e-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![Editar diretório confirmar][7]
7. <span data-ttu-id="f363e-136">Clique em portal de Olá Olá verificação tooreload.</span><span class="sxs-lookup"><span data-stu-id="f363e-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="f363e-137">Quando alterar o diretório de Olá, os coadministradores de tooall acesso, utilizadores do Azure AD e grupos e os utilizadores dos recursos de diretório de segurança são removidos e já não ter acesso toothis subscrição ou os respetivos recursos.</span><span class="sxs-lookup"><span data-stu-id="f363e-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="f363e-138">Apenas, como um administrador de serviço, pode configurar o acesso para principais, com base no diretório Olá de novo.</span><span class="sxs-lookup"><span data-stu-id="f363e-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="f363e-139">Esta alteração poderá demorar uma quantidade substancial de recursos de tooall toopropagate de tempo.</span><span class="sxs-lookup"><span data-stu-id="f363e-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="f363e-140">Alterar o diretório de Olá, também alterações hello administrador do Azure AD para a base de dados SQL e do armazém de dados do SQL Server e não permitir acesso de base de dados para os utilizadores do Azure AD existentes.</span><span class="sxs-lookup"><span data-stu-id="f363e-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="f363e-141">admin Olá do Azure AD tem de ser reposição (conforme descrito abaixo) e Azure novo utilizadores do AD tem de ser criados.</span><span class="sxs-lookup"><span data-stu-id="f363e-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="f363e-142">Criar um administrador do Azure AD para o Azure SQL server</span><span class="sxs-lookup"><span data-stu-id="f363e-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="f363e-143">Cada servidor de SQL do Azure (que aloja uma base de dados SQL ou SQL Data Warehouse) começa com uma conta de administrador de servidor único que seja administrador de hello do servidor de SQL do Azure completo Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="f363e-144">Um administrador do SQL Server segundo tem de ser criado, que é uma conta do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="f363e-145">Este principal é criado como um utilizador de base de dados contida na base de dados mestra Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="f363e-146">Como os administradores, as contas de administrador do servidor Olá são membros de Olá **db_owner** função em todos os utilizadores da base de dados e introduza cada base de dados do utilizador como Olá **dbo** utilizador.</span><span class="sxs-lookup"><span data-stu-id="f363e-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="f363e-147">Para mais informações sobre as contas de administrador do servidor Olá, consulte [gerir bases de dados e inícios de sessão na base de dados do Azure SQL](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="f363e-148">Ao utilizar o Azure Active Directory com georreplicação, o administrador do Azure Active Directory Olá tem de ser configurado para Olá principal e servidores secundários Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="f363e-149">Se um servidor tiver um administrador do Azure Active Directory, em seguida, inícios de sessão do Azure Active Directory e os utilizadores recebem um erro de tooserver "Não é possível ligar".</span><span class="sxs-lookup"><span data-stu-id="f363e-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="f363e-150">Os utilizadores que não se baseiam numa conta do Azure AD (incluindo a conta de administrador de servidor de SQL do Azure Olá), não é possível criar utilizadores do Azure baseada no AD, porque não têm toovalidate permissões propostas utilizadores de base de dados com Olá do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="f363e-151">Aprovisionar um administrador do Azure Active Directory para o servidor de SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="f363e-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="f363e-152">Olá dois procedimentos a seguir mostra como tooprovision um administrador do Azure Active Directory para o servidor de SQL do Azure no portal do Azure de Olá e utilizando o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f363e-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="f363e-153">Portal do Azure</span><span class="sxs-lookup"><span data-stu-id="f363e-153">Azure portal</span></span>
1. <span data-ttu-id="f363e-154">No Olá [portal do Azure](https://portal.azure.com/), no Olá canto superior direito, clique em seu toodrop de ligação para baixo de uma lista de diretórios de Active Directory possíveis.</span><span class="sxs-lookup"><span data-stu-id="f363e-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="f363e-155">Escolha Olá corrigir do Active Directory como a predefinição de Olá do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="f363e-156">Este passo ligações Olá subscrição associação com o Active Directory com o servidor de SQL do Azure, certificando-se de que Olá mesma subscrição é utilizada para do Azure AD e o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f363e-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="f363e-157">(servidor de SQL do Azure Olá pode alojar o SQL Database do Azure ou o Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="f363e-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="f363e-158">![ad escolha][8]</span><span class="sxs-lookup"><span data-stu-id="f363e-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="f363e-159">No Olá deixado faixa selecione **servidores SQL**, selecione o **do SQL Server**e, em seguida, no Olá **do SQL Server** painel, clique em **administrador do Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="f363e-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="f363e-160">No Olá **administrador do Active Directory** painel, clique em **definir administrador**.</span><span class="sxs-lookup"><span data-stu-id="f363e-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="f363e-161">![Selecione active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="f363e-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="f363e-162">No Olá **Adicionar administrador** painel, procure um utilizador, o utilizador selecione Olá ou o grupo toobe um administrador e, em seguida, clique em **selecione**.</span><span class="sxs-lookup"><span data-stu-id="f363e-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="f363e-163">(o painel de administração do Active Directory Olá mostra todos os membros e grupos do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="f363e-164">Não não possível selecionar utilizadores ou grupos que estão a cinzento porque não são suportados como administradores do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="f363e-165">(Consulte Olá lista de administradores suportados no Olá **funcionalidades do Azure AD e limitações** secção [utilizar Azure Active Directory Authentication para a autenticação com base de dados SQL ou SQL Data Warehouse](sql-database-aad-authentication.md).) O controlo de acesso baseado em funções (RBAC) aplica-se apenas toohello portal e não é propagado tooSQL do servidor.</span><span class="sxs-lookup"><span data-stu-id="f363e-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="f363e-166">![Selecionar admin](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="f363e-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="f363e-167">Na parte superior de Olá de Olá **administrador do Active Directory** painel, clique em **guardar**.</span><span class="sxs-lookup"><span data-stu-id="f363e-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="f363e-168">![Guardar admin](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="f363e-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="f363e-169">processo de Olá da alteração administrador Olá pode demorar vários minutos.</span><span class="sxs-lookup"><span data-stu-id="f363e-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="f363e-170">Em seguida, o administrador novo Olá aparece no Olá **administrador do Active Directory** caixa.</span><span class="sxs-lookup"><span data-stu-id="f363e-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="f363e-171">Quando configurar o Azure AD de Olá, admin, Olá novo administrador nome (utilizador ou grupo) não pode já estar presente no Olá virtual principal da base de dados como um utilizador de autenticação do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f363e-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="f363e-172">Se estiver presente, a configuração de administração do Azure AD Olá falhará; a reverter a respetiva criação e que indica que este tipo de administrador (nome) já existe.</span><span class="sxs-lookup"><span data-stu-id="f363e-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="f363e-173">Uma vez que tal um utilizador de autenticação do SQL Server não faz parte de Olá do Azure AD, falha a qualquer servidor de toohello esforço tooconnect através da autenticação do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="f363e-174">toolater remover um administrador, na parte superior de Olá de Olá **administrador do Active Directory** painel, clique em **remover administrador**e, em seguida, clique em **guardar**.</span><span class="sxs-lookup"><span data-stu-id="f363e-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="f363e-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f363e-175">PowerShell</span></span>
<span data-ttu-id="f363e-176">toorun cmdlets do PowerShell, terá de toohave Azure PowerShell instalado e em execução.</span><span class="sxs-lookup"><span data-stu-id="f363e-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="f363e-177">Para obter informações detalhadas, consulte [como tooinstall e configurar o Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="f363e-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="f363e-178">tooprovision de administrador do Azure AD, execute Olá os seguintes comandos do PowerShell do Azure:</span><span class="sxs-lookup"><span data-stu-id="f363e-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="f363e-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="f363e-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="f363e-180">SELECT-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="f363e-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="f363e-181">Os cmdlets utilizados tooprovision e gerir o administrador do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="f363e-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="f363e-182">Nome do cmdlet</span><span class="sxs-lookup"><span data-stu-id="f363e-182">Cmdlet name</span></span> | <span data-ttu-id="f363e-183">Descrição</span><span class="sxs-lookup"><span data-stu-id="f363e-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="f363e-184">Conjunto AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="f363e-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="f363e-185">Aprovisiona um administrador do Azure Active Directory para o servidor SQL do Azure ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="f363e-186">(Tem de ser da subscrição atual Olá.)</span><span class="sxs-lookup"><span data-stu-id="f363e-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="f363e-187">Remover AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="f363e-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="f363e-188">Remove o administrador do Azure Active Directory para o servidor SQL do Azure ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="f363e-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="f363e-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="f363e-190">Devolve informações sobre um administrador do Azure Active Directory atualmente configurada para o servidor de SQL do Azure Olá ou o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="f363e-191">Utilizar o comando get-help toosee mais os detalhes de cada um destes comandos, por exemplo do PowerShell ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="f363e-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="f363e-192">Olá seguir Aprovisiona de script com o nome de um grupo de administrador do Azure AD **DBA_Group** (id de objeto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) para Olá **demo_server** servidor num grupo de recursos com o nome **23 de grupo** :</span><span class="sxs-lookup"><span data-stu-id="f363e-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="f363e-193">Olá **DisplayName** parâmetro de entrada aceita o nome a apresentar Olá do Azure AD ou Olá Nome Principal de utilizador.</span><span class="sxs-lookup"><span data-stu-id="f363e-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="f363e-194">Por exemplo, ``DisplayName="John Smith"`` e ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="f363e-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="f363e-195">A Olá apenas de grupos do Azure AD do Azure AD, nome a apresentar é suportado.</span><span class="sxs-lookup"><span data-stu-id="f363e-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="f363e-196">Olá comando do PowerShell do Azure ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` não impedem que aprovisionamento admins do Azure AD para os utilizadores não suportados.</span><span class="sxs-lookup"><span data-stu-id="f363e-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="f363e-197">Um utilizador não suportado pode ser aprovisionado, mas não é possível ligar a base de dados tooa.</span><span class="sxs-lookup"><span data-stu-id="f363e-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="f363e-198">Olá exemplo seguinte utiliza Olá opcional **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="f363e-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="f363e-199">Olá, Azure AD **ObjectID** é necessária quando hello **DisplayName** não é exclusivo.</span><span class="sxs-lookup"><span data-stu-id="f363e-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="f363e-200">Olá tooretrieve **ObjectID** e **DisplayName** valores, utilize a secção de Active Directory Olá do Portal clássico do Azure e ver Olá propriedades de um utilizador ou grupo.</span><span class="sxs-lookup"><span data-stu-id="f363e-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="f363e-201">Olá seguinte o exemplo devolve informações sobre a administração de Olá atual do Azure AD para o Azure SQL server:</span><span class="sxs-lookup"><span data-stu-id="f363e-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="f363e-202">Olá seguinte o exemplo remove um administrador do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="f363e-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="f363e-203">Também pode aprovisionar um administrador de diretório do Azure Active Directory utilizando Olá REST APIs.</span><span class="sxs-lookup"><span data-stu-id="f363e-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="f363e-204">Para obter mais informações, consulte [referência de API de REST de gestão de serviço e operações para operações de bases de dados SQL do Azure para bases de dados do Azure SQL](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="f363e-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="f363e-205">CLI</span><span class="sxs-lookup"><span data-stu-id="f363e-205">CLI</span></span>  
<span data-ttu-id="f363e-206">Também pode aprovisionar um administrador do Azure AD por Olá chamar comandos da CLI os seguintes:</span><span class="sxs-lookup"><span data-stu-id="f363e-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="f363e-207">Comando</span><span class="sxs-lookup"><span data-stu-id="f363e-207">Command</span></span> | <span data-ttu-id="f363e-208">Descrição</span><span class="sxs-lookup"><span data-stu-id="f363e-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="f363e-209">Criar ad-administrador do servidor de sql AZ</span><span class="sxs-lookup"><span data-stu-id="f363e-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="f363e-210">Aprovisiona um administrador do Azure Active Directory para o servidor SQL do Azure ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="f363e-211">(Tem de ser da subscrição atual Olá.)</span><span class="sxs-lookup"><span data-stu-id="f363e-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="f363e-212">eliminação de administração do ad do AZ sql server</span><span class="sxs-lookup"><span data-stu-id="f363e-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="f363e-213">Remove o administrador do Azure Active Directory para o servidor SQL do Azure ou do Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="f363e-214">lista de administração de ad AZ sql server</span><span class="sxs-lookup"><span data-stu-id="f363e-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="f363e-215">Devolve informações sobre um administrador do Azure Active Directory atualmente configurada para o servidor de SQL do Azure Olá ou o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="f363e-216">atualização de administração do ad do AZ SQL Server</span><span class="sxs-lookup"><span data-stu-id="f363e-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="f363e-217">Atualiza o administrador do Active Directory Olá para um servidor SQL do Azure ou o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="f363e-218">Para mais informações sobre comandos da CLI, consulte [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="f363e-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="f363e-219">Configurar os computadores cliente</span><span class="sxs-lookup"><span data-stu-id="f363e-219">Configure your client computers</span></span>
<span data-ttu-id="f363e-220">Em todas as máquinas de cliente, de que as aplicações ou utilizadores ligam tooAzure base de dados do SQL Server ou utilizar identidades do Azure AD, o Azure SQL Data Warehouse tem de instalar Olá seguinte software:</span><span class="sxs-lookup"><span data-stu-id="f363e-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="f363e-221">.NET framework 4.6 ou posterior a partir do [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="f363e-222">Biblioteca de autenticação do Azure Active Directory para o SQL Server (**ADALSQL. DLL**) está disponível em vários idiomas (tanto x86 como amd64) do Centro de transferências Olá em [Microsoft Active Directory Authentication Library para Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="f363e-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="f363e-223">Pode satisfazer estes requisitos por:</span><span class="sxs-lookup"><span data-stu-id="f363e-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="f363e-224">Instalar o [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) ou [SQL Server Data Tools para Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) Olá, cumpre os requisitos do .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="f363e-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="f363e-225">SSMS instala a versão de Olá x86 do **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="f363e-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="f363e-226">SSDT instala a versão de amd64 Olá do **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="f363e-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="f363e-227">Olá mais recente Visual Studio do [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) cumpre o requisito de Olá .NET Framework 4.6, mas não instalar a versão de amd64 necessário Olá do **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="f363e-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="f363e-228">Criar utilizadores de base de dados contida na sua base de dados mapeado tooAzure identidades do AD</span><span class="sxs-lookup"><span data-stu-id="f363e-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="f363e-229">Autenticação do Azure Active Directory requer toobe de utilizadores de base de dados criada como utilizadores de base de dados contida.</span><span class="sxs-lookup"><span data-stu-id="f363e-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="f363e-230">Um utilizador de base de dados contida, com base na identidade do Azure AD, é um utilizador de base de dados que não tem um início de sessão na base de dados mestra Olá e Olá, que identity de tooan maps no diretório do Azure AD que está associado a base de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="f363e-231">Olá identidade do Azure AD pode ser uma conta de utilizador individual ou um grupo.</span><span class="sxs-lookup"><span data-stu-id="f363e-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="f363e-232">Para obter mais informações sobre os utilizadores de base de dados contida, consulte [efetuar contidos utilizadores de base de dados da base de dados portátil](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="f363e-233">Não não possível criar utilizadores de base de dados (com exceção de Olá dos administradores) através do portal.</span><span class="sxs-lookup"><span data-stu-id="f363e-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="f363e-234">Funções do RBAC não são propagada tooSQL servidor, base de dados SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="f363e-235">Funções do RBAC do Azure são utilizadas para gerir recursos do Azure e não aplicam permissões toodatabase.</span><span class="sxs-lookup"><span data-stu-id="f363e-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="f363e-236">Por exemplo, Olá **contribuinte de servidor de SQL** função não concede acesso tooconnect toohello base de dados SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="f363e-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="f363e-237">deve ser concedida permissão de acesso de Olá diretamente na base de dados de Olá com instruções Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="f363e-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="f363e-238">toocreate do Azure baseada no AD contidos da base de dados utilizador (que não seja Olá administrador do servidor que é proprietário da base de dados de Olá), se ligar toohello base de dados com uma identidade do Azure AD, como um utilizador com, pelo menos, Olá **ALTER qualquer utilizador** permissão.</span><span class="sxs-lookup"><span data-stu-id="f363e-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="f363e-239">Em seguida, utilize Olá seguindo a sintaxe Transact-SQL:</span><span class="sxs-lookup"><span data-stu-id="f363e-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="f363e-240">*Azure_AD_principal_name* pode ser Olá nome principal de utilizador do Azure AD utilizador ou Olá nome a apresentar para um grupo do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="f363e-241">**Exemplos:** toocreate um utilizador de base de dados contida, que representa um Azure AD federados ou geridos utilizador de domínio:</span><span class="sxs-lookup"><span data-stu-id="f363e-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="f363e-242">toocreate um utilizador de base de dados contida, que representa um Azure AD ou federadas o grupo de domínio, forneça o nome a apresentar Olá de um grupo de segurança:</span><span class="sxs-lookup"><span data-stu-id="f363e-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="f363e-243">toocreate um utilizador de base de dados contida, que representa uma aplicação que estabelece ligação utilizar um token do Azure AD:</span><span class="sxs-lookup"><span data-stu-id="f363e-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="f363e-244">Diretamente não é possível criar um utilizador a partir de um Azure Active Directory que não sejam Olá do Azure Active Directory que está associado a sua subscrição do Azure.</span><span class="sxs-lookup"><span data-stu-id="f363e-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="f363e-245">No entanto, os membros de outros diretórios do Active Directory que são os utilizadores importados no Olá associados do Active Directory (conhecido como utilizadores externos) pode ser adicionado grupo do Active Directory tooan no inquilino Olá do Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="f363e-246">Ao criar um utilizador de base de dados contida para esse grupo do AD, hello os utilizadores de Olá externo do Active Directory poderem obter acesso tooSQL da base de dados.</span><span class="sxs-lookup"><span data-stu-id="f363e-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="f363e-247">Para obter mais informações sobre como criar contidos base de dados de utilizadores com base em identidades do Azure Active Directory, consulte [criar utilizador (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="f363e-248">Remover administrador Olá do Azure Active Directory para o Azure SQL server impede que qualquer utilizador de autenticação do Azure AD ligar toohello servidor.</span><span class="sxs-lookup"><span data-stu-id="f363e-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="f363e-249">Se necessário, inutilizável utilizadores do Azure AD podem ser removidos manualmente por um administrador da base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="f363e-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="f363e-250">Se receber um **ligação o tempo limite expirou**, poderá ser necessário tooset Olá `TransparentNetworkIPResolution` parâmetro toofalse de cadeia de ligação de Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="f363e-251">Para obter mais informações, consulte [problema de tempo limite de ligação com o .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="f363e-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="f363e-252">Quando criar um utilizador de base de dados, que o utilizador recebe Olá **CONNECT** permissão e pode ligar-se a base de dados toothat como membro do Olá **pública** função.</span><span class="sxs-lookup"><span data-stu-id="f363e-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="f363e-253">Olá inicialmente apenas permissões de utilizador toohello disponíveis são as permissões concedidas toohello **pública** função ou as permissões concedidas tooany grupos do Windows que são membros do.</span><span class="sxs-lookup"><span data-stu-id="f363e-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="f363e-254">Depois de aprovisionar um utilizador do Azure baseada no AD contidos da base de dados, pode conceder permissões adicionais do utilizador Olá, Olá igual a forma como pode conceder permissão tooany outro tipo de utilizador.</span><span class="sxs-lookup"><span data-stu-id="f363e-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="f363e-255">Normalmente, conceder permissões toodatabase funções e adicionar utilizadores tooroles.</span><span class="sxs-lookup"><span data-stu-id="f363e-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="f363e-256">Para obter mais informações, consulte [Noções básicas de permissão de motor de base de dados](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="f363e-257">Para obter mais informações sobre as funções de base de dados SQL especiais, consulte [gerir bases de dados e inícios de sessão na base de dados do Azure SQL](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="f363e-258">Um utilizador de domínio federado, que é importado para um domínio de gerir, tem de utilizar identidade de domínio Olá gerido.</span><span class="sxs-lookup"><span data-stu-id="f363e-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="f363e-259">Os utilizadores do AD do Azure são marcados nos metadados da base de dados de Olá com o tipo E (EXTERNAL_USER) e para os grupos com tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="f363e-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="f363e-260">Para obter mais informações, consulte [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="f363e-261">Ligar toohello de armazém de dados ou base de dados de utilizador com o SSMS ou o SSDT</span><span class="sxs-lookup"><span data-stu-id="f363e-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="f363e-262">administrador de Olá do Azure AD tooconfirm está corretamente configurado, ligar toohello **mestre** base de dados utilizando a conta de administrador Olá do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f363e-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="f363e-263">tooprovision do Azure AD-utilizador com base no contidos da base de dados (que não seja Olá administrador do servidor que é proprietário da base de dados de Olá) ligar toohello base de dados com uma identidade do Azure AD que tenha a base de dados do access toohello.</span><span class="sxs-lookup"><span data-stu-id="f363e-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f363e-264">Suporte para a autenticação do Azure Active Directory está disponível com [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) e [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) no Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="f363e-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="f363e-265">Olá versão de Agosto de 2016 do SSMS também inclui suporte para autenticação do Active Directory Universal, que permite aos administradores toorequire multi-factor Authentication com uma chamada telefónica, mensagem de texto, os smart cards pin ou a notificação da aplicação móvel.</span><span class="sxs-lookup"><span data-stu-id="f363e-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="f363e-266">Utilizar um tooconnect de identidade do Azure AD com o SSMS ou o SSDT</span><span class="sxs-lookup"><span data-stu-id="f363e-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="f363e-267">Olá procedimentos a seguir mostra como tooconnect tooa SQL da base de dados com uma identidade do Azure AD utilizando o SQL Server Management Studio ou ferramentas de base de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f363e-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="f363e-268">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="f363e-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="f363e-269">Utilize este método se tiver iniciado a sessão tooWindows com as suas credenciais do Azure Active Directory de um domínio federado.</span><span class="sxs-lookup"><span data-stu-id="f363e-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="f363e-270">Iniciar o Management Studio ou as ferramentas do Data e em Olá **ligar tooServer** (ou **ligar tooDatabase motor**) Olá caixa de diálogo **autenticação** caixa, selecione **Integradas no Active Directory -**.</span><span class="sxs-lookup"><span data-stu-id="f363e-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="f363e-271">Nenhuma palavra-passe é necessária ou pode ser introduzida porque as suas credenciais existentes serão apresentados para ligação Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![Selecionar a autenticação integrada do AD][11]
2. <span data-ttu-id="f363e-273">Clique em Olá **opções** botão e em Olá **propriedades de ligação** página, numa Olá **ligar toodatabase** caixa, o nome do tipo Olá da base de dados de utilizador de Olá pretende tooconnect a.</span><span class="sxs-lookup"><span data-stu-id="f363e-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="f363e-274">(Olá **ID de nome ou o inquilino de domínio do AD**"opção só é suportada para **Universal com uma ligação de MFA** opções, caso contrário, se estiver a cinzento.)</span><span class="sxs-lookup"><span data-stu-id="f363e-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Selecione o nome de base de dados de Olá][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="f363e-276">Autenticação de palavra-passe do Active Directory</span><span class="sxs-lookup"><span data-stu-id="f363e-276">Active Directory password authentication</span></span>

<span data-ttu-id="f363e-277">Utilize este método quando a ligação com um nome do principal do Azure AD utilizando Olá do Azure AD gerido domínio.</span><span class="sxs-lookup"><span data-stu-id="f363e-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="f363e-278">Também pode utilizá-lo para uma conta federada sem domínio toohello de acesso, por exemplo, quando trabalhar remotamente.</span><span class="sxs-lookup"><span data-stu-id="f363e-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="f363e-279">Utilize este método se tiver iniciado a sessão tooWindows utilizando as credenciais de um domínio que não está Federado com o Azure ou ao utilizar a autenticação do Azure AD através do Azure AD com base no Olá inicial ou Olá domínio cliente.</span><span class="sxs-lookup"><span data-stu-id="f363e-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="f363e-280">Iniciar o Management Studio ou as ferramentas do Data e em Olá **ligar tooServer** (ou **ligar tooDatabase motor**) Olá caixa de diálogo **autenticação** caixa, selecione **Do Active Directory - palavra-passe**.</span><span class="sxs-lookup"><span data-stu-id="f363e-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="f363e-281">No Olá **nome de utilizador** caixa, escreva o nome de utilizador do Azure Active Directory no formato de Olá  **username@domain.com** . Tem de ser uma conta de Olá do Azure Active Directory ou uma conta de domínio federar com Olá do Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="f363e-282">No Olá **palavra-passe** caixa, escreva a palavra-passe de utilizador para a conta do Azure Active Directory de Olá ou federadas conta de domínio.</span><span class="sxs-lookup"><span data-stu-id="f363e-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Selecionar a autenticação de palavra-passe do AD][12]
4. <span data-ttu-id="f363e-284">Clique em Olá **opções** botão e em Olá **propriedades de ligação** página, numa Olá **ligar toodatabase** caixa, o nome do tipo Olá da base de dados de utilizador de Olá pretende tooconnect a.</span><span class="sxs-lookup"><span data-stu-id="f363e-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="f363e-285">(Consulte gráfico Olá na opção anterior Olá).</span><span class="sxs-lookup"><span data-stu-id="f363e-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="f363e-286">Utilizar um tooconnect de identidade do Azure AD a partir de uma aplicação cliente</span><span class="sxs-lookup"><span data-stu-id="f363e-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="f363e-287">Olá procedimentos a seguir mostra como tooconnect tooa SQL da base de dados com uma identidade do Azure AD a partir de uma aplicação de cliente.</span><span class="sxs-lookup"><span data-stu-id="f363e-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="f363e-288">Autenticação integrada do Active Directory</span><span class="sxs-lookup"><span data-stu-id="f363e-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="f363e-289">toouse autenticação integrada do Windows, o Active Directory seu domínio tem de ser federada com o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f363e-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="f363e-290">A aplicação de cliente (ou um serviço) ligar toohello base de dados tem de executar num computador associado a um domínio sob credenciais de domínio de um utilizador.</span><span class="sxs-lookup"><span data-stu-id="f363e-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="f363e-291">utilizando a base de dados tooconnect tooa integrado autenticação e uma identidade do Azure AD, palavra-chave de autenticação de Olá na cadeia de ligação de base de dados de Olá tem de ser definida tooActive Directory Integrated.</span><span class="sxs-lookup"><span data-stu-id="f363e-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="f363e-292">Olá seguinte c# código de exemplo utiliza o ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="f363e-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="f363e-293">palavra-chave da cadeia de ligação de Olá ``Integrated Security=True`` não é suportada para a ligação tooAzure base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="f363e-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="f363e-294">Quando efetuar uma ligação de ODBC, será necessário tooremove espaços e definir too'ActiveDirectoryIntegrated de autenticação '.</span><span class="sxs-lookup"><span data-stu-id="f363e-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="f363e-295">Autenticação de palavra-passe do Active Directory</span><span class="sxs-lookup"><span data-stu-id="f363e-295">Active Directory password authentication</span></span>

<span data-ttu-id="f363e-296">utilizando a base de dados tooconnect tooa integrado autenticação e uma identidade do Azure AD, palavra-chave de autenticação de Olá tem de ser definida tooActive palavra-passe de diretório.</span><span class="sxs-lookup"><span data-stu-id="f363e-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="f363e-297">tem de conter o ID de utilizador/UID e palavras-chave de palavra-passe/PWD e valores de cadeia de ligação de Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="f363e-298">Olá seguinte c# código de exemplo utiliza o ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="f363e-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="f363e-299">Saiba mais sobre os métodos de autenticação do Azure AD com exemplos de código de demonstração de Olá disponíveis em [demonstração de GitHub de autenticação do Azure AD](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="f363e-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="f363e-300">Token do Azure AD</span><span class="sxs-lookup"><span data-stu-id="f363e-300">Azure AD token</span></span>
<span data-ttu-id="f363e-301">Este método de autenticação permite que os serviços de camada média tooconnect tooAzure base de dados do SQL Server ou o Azure SQL Data Warehouse por obter um token do Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="f363e-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="f363e-302">Permite cenários sofisticados, incluindo a autenticação baseada em certificado.</span><span class="sxs-lookup"><span data-stu-id="f363e-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="f363e-303">Tem de concluir quatro passos básicos toouse do Azure AD autenticação com token:</span><span class="sxs-lookup"><span data-stu-id="f363e-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="f363e-304">Registar a sua aplicação no Azure Active Directory e obter id de cliente Olá para o seu código.</span><span class="sxs-lookup"><span data-stu-id="f363e-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="f363e-305">Crie uma aplicação Olá da representing de utilizador da base de dados.</span><span class="sxs-lookup"><span data-stu-id="f363e-305">Create a database user representing hello application.</span></span> <span data-ttu-id="f363e-306">(Concluir anteriormente no passo 6).</span><span class="sxs-lookup"><span data-stu-id="f363e-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="f363e-307">Crie um certificado no execuções de computador do cliente Olá aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="f363e-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="f363e-308">Adicione certificado Olá como uma chave para a sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="f363e-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="f363e-309">Cadeia de ligação de exemplo:</span><span class="sxs-lookup"><span data-stu-id="f363e-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="f363e-310">Para obter mais informações, consulte [blogue de segurança do SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="f363e-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="f363e-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="f363e-311">sqlcmd</span></span>

<span data-ttu-id="f363e-312">Olá, seguindo as instruções, ligar a versão 13.1 sqlcmd, que está disponível no Olá [Centro de transferências](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="f363e-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="f363e-313">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="f363e-313">Next steps</span></span>
- <span data-ttu-id="f363e-314">Para obter uma descrição geral do acesso e controlo na Base de Dados SQL, veja [Acesso e controlo da Base de Dados SQL](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="f363e-315">Para obter uma descrição geral de inícios de sessão, utilizadores e funções de base de dados da Base de Dados SQL, veja [Inícios de sessão, utilizadores e funções de base de dados](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="f363e-316">Para obter mais informações sobre os principais de bases de dados, veja [Principals (Principais)](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="f363e-317">Para obter mais informações sobre as funções de base de dados, veja [Database roles (Funções de base de dados)](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="f363e-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="f363e-318">Para obter mais informações sobre as regras de firewall na Base de Dados SQL, veja [Regras de firewall da Base de Dados SQL](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="f363e-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

