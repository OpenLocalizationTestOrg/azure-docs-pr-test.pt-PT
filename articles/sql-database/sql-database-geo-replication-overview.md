---
title: "aaaFailover grupos e a georreplicação ativa - SQL Database do Azure | Microsoft Docs"
description: "Grupos de ativação de pós-falha automática com georreplicação ativa permite-lhe toosetup 4 réplicas de base de dados em qualquer um dos Olá centros de dados do Azure e a ativação pós-falha de autoomatically no evento Olá de indisponibilidade."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="6509a-103">Descrição geral: Grupos de ativação pós-falha e a georreplicação ativa</span><span class="sxs-lookup"><span data-stu-id="6509a-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="6509a-104">Replicação geográfica activa permite-lhe tooconfigure segurança toofour legível secundário bases de dados no Olá localizações (regiões) do Centro de dados idêntica ou diferentes.</span><span class="sxs-lookup"><span data-stu-id="6509a-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="6509a-105">Bases de dados secundárias estão disponíveis para consulta e de ativação pós-falha no caso de Olá de uma data center Olá ou falha incapacidade tooconnect toohello base de dados primária.</span><span class="sxs-lookup"><span data-stu-id="6509a-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="6509a-106">ativação pós-falha de Olá tem de ser iniciada manualmente por aplicação Olá do utilizador Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="6509a-107">Após a ativação pós-falha, a nova principal de Olá tem um ponto final de ligação diferente.</span><span class="sxs-lookup"><span data-stu-id="6509a-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="6509a-108">Replicação geográfica activa está disponível para todas as bases de dados em todos os escalões de serviço em todas as regiões.</span><span class="sxs-lookup"><span data-stu-id="6509a-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="6509a-109">Grupos de auto-ativação pós-falha de base de dados SQL do Azure (na pré-visualização) é um tooautomatically de funcionalidade foi concebida de base de dados SQL gerir relação de replicação geográfica, conectividade e ativação pós-falha à escala.</span><span class="sxs-lookup"><span data-stu-id="6509a-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="6509a-110">Com a mesma, Olá clientes ganhos Olá capacidade tooautomatically recuperar várias bases de dados relacionados na região secundária Olá após falhas regionais catastrófica ou outros eventos de não planeados resultam na perda total ou parcial de Olá do serviço de base de dados SQL disponibilidade na região primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="6509a-111">Além disso, podem utilizar Olá bases de dados secundária legível toooffload só de leitura cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6509a-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="6509a-112">Porque os grupos de ativação de pós-falha automática envolvem várias bases de dados que têm de ser configuradas no servidor primário Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="6509a-113">Servidores primários e secundários têm de estar no Olá mesma subscrição.</span><span class="sxs-lookup"><span data-stu-id="6509a-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="6509a-114">Grupos de auto-ativação pós-falha suportam a replicação de todas as bases de dados no Olá grupo tooonly um servidor secundário numa região diferente.</span><span class="sxs-lookup"><span data-stu-id="6509a-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="6509a-115">Replicação geográfica activa, sem grupos de ativação de pós-falha automática, permite que cópias de segurança secundárias too4 em qualquer região.</span><span class="sxs-lookup"><span data-stu-id="6509a-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="6509a-116">Se estiver a utilizar a georreplicação ativa e para qualquer motivo, que a base de dados primária falha ou simplesmente a necessidades toobe colocado offline, pode iniciar tooany de ativação pós-falha das bases de dados secundárias.</span><span class="sxs-lookup"><span data-stu-id="6509a-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="6509a-117">Quando a ativação pós-falha é tooone ativada das bases de dados secundária Olá, todas as outras bases de dados secundárias são automaticamente ligado toohello nova principal.</span><span class="sxs-lookup"><span data-stu-id="6509a-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="6509a-118">Se estiver a utilizar ativação de pós-falha automática e grupos de recuperação de base de dados (em pré-visualização) toomanage qualquer falha que afeta uma ou várias das bases de dados de Olá nos resultados de grupo Olá na ativação pós-falha automática.</span><span class="sxs-lookup"><span data-stu-id="6509a-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="6509a-119">Pode configurar uma política de ativação de pós-falha automática Olá que melhor se adeque às necessidades da sua aplicação, ou pode ativamente por não participar e utilizar a ativação manual.</span><span class="sxs-lookup"><span data-stu-id="6509a-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="6509a-120">Além disso, os grupos de auto-ativação pós-falha (em pré-visualização) fornecem leitura / escrita e pontos finais de escuta de só de leitura que permanecem inalterados durante as ativações pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="6509a-121">Se utilizar a ativação de ativação pós-falha manual ou automática, ativação pós-falha comutadores todas as bases de dados secundárias no Olá tooprimary de grupo.</span><span class="sxs-lookup"><span data-stu-id="6509a-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="6509a-122">Após a conclusão da ativação pós-falha de base de dados de Olá, registo DNS Olá é a região de toohello de pontos finais Olá do tooredirect automaticamente atualizado novo.</span><span class="sxs-lookup"><span data-stu-id="6509a-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="6509a-123">Pode gerir a replicação e ativação pós-falha de uma base de dados individual ou um conjunto de bases de dados num servidor ou num agrupamento elástico com georreplicação ativa.</span><span class="sxs-lookup"><span data-stu-id="6509a-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="6509a-124">Pode fazê-lo nesse utilizando Olá [portal do Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), ou Olá [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="6509a-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="6509a-125">Após a ativação pós-falha, certifique-se requisitos de autenticação de Olá para o servidor e base de dados estão configurados no principal Olá de novo.</span><span class="sxs-lookup"><span data-stu-id="6509a-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="6509a-126">Para obter mais informações, consulte [segurança da base de dados do SQL Server após a recuperação de desastre](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="6509a-127">Isto aplica-se ambos os grupos de replicação geográfica e ativação de pós-falha automática tooactive (em pré-visualização).</span><span class="sxs-lookup"><span data-stu-id="6509a-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="6509a-128">Olá tira partido de replicação geográfica activa [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) tecnologia do SQL Server tooasynchronously replicar as transações consolidadas no Olá base de dados primária tooa secundária da base de dados utiliza o isolamento de instantâneo consolidada leitura (RCSI).</span><span class="sxs-lookup"><span data-stu-id="6509a-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="6509a-129">Os grupos de auto-ativação pós-falha fornecem a semântica de grupo Olá por cima georreplicação ativa mas Olá é utilizado o mesmo mecanismo de replicação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="6509a-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="6509a-130">Enquanto em qualquer momento de determinado, base de dados secundária Olá poderão ser ligeiramente atrás de base de dados primária Olá, são garantidos dados secundário Olá toonever ter transações parciais.</span><span class="sxs-lookup"><span data-stu-id="6509a-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="6509a-131">Redundância por várias regiões permite que aplicações tooquickly recuperar de uma perda permanente de todo o datacenter ou partes de um datacenter causado por perante desastres naturais, erros humanos catastrófica ou atos maliciosos.</span><span class="sxs-lookup"><span data-stu-id="6509a-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="6509a-132">dados específicos do RPO Olá podem ser encontrados em [descrição geral da continuidade do negócio](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="6509a-133">Olá figura seguinte mostra um exemplo de replicação geográfica activa configurado com um site primário na região do Olá Norte Central-nos e secundários na região do Olá Sul Central-nos.</span><span class="sxs-lookup"><span data-stu-id="6509a-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![relação de replicação geográfica](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="6509a-135">Uma vez que as bases de dados secundária Olá são legíveis, podem ser utilizados toooffload só de leitura cargas de trabalho como tarefas de relatório.</span><span class="sxs-lookup"><span data-stu-id="6509a-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="6509a-136">Se estiver a utilizar replicação geográfica activa, é a base de dados secundária toocreate possíveis Olá no Olá mesma região com Olá primário, mas não aumenta resiliência toocatastrophic de falhas da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="6509a-137">Se estiver a utilizar grupos de auto-ativação pós-falha (em pré-visualização), a base de dados secundária é sempre criado numa região diferente.</span><span class="sxs-lookup"><span data-stu-id="6509a-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="6509a-138">Além disso, toodisaster recuperação replicação geográfica activa pode ser utilizada em Olá os seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="6509a-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="6509a-139">**Base de dados de migração**: pode utilizar a georreplicação ativa toomigrate bases de dados de um servidor tooanother online com o período de indisponibilidade mínimo.</span><span class="sxs-lookup"><span data-stu-id="6509a-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="6509a-140">**As atualizações de aplicações**: pode criar um secundário adicional como uma cópia de back-falhar durante as atualizações de aplicações.</span><span class="sxs-lookup"><span data-stu-id="6509a-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="6509a-141">continuidade do negócio real de tooachieve, adicionar redundância da base de dados entre centros de dados é apenas uma parte da solução de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="6509a-142">Recuperar uma aplicação (serviço) ponto-a-ponto após uma falha catastrófica necessita de recuperação de todos os componentes que constituem o serviço de Olá e quaisquer serviços dependentes.</span><span class="sxs-lookup"><span data-stu-id="6509a-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="6509a-143">Exemplos destes componentes incluem software de cliente Olá (por exemplo, um browser com uma JavaScript personalizado), extremidades web de front-, armazenamento e DNS.</span><span class="sxs-lookup"><span data-stu-id="6509a-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="6509a-144">É fundamental que todos os componentes são resiliente toohello mesmas falhas e ficam disponíveis dentro do Olá tempo objetivo de recuperação (RTO) da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="6509a-145">Por conseguinte, tem de tooidentify todos os serviços dependentes e compreender garantias de Olá e capacidades que fornecem.</span><span class="sxs-lookup"><span data-stu-id="6509a-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="6509a-146">Em seguida, tem de colocar tooensure passos adequados que as suas funções serviço durante Olá ativação pós-falha dos serviços de Olá do qual depende.</span><span class="sxs-lookup"><span data-stu-id="6509a-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="6509a-147">Para obter mais informações sobre soluções de conceção para recuperação após desastre, consulte [conceber soluções de nuvem de recuperação de desastre utilizando replicação geográfica activa](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="6509a-148">Capacidades de replicação geográfica activa</span><span class="sxs-lookup"><span data-stu-id="6509a-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="6509a-149">a funcionalidade de replicação geográfica activa Olá fornece Olá seguir as capacidades essenciais:</span><span class="sxs-lookup"><span data-stu-id="6509a-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="6509a-150">**Replicação assíncrona automática**: só pode criar uma base de dados secundária adicionando tooan base de dados existente.</span><span class="sxs-lookup"><span data-stu-id="6509a-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="6509a-151">Olá secundária pode ser criado em qualquer servidor da SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="6509a-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="6509a-152">Depois de criado, a base de dados secundária Olá é preenchido com dados de Olá copiados a partir da base de dados primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="6509a-153">Este processo é conhecido como o seeding.</span><span class="sxs-lookup"><span data-stu-id="6509a-153">This process is known as seeding.</span></span> <span data-ttu-id="6509a-154">Depois de base de dados secundária foi criado e pré-propagadas, atualizações toohello base de dados primária estiver no modo assíncrono replicadas da base de dados secundária toohello automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6509a-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="6509a-155">Replicação assíncrona significa que as transações são consolidadas na base de dados primária Olá antes de serem replicadas toohello base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="6509a-156">**Bases de dados secundárias legíveis**: uma aplicação pode aceder a uma base de dados secundária para operações só de leitura utilizando Olá mesmo ou de principais de segurança diferentes utilizado para aceder à base de dados primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="6509a-157">Olá bases de dados secundárias operam em isolamento do instantâneo modo tooensure a replicação das atualizações de Olá de Olá primário (reprodução de registo) não está atrasada por consultas executadas no Olá secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6509a-158">repetição de registo Olá está atrasada na base de dados secundária Olá se existem atualizações do esquema que está a receber de Olá principal que necessitam de um bloqueio de esquema de base de dados secundária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="6509a-159">**Várias bases de dados secundárias legíveis**: dois ou mais bases de dados secundárias aumentam a redundância e nível de proteção para a base de dados primária Olá e da aplicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="6509a-160">Se existirem várias bases de dados secundárias, a aplicação Olá permanece protegida mesmo se uma das bases de dados secundária Olá falhar.</span><span class="sxs-lookup"><span data-stu-id="6509a-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="6509a-161">Se existir apenas uma base de dados secundária, e este falhar, a aplicação Olá está exposta toohigher risco até que seja criada uma nova base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6509a-162">Se estiver a utilizar a georreplicação ativa toobuild uma aplicação distribuída global e tem de aceder a tooprovide só de leitura toodata em mais de 4 regiões, pode criar secundária de uma secundária (um processo conhecido como encadeamento).</span><span class="sxs-lookup"><span data-stu-id="6509a-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="6509a-163">Desta forma pode alcançar praticamente ilimitada escala de replicação de base de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="6509a-164">Além disso, encadeamento reduz a sobrecarga de Olá da replicação de base de dados primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="6509a-165">compromisso de Olá é Olá aumento desfasamento nas bases de dados secundária Olá mais folha.</span><span class="sxs-lookup"><span data-stu-id="6509a-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="6509a-166">.</span><span class="sxs-lookup"><span data-stu-id="6509a-166">.</span></span> 
   >

* <span data-ttu-id="6509a-167">**Suporte de bases de dados do conjunto elástico**: georreplicação ativa pode ser configurada para uma base de dados em qualquer conjunto elástico.</span><span class="sxs-lookup"><span data-stu-id="6509a-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="6509a-168">base de dados secundária Olá pode ser noutro conjunto elástico.</span><span class="sxs-lookup"><span data-stu-id="6509a-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="6509a-169">Para bases de dados normais, Olá secundário pode ser um conjunto elástico e vice-versa desde que estejam escalões de serviço Olá Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="6509a-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="6509a-170">**Nível de desempenho configurável da base de dados secundária Olá**: uma base de dados secundária pode ser criado com o nível de desempenho inferior ao hello primário.</span><span class="sxs-lookup"><span data-stu-id="6509a-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="6509a-171">Bases de dados primários e secundários são necessários toohave Olá mesma camada de serviço.</span><span class="sxs-lookup"><span data-stu-id="6509a-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="6509a-172">Esta opção não é recomendada para aplicações com a atividade de escrita da base de dados elevada porque o desfasamento aumento Olá aumenta o risco de Olá de perda de dados substanciais após uma ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="6509a-173">Além disso, depois de desempenho da aplicação Olá ativação pós-falha é afetado até Olá novo primário é atualizado tooa um desempenho superior ao nível.</span><span class="sxs-lookup"><span data-stu-id="6509a-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="6509a-174">Olá gráfico de percentagem de e/s de registo no portal do Azure fornece uma boa forma tooestimate Olá nível de desempenho mínima de Olá secundário que é necessário toosustain Olá replicação carga.</span><span class="sxs-lookup"><span data-stu-id="6509a-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="6509a-175">Por exemplo, se a base de dados primária é P6 (1000 DTU) e o respetivo registo de percentagem de e/s é 50% Olá secundário necessita toobe com pelo menos P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="6509a-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="6509a-176">Também pode obter utilizando dados de e/s de registo do Olá [resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) ou [sys.dm db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) vistas da base de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="6509a-177">Para obter mais informações sobre níveis de desempenho de base de dados SQL Olá, consulte [opções de base de dados SQL e desempenho](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="6509a-178">**Ativação pós-falha controlado de utilizador e a reativação pós-falha**: uma base de dados secundária explicitamente pode ser desativados toohello função primária em qualquer altura através da aplicação Olá ou utilizador de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="6509a-179">Durante uma Olá de indisponibilidade real deve ser utilizada a opção "", que imediatamente promove um site primário Olá toobe secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="6509a-180">Quando principal falha Olá recupera e está disponível novamente, sistema Olá automaticamente Olá marcas recuperado primário como uma secundária e colocá-lo com o novo site primário Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="6509a-181">Devido a natureza assíncrona toohello da replicação, uma pequena quantidade de dados pode ser perdida durante as ativações pós-falha não planeadas se falhar de um site primário antes de ser replicado Olá mais recente alterações toohello secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="6509a-182">Quando um site primário com várias bases de dados secundárias a ativação pós-falha, sistema Olá reconfigura automaticamente relações de replicação de Olá e Olá ligações restantes secundárias toohello recentemente promovido primário sem exigir qualquer intervenção do utilizador.</span><span class="sxs-lookup"><span data-stu-id="6509a-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="6509a-183">Após a falha de Olá que causou a ativação pós-falha de Olá é atenuada, poderá ser região primária do tooreturn desejável Olá aplicação toohello.</span><span class="sxs-lookup"><span data-stu-id="6509a-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="6509a-184">toodo, o comando de ativação pós-falha de Olá deve ser invocado com Olá "planeada" opção.</span><span class="sxs-lookup"><span data-stu-id="6509a-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="6509a-185">**Manter sincronizadas as credenciais e regras de firewall**: Recomendamos que utilize [regras de firewall de base de dados](sql-database-firewall-configure.md) para bases de dados de georreplicação para estas regras podem ser replicadas com tooensure de base de dados de Olá todas as bases de dados secundárias tem Olá mesmas regras de firewall como Olá primário.</span><span class="sxs-lookup"><span data-stu-id="6509a-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="6509a-186">Esta abordagem elimina a necessidade de Olá para os clientes toomanually configurar e manter as regras de firewall nos servidores que alojam as bases de dados de Olá, primária e secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="6509a-187">Da mesma forma, [continha os utilizadores de base de dados](sql-database-manage-logins.md) para dados de acesso garante bases de dados principais e secundários têm sempre Olá mesmo utilizador as credenciais, por isso durante uma ativação pós-falha, existe sem interrupções toomismatches devida com inícios de sessão e palavras-passe.</span><span class="sxs-lookup"><span data-stu-id="6509a-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="6509a-188">Com a adição de Olá de [do Azure Active Directory](../active-directory/active-directory-whatis.md), os clientes podem gerir o acesso tooboth primária e secundária bases de dados e eliminando Olá necessitam para a gestão de credenciais em bases de dados completamente.</span><span class="sxs-lookup"><span data-stu-id="6509a-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="6509a-189">Capacidades do grupo de ativação de pós-falha automática</span><span class="sxs-lookup"><span data-stu-id="6509a-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="6509a-190">Funcionalidade de grupos de ativação de pós-falha automática fornece uma abstração de elevado desempenho de replicação geográfica activa por suportar a replicação de nível de grupo e a ativação pós-falha automática.</span><span class="sxs-lookup"><span data-stu-id="6509a-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="6509a-191">Além disso, remove cadeia de ligação de SQL toochange Olá Olá necessária após a ativação pós-falha, fornecendo os parâmetros de serviço de escuta adicionais Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="6509a-192">**Grupo de ativação pós-falha**: um ou vários grupos de ativação pós-falha podem ser criados entre dois servidores em regiões diferentes (servidores primários e secundários).</span><span class="sxs-lookup"><span data-stu-id="6509a-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="6509a-193">Cada grupo pode incluir uma ou várias bases de dados que são recuperados como uma unidade no caso de todos os ou algumas bases de dados primárias ficam indisponíveis devido a indisponibilidade de tooan na região primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="6509a-194">**Servidor primário**: um servidor que aloja as bases de dados primária Olá no grupo de ativação pós-falha de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="6509a-195">**Servidor secundário**: um servidor que aloja as bases de dados secundária Olá no grupo de ativação pós-falha de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="6509a-196">servidor secundário Olá não pode estar em Olá mesma região que o servidor primário Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="6509a-197">**Adicionar grupo de toofailover de bases de dados**: pode colocar várias bases de dados dentro de um servidor ou dentro de um elástico agrupamento para Olá mesmo grupo de ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="6509a-198">Se adicionar um grupo de toohello de base de dados autónomo, este cria automaticamente uma base de dados secundária utilizando Olá mesmo nível de desempenho e de edição.</span><span class="sxs-lookup"><span data-stu-id="6509a-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="6509a-199">Se a base de dados primária Olá está num conjunto elástico, Olá secundário é criado automaticamente no agrupamento elástico Olá com Olá mesmo nome.</span><span class="sxs-lookup"><span data-stu-id="6509a-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="6509a-200">Se adicionar uma base de dados que já tem uma base de dados secundária no servidor secundário Olá, esse georreplicação é herdada por grupo de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6509a-201">Ao adicionar uma base de dados que já tem uma base de dados secundária no servidor que não faz parte do grupo de ativação pós-falha de Olá, é criado um novo secundário no servidor secundário Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="6509a-202">**Escuta de leitura e escrita do grupo de ativação pós-falha**: registo CNAME no DNS A formados como  **&lt;nome do grupo de ativação pós-falha&gt;. database.windows.net** que aponte toohello o URL do servidor primário atual.</span><span class="sxs-lookup"><span data-stu-id="6509a-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="6509a-203">Permite que Olá aplicações do SQL de leitura e escrita tootransparently restabelecer a ligação da base de dados primária toohello quando Olá primário alterado após a ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="6509a-204">**Escuta de só de leitura do grupo de ativação pós-falha**: registo CNAME no DNS A formados como  **&lt;nome do grupo de ativação pós-falha&gt;. secondary.database.windows.net** que aponte o URL do servidor secundário toohello.</span><span class="sxs-lookup"><span data-stu-id="6509a-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="6509a-205">Permite que Olá só de leitura aplicações SQL tootransparently ligar toohello base de dados secundária utilizando Olá especificado regras de balanceamento de carga.</span><span class="sxs-lookup"><span data-stu-id="6509a-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="6509a-206">Opcionalmente, pode especificar se pretende Olá só de leitura tráfego toobe automaticamente redirecionada servidor primário toohello quando o servidor secundário Olá não está disponível.</span><span class="sxs-lookup"><span data-stu-id="6509a-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="6509a-207">**Política de ativação pós-falha automática**: por predefinição, o grupo de ativação pós-falha de Olá está configurado com uma política de ativação pós-falha automática.</span><span class="sxs-lookup"><span data-stu-id="6509a-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="6509a-208">sistema Olá aciona uma ativação pós-falha, assim que for detetada Olá falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="6509a-209">Se pretender que o fluxo de trabalho do toocontrol Olá ativação pós-falha da aplicação Olá, pode desativar a ativação pós-falha automática.</span><span class="sxs-lookup"><span data-stu-id="6509a-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="6509a-210">**Ativação pós-falha manual**: podem iniciar manualmente ativação pós-falha em qualquer altura, independentemente da configuração de ativação pós-falha automática Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="6509a-211">Se a política de ativação pós-falha automática não é a ativação pós-falha manual configurada é toorecover necessários bases de dados no grupo de ativação pós-falha de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="6509a-212">Pode iniciar a ativação pós-falha forçada ou amigável (com a sincronização de dados completa).</span><span class="sxs-lookup"><span data-stu-id="6509a-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="6509a-213">Olá última pode ser região primária de toohello servidor ativo de Olá toorelocate utilizados.</span><span class="sxs-lookup"><span data-stu-id="6509a-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="6509a-214">Quando concluir a ativação pós-falha os registos DNS de Olá são servidor correto do toohello de conectividade tooensure automaticamente atualizadas.</span><span class="sxs-lookup"><span data-stu-id="6509a-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="6509a-215">**Período de tolerância a perdas de dados**: porque bases de dados de Olá, primária e secundária são sincronizados utilizando a ativação pós-falha de Olá replicação assíncrona pode resultar na perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="6509a-216">Pode personalizar tooreflect de política de ativação pós-falha automática Olá perda de toodata de tolerância da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="6509a-217">Ao configurar **GracePeriodWithDataLossHours**, pode controlar quanto sistema Olá aguarda antes de iniciar a ativação pós-falha de Olá, que é provavelmente tooresult perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="6509a-218">Quando o sistema Deteta que bases de dados de Olá num grupo de Olá ainda estão online (por exemplo, falha de Olá apenas afetado plane de controlo de serviço Olá), ativa imediatamente a ativação pós-falha de Olá com sincronização de dados completa (amigável ativação pós-falha), independentemente do valor de Olá definido pelo **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="6509a-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="6509a-219">Este comportamento garante que não há nenhuma perda de dados durante a recuperação de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="6509a-220">período de tolerância Olá entra em vigor apenas quando uma ativação pós-falha amigável não é possível.</span><span class="sxs-lookup"><span data-stu-id="6509a-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="6509a-221">Se a falha de Olá mitigada antes de expirar o período de tolerância Olá, ativação pós-falha de Olá não se encontra ativada.</span><span class="sxs-lookup"><span data-stu-id="6509a-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="6509a-222">**Vários grupos de ativação pós-falha**: pode configurar vários grupos de ativação pós-falha para Olá mesmo par de escala de Olá de toocontrol de servidores de ativações pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="6509a-223">Cada grupo de ativação pós-falha independentemente.</span><span class="sxs-lookup"><span data-stu-id="6509a-223">Each group fails over independently.</span></span> <span data-ttu-id="6509a-224">Se a aplicação multi-inquilino utiliza conjuntos elásticos, pode utilizar esta capacidade toomix primária e secundária bases de dados em cada agrupamento.</span><span class="sxs-lookup"><span data-stu-id="6509a-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="6509a-225">Desta forma que pode reduzir o Olá impacto de uma interrupção tooonly metade dos inquilinos Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="6509a-226">Melhores práticas de criação do serviço de elevada disponibilidade</span><span class="sxs-lookup"><span data-stu-id="6509a-226">Best practices of building highly available service</span></span>

<span data-ttu-id="6509a-227">toobuild um serviço de elevada disponibilidade que utiliza os clientes de Olá de base de dados SQL do Azure deve seguir estas diretrizes:</span><span class="sxs-lookup"><span data-stu-id="6509a-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="6509a-228">**Grupo de ativação pós-falha de utilização**: um ou vários grupos de ativação pós-falha podem ser criados entre dois servidores em regiões diferentes (servidores primários e secundários).</span><span class="sxs-lookup"><span data-stu-id="6509a-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="6509a-229">Cada grupo pode incluir uma ou várias bases de dados que são recuperados como uma unidade no caso de todos os ou algumas bases de dados primárias ficam indisponíveis devido a indisponibilidade de tooan na região primária Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="6509a-230">grupo de ativação pós-falha de Olá cria a base de dados de georreplicação secundária com Olá mesmo objetivo como Olá principal de serviço.</span><span class="sxs-lookup"><span data-stu-id="6509a-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="6509a-231">Se adicionar que um existente georreplicação relação toohello ativação pós-falha grupo disponibilizar se Olá georreplicação-secundário está configurado com Olá mesmo como objetivo de nível de serviço Olá primário.</span><span class="sxs-lookup"><span data-stu-id="6509a-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="6509a-232">**Utilizar o serviço de escuta de leitura e escrita para a carga de trabalho OLTP**: quando efetuar a utilização de operações do OLTP  **&lt;nome do grupo de ativação pós-falha&gt;. database.windows.net** como o URL do servidor Olá e ligações de Olá serão toohello automaticamente direcionados principal.</span><span class="sxs-lookup"><span data-stu-id="6509a-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="6509a-233">Este URL não será alterado após a ativação pós-falha de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="6509a-234">Ativação pós-falha de Olá nota implica a atualização de Olá registo DNS para que ligações de cliente Olá será redirecionado toohello novo primário apenas após o cliente de Olá DNS cache é atualizada.</span><span class="sxs-lookup"><span data-stu-id="6509a-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="6509a-235">**Utilize o serviço de escuta de só de leitura para a carga de trabalho só de leitura**: Se tiver uma logicamente isolada só de leitura carga de trabalho que está vinculada toocertain tolerância a falhas de dados, pode utilizar base de dados secundária Olá na aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="6509a-236">Para utilizam sessões só de leitura  **&lt;nome do grupo de ativação pós-falha&gt;. secondary.database.windows.net** como o URL do servidor Olá e ligação Olá serão automaticamente direcionado toohello secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="6509a-237">Também é recomendável que indicar na cadeia de ligação ler intenção utilizando **ApplicationIntent ReadOnly de =**.</span><span class="sxs-lookup"><span data-stu-id="6509a-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="6509a-238">**Preparado para degradação do desempenho**: decisão de ativação pós-falha do SQL Server é independente de rest de Olá da aplicação Olá ou outros serviços utilizado.</span><span class="sxs-lookup"><span data-stu-id="6509a-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="6509a-239">aplicação Olá pode ser "misto" com alguns componentes numa região e alguns noutra.</span><span class="sxs-lookup"><span data-stu-id="6509a-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="6509a-240">tooavoid degradação de Olá, certifique-se a implementação de aplicação redundante Olá na região de Olá DR e siga as diretrizes de Olá neste artigo.</span><span class="sxs-lookup"><span data-stu-id="6509a-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="6509a-241">Tenha em atenção Olá aplicação na região de DR Olá não tem toouse uma cadeia de ligação diferente.</span><span class="sxs-lookup"><span data-stu-id="6509a-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="6509a-242">**Preparar para a perda de dados**: se for detetada uma falha, o SQL Server aciona automaticamente ativação pós-falha de leitura e escrita se houver zero toohello de perda de dados melhor dos nossos dados de conhecimento.</span><span class="sxs-lookup"><span data-stu-id="6509a-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="6509a-243">Caso contrário, aguarda para período Olá especificado pelo **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="6509a-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="6509a-244">Se tiver especificado **GracePeriodWithDataLossHours**, estar preparadas para a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="6509a-245">Em geral, durante a falhas, Azure favorece a disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="6509a-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="6509a-246">Se não é possível suportar a perda de dados, certifique-se de que tooset **GracePeriodWithDataLossHours** tooa suficientemente grande número, por exemplo, 24 horas.</span><span class="sxs-lookup"><span data-stu-id="6509a-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="6509a-247">Atualizar ou desatualização de uma base de dados primária</span><span class="sxs-lookup"><span data-stu-id="6509a-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="6509a-248">Pode atualizar ou mudar um nível de desempenho diferentes de tooa de base de dados primária (Olá dentro da mesma camada de serviço) sem desligar quaisquer bases de dados secundárias.</span><span class="sxs-lookup"><span data-stu-id="6509a-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="6509a-249">Ao atualizar, recomendamos que primeiro a atualizar a base de dados secundária Olá e, em seguida, atualizar Olá principal.</span><span class="sxs-lookup"><span data-stu-id="6509a-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="6509a-250">Quando desatualização, inverter a ordem de Olá: mudar Olá principal primeiro e, em seguida, mudar Olá secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="6509a-251">Quando atualiza ou mudar o escalão de serviço diferente de tooa de base de dados de Olá esta recomendação é imposta.</span><span class="sxs-lookup"><span data-stu-id="6509a-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="6509a-252">Se tiver criado a base de dados secundária como parte da configuração do grupo de ativação pós-falha de Olá não é base de dados secundária toodowngrade recomendada Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="6509a-253">Este é tooensure a camada de dados tem suficiente capacidade tooprocess a carga de trabalho regular após a ativação pós-falha está ativada.</span><span class="sxs-lookup"><span data-stu-id="6509a-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="6509a-254">Impedir que Olá perda de dados críticos</span><span class="sxs-lookup"><span data-stu-id="6509a-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="6509a-255">Devido a latência elevada toohello das redes de área alargada, a cópia contínua utiliza um mecanismo de replicação assíncrona.</span><span class="sxs-lookup"><span data-stu-id="6509a-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="6509a-256">Replicação assíncrona faz com que alguma perda de dados obrigatório se ocorrer uma falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="6509a-257">No entanto, algumas aplicações podem exigir sem perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="6509a-258">tooprotect estas atualizações críticas, um programador de aplicações podem chamar Olá [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procedimento sistema imediatamente após a consolidar transação Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="6509a-259">Chamar **sp_wait_for_database_copy_sync** Olá blocos chamar thread até ser transações consolidadas de último Olá transmitidos toohello base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="6509a-260">No entanto, este não aguardar Olá transmitido transações toobe reproduzido e dedicada a Olá secundário.</span><span class="sxs-lookup"><span data-stu-id="6509a-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="6509a-261">**sp_wait_for_database_copy_sync** é confinada tooa a cópia contínua específico ligação.</span><span class="sxs-lookup"><span data-stu-id="6509a-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="6509a-262">Qualquer utilizador com Olá ligação direitos toohello principal da base de dados pode chamar este procedimento.</span><span class="sxs-lookup"><span data-stu-id="6509a-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="6509a-263">**sp_wait_for_database_copy_sync** irá impedir a perda de dados após a ativação pós-falha, mas será garante a sincronização completa para acesso de leitura.</span><span class="sxs-lookup"><span data-stu-id="6509a-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="6509a-264">Olá atraso causado por um **sp_wait_for_database_copy_sync** chamada de procedimento pode ser significativa e depende do tamanho Olá do registo de transações Olá momento Olá da chamada de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="6509a-265">Através de programação gerir grupos de ativação pós-falha e a georreplicação ativa</span><span class="sxs-lookup"><span data-stu-id="6509a-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="6509a-266">Tal como abordado anteriormente, grupos de auto-ativação pós-falha (em pré-visualização) e o Active Directory georreplicação também pode ser gerida através de programação com o Azure PowerShell e Olá REST API.</span><span class="sxs-lookup"><span data-stu-id="6509a-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="6509a-267">Olá tabelas a seguir descreve o conjunto de Olá de comandos disponíveis.</span><span class="sxs-lookup"><span data-stu-id="6509a-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="6509a-268">**API de Gestor de recursos do Azure e a segurança baseada em funções**: georreplicação ativa inclui um conjunto de APIs do Azure Resource Manager para a gestão, incluindo Olá [API de REST de base de dados do Azure SQL](https://docs.microsoft.com/rest/api/sql/) e [Azure Cmdlets do PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="6509a-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="6509a-269">Estas APIs requerem Olá utilização de grupos de recursos e suportam a segurança baseada em funções (RBAC).</span><span class="sxs-lookup"><span data-stu-id="6509a-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="6509a-270">Para obter mais informações sobre como tooimplement aceder às funções, consulte [controlo de acesso em funções do Azure](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="6509a-271">Muitas funcionalidades novas da replicação geográfica activa só são suportadas com [do Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) com base [API de REST do Azure SQL](https://msdn.microsoft.com/library/azure/mt163571.aspx) e [cmdlets do PowerShell de base de dados do SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="6509a-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="6509a-272">Olá [API de REST (clássica)](https://msdn.microsoft.com/library/azure/dn505719.aspx) e [cmdlets da SQL Database do Azure (clássica)](https://msdn.microsoft.com/library/azure/dn546723.aspx) são suportados para compatibilidade com versões anteriores ao utilizar Olá APIs do Azure Resource Manager são recomendadas.</span><span class="sxs-lookup"><span data-stu-id="6509a-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="6509a-273">Gerir SQL da base de dados ativação pós-falha utilizando com Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="6509a-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="6509a-274">Comando</span><span class="sxs-lookup"><span data-stu-id="6509a-274">Command</span></span> | <span data-ttu-id="6509a-275">Descrição</span><span class="sxs-lookup"><span data-stu-id="6509a-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6509a-276">Falha de ALTER DATABASE (base de dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6509a-277">Utilizar o servidor para adicionar SECUNDÁRIO no argumento toocreate uma base de dados secundária para uma base de dados existente e começa a replicação de dados</span><span class="sxs-lookup"><span data-stu-id="6509a-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="6509a-278">Falha de ALTER DATABASE (base de dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6509a-279">Utilize a ativação pós-falha ou FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch uma ativação pós-falha primário tooinitiate de toobe de base de dados secundária</span><span class="sxs-lookup"><span data-stu-id="6509a-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="6509a-280">Falha de ALTER DATABASE (base de dados SQL do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6509a-281">Utilize a remover o servidor SECUNDÁRIO do ON tooterminate uma replicação de dados entre uma base de dados SQL e Olá especificado base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="6509a-282">sys.geo_replication_links (SQL Database do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="6509a-283">Devolve informações sobre todas as ligações de replicação existente para cada base de dados no servidor lógico da SQL Database do Azure de Olá.</span><span class="sxs-lookup"><span data-stu-id="6509a-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="6509a-284">sys.dm_geo_replication_link_status (SQL Database do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="6509a-285">Obtém Olá a última replicação, desfasamento de último e outras informações sobre a ligação de replicação de Olá para uma determinada base de dados do SQL.</span><span class="sxs-lookup"><span data-stu-id="6509a-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="6509a-286">operation_status (SQL Database do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="6509a-287">Mostra o estado de Olá para todas as operações de base de dados, incluindo o estado de Olá Olá das ligações de replicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="6509a-288">sp_wait_for_database_copy_sync (SQL Database do Azure)</span><span class="sxs-lookup"><span data-stu-id="6509a-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="6509a-289">faz com que Olá aplicação toowait até que todas as transações consolidadas são replicadas e confirmadas pela Olá Active Directory base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="6509a-290">Gerir SQL da base de dados ativação pós-falha utilizando o com o PowerShell</span><span class="sxs-lookup"><span data-stu-id="6509a-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="6509a-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="6509a-291">Cmdlet</span></span> | <span data-ttu-id="6509a-292">Descrição</span><span class="sxs-lookup"><span data-stu-id="6509a-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6509a-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="6509a-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="6509a-294">Obtém um ou mais bases de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="6509a-295">Novo AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6509a-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="6509a-296">Cria uma base de dados secundária para uma base de dados existente e começa a replicação de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="6509a-297">Conjunto AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6509a-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="6509a-298">Comutadores uma ativação pós-falha primário tooinitiate de toobe de base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="6509a-299">Remover AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6509a-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="6509a-300">Termina a replicação de dados entre uma base de dados SQL e Olá especificado base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="6509a-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="6509a-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="6509a-302">Obtém as ligações de georreplicação Olá entre uma base de dados do SQL do Azure e um grupo de recursos ou do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6509a-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="6509a-303">Novo AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6509a-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="6509a-304">Este comando cria um grupo de ativação pós-falha e regista-o nos servidores primários e secundários</span><span class="sxs-lookup"><span data-stu-id="6509a-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="6509a-305">Remover AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6509a-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="6509a-306">Remove o grupo de ativação pós-falha de hello do servidor de Olá e elimina o grupo de Olá todas as bases de dados secundária incluídos</span><span class="sxs-lookup"><span data-stu-id="6509a-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="6509a-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6509a-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="6509a-308">Obtém a configuração do grupo de ativação pós-falha de Olá</span><span class="sxs-lookup"><span data-stu-id="6509a-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="6509a-309">Conjunto AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6509a-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="6509a-310">Modifica a configuração de Olá do grupo de ativação pós-falha de Olá</span><span class="sxs-lookup"><span data-stu-id="6509a-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="6509a-311">Comutador AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6509a-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="6509a-312">Ativação pós-falha de acionadores de servidor secundário de toohello grupo de ativação pós-falha Olá</span><span class="sxs-lookup"><span data-stu-id="6509a-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="6509a-313">Para scripts de exemplo, consulte [configurar e ativação pós-falha de uma base de dados utilizando a replicação geográfica activa](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [configurar e utilizar a georreplicação ativa agrupado da base de dados de ativação pós-falha](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), e [configurar e ativação pós-falha de um grupo de ativação pós-falha para uma base de dados (pré-visualização)] (scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="6509a-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="6509a-314">Gerir a ativação pós-falha de base de dados do SQL Server utilizando Olá REST API</span><span class="sxs-lookup"><span data-stu-id="6509a-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="6509a-315">API</span><span class="sxs-lookup"><span data-stu-id="6509a-315">API</span></span> | <span data-ttu-id="6509a-316">Descrição</span><span class="sxs-lookup"><span data-stu-id="6509a-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6509a-317">Criar ou atualização de base de dados (createMode = restaurar)</span><span class="sxs-lookup"><span data-stu-id="6509a-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="6509a-318">Cria, atualiza ou restaura um site primário ou de uma base de dados secundária.</span><span class="sxs-lookup"><span data-stu-id="6509a-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="6509a-319">Obter criar ou atualizar o estado da base de dados</span><span class="sxs-lookup"><span data-stu-id="6509a-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="6509a-320">Devolve o estado de Olá durante uma operação de criação.</span><span class="sxs-lookup"><span data-stu-id="6509a-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="6509a-321">Definir a base de dados secundária como principal (a ativação pós-falha planeada)</span><span class="sxs-lookup"><span data-stu-id="6509a-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="6509a-322">Conjuntos de base de dados réplica é primária por falhar ao longo da base de dados Olá atual réplica primária.</span><span class="sxs-lookup"><span data-stu-id="6509a-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="6509a-323">Definir a base de dados secundária como principal (ativação pós-falha não planeada)</span><span class="sxs-lookup"><span data-stu-id="6509a-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="6509a-324">Conjuntos de base de dados réplica é primária por falhar ao longo da base de dados Olá atual réplica primária.</span><span class="sxs-lookup"><span data-stu-id="6509a-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="6509a-325">Esta operação poderá resultar na perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="6509a-326">Obter ligação de replicação</span><span class="sxs-lookup"><span data-stu-id="6509a-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="6509a-327">Obtém uma ligação de replicação específicos para uma determinada base de dados do SQL numa parceria de georreplicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="6509a-328">Obtém informações Olá visíveis na vista de catálogo Olá sys.geo_replication_links.</span><span class="sxs-lookup"><span data-stu-id="6509a-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="6509a-329">Ligações de replicação - lista pela base de dados</span><span class="sxs-lookup"><span data-stu-id="6509a-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="6509a-330">Obtém todas as ligações de replicação para uma determinada base de dados do SQL numa parceria de georreplicação.</span><span class="sxs-lookup"><span data-stu-id="6509a-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="6509a-331">Obtém informações Olá visíveis na vista de catálogo Olá sys.geo_replication_links.</span><span class="sxs-lookup"><span data-stu-id="6509a-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="6509a-332">Eliminar ligação de replicação</span><span class="sxs-lookup"><span data-stu-id="6509a-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="6509a-333">Elimina uma ligação de replicação de base de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-333">Deletes a database replication link.</span></span> <span data-ttu-id="6509a-334">Não é possível efetuar durante a ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="6509a-335">[Criar ou grupo de ativação pós-falha de atualização] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="6509a-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="6509a-336">Cria ou atualiza um grupo de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="6509a-337">Eliminar grupo de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="6509a-338">Remove o grupo de ativação pós-falha de hello do servidor de Olá</span><span class="sxs-lookup"><span data-stu-id="6509a-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="6509a-339">Ativação pós-falha (planeada)</span><span class="sxs-lookup"><span data-stu-id="6509a-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="6509a-340">A ativação pós-falha do servidor de toothis do Olá atual servidor principal.</span><span class="sxs-lookup"><span data-stu-id="6509a-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="6509a-341">Permitir a ativação pós-falha forçada perda de dados</span><span class="sxs-lookup"><span data-stu-id="6509a-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="6509a-342">ails através do servidor de toothis do Olá atual servidor principal.</span><span class="sxs-lookup"><span data-stu-id="6509a-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="6509a-343">Esta operação poderá resultar na perda de dados.</span><span class="sxs-lookup"><span data-stu-id="6509a-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="6509a-344">Obter grupo de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="6509a-345">Obtém um grupo de ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="6509a-346">Liste os grupos de ativação pós-falha pelo servidor</span><span class="sxs-lookup"><span data-stu-id="6509a-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="6509a-347">Apresenta uma lista de grupos de ativação pós-falha de Olá num servidor.</span><span class="sxs-lookup"><span data-stu-id="6509a-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="6509a-348">Grupo de atualização de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="6509a-349">Atualiza um grupo de ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="6509a-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="6509a-350">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="6509a-350">Next steps</span></span>
* <span data-ttu-id="6509a-351">Para scripts de exemplo, consulte:</span><span class="sxs-lookup"><span data-stu-id="6509a-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="6509a-352">Configurar e utilizar a georreplicação ativa única da base de dados de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="6509a-353">Configurar e utilizar a georreplicação ativa agrupado da base de dados de ativação pós-falha</span><span class="sxs-lookup"><span data-stu-id="6509a-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="6509a-354">Configurar e ativação pós-falha a ativação pós-falha de grupo para uma base de dados (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6509a-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="6509a-355">Para cenários e uma descrição geral de continuidade de negócio, consulte [descrição geral da continuidade de negócio](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="6509a-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="6509a-356">toolearn sobre cópias de segurança automatizada de SQL Database do Azure, consulte [cópias de segurança automatizadas de base de dados SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="6509a-357">toolearn sobre a utilização de cópias de segurança automatizadas para recuperação, consulte [restaurar uma base de dados de cópias de segurança de iniciou o serviço Olá](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="6509a-358">toolearn sobre requisitos de autenticação para um novo servidor primário e a base de dados, consulte [segurança da base de dados do SQL Server após a recuperação de desastre](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="6509a-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

