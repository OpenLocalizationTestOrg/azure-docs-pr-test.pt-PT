---
title: "esquema de base de dados do Azure SQL aaaManage numa aplicação multi-inquilino | Microsoft Docs"
description: "Gerir o Esquema para vários inquilinos numa aplicação multi-inquilino que utiliza a Base de Dados SQL do Azure"
keywords: tutorial de base de dados sql
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="0f48d-104">Gerir o esquema para vários inquilinos no Olá aplicação Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="0f48d-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="0f48d-105">Olá [primeiro tutorial de Wingtip SaaS](sql-database-saas-tutorial.md) mostra como aplicação Olá pode aprovisionar uma base de dados do inquilino e registá-lo no catálogo de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="0f48d-106">Como qualquer aplicação Olá aplicação Wingtip SaaS será evoluir ao longo do tempo e, por vezes irá necessitar de base de dados de toohello de alterações.</span><span class="sxs-lookup"><span data-stu-id="0f48d-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="0f48d-107">As alterações podem incluir o esquema nova ou alterada, os dados de referência de novas ou alteradas e desempenho de aplicações ideal de tooensure de tarefas de manutenção de rotina da base de dados.</span><span class="sxs-lookup"><span data-stu-id="0f48d-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="0f48d-108">Com uma aplicação SaaS, estas alterações necessitam de toobe implementado de forma coordenada através de uma frota potencialmente grande de bases de dados do inquilino.</span><span class="sxs-lookup"><span data-stu-id="0f48d-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="0f48d-109">Para estes toobe de alterações de inquilino no futuro bases de dados, que precisam toobe incorporada no processo de aprovisionamento de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="0f48d-110">Este tutorial explicar dois cenários - implementação de atualizações de dados de referência para todos os inquilinos, e retuning um índice numa Olá tabela que contém dados de referência de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="0f48d-111">Olá [as tarefas elásticas](sql-database-elastic-jobs-overview.md) funcionalidade é utilizada tooexecute estas operações em todos os inquilinos e Olá *dourada* base de dados do inquilino que é utilizado como um modelo para novas bases de dados.</span><span class="sxs-lookup"><span data-stu-id="0f48d-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="0f48d-112">Neste tutorial, ficará a saber como:</span><span class="sxs-lookup"><span data-stu-id="0f48d-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="0f48d-113">Criar uma conta de tarefa</span><span class="sxs-lookup"><span data-stu-id="0f48d-113">Create a job account</span></span>
> * <span data-ttu-id="0f48d-114">Consulta em vários inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="0f48d-115">Atualizar dados em todas as bases de dados de inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="0f48d-116">Criar um índice numa tabela em todas as bases de dados de inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="0f48d-117">toocomplete neste tutorial, Olá se disponibilizar os seguintes pré-requisitos são cumpridos:</span><span class="sxs-lookup"><span data-stu-id="0f48d-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="0f48d-118">Olá Wingtip SaaS aplicação é implementada.</span><span class="sxs-lookup"><span data-stu-id="0f48d-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="0f48d-119">toodeploy em menos de cinco minutos, consulte [implementar e explorar aplicações de Wingtip SaaS Olá](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="0f48d-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="0f48d-120">O Azure PowerShell está instalado.</span><span class="sxs-lookup"><span data-stu-id="0f48d-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="0f48d-121">Para obter mais detalhes, veja [Introdução ao Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="0f48d-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="0f48d-122">Olá mais recente versão do SQL Server Management Studio (SSMS) está instalada.</span><span class="sxs-lookup"><span data-stu-id="0f48d-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="0f48d-123">Transferir e instalar o SSMS</span><span class="sxs-lookup"><span data-stu-id="0f48d-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="0f48d-124">*Este tutorial utiliza funcionalidades do Olá serviço base de dados do SQL Server que estão numa (tarefas de bases de dados elásticas) de pré-visualização limitada. Se desejar toodo neste tutorial, forneça o id de subscrição tooSaaSFeedback@microsoft.com com o requerente = elástico de tarefas de pré-visualização. Depois de receber a confirmação de que a sua subscrição tiver sido ativada, [transferir e instalar os cmdlets de tarefas de pré-versão mais recentes Olá](https://github.com/jaredmoo/azure-powershell/releases). Esta pré-visualização é limitada, por isso, contacte SaaSFeedback@microsoft.com para suporte ou questões relacionados.*</span><span class="sxs-lookup"><span data-stu-id="0f48d-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="0f48d-125">Introdução tooSaaS padrões de gestão de esquema</span><span class="sxs-lookup"><span data-stu-id="0f48d-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="0f48d-126">Olá único inquilino por base de dados SaaS padrão benefícios em muitos aspetos do isolamento de dados de Olá resulta, mas em Olá simultâneo apresenta a complexidade adicional de Olá da manutenção e gestão de muitas bases de dados.</span><span class="sxs-lookup"><span data-stu-id="0f48d-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="0f48d-127">[As tarefas elásticas](sql-database-elastic-jobs-overview.md) facilita a administração e gestão de camada de dados do SQL Server Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="0f48d-128">As tarefas permitem-lhe toosecurely e fiável, executam tarefas (scripts T-SQL) independentes da interação do utilizador ou de entrada, um grupo de bases de dados.</span><span class="sxs-lookup"><span data-stu-id="0f48d-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="0f48d-129">Este método pode ser utilizado toodeploy esquema e alterações de dados de referência comuns em todos os inquilinos numa aplicação.</span><span class="sxs-lookup"><span data-stu-id="0f48d-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="0f48d-130">As tarefas elásticas também podem ser utilizado toomaintain um *dourada* cópia da base de dados de Olá utilizado toocreate novos inquilinos, assegurando que tem dados de esquema e de referência mais recentes no Olá sempre.</span><span class="sxs-lookup"><span data-stu-id="0f48d-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![ecrã](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="0f48d-132">Pré-visualização limitada das Tarefas Elásticas</span><span class="sxs-lookup"><span data-stu-id="0f48d-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="0f48d-133">Existe uma nova versão das Tarefas Elásticas, que agora é uma funcionalidade integrada da Base de Dados SQL do Azure (não requer nenhum componente ou serviço adicional).</span><span class="sxs-lookup"><span data-stu-id="0f48d-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="0f48d-134">Esta nova versão das Tarefas Elásticas está atualmente em pré-visualização limitada.</span><span class="sxs-lookup"><span data-stu-id="0f48d-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="0f48d-135">Esta pré-visualização limitada atualmente suporta contas de trabalho do PowerShell toocreate e toocreate T-SQL e gerir tarefas.</span><span class="sxs-lookup"><span data-stu-id="0f48d-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="0f48d-136">*Este tutorial utiliza funcionalidades do Olá serviço base de dados do SQL Server que estão numa (tarefas de bases de dados elásticas) de pré-visualização limitada. Se desejar toodo neste tutorial, forneça o id de subscrição tooSaaSFeedback@microsoft.com com o requerente = elástico de tarefas de pré-visualização. Depois de receber a confirmação de que a sua subscrição tiver sido ativada, [transferir e instalar os cmdlets de tarefas de pré-versão mais recentes Olá](https://github.com/jaredmoo/azure-powershell/releases). Esta pré-visualização é limitada, por isso, contacte SaaSFeedback@microsoft.com para suporte ou questões relacionados.*</span><span class="sxs-lookup"><span data-stu-id="0f48d-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="0f48d-137">Obter Olá Wingtip aplicação scripts</span><span class="sxs-lookup"><span data-stu-id="0f48d-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="0f48d-138">Olá Wingtip SaaS scripts e código fonte da aplicação estão disponíveis no Olá [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repositório do github.</span><span class="sxs-lookup"><span data-stu-id="0f48d-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="0f48d-139">[Os passos scripts de Wingtip SaaS toodownload Olá](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="0f48d-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="0f48d-140">Criar uma base de dados das contas de tarefa e uma nova conta de tarefa</span><span class="sxs-lookup"><span data-stu-id="0f48d-140">Create a job account database and new job account</span></span>

<span data-ttu-id="0f48d-141">Este tutorial requer PowerShell toocreate Olá tarefa da base de dados e a tarefa de conta.</span><span class="sxs-lookup"><span data-stu-id="0f48d-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="0f48d-142">Tal como MSDB e SQL Server Agent, utiliza as tarefas elásticas um Azure SQL da base de dados toostore definições de tarefas, o estado de tarefa e o histórico.</span><span class="sxs-lookup"><span data-stu-id="0f48d-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="0f48d-143">Depois de Olá tarefa conta estiver criada, pode criar e monitorizar tarefas imediatamente.</span><span class="sxs-lookup"><span data-stu-id="0f48d-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="0f48d-144">Abra... \\Learning módulos\\esquema gestão\\*demonstração SchemaManagement.ps1* no Olá **ISE do PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="0f48d-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="0f48d-145">Prima **F5** script de Olá toorun.</span><span class="sxs-lookup"><span data-stu-id="0f48d-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="0f48d-146">Olá *demonstração SchemaManagement.ps1* script chamadas Olá *implementar SchemaManagement.ps1* script toocreate um *S2* com o nome da base de dados **jobaccount** num servidor de catálogo Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="0f48d-147">Em seguida, cria conta de tarefa Olá, passando a base de dados do Olá jobaccount como uma chamada de criação de conta do parâmetro toohello tarefa.</span><span class="sxs-lookup"><span data-stu-id="0f48d-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="0f48d-148">Criar uma tarefa toodeploy novos referência dados tooall inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="0f48d-149">Cada base de dados do inquilino inclui um conjunto de tipos de venue que definem o tipo de Olá dos eventos que estão alojados num venue.</span><span class="sxs-lookup"><span data-stu-id="0f48d-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="0f48d-150">Neste exercício, implementar um tipos de venue adicionais do atualização tooall Olá inquilino bases de dados tooadd dois: *da sua motocicleta Racing* e *Swimming Club*.</span><span class="sxs-lookup"><span data-stu-id="0f48d-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="0f48d-151">Estes tipos de venue correspondem a imagem de fundo de toohello que vê na aplicação de eventos do Olá inquilino.</span><span class="sxs-lookup"><span data-stu-id="0f48d-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="0f48d-152">Clique em Olá Venue tipo menu pendente e validar que estão disponíveis apenas 10 opções de tipo venue e, especificamente esse 'Da sua motocicleta Racing' e 'Swimming Club' não estão incluídos na lista de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="0f48d-153">Agora vamos criar um Olá de tooupdate tarefa *VenueTypes* uma tabela em todas as bases de dados de inquilino de Olá e adicionar novos tipos de venue Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="0f48d-154">uma nova tarefa toocreate, podemos utilizar um conjunto de tarefas de sistema armazenados procedimentos criados na base de dados do Olá jobaccount quando Olá tarefa conta foi criada.</span><span class="sxs-lookup"><span data-stu-id="0f48d-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="0f48d-155">Abra o SSMS e ligar o servidor de catálogo toohello: catálogo -\<utilizador\>. database.windows.net servidor</span><span class="sxs-lookup"><span data-stu-id="0f48d-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="0f48d-156">Também ligar o servidor de inquilino toohello: tenants1 -\<utilizador\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="0f48d-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="0f48d-157">Procurar toohello *contosoconcerthall* base de dados no Olá *tenants1* hello do servidor e a consulta *VenueTypes* tooconfirm de tabela que *da sua motocicleta Racing*  e *Swimming Club* **não são** na lista de resultados de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="0f48d-158">Ficheiro aberto Olá... \\Learning módulos\\esquema gestão\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="0f48d-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="0f48d-159">Modificar a instrução de Olá: definir @wtpUser = &lt;utilizador&gt; e substitua o valor de utilizador de Olá utilizado quando implementou a aplicação de Wingtip Olá</span><span class="sxs-lookup"><span data-stu-id="0f48d-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="0f48d-160">Certifique-se de que a base de dados de jobaccount toohello ligado e prima **F5** para executar o script de Olá</span><span class="sxs-lookup"><span data-stu-id="0f48d-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="0f48d-161">**SP\_adicionar\_destino\_grupo** cria o nome do grupo de destino da Olá DemoServerGroup, agora é preciso tooadd membros de destino.</span><span class="sxs-lookup"><span data-stu-id="0f48d-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="0f48d-162">**SP\_adicionar\_destino\_grupo\_membro** adiciona um *servidor* tipo de membro, considere todas as bases de dados dentro desse (tenha em atenção é Olá tenants1-doservidordedestino&lt; Utilizador&gt; server com bases de dados de inquilino de Olá) no momento da tarefa de execução deve ser incluída na tarefa de Olá, Olá segundo é adicionar uma *base de dados* como alvo o tipo de membro, especificamente Olá ('dourada' da base de dados basetenantdb) que reside no catálogo -&lt;utilizador&gt; servidor e por último outro *base de dados* destino grupo membro tipo tooinclude Olá adhocanalytics base de dados que é utilizado um tutorial posterior.</span><span class="sxs-lookup"><span data-stu-id="0f48d-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="0f48d-163">**sp\_add\_job** cria uma tarefa denominada “Implementação de Dados de Referência”</span><span class="sxs-lookup"><span data-stu-id="0f48d-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="0f48d-164">**SP\_adicionar\_passo** cria o passo da tarefa Olá que contém o T-SQL comando texto tooupdate Olá tabela de referência, VenueTypes</span><span class="sxs-lookup"><span data-stu-id="0f48d-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="0f48d-165">vistas de restantes Olá no script de Olá apresentam existência Olá de objetos de Olá e execução da tarefa de monitorização.</span><span class="sxs-lookup"><span data-stu-id="0f48d-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="0f48d-166">Utilize o valor do Estado tooreview Olá estas consultas Olá **ciclo de vida** toodetermine de coluna quando a tarefa de Olá foi concluída com êxito em todas as bases de dados do inquilino e Olá duas bases de dados adicionais que contém a tabela de referência de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="0f48d-167">No SSMS, navegue toohello *contosoconcerthall* base de dados no Olá *tenants1* hello do servidor e a consulta *VenueTypes* tooconfirm de tabela que *Motorcycle Racing* e *Swimming Club* **são** agora na lista de resultados de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f48d-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="0f48d-168">Criar um índice de tabela de referência do tarefa toomanage Olá</span><span class="sxs-lookup"><span data-stu-id="0f48d-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="0f48d-169">Exercício anterior toohello semelhante, este exercício cria um índice de Olá tarefa toorebuild na chave primária da tabela referência Olá, uma operação de gestão de base de dados típicas um administrador pode executar após um carregamento de dados de grandes dimensões para uma tabela.</span><span class="sxs-lookup"><span data-stu-id="0f48d-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="0f48d-170">Criar uma tarefa utilizando Olá mesmo tarefas 'system' procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="0f48d-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="0f48d-171">Abra o SSMS e ligue toohello catálogo -&lt;utilizador&gt;. database.windows.net servidor</span><span class="sxs-lookup"><span data-stu-id="0f48d-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="0f48d-172">Ficheiro aberto Olá... \\Learning módulos\\esquema gestão\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="0f48d-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="0f48d-173">Clique com o botão direito, selecione a ligação e ligar toohello catálogo -&lt;utilizador&gt;. database.windows.net servidor, se ainda não estiver ligado</span><span class="sxs-lookup"><span data-stu-id="0f48d-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="0f48d-174">Certifique-se a base de dados do toohello ligado jobaccount e prima script de Olá F5 toorun</span><span class="sxs-lookup"><span data-stu-id="0f48d-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="0f48d-175">sp\_add\_job cria uma nova tarefa denominada “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span><span class="sxs-lookup"><span data-stu-id="0f48d-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="0f48d-176">SP\_adicionar\_passo cria o passo da tarefa Olá que contém o índice de Olá de tooupdate de texto de comando de T-SQL</span><span class="sxs-lookup"><span data-stu-id="0f48d-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="0f48d-177">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="0f48d-177">Next steps</span></span>

<span data-ttu-id="0f48d-178">Neste tutorial, ficou a saber como:</span><span class="sxs-lookup"><span data-stu-id="0f48d-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="0f48d-179">Criar um tooquery de conta de trabalho em vários inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="0f48d-180">Atualizar dados em todas as bases de dados de inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="0f48d-181">Criar um índice numa tabela em todas as bases de dados de inquilinos</span><span class="sxs-lookup"><span data-stu-id="0f48d-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="0f48d-182">Tutorial de análises ad hoc</span><span class="sxs-lookup"><span data-stu-id="0f48d-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="0f48d-183">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="0f48d-183">Additional resources</span></span>

* [<span data-ttu-id="0f48d-184">Tutoriais adicionais que se baseiam Olá implementação de aplicação Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="0f48d-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="0f48d-185">Managing scaled-out cloud databases (Gerir bases de dados de escalamento horizontal na cloud)</span><span class="sxs-lookup"><span data-stu-id="0f48d-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="0f48d-186">Create and manage scaled-out cloud databases (Criar e gerir bases de dados de escalamento horizontal na cloud)</span><span class="sxs-lookup"><span data-stu-id="0f48d-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
