---
title: "problemas de ligação comuns aaaTroubleshoot tooAzure base de dados SQL"
description: "Passos tooidentify e resolva comuns erros de ligação para a SQL Database do Azure."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: eb5f2d7b123a76942c7e4a84a7f475344fbcb144
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-connection-issues-tooazure-sql-database"></a><span data-ttu-id="22bda-103">Resolver problemas de ligação tooAzure base de dados SQL</span><span class="sxs-lookup"><span data-stu-id="22bda-103">Troubleshoot connection issues tooAzure SQL Database</span></span>
<span data-ttu-id="22bda-104">Quando a ligação de Olá tooAzure base de dados SQL falha, receberá [mensagens de erro](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="22bda-104">When hello connection tooAzure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="22bda-105">Este artigo é um tópico centralizado que o ajuda a resolver problemas de conectividade da SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="22bda-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="22bda-106">Introduz [Olá causas comuns](#cause) dos problemas de ligação, recomenda [uma ferramenta de resolução de problemas](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) que ajuda-o problema de Olá de identidade e fornece a resolução de problemas de passos toosolve [ erros transitórios](#troubleshoot-transient-errors) e [persistentes ou não transitório erros](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="22bda-106">It introduces [hello common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity hello problem, and provides troubleshooting steps toosolve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="22bda-107">Se ocorrerem problemas de ligação de Olá, tente Olá passos descritos neste artigo de resolução de problemas.</span><span class="sxs-lookup"><span data-stu-id="22bda-107">If you encounter hello connection issues, try hello troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="22bda-108">Causa</span><span class="sxs-lookup"><span data-stu-id="22bda-108">Cause</span></span>
<span data-ttu-id="22bda-109">Problemas de ligação podem ser causados por Olá seguinte:</span><span class="sxs-lookup"><span data-stu-id="22bda-109">Connection problems may be caused by any of hello following:</span></span>

* <span data-ttu-id="22bda-110">Falha tooapply melhores práticas e diretrizes de conceção durante o processo de conceção da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="22bda-110">Failure tooapply best practices and design guidelines during hello application design process.</span></span>  <span data-ttu-id="22bda-111">Consulte [descrição geral do desenvolvimento de base de dados SQL](sql-database-develop-overview.md) tooget foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="22bda-111">See [SQL Database Development Overview](sql-database-develop-overview.md) tooget started.</span></span>
* <span data-ttu-id="22bda-112">Reconfiguração de base de dados SQL do Azure</span><span class="sxs-lookup"><span data-stu-id="22bda-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="22bda-113">Definições de firewall</span><span class="sxs-lookup"><span data-stu-id="22bda-113">Firewall settings</span></span>
* <span data-ttu-id="22bda-114">Tempo limite de ligação</span><span class="sxs-lookup"><span data-stu-id="22bda-114">Connection time-out</span></span>
* <span data-ttu-id="22bda-115">Informações de início de sessão incorreto</span><span class="sxs-lookup"><span data-stu-id="22bda-115">Incorrect login information</span></span>
* <span data-ttu-id="22bda-116">Atingido o limite máximo na alguns recursos da SQL Database do Azure</span><span class="sxs-lookup"><span data-stu-id="22bda-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="22bda-117">Geralmente, tooAzure de problemas de ligação da base de dados do SQL Server pode ser classificado da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="22bda-117">Generally, connection issues tooAzure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="22bda-118">Erros transitórios (curta duração ou intermitentes)</span><span class="sxs-lookup"><span data-stu-id="22bda-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="22bda-119">Erros persistentes ou não transitório (erros regularmente repetir)</span><span class="sxs-lookup"><span data-stu-id="22bda-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-hello-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="22bda-120">Tente troubleshooter Olá para problemas de conectividade da SQL Database do Azure</span><span class="sxs-lookup"><span data-stu-id="22bda-120">Try hello troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="22bda-121">Se ocorrer um erro de ligação específico, tente [esta ferramenta](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), que irá ajudá-lo rapidamente identidade e resolver o problema.</span><span class="sxs-lookup"><span data-stu-id="22bda-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="22bda-122">Resolver problemas de erros transitórios</span><span class="sxs-lookup"><span data-stu-id="22bda-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="22bda-123">Quando uma aplicação liga tooan SQL database do Azure, receber Olá seguir a mensagem de erro:</span><span class="sxs-lookup"><span data-stu-id="22bda-123">When an application connects tooan Azure SQL database, you receive hello following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry hello connection later. If hello problem persists, contact customer support, and provide them hello session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="22bda-124">Esta mensagem de erro é normalmente transitória (curta duração).</span><span class="sxs-lookup"><span data-stu-id="22bda-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="22bda-125">Este erro ocorre quando hello base de dados do Azure está a ser movido (ou reconfigurado) e a respetiva base de dados do SQL Server de toohello ligação perde a sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="22bda-125">This error occurs when hello Azure database is being moved (or reconfigured) and your application loses its connection toohello SQL database.</span></span> <span data-ttu-id="22bda-126">Eventos de reconfiguração de base de dados do SQL Server ocorrerem devido a um evento planeado (por exemplo, uma atualização de software) ou um evento não planeado (por exemplo, uma falha de processo ou o balanceamento de carga).</span><span class="sxs-lookup"><span data-stu-id="22bda-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="22bda-127">A maioria dos eventos de reconfiguração são geralmente curta duração e devem ser realizados em menos de 60 segundos, no máximo.</span><span class="sxs-lookup"><span data-stu-id="22bda-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="22bda-128">No entanto, estes eventos, ocasionalmente, poderá demorar mais toofinish, por exemplo, quando uma transação grande faz com que uma recuperação de longa execução.</span><span class="sxs-lookup"><span data-stu-id="22bda-128">However, these events can occasionally take longer toofinish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-tooresolve-transient-connectivity-issues"></a><span data-ttu-id="22bda-129">Problemas de conectividade transitório passos tooresolve</span><span class="sxs-lookup"><span data-stu-id="22bda-129">Steps tooresolve transient connectivity issues</span></span>

1. <span data-ttu-id="22bda-130">Verifique Olá [Dashboard de serviço do Microsoft Azure](https://azure.microsoft.com/status) para quaisquer falhas conhecidas que ocorreu durante a hora de Olá durante o qual Olá foram reportados erros pela aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="22bda-130">Check hello [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during hello time during which hello errors were reported by hello application.</span></span>
2. <span data-ttu-id="22bda-131">As aplicações que ligam tooa o serviço em nuvem, tais como SQL Database do Azure deve esperar eventos de reconfiguração periódica e implementar repetir lógica toohandle estes erros em vez de analisar como toousers de erros de aplicação.</span><span class="sxs-lookup"><span data-stu-id="22bda-131">Applications that connect tooa cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic toohandle these errors instead of surfacing these as application errors toousers.</span></span> <span data-ttu-id="22bda-132">Olá revisão [erros transitórios](sql-database-connectivity-issues.md) secção Olá melhores práticas e diretrizes em de design [descrição geral do desenvolvimento de base de dados SQL](sql-database-develop-overview.md) para obter mais informações e geral Repita estratégias.</span><span class="sxs-lookup"><span data-stu-id="22bda-132">Review hello [Transient errors](sql-database-connectivity-issues.md) section and hello best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="22bda-133">Em seguida, ver exemplos de código em [bibliotecas de ligação para base de dados SQL e SQL Server](sql-database-libraries.md) para informações específicas.</span><span class="sxs-lookup"><span data-stu-id="22bda-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="22bda-134">Como uma base de dados se aproxima dos respetivos limites de recursos, pode parecer toobe um problema de conectividade transitório.</span><span class="sxs-lookup"><span data-stu-id="22bda-134">As a database approaches its resource limits, it can seem toobe a transient connectivity issue.</span></span> <span data-ttu-id="22bda-135">Consulte [resolução de problemas de desempenho](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="22bda-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="22bda-136">Se continuar a problemas de conetividade ou se hello duração para o qual a aplicação encontrar o erro de Olá excede 60 segundos, ou se visualizar várias ocorrências do erro Olá num determinado dia, ficheiro um pedido de suporte do Azure ao selecionar **obter suporta** no Olá [suporte do Azure](https://azure.microsoft.com/support/options) site.</span><span class="sxs-lookup"><span data-stu-id="22bda-136">If connectivity problems continue, or if hello duration for which your application encounters hello error exceeds 60 seconds or if you see multiple occurrences of hello error in a given day, file an Azure support request by selecting **Get Support** on hello [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="22bda-137">Resolver erros persistentes</span><span class="sxs-lookup"><span data-stu-id="22bda-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="22bda-138">Se a aplicação Olá forma permanente falhar tooconnect tooAzure base de dados SQL, normalmente indica um problema com uma das seguintes Olá:</span><span class="sxs-lookup"><span data-stu-id="22bda-138">If hello application persistently fails tooconnect tooAzure SQL Database, it usually indicates an issue with one of hello following:</span></span>

* <span data-ttu-id="22bda-139">Configuração da firewall.</span><span class="sxs-lookup"><span data-stu-id="22bda-139">Firewall configuration.</span></span> <span data-ttu-id="22bda-140">Olá firewall de base de dados ou do lado do cliente de SQL do Azure está a bloquear ligações tooAzure base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="22bda-140">hello Azure SQL database or client-side firewall is blocking connections tooAzure SQL Database.</span></span>
* <span data-ttu-id="22bda-141">Rede de reconfiguração do lado do cliente de Olá: por exemplo, um novo endereço IP ou um servidor proxy.</span><span class="sxs-lookup"><span data-stu-id="22bda-141">Network reconfiguration on hello client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="22bda-142">Erro de utilizador: por exemplo, escrito incorretamente, tais como o nome do servidor Olá na cadeia de ligação de Olá os parâmetros de ligação.</span><span class="sxs-lookup"><span data-stu-id="22bda-142">User error: for example, mistyped connection parameters, such as hello server name in hello connection string.</span></span>

### <a name="steps-tooresolve-persistent-connectivity-issues"></a><span data-ttu-id="22bda-143">Problemas de conectividade persistente de tooresolve passos</span><span class="sxs-lookup"><span data-stu-id="22bda-143">Steps tooresolve persistent connectivity issues</span></span>
1. <span data-ttu-id="22bda-144">Configurar [regras de firewall](sql-database-configure-firewall-settings.md) o endereço IP de cliente tooallow Olá.</span><span class="sxs-lookup"><span data-stu-id="22bda-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) tooallow hello client IP address.</span></span> <span data-ttu-id="22bda-145">Para fins de teste temporários, configure uma regra de firewall utilizando 0.0.0.0 como Olá a iniciar intervalo de endereços IP e utilizar 255.255.255.255 como Olá termina o intervalo de endereços IP.</span><span class="sxs-lookup"><span data-stu-id="22bda-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as hello starting IP address range and using 255.255.255.255 as hello ending IP address range.</span></span> <span data-ttu-id="22bda-146">Esta ação irá abrir endereços IP do Olá servidor tooall.</span><span class="sxs-lookup"><span data-stu-id="22bda-146">This will open hello server tooall IP addresses.</span></span> <span data-ttu-id="22bda-147">Se este procedimento resolve o problema de conectividade, remover esta regra e criar uma regra de firewall para um endereço IP adequadamente limitado ou intervalo de endereços.</span><span class="sxs-lookup"><span data-stu-id="22bda-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="22bda-148">Em todas as firewalls entre o cliente de Olá e Olá Internet, certifique-se de que a porta 1433 está aberta para ligações de saída.</span><span class="sxs-lookup"><span data-stu-id="22bda-148">On all firewalls between hello client and hello Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="22bda-149">Reveja [configurar tooAllow de Firewall do Windows hello acesso ao servidor de SQL](https://msdn.microsoft.com/library/cc646023.aspx) e [híbrida identidade necessários portas e protocolos](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) para apontadores adicionais relacionados com tooadditional portas que precisa de tooopen para Autenticação do Active Directory do Azure.</span><span class="sxs-lookup"><span data-stu-id="22bda-149">Review [Configure hello Windows Firewall tooAllow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related tooadditional ports that you need tooopen for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="22bda-150">Certifique-se de que a cadeia de ligação e outras definições de ligação.</span><span class="sxs-lookup"><span data-stu-id="22bda-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="22bda-151">Consulte Olá secção cadeia de ligação Olá [tópico de problemas de conectividade](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="22bda-151">See hello Connection String section in hello [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="22bda-152">Verifique o estado de funcionamento do serviço no dashboard de Olá.</span><span class="sxs-lookup"><span data-stu-id="22bda-152">Check service health in hello dashboard.</span></span> <span data-ttu-id="22bda-153">Se considerar que não há uma falha regional, consulte [recuperar a partir de uma falha](sql-database-disaster-recovery.md) região de novos passos toorecover tooa.</span><span class="sxs-lookup"><span data-stu-id="22bda-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps toorecover tooa new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="22bda-154">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="22bda-154">Next steps</span></span>
* [<span data-ttu-id="22bda-155">Resolver problemas de desempenho de SQL Database do Azure</span><span class="sxs-lookup"><span data-stu-id="22bda-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="22bda-156">Pesquisa Olá documentação no Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="22bda-156">Search hello documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="22bda-157">Olá vista mais recentes atualizações de serviço de base de dados do Azure SQL toohello</span><span class="sxs-lookup"><span data-stu-id="22bda-157">View hello latest updates toohello Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="22bda-158">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="22bda-158">Additional resources</span></span>
* [<span data-ttu-id="22bda-159">Descrição geral do desenvolvimento de base de dados SQL</span><span class="sxs-lookup"><span data-stu-id="22bda-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="22bda-160">Orientações de processamento de falhas transitórias gerais</span><span class="sxs-lookup"><span data-stu-id="22bda-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="22bda-161">Bibliotecas de ligação para base de dados SQL e SQL Server</span><span class="sxs-lookup"><span data-stu-id="22bda-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)

