---
title: "desempenho de base de dados SQL aaaAzure otimização orientações | Microsoft Docs"
description: "Este artigo pode ajudá-lo a determinar qual toochoose de camada de serviço para a sua aplicação. Também recomenda formas tootune Olá de tooget a aplicação mais da SQL Database do Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="87eac-104">Otimização de desempenho na SQL Database do Azure</span><span class="sxs-lookup"><span data-stu-id="87eac-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="87eac-105">Base de dados SQL do Azure fornece [recomendações](sql-database-advisor.md) que pode utilizar tooimprove desempenho da base de dados, ou pode deixar a base de dados do Azure SQL [automaticamente adaptar tooyour aplicação](sql-database-automatic-tuning.md) e aplicar as alterações que irá melhorar o desempenho da sua carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="87eac-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="87eac-106">Em não tem recomendações aplicáveis e continuará a ter problemas de desempenho, poderá utilizar Olá seguir os desempenhos de tooimprove métodos:</span><span class="sxs-lookup"><span data-stu-id="87eac-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="87eac-107">Aumentar [escalões de serviço](sql-database-service-tiers.md) e fornecer mais recursos tooyour da base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="87eac-108">Otimizar a sua aplicação e aplicam-se algumas melhores práticas que podem melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="87eac-109">Otimize a base de dados de Olá alterando índices e consultas toomore eficientemente trabalhar com dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="87eac-110">Estes são os métodos manuais porque necessita de toodecide que [escalões de serviço](sql-database-service-tiers.md) deverá escolher ou seria necessário toorewrite aplicação ou código base de dados e deply alterações Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="87eac-111">Aumentar a camada de desempenho da base de dados</span><span class="sxs-lookup"><span data-stu-id="87eac-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="87eac-112">Base de dados SQL do Azure oferece quatro [escalões de serviço](sql-database-service-tiers.md) que pode escolher entre: básicas, Standard, Premium e Premium RS (desempenho é medido em unidades de débito de base de dados, ou [DTUs](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="87eac-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="87eac-113">Cada escalão de serviço estritamente isola recursos Olá que pode utilizar a base de dados do SQL Server e garante o desempenho previsível que nível de serviço.</span><span class="sxs-lookup"><span data-stu-id="87eac-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="87eac-114">Neste artigo, vamos oferecem orientações que podem ajudar a escolher a camada de serviço Olá para a sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="87eac-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="87eac-115">Vamos discutir também formas que pode otimizar o seu Olá tooget de aplicação mais da SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="87eac-116">Este artigo incida no guia de desempenho das bases de dados na base de dados do Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="87eac-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="87eac-117">Para obter orientações de desempenho relacionados tooelastic agrupamentos, consulte [considerações sobre preço e desempenho para conjuntos elásticos](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="87eac-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="87eac-118">Tenha em atenção, no entanto, pode aplicar muitas das recomendações toodatabases este artigo num agrupamento elástico de otimização de Olá e obter os benefícios de desempenho semelhante.</span><span class="sxs-lookup"><span data-stu-id="87eac-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="87eac-119">**Básico**: Olá serviço básico camada oferece um bom desempenho à previsibilidade para cada base de dados, de hora mais de hora.</span><span class="sxs-lookup"><span data-stu-id="87eac-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="87eac-120">Numa base de dados básica, recursos suficientes suportam um bom desempenho na base de dados pequena que não tem vários pedidos em simultâneo.</span><span class="sxs-lookup"><span data-stu-id="87eac-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="87eac-121">Casos de utilização típica quando deverá utilizar o escalão de serviço básico são:</span><span class="sxs-lookup"><span data-stu-id="87eac-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="87eac-122">**Apenas começar a utilizar com a SQL Database do Azure**.</span><span class="sxs-lookup"><span data-stu-id="87eac-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="87eac-123">As aplicações que estão em desenvolvimento, muitas vezes, não precisam de níveis de elevado desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="87eac-124">Bases de dados básicas são um ambiente ideal para o desenvolvimento de base de dados ou de teste, num ponto de preços baixa.</span><span class="sxs-lookup"><span data-stu-id="87eac-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="87eac-125">**Tiver uma base de dados com um único utilizador**.</span><span class="sxs-lookup"><span data-stu-id="87eac-125">**You have a database with a single user**.</span></span> <span data-ttu-id="87eac-126">As aplicações que associa um utilizador único uma base de dados, normalmente, não tem requisitos de concorrência e desempenho elevados.</span><span class="sxs-lookup"><span data-stu-id="87eac-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="87eac-127">Estas aplicações são candidatos para a camada de serviço básico Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="87eac-128">**Standard**: camada de serviço Standard Olá oferece desempenho melhorado previsão e fornece um bom desempenho para bases de dados que tenham vários pedidos simultâneos, como o grupo de trabalho e aplicações web.</span><span class="sxs-lookup"><span data-stu-id="87eac-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="87eac-129">Ao escolher uma base de dados de camada de serviço Standard, tamanho da aplicação de base de dados com base no desempenho previsível, minuto minutos.</span><span class="sxs-lookup"><span data-stu-id="87eac-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="87eac-130">**A base de dados tem vários pedidos simultâneos**.</span><span class="sxs-lookup"><span data-stu-id="87eac-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="87eac-131">Aplicações de serviço mais do que um utilizador num momento normalmente têm níveis de desempenho superiores.</span><span class="sxs-lookup"><span data-stu-id="87eac-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="87eac-132">Por exemplo, aplicações web ou de grupo de trabalho que têm requisitos de tráfego de e/s de toomedium baixa suportando várias consultas em simultâneo são bons candidatos para a camada de serviço Standard Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="87eac-133">**Premium**: camada de serviço Premium Olá disponibiliza desempenho previsível, segundo por segundo, para cada base de dados Premium.</span><span class="sxs-lookup"><span data-stu-id="87eac-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="87eac-134">Quando escolher o escalão de serviço Premium Olá, pode dimensione a sua aplicação de base de dados com base no Olá pico de carga para a base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="87eac-135">plano de Olá remove casos em que a variância de desempenho pode causar tootake consultas pequeno maior do que esperado nas operações de sensíveis à latência.</span><span class="sxs-lookup"><span data-stu-id="87eac-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="87eac-136">Este modelo pode simplificar bastante a ciclos de validação de desenvolvimento e produto Olá para aplicações que precisem toomake instruções forte sobre necessidades de recursos de pico, a variância de desempenho ou a latência de consulta.</span><span class="sxs-lookup"><span data-stu-id="87eac-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="87eac-137">A maioria dos casos de utilização do escalão de serviço de Premium têm um ou mais destas características:</span><span class="sxs-lookup"><span data-stu-id="87eac-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="87eac-138">**Elevada pico de carga**.</span><span class="sxs-lookup"><span data-stu-id="87eac-138">**High peak load**.</span></span> <span data-ttu-id="87eac-139">Uma aplicação que requer substancial CPU, memória ou entrada/saída (e/s) toocomplete as suas operações requer um nível dedicado e de elevado desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="87eac-140">Por exemplo, uma operação de base de dados conhecido tooconsume vários núcleos de CPU para um período de tempo alargado é uma candidata para a camada de serviço Premium Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="87eac-141">**Demasiados pedidos simultâneos**.</span><span class="sxs-lookup"><span data-stu-id="87eac-141">**Many concurrent requests**.</span></span> <span data-ttu-id="87eac-142">Algumas aplicações de base de dados serviço demasiados pedidos simultâneos, por exemplo, quando a servir um Web site que tem um volume de tráfego elevado.</span><span class="sxs-lookup"><span data-stu-id="87eac-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="87eac-143">Básico e padrão escalões de serviço limitam o número de Olá de pedidos em simultâneo por base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="87eac-144">Aplicações que necessitam de mais ligações teria toochoose um reserva adequado tamanho toohandle Olá número máximo de pedidos necessários.</span><span class="sxs-lookup"><span data-stu-id="87eac-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="87eac-145">**Baixa latência**.</span><span class="sxs-lookup"><span data-stu-id="87eac-145">**Low latency**.</span></span> <span data-ttu-id="87eac-146">Algumas aplicações precisam de tooguarantee uma resposta da base de dados de Olá no tempo mínimo.</span><span class="sxs-lookup"><span data-stu-id="87eac-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="87eac-147">Se um procedimento armazenado específico denomina-se como parte de uma operação de cliente mais vasto, poderá ser necessário um requisito toohave partir desse chamada de retorno em mais do que 20 milissegundos, 99 por cento do tempo de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="87eac-148">Este tipo de beneficia de aplicação de camada de serviço Premium Olá, se que essa Olá necessárias informática energia toomake está disponível.</span><span class="sxs-lookup"><span data-stu-id="87eac-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="87eac-149">**Premium RS**: Olá escalão Premium RS foi concebido para cargas de trabalho de e/s intensivas que não necessitam de Olá garantias de disponibilidade mais elevadas.</span><span class="sxs-lookup"><span data-stu-id="87eac-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="87eac-150">Os exemplos incluem o teste de cargas de trabalho de elevado desempenho ou uma carga de trabalho analítica em que a base de dados de Olá não é sistema Olá de registo.</span><span class="sxs-lookup"><span data-stu-id="87eac-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="87eac-151">nível de serviço Olá que necessita para a base de dados do SQL Server depende de requisitos de carregamento de pico Olá para a dimensão de cada recurso.</span><span class="sxs-lookup"><span data-stu-id="87eac-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="87eac-152">Algumas aplicações utilizam uma quantidade trivial de um único recurso, mas têm requisitos significativos para outros recursos.</span><span class="sxs-lookup"><span data-stu-id="87eac-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="87eac-153">Capacidades de camada de serviço e limites</span><span class="sxs-lookup"><span data-stu-id="87eac-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="87eac-154">Em cada camada de serviço, definir nível de desempenho de Olá, pelo que terá de Olá flexibilidade toopay apenas para a capacidade de Olá que precisa.</span><span class="sxs-lookup"><span data-stu-id="87eac-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="87eac-155">Pode [ajustar capacidade](sql-database-service-tiers.md), ou reduzir vertical, como as alterações de carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="87eac-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="87eac-156">Por exemplo, se a carga de trabalho de base de dados se elevada durante a época de compras de back-escola Olá, pode aumentar o nível de desempenho de Olá da base de dados de Olá durante um período de tempo definido, Julho através de Setembro.</span><span class="sxs-lookup"><span data-stu-id="87eac-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="87eac-157">Pode reduzir quando termina a época de pico.</span><span class="sxs-lookup"><span data-stu-id="87eac-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="87eac-158">Pode minimizar paga por otimizar o seu sazonalidade de toohello de ambiente de nuvem da sua empresa.</span><span class="sxs-lookup"><span data-stu-id="87eac-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="87eac-159">Este modelo também funciona bem para ciclos de versão de produto de software.</span><span class="sxs-lookup"><span data-stu-id="87eac-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="87eac-160">Um agrupamento de teste poderá atribuir capacidade enquanto teste é executado e, em seguida, liberte essa capacidade quando terminarem de teste.</span><span class="sxs-lookup"><span data-stu-id="87eac-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="87eac-161">Um modelo de pedido de capacidade, paga pelos capacidade à medida que precisa dele e evitar despesas em recursos dedicados que raramente poderá utilizar.</span><span class="sxs-lookup"><span data-stu-id="87eac-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="87eac-162">Por que motivo escalões de serviço?</span><span class="sxs-lookup"><span data-stu-id="87eac-162">Why service tiers?</span></span>
<span data-ttu-id="87eac-163">Apesar de cada carga de trabalho de base de dados pode ser diferente, o objetivo Olá escalões de serviço é a previsão de desempenho de tooprovide em vários níveis de desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="87eac-164">Clientes com os requisitos de recursos de base de dados em grande escala, podem trabalhar num ambiente informático mais dedicado.</span><span class="sxs-lookup"><span data-stu-id="87eac-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="87eac-165">Otimizar a sua aplicação</span><span class="sxs-lookup"><span data-stu-id="87eac-165">Tune your application</span></span>
<span data-ttu-id="87eac-166">No tradicional no SQL Server local, processo de Olá de planeamento de capacidade inicial, muitas vezes, é separado do processo de Olá da execução de uma aplicação na produção.</span><span class="sxs-lookup"><span data-stu-id="87eac-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="87eac-167">Produto de hardware e licenças adquiridas pela primeira vez, e a otimização de desempenho é efetuada posteriormente.</span><span class="sxs-lookup"><span data-stu-id="87eac-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="87eac-168">Quando utilizar a SQL Database do Azure, é um processo de Olá toointerweave boa ideia de execução de uma aplicação e otimização-lo.</span><span class="sxs-lookup"><span data-stu-id="87eac-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="87eac-169">Com o modelo de Olá de pagar capacidade a pedido, pode otimizar a sua aplicação toouse Olá mínimo recursos necessários agora, em vez de provocam um aprovisionamento no hardware baseiam guesses dos planos de crescimento futuro para uma aplicação, que frequentemente estão incorretos.</span><span class="sxs-lookup"><span data-stu-id="87eac-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="87eac-170">Alguns clientes podem escolher não tootune uma aplicação e, em vez disso, escolha toooverprovision recursos de hardware.</span><span class="sxs-lookup"><span data-stu-id="87eac-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="87eac-171">Esta abordagem poderá ser aconselhável se não quiser toochange uma aplicação chave durante um período ocupado.</span><span class="sxs-lookup"><span data-stu-id="87eac-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="87eac-172">No entanto, a otimização de uma aplicação pode minimizar os requisitos de recursos e faturas mensais inferiores ao utilizar camadas de serviços de Olá na SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="87eac-173">Características de aplicação</span><span class="sxs-lookup"><span data-stu-id="87eac-173">Application characteristics</span></span>
<span data-ttu-id="87eac-174">Embora os escalões de serviço do SQL Database do Azure são tooimprove concebida desempenho estabilidade e à previsibilidade para uma aplicação, algumas melhores práticas podem ajudá-lo a otimizar o tirar partido do aplicação toobetter dos recursos de Olá um nível de desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="87eac-175">Embora muitas aplicações tenham ganhos de desempenho significativas simplesmente por mudar tooa mais elevado nível de desempenho ou serviço da camada, alguns necessidade de aplicações adicionais otimização toobenefit de um nível mais elevado de serviço.</span><span class="sxs-lookup"><span data-stu-id="87eac-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="87eac-176">Para um melhor desempenho, considere a otimização de aplicação adicional para aplicações que têm estas características:</span><span class="sxs-lookup"><span data-stu-id="87eac-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="87eac-177">**As aplicações que têm um desempenho lento devido a "chatty" comportamento**.</span><span class="sxs-lookup"><span data-stu-id="87eac-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="87eac-178">Aplicações chatty efetuar operações de acesso de dados excessivo destinadas a latência de toonetwork confidenciais.</span><span class="sxs-lookup"><span data-stu-id="87eac-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="87eac-179">Poderá ser necessário toomodify estes tipos de aplicações tooreduce Olá diversas dados acesso operações toohello SQL da base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="87eac-180">Por exemplo, pode melhorar o desempenho da aplicação através da utilização de técnicas, como a criação de batches de consultas ad-hoc ou movendo Olá consulta toostored procedimentos.</span><span class="sxs-lookup"><span data-stu-id="87eac-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="87eac-181">Para obter mais informações, consulte [Batch consultas](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="87eac-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="87eac-182">**Bases de dados com uma carga de trabalho que consomem muita que não pode ser suportado por uma única máquina toda**.</span><span class="sxs-lookup"><span data-stu-id="87eac-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="87eac-183">Bases de dados que excedam recursos Olá de nível de desempenho de Premium Olá mais elevado poderão beneficiar aumentar horizontalmente a carga de trabalho Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="87eac-184">Para obter mais informações, consulte [fragmentação entre bases de dados](#cross-database-sharding) e [criação de partições funcionais](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="87eac-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="87eac-185">**As aplicações que têm consultas inferior ao ideal –**.</span><span class="sxs-lookup"><span data-stu-id="87eac-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="87eac-186">Aplicações, especialmente na camada de acesso de dados de Olá, mal ter otimizados consultas não poderão beneficiar de um nível de desempenho superior.</span><span class="sxs-lookup"><span data-stu-id="87eac-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="87eac-187">Isto inclui consultas que não dispõem de uma cláusula WHERE, tem em falta índices ou tem desatualizada estatísticas.</span><span class="sxs-lookup"><span data-stu-id="87eac-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="87eac-188">Estas aplicações beneficiam técnicas de otimização de desempenho de consulta padrão.</span><span class="sxs-lookup"><span data-stu-id="87eac-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="87eac-189">Para obter mais informações, consulte [em falta índices](#identifying-and-adding-missing-indexes) e [consultar Otimização e hinting](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="87eac-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="87eac-190">**Design de acesso a aplicações que tenham dados inferior ao ideal –**.</span><span class="sxs-lookup"><span data-stu-id="87eac-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="87eac-191">As aplicações com problemas de simultaneidade de acesso de dados inerente, deadlocking por exemplo, não poderão beneficiar de um nível de desempenho superior.</span><span class="sxs-lookup"><span data-stu-id="87eac-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="87eac-192">Considere a redução de ida e volta contra Olá SQL Database do Azure por dados de colocação em cache do lado do cliente de Olá com Olá serviço de colocação em cache do Azure ou outra tecnologia de colocação em cache.</span><span class="sxs-lookup"><span data-stu-id="87eac-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="87eac-193">Consulte [colocação em cache de camada de aplicação](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="87eac-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="87eac-194">Otimizar a base de dados</span><span class="sxs-lookup"><span data-stu-id="87eac-194">Tune your database</span></span>
<span data-ttu-id="87eac-195">Nesta secção, vamos ver alguns técnicas que pode utilizar tootune SQL Database do Azure toogain Olá melhor desempenho para a sua aplicação e executá-lo ao nível de desempenho possíveis mais baixo Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="87eac-196">Algumas destas técnicas correspondem tradicionais do SQL Server de otimização de melhores práticas, mas outros estão tooAzure específica da base de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="87eac-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="87eac-197">Em alguns casos, pode examinar os recursos de Olá consumido para uma base de dados toofind áreas toofurther otimizar e expandir tradicional toowork de técnicas de SQL Server na SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="87eac-198">Identificar problemas de desempenho através do portal do Azure</span><span class="sxs-lookup"><span data-stu-id="87eac-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="87eac-199">Olá ferramentas no portal do Azure de Olá os seguintes pode ajudar a analisar e corrigir problemas de desempenho com a base de dados do SQL Server:</span><span class="sxs-lookup"><span data-stu-id="87eac-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="87eac-200">Query Performance Insight</span><span class="sxs-lookup"><span data-stu-id="87eac-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="87eac-201">Assistente da Base de Dados SQL</span><span class="sxs-lookup"><span data-stu-id="87eac-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="87eac-202">Olá portal do Azure tem mais informações sobre ambas estas ferramentas e como toouse-los.</span><span class="sxs-lookup"><span data-stu-id="87eac-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="87eac-203">diagnosticar tooefficiently e problemas corretos, recomendamos que primeiro tente Olá as ferramentas do Olá portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="87eac-204">Recomendamos que utilize manual Olá otimização abordagens que discutimos a em seguida, em falta índices e otimizar a consulta, em casos especiais.</span><span class="sxs-lookup"><span data-stu-id="87eac-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="87eac-205">Encontrar mais informações sobre como identificar problemas na SQL Database do Azure no [monitorização do desempenho](sql-database-single-database-monitor.md) artigo.</span><span class="sxs-lookup"><span data-stu-id="87eac-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="87eac-206">Identificar e adicionar os índices em falta</span><span class="sxs-lookup"><span data-stu-id="87eac-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="87eac-207">Um problema comum no desempenho da base de dados OLTP relacionada com a estrutura de base de dados física toohello.</span><span class="sxs-lookup"><span data-stu-id="87eac-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="87eac-208">Muitas vezes, esquemas de base de dados são concebidas e fornecidas sem as testar à escala (a carga ou no volume de dados).</span><span class="sxs-lookup"><span data-stu-id="87eac-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="87eac-209">Infelizmente, desempenho Olá de um plano de consulta poderá ser aceitável em pequena escala, mas diminuir substancialmente em volumes de dados de nível de produção.</span><span class="sxs-lookup"><span data-stu-id="87eac-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="87eac-210">origem mais comuns de Olá deste problema é a falta de Olá de filtros de toosatisfy índices adequado ou outras restrições numa consulta.</span><span class="sxs-lookup"><span data-stu-id="87eac-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="87eac-211">Muitas vezes, falta de índices de manifestos como uma tabela de análise quando uma procura do índice foi suffice.</span><span class="sxs-lookup"><span data-stu-id="87eac-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="87eac-212">Neste exemplo, o plano de consulta selecionada Olá utiliza uma análise quando uma procura seria suffice:</span><span class="sxs-lookup"><span data-stu-id="87eac-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Um plano de consulta com índices em falta](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="87eac-214">Base de dados SQL do Azure pode ajudar a localizar e corrigir comuns em falta condições de índice.</span><span class="sxs-lookup"><span data-stu-id="87eac-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="87eac-215">DMVs incorporadas em SQL Database do Azure observe compilações de consulta em que um índice seria reduzir significativamente Olá estimado custo toorun uma consulta.</span><span class="sxs-lookup"><span data-stu-id="87eac-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="87eac-216">Durante a execução de consulta, base de dados SQL controla a frequência cada plano de consulta é executado e Olá controla estimado intervalo entre Olá ao executar o plano de consulta e Olá imagined um onde existia nesse índice.</span><span class="sxs-lookup"><span data-stu-id="87eac-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="87eac-217">Pode utilizar estes estimado de tooquickly DMVs estrutura de base de dados física de tooyour que alterações poderá melhorar o custo de carga de trabalho geral para uma base de dados e a carga de trabalho real.</span><span class="sxs-lookup"><span data-stu-id="87eac-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="87eac-218">Pode utilizar este potencial problema tooevaluate de consulta em falta índices:</span><span class="sxs-lookup"><span data-stu-id="87eac-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="87eac-219">Neste exemplo, a consulta de Olá resultou neste Sugestão:</span><span class="sxs-lookup"><span data-stu-id="87eac-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="87eac-220">Depois de criado, essa mesma instrução SELECT escolhe um plano diferente, que utiliza uma procura em vez de uma análise e, em seguida, executa a forma mais eficiente plano Olá:</span><span class="sxs-lookup"><span data-stu-id="87eac-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Um plano de consulta com índices corrigidos](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="87eac-222">informações de chave Olá é essa Olá capacidade de e/s de um partilhado, sistema de mercadoria é mais limitado do que uma máquina de servidor dedicado.</span><span class="sxs-lookup"><span data-stu-id="87eac-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="87eac-223">Há um premium na minimizando desnecessário e/s tootake máximo partido do sistema Olá no Olá DTU cada nível de desempenho das camadas de serviços Olá SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="87eac-224">Opções de design de base de dados físico adequado podem significativamente melhorar a latência de Olá para consultas individuais, melhorar o débito de Olá de pedidos simultâneos processadas por unidade de escala e minimizar a consulta de Olá Olá custos toosatisfy necessária.</span><span class="sxs-lookup"><span data-stu-id="87eac-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="87eac-225">Para mais informações sobre Olá em falta DMVs de índice, consulte [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="87eac-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="87eac-226">Otimização da consulta e hinting</span><span class="sxs-lookup"><span data-stu-id="87eac-226">Query tuning and hinting</span></span>
<span data-ttu-id="87eac-227">o otimizador de consultas Olá na SQL Database do Azure é semelhante toohello tradicional do SQL Server otimizador de consultas.</span><span class="sxs-lookup"><span data-stu-id="87eac-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="87eac-228">Na maioria das melhores práticas de Olá para otimizar as consultas e Olá compreender reasoning limitações de modelo para o otimizador de consultas Olá também se aplicam tooAzure base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="87eac-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="87eac-229">Se a otimizar as consultas na base de dados do Azure SQL, poderá obter benefício adicional de Olá de reduzir as exigências do recurso agregado.</span><span class="sxs-lookup"><span data-stu-id="87eac-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="87eac-230">A aplicação poderá ser capaz de toorun um custo mais baixo que equivalente untuned porque pode ser executado num nível de desempenho inferior.</span><span class="sxs-lookup"><span data-stu-id="87eac-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="87eac-231">Um exemplo comum no SQL Server e que também se aplica a tooAzure base de dados SQL é como o otimizador "interceta" parâmetros de consulta de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="87eac-232">Durante a compilação, otimizador de consultas Olá avalia o valor atual Olá toodetermine um parâmetro, se pode gerar um plano de consulta mais ideal.</span><span class="sxs-lookup"><span data-stu-id="87eac-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="87eac-233">Embora muitas vezes, esta estratégia pode levar tooa o plano de consulta que é significativamente mais rápido do que um plano compilado sem os valores de parâmetros conhecido, atualmente funciona imperfectly ambos no SQL Server e no SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="87eac-234">Por vezes, parâmetro Olá é intercetados não na e, por vezes, parâmetro Olá é intercetados na mas plano gerado Olá é inferior ao ideal para o conjunto completo de Olá de valores de parâmetros numa carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="87eac-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="87eac-235">Microsoft inclui sugestões de consulta (diretivas) para que possa especificar intenção mais deliberadamente e substituir o comportamento predefinido de Olá de parâmetro de interceção.</span><span class="sxs-lookup"><span data-stu-id="87eac-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="87eac-236">Muitas vezes, se utilizar sugestões, pode corrigir casos em que as comportamento Olá predefinido do SQL Server ou SQL Database do Azure é imperfect para uma carga de trabalho do cliente específico.</span><span class="sxs-lookup"><span data-stu-id="87eac-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="87eac-237">Exemplo Olá de seguinte demonstra como o processador de consultas Olá pode gerar um plano que é inferior ao ideal para desempenho e requisitos de recursos.</span><span class="sxs-lookup"><span data-stu-id="87eac-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="87eac-238">Este exemplo mostra também a que se utilizar uma sugestão de consulta, pode reduzir os requisitos de recursos e tempo de execução da consulta da base de dados do SQL Server:</span><span class="sxs-lookup"><span data-stu-id="87eac-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="87eac-239">código de configuração de Olá cria uma tabela que tem skewed a distribuição de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="87eac-240">Olá consultas difere do plano com base na qual parâmetro está selecionado.</span><span class="sxs-lookup"><span data-stu-id="87eac-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="87eac-241">Infelizmente, plano Olá comportamento de colocação em cache não sempre recompilar consulta Olá com base no valor de parâmetro Olá mais comuns.</span><span class="sxs-lookup"><span data-stu-id="87eac-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="87eac-242">Por isso, é possível um toobe inferior ao ideal – plano em cache e utilizado para vários valores, mesmo quando um plano diferente pode ser uma melhor opção de plano em média.</span><span class="sxs-lookup"><span data-stu-id="87eac-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="87eac-243">Em seguida, o plano de consulta Olá cria dois procedimentos armazenados que sejam idênticos, à exceção de um tem uma sugestão de consulta especiais.</span><span class="sxs-lookup"><span data-stu-id="87eac-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="87eac-244">**Exemplo, parte 1**</span><span class="sxs-lookup"><span data-stu-id="87eac-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="87eac-245">**Exemplo, parte 2**</span><span class="sxs-lookup"><span data-stu-id="87eac-245">**Example, part 2**</span></span>

<span data-ttu-id="87eac-246">(Recomendamos que aguarde pelo menos 10 minutos antes de começar a parte 2 de exemplo de Olá, para que os resultados de Olá forem distintos em Olá resultante dados de telemetria.)</span><span class="sxs-lookup"><span data-stu-id="87eac-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="87eac-247">Cada parte deste exemplo tenta toorun uma instrução insert parametrizada 1.000 vezes (toogenerate um suficientes toouse de carga como um conjunto de dados de teste).</span><span class="sxs-lookup"><span data-stu-id="87eac-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="87eac-248">Quando executa a procedimentos armazenados, o processador de consultas Olá examina o valor do parâmetro Olá que é transmitido toohello procedimento durante a respetiva compilação primeiro (parâmetro "de interceção").</span><span class="sxs-lookup"><span data-stu-id="87eac-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="87eac-249">processador Olá coloca em cache plano resultante Olá e utiliza-o para invocações posteriores, mesmo que o valor do parâmetro Olá é diferente.</span><span class="sxs-lookup"><span data-stu-id="87eac-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="87eac-250">plano de ideal Olá não pode ser utilizado em todos os casos.</span><span class="sxs-lookup"><span data-stu-id="87eac-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="87eac-251">Por vezes, precisa de tooguide Olá otimizador toopick um plano que é melhor para caso médio Olá em vez de caso específico Olá do quando Olá foi primeiro compilar a consulta.</span><span class="sxs-lookup"><span data-stu-id="87eac-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="87eac-252">Neste exemplo, o plano inicial Olá gera um plano de "verificação", que lê todas as linhas toofind cada valor que corresponde ao parâmetro Olá:</span><span class="sxs-lookup"><span data-stu-id="87eac-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Consulta de otimização através da utilização de um plano de análise](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="87eac-254">Porque o procedimento de Olá é executada através da utilização de valor de Olá 1, o plano resultante Olá foi ideal para o valor de Olá 1 mas não foi inferior ao ideal para todos os outros valores na tabela de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="87eac-255">resultado de Olá provavelmente não é o que seria aconselhável se foram toopick cada planear aleatoriamente, porque o plano de Olá efetua mais lentamente e utiliza mais recursos.</span><span class="sxs-lookup"><span data-stu-id="87eac-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="87eac-256">Se executar o teste de Olá com `SET STATISTICS IO` definido demasiado`ON`, trabalho de análise lógica Olá neste exemplo é efetuado em segundo plano de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="87eac-257">Pode ver que existem 1,148 leituras efetuadas pelo plano de Olá (que é ineficaz se caso médio Olá tooreturn apenas linha):</span><span class="sxs-lookup"><span data-stu-id="87eac-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Consulta de otimização, utilizando uma análise lógica](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="87eac-259">Olá segunda parte exemplo Olá utiliza uma consulta sugestão tootell Olá otimizador toouse um valor específico durante o processo de compilação de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="87eac-260">Neste caso, força-Olá processador tooignore Olá valor de consulta que é transmitido como parâmetro Olá, e, em vez disso, tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="87eac-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="87eac-261">Isto refere-se o valor de tooa com frequência médio Olá na tabela de Olá (ignorando o desfasamento).</span><span class="sxs-lookup"><span data-stu-id="87eac-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="87eac-262">plano de Olá resultante é um plano de com base na procura de mensagens em fila que é mais rápido e utiliza menos recursos, em média, Olá plano na parte 1 deste exemplo:</span><span class="sxs-lookup"><span data-stu-id="87eac-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Consulta de otimização, utilizando uma sugestão de consulta](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="87eac-264">Pode ver o efeito de Olá no Olá **resource_stats** tabela (há um atraso de tempo de Olá que executar o teste de Olá e quando os dados de Olá preenche tabela Olá).</span><span class="sxs-lookup"><span data-stu-id="87eac-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="87eac-265">Para este exemplo, parte 1 executada durante a janela de tempo Olá 25:22:00 e a parte 2 executada às 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="87eac-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="87eac-266">Olá anterior janela de tempo utilizada mais recursos nessa janela de tempo que Olá posteriormente, um (devido a melhorias de eficiência de plano).</span><span class="sxs-lookup"><span data-stu-id="87eac-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Consulta de otimização de resultados de exemplo](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="87eac-268">Embora seja intencionalmente pequeno volume Olá neste exemplo, efeito Olá dos parâmetros inferior ao ideal – pode ser significativo, especialmente nas bases de dados maiores.</span><span class="sxs-lookup"><span data-stu-id="87eac-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="87eac-269">diferença Olá, em casos extremos, pode estar entre segundos para casos rápidos e horas para os casos lentas.</span><span class="sxs-lookup"><span data-stu-id="87eac-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="87eac-270">Pode examinar **resource_stats** toodetermine se recursos Olá para um teste utiliza mais ou menos recursos do que outro teste.</span><span class="sxs-lookup"><span data-stu-id="87eac-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="87eac-271">Quando se comparam os dados, separe temporização Olá de testes para que não estão a ser Olá mesma janela de 5 minutos Olá **resource_stats** vista.</span><span class="sxs-lookup"><span data-stu-id="87eac-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="87eac-272">Olá objetivo exercício Olá é toominimize quantidade total de Olá dos recursos utilizados e não toominimize Olá das horas de ponta aos recursos.</span><span class="sxs-lookup"><span data-stu-id="87eac-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="87eac-273">Geralmente, otimizar um fragmento de código para latência também reduz o consumo de recursos.</span><span class="sxs-lookup"><span data-stu-id="87eac-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="87eac-274">Certifique-se de que são necessárias alterações de Olá efetuadas tooan aplicação e que as alterações de Olá negativamente não afetam a experiência do cliente Olá para alguém que possam estar a utilizar sugestões de consulta na aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="87eac-275">Se uma carga de trabalho tem um conjunto de repetir consultas, muitas vezes, faz sentido toocapture e validar optimality Olá das opções do plano porque unidades de Olá mínima de recursos tamanho unidade toohost necessário Olá da base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="87eac-276">Depois de validá-lo, ocasionalmente reexamine planos Olá que toohelp, certificar-se que não tenham degradado.</span><span class="sxs-lookup"><span data-stu-id="87eac-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="87eac-277">Pode saber mais sobre [consultar sugestões (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="87eac-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="87eac-278">Fragmentação entre bases de dados</span><span class="sxs-lookup"><span data-stu-id="87eac-278">Cross-database sharding</span></span>
<span data-ttu-id="87eac-279">Porque a SQL Database do Azure é executado no hardware do produto, os limites de capacidade de Olá para uma base de dados são inferiores para uma instalação do SQL Server tradicional no local.</span><span class="sxs-lookup"><span data-stu-id="87eac-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="87eac-280">Alguns clientes utilizam operações de base de dados de toospread de técnicas de fragmentação através de várias bases de dados quando as operações de Olá não cabem Olá limites de uma base de dados na base de dados do Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="87eac-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="87eac-281">A maioria dos clientes que utilizam técnicas de fragmentação na SQL Database do Azure dividir os seus dados numa única dimensão por várias bases de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="87eac-282">Para que esta abordagem tem toounderstand que aplicações OLTP frequentemente efetuar transações que se aplicam tooonly uma linha ou tooa pequeno grupo de linhas do esquema de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="87eac-283">Base de dados do SQL Server fornece agora tooassist uma biblioteca com fragmentação.</span><span class="sxs-lookup"><span data-stu-id="87eac-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="87eac-284">Para obter mais informações, consulte [descrição geral da biblioteca de cliente da linha de base de dados elástica](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="87eac-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="87eac-285">Por exemplo, se uma base de dados tiver o nome de cliente, a ordem e detalhes da encomenda (como Olá tradicionais de exemplo Northwind da base de dados que é fornecido com o SQL Server), foi dividir dados em várias bases de dados através do agrupamento de um cliente com Olá relacionadas com a ordem e os detalhes de ordem informações.</span><span class="sxs-lookup"><span data-stu-id="87eac-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="87eac-286">Pode garantir que dados desse cliente Olá permanecem na base de dados individual.</span><span class="sxs-lookup"><span data-stu-id="87eac-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="87eac-287">aplicação Olá seria dividir diferentes clientes por bases de dados, de forma eficaz propagando-se Olá carga em várias bases de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="87eac-288">Com fragmentação, os clientes não só podem evitar limite de tamanho máximo da base de dados de Olá, mas a SQL Database do Azure também pode processar as cargas de trabalho significativamente maiores do que os limites de Olá dos níveis de desempenho diferentes Olá, desde que cada base de dados individuais se ajusta à sua DTU.</span><span class="sxs-lookup"><span data-stu-id="87eac-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="87eac-289">Apesar de fragmentação de base de dados não reduzir a capacidade do recurso agregado Olá para uma solução, é altamente eficaz em soluções muito grande que são distribuídas por várias bases de dados de suporte.</span><span class="sxs-lookup"><span data-stu-id="87eac-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="87eac-290">Cada base de dados pode executar um desempenho diferentes nível toosupport muito grande, bases de dados "Efetivo" com requisitos de recursos elevados.</span><span class="sxs-lookup"><span data-stu-id="87eac-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="87eac-291">Criação de partições funcionais</span><span class="sxs-lookup"><span data-stu-id="87eac-291">Functional partitioning</span></span>
<span data-ttu-id="87eac-292">Utilizadores do SQL Server, muitas vezes, combinam muitas funções de uma base de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="87eac-293">Por exemplo, se uma aplicação tiver inventário de toomanage lógica para um arquivo, essa base de dados pode ter lógica associada inventário, controlar as ordens de compra, procedimentos armazenados e vistas indexadas ou materializadas que gerir relatórios do fim do mês.</span><span class="sxs-lookup"><span data-stu-id="87eac-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="87eac-294">Esta técnica torna mais fácil tooadminister Olá base de dados de operações como a cópia de segurança, mas também requer toosize Olá hardware toohandle Olá pico de carga em todas as funções de uma aplicação.</span><span class="sxs-lookup"><span data-stu-id="87eac-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="87eac-295">Se utilizar uma arquitetura de escalamento horizontal na SQL Database do Azure, é uma boa ideia toosplit diferentes funções de uma aplicação em bases de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="87eac-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="87eac-296">Ao utilizar esta técnica, cada aplicação dimensiona de forma independente.</span><span class="sxs-lookup"><span data-stu-id="87eac-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="87eac-297">Como uma aplicação fica busier (e Olá a carga aumenta de base de dados de Olá), o administrador de Olá pode escolher níveis de desempenho independente para cada função na aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="87eac-298">No limite Olá, com esta arquitetura, uma aplicação pode ser maior do que uma máquina de mercadoria único pode processar, porque a carga de Olá é distribuída por várias máquinas.</span><span class="sxs-lookup"><span data-stu-id="87eac-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="87eac-299">Consultas de batch</span><span class="sxs-lookup"><span data-stu-id="87eac-299">Batch queries</span></span>
<span data-ttu-id="87eac-300">Para aplicações que acedam aos dados através da utilização de volume elevado, frequentes, consultar o ad hoc, uma quantidade substancial de tempo de resposta é gasto em comunicações de rede entre a camada da aplicação Olá e a camada de base de dados do Azure SQL Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="87eac-301">Mesmo quando ambas Olá aplicação e a SQL Database do Azure estão em Olá mesmo centro de dados, latência de rede Olá entre Olá dois poderá ser magnified por um grande número de operações de acesso de dados.</span><span class="sxs-lookup"><span data-stu-id="87eac-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="87eac-302">rede de Olá tooreduce arredondar viagens para dados de Olá operações de acesso, considere utilizar Olá opção tooeither batch Olá consultas ad hoc ou toocompile-las como procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="87eac-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="87eac-303">Se o batch consultas ad hoc Olá, pode enviar várias consultas como um lote grande num tooAzure viagem única base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="87eac-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="87eac-304">Se compilar consultas ad hoc num procedimento armazenado, pode conseguir Olá que mesmo resultar como se o lote de-los.</span><span class="sxs-lookup"><span data-stu-id="87eac-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="87eac-305">Utilizar um procedimento armazenado também oferece Olá vantagem de aumentar as possibilidades de Olá de colocação em cache de planos de consulta Olá na SQL Database do Azure para poder utilizar Olá procedimento armazenado novamente.</span><span class="sxs-lookup"><span data-stu-id="87eac-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="87eac-306">Algumas aplicações são escrita intensivas.</span><span class="sxs-lookup"><span data-stu-id="87eac-306">Some applications are write-intensive.</span></span> <span data-ttu-id="87eac-307">Por vezes, pode reduzir o Olá total e/s de carga numa base de dados, considerar como toobatch escreve em conjunto.</span><span class="sxs-lookup"><span data-stu-id="87eac-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="87eac-308">Muitas vezes, isto é tão simple quanto utilizar transações explícitas em vez de transações de consolidação automática em lotes ad hoc e procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="87eac-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="87eac-309">Para uma edição de avaliação de diferentes técnicas que pode utilizar, consulte [técnicas para aplicações de base de dados SQL do Azure de criação de batches](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="87eac-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="87eac-310">Testar o suas próprias carga de trabalho toofind Olá direita modelo para a criação de batches.</span><span class="sxs-lookup"><span data-stu-id="87eac-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="87eac-311">Toounderstand se de que um modelo poderá ter de ser ligeiramente garante a consistência transacional diferentes.</span><span class="sxs-lookup"><span data-stu-id="87eac-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="87eac-312">Localizar Olá direita carga de trabalho que minimiza a utilização de recursos requer localizar combinação certa de Olá de compromissos consistência e o desempenho.</span><span class="sxs-lookup"><span data-stu-id="87eac-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="87eac-313">Colocação em cache de camada de aplicação</span><span class="sxs-lookup"><span data-stu-id="87eac-313">Application-tier caching</span></span>
<span data-ttu-id="87eac-314">Algumas aplicações de base de dados têm cargas de trabalho pesado de leitura.</span><span class="sxs-lookup"><span data-stu-id="87eac-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="87eac-315">Colocação em cache camadas pode reduzir a carga de Olá na base de dados de Olá e, possivelmente, poderá reduzir toosupport necessário ao nível de Olá desempenho uma base de dados ao utilizar a SQL Database do Azure.</span><span class="sxs-lookup"><span data-stu-id="87eac-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="87eac-316">Com [a Cache de Redis do Azure](https://azure.microsoft.com/services/cache/), se tiver uma carga de trabalho pesado de leitura, pode ler dados Olá uma vez (ou, talvez, uma vez por máquina de camada de aplicação, dependendo de como estiver configurado) e, em seguida, armazenar esses dados fora da sua base de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="87eac-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="87eac-317">Esta é uma forma tooreduce da base de dados de carga (CPU e e/s de leitura), mas não existe um efeito em consistência transacional porque os dados de Olá a ser lidos a partir da cache de Olá poderão ser sincronizados com os dados de Olá na base de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="87eac-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="87eac-318">Embora muitas aplicações algum nível de inconsistência é aceitável, que não é true para todas as cargas de trabalho.</span><span class="sxs-lookup"><span data-stu-id="87eac-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="87eac-319">Deve compreender os requisitos da aplicação antes de implementar uma estratégia de colocação em cache de camada de aplicação.</span><span class="sxs-lookup"><span data-stu-id="87eac-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87eac-320">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="87eac-320">Next steps</span></span>
* <span data-ttu-id="87eac-321">Para obter mais informações sobre os escalões de serviço, consulte [opções de base de dados SQL e o desempenho](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="87eac-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="87eac-322">Para obter mais informações sobre conjuntos elásticos, consulte [o que é um conjunto elástico do Azure?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="87eac-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="87eac-323">Para obter informações sobre agrupamentos de desempenho e elásticos, consulte [quando tooconsider agrupamento elástico](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="87eac-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

