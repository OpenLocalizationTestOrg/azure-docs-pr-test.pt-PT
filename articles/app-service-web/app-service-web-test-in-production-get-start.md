---
title: "aaaGet começar teste em produção para aplicações Web"
description: "Saiba mais sobre Olá teste na funcionalidade de produção (Sugestão) nas Web Apps do Azure App Service."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
ms.assetid: 4623468d-886e-4203-8012-8f86deb2790b
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/13/2016
ms.author: cephalin
ms.openlocfilehash: 2ddbd532ffe2a4f3e07fd386d9741a3fde3639ca
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-test-in-production-for-web-apps"></a><span data-ttu-id="0de96-103">Introdução ao teste na produção para Aplicações Web</span><span class="sxs-lookup"><span data-stu-id="0de96-103">Get started with test in production for Web Apps</span></span>
<span data-ttu-id="0de96-104">Testar na produção, ou em direto-testar a sua aplicação web utilizando o tráfego de cliente em direto, é uma estratégia de teste que os programadores de aplicações cada vez mais integram os seus [desenvolvimento seja ágil](https://en.wikipedia.org/wiki/Agile_software_development) metodologia.</span><span class="sxs-lookup"><span data-stu-id="0de96-104">Testing in production, or live-testing your web app using live customer traffic, is a test strategy that app developers increasingly integrate into their [agile development](https://en.wikipedia.org/wiki/Agile_software_development) methodology.</span></span> <span data-ttu-id="0de96-105">Permite-lhe qualidade de Olá tootest das suas aplicações com o tráfego de utilizador em direto no seu ambiente de produção, como dados de toosynthesized oposição num ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="0de96-105">It enables you tootest hello quality of your apps with live user traffic in your production environment, as opposed toosynthesized data in a test environment.</span></span> <span data-ttu-id="0de96-106">Resultariam da exposição seus novos utilizadores tooreal da aplicação, pode ser informado sobre problemas reais de Olá que a aplicação poderá enfrentam assim que for implementado.</span><span class="sxs-lookup"><span data-stu-id="0de96-106">By exposing your new app tooreal users, you can be informed on hello real problems your app may face once it is deployed.</span></span> <span data-ttu-id="0de96-107">Pode verificar a funcionalidade de Olá, o desempenho e o valor das atualizações de aplicação contra volume Olá, a velocidade e a variedade de tráfego de utilizador reais, que nunca pode aproximada num ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="0de96-107">You can verify hello functionality, performance, and value of your app updates against hello volume, velocity, and variety of real user traffic, which you can never approximate in a test environment.</span></span>

## <a name="traffic-routing-in-app-service-web-apps"></a><span data-ttu-id="0de96-108">Tráfego de encaminhamento na Web Apps do App Service</span><span class="sxs-lookup"><span data-stu-id="0de96-108">Traffic Routing in App Service Web Apps</span></span>
<span data-ttu-id="0de96-109">Com o encaminhamento de tráfego de Olá funcionalidade em [App Service do Azure](http://go.microsoft.com/fwlink/?LinkId=529714), pode direcionar uma parte do utilizador em direto tráfego tooone ou mais [ranhuras de implementação](web-sites-staged-publishing.md)e, em seguida, analise a sua aplicação com [aplicação do Azure Insights](/services/application-insights/) ou [Azure HDInsight](/services/hdinsight/), ou uma ferramenta de terceiros, como [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate a alteração.</span><span class="sxs-lookup"><span data-stu-id="0de96-109">With hello Traffic Routing feature in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714), you can direct a portion of live user traffic tooone or more [deployment slots](web-sites-staged-publishing.md), and then analyze your app with [Azure Application Insights](/services/application-insights/) or [Azure HDInsight](/services/hdinsight/), or a third-party tool like [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate your change.</span></span> <span data-ttu-id="0de96-110">Por exemplo, pode implementar Olá os seguintes cenários com o serviço de aplicações:</span><span class="sxs-lookup"><span data-stu-id="0de96-110">For example, you can implement hello following scenarios with App Service:</span></span>

* <span data-ttu-id="0de96-111">Detetar erros funcionais ou identificar estrangulamentos de desempenho na sua implementação de todo o toosite anterior de atualizações</span><span class="sxs-lookup"><span data-stu-id="0de96-111">Discover functional bugs or pinpoint performance bottlenecks in your updates prior toosite-wide deployment</span></span>
* <span data-ttu-id="0de96-112">Efetuar o "teste controlada flights" das alterações ao medir as métricas de utilização na aplicação de beta Olá</span><span class="sxs-lookup"><span data-stu-id="0de96-112">Perform "controlled test flights" of your changes by measuring usability metrics on hello beta app</span></span>
* <span data-ttu-id="0de96-113">Gradualmente atualizem tooa nova atualização e transições fazer uma cópia para baixo a versão atual do toohello se ocorrer um erro</span><span class="sxs-lookup"><span data-stu-id="0de96-113">Gradually ramp up tooa new update, and gracefully back down toohello current version if an error occurs</span></span> 
* <span data-ttu-id="0de96-114">Otimizar os resultados de negócios da sua aplicação executando [A / B testa](https://en.wikipedia.org/wiki/A/B_testing) ou [testes multivariate](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) em várias ranhuras de implementação</span><span class="sxs-lookup"><span data-stu-id="0de96-114">Optimize your app's business results by running [A/B tests](https://en.wikipedia.org/wiki/A/B_testing) or [multivariate tests](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) in multiple deployment slots</span></span>

### <a name="requirements-for-using-traffic-routing-in-web-apps"></a><span data-ttu-id="0de96-115">Requisitos para utilizar o encaminhamento de tráfego nas Web Apps</span><span class="sxs-lookup"><span data-stu-id="0de96-115">Requirements for using Traffic Routing in Web Apps</span></span>
* <span data-ttu-id="0de96-116">A aplicação web tem de executar **padrão** ou **Premium** camada, conforme necessário para vários blocos de implementação.</span><span class="sxs-lookup"><span data-stu-id="0de96-116">Your web app must run in **Standard** or **Premium** tier, as it is required for multiple deployment slots.</span></span>
* <span data-ttu-id="0de96-117">Na ordem toowork corretamente, o encaminhamento de tráfego necessita de toobe cookies ativada no browser dos utilizadores Olá.</span><span class="sxs-lookup"><span data-stu-id="0de96-117">In order toowork properly, Traffic Routing requires cookies toobe enabled in hello users' browser.</span></span> <span data-ttu-id="0de96-118">Encaminhamento de tráfego utiliza cookies toopin uma ranhura de implementação do cliente browser tooa para a sessão de cliente do Olá vida Olá.</span><span class="sxs-lookup"><span data-stu-id="0de96-118">Traffic Routing uses cookies toopin a client browser tooa deployment slot for hello life hello client session.</span></span>
* <span data-ttu-id="0de96-119">Encaminhamento de tráfego suporta cenários avançados de sugestão através de cmdlets do PowerShell do Azure.</span><span class="sxs-lookup"><span data-stu-id="0de96-119">Traffic Routing supports advanced TiP scenarios through Azure PowerShell cmdlets.</span></span>

## <a name="route-traffic-segment-tooa-deployment-slot"></a><span data-ttu-id="0de96-120">Ranhura de implementação de tooa de segmento de tráfego de rotas</span><span class="sxs-lookup"><span data-stu-id="0de96-120">Route traffic segment tooa deployment slot</span></span>
<span data-ttu-id="0de96-121">No nível básico Olá, cada cenário de sugestão, encaminhar uma percentagem predefinida do seu bloco de implementação de não produção de tooa de tráfego em direto.</span><span class="sxs-lookup"><span data-stu-id="0de96-121">At hello basic level in every TiP scenario, you route a predefined percentage of your live traffic tooa non-production deployment slot.</span></span> <span data-ttu-id="0de96-122">toodo passos de Olá, siga abaixo:</span><span class="sxs-lookup"><span data-stu-id="0de96-122">toodo this, follow hello steps below:</span></span>

> [!NOTE]
> <span data-ttu-id="0de96-123">Olá passos aqui descritos pressupõe que já tem um [ranhura de implementação de não produção](web-sites-staged-publishing.md) e esse Olá pretendido conteúdo de aplicação web já está [implementado](web-sites-deploy.md) tooit.</span><span class="sxs-lookup"><span data-stu-id="0de96-123">hello steps here assumes that you already have a [non-production deployment slot](web-sites-staged-publishing.md) and that hello desired web app content is already [deployed](web-sites-deploy.md) tooit.</span></span>
> 
> 

1. <span data-ttu-id="0de96-124">Iniciar sessão Olá [Portal do Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="0de96-124">Log into hello [Azure Portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="0de96-125">No painel da sua aplicação web, clique em **definições** > **o encaminhamento de tráfego**.</span><span class="sxs-lookup"><span data-stu-id="0de96-125">In your web app's blade, click **Settings** > **Traffic Routing**.</span></span>
   ![](./media/app-service-web-test-in-production/01-traffic-routing.png)
3. <span data-ttu-id="0de96-126">Ranhura de Olá selecione que pretende que percentagem do tooroute tráfego tooand Olá do tráfego total de Olá pretendidos ao nível, em seguida, clique em **guardar**.</span><span class="sxs-lookup"><span data-stu-id="0de96-126">Select hello slot that you want tooroute traffic tooand hello percentage of hello total traffic you desire, then click **Save**.</span></span>
   
    ![](./media/app-service-web-test-in-production/02-select-slot.png)
4. <span data-ttu-id="0de96-127">Painel do bloco de implementação toohello aceda.</span><span class="sxs-lookup"><span data-stu-id="0de96-127">Go toohello deployment slot's blade.</span></span> <span data-ttu-id="0de96-128">Deverá ver agora a ser encaminhado tooit de tráfego em direto.</span><span class="sxs-lookup"><span data-stu-id="0de96-128">You should now see live traffic being routed tooit.</span></span>
   
    ![](./media/app-service-web-test-in-production/03-traffic-routed.png)

<span data-ttu-id="0de96-129">Depois de configurar o encaminhamento de tráfego, Olá especificar a percentagem de clientes serão aleatoriamente encaminhadas tooyour ranhura de não produção.</span><span class="sxs-lookup"><span data-stu-id="0de96-129">Once Traffic Routing is configured, hello specified percentage of clients will be randomly routed tooyour non-production slot.</span></span> <span data-ttu-id="0de96-130">No entanto, é importante toonote assim que um cliente estiver ranhura específico tooa automaticamente encaminhadas, a ranhura de "afixado" toothat para vida Olá dessa sessão de cliente.</span><span class="sxs-lookup"><span data-stu-id="0de96-130">However, it is important toonote that once a client is automatically routed tooa specific slot, it will be "pinned" toothat slot for hello life of that client session.</span></span> <span data-ttu-id="0de96-131">Isto feito através de uma sessão de utilizador do cookie toopin Olá.</span><span class="sxs-lookup"><span data-stu-id="0de96-131">This done using a cookie toopin hello user session.</span></span> <span data-ttu-id="0de96-132">Se inspecionar os pedidos HTTP de Olá, irá encontrar um `TipMix` cookie em cada pedido subsequente.</span><span class="sxs-lookup"><span data-stu-id="0de96-132">If you inspect hello HTTP requests, you will find a `TipMix` cookie in every subsequent request.</span></span>

![](./media/app-service-web-test-in-production/04-tip-cookie.png)

## <a name="force-client-requests-tooa-specific-slot"></a><span data-ttu-id="0de96-133">Forçar ranhura específico do tooa de pedidos de cliente</span><span class="sxs-lookup"><span data-stu-id="0de96-133">Force client requests tooa specific slot</span></span>
<span data-ttu-id="0de96-134">Na adição tooautomatic o encaminhamento de tráfego, o serviço de aplicações é ranhura do tooroute capaz de pedidos tooa específico.</span><span class="sxs-lookup"><span data-stu-id="0de96-134">In addition tooautomatic traffic routing, App Service is able tooroute requests tooa specific slot.</span></span> <span data-ttu-id="0de96-135">Isto é útil quando pretender que o seu tooopt capaz de toobe utilizadores- ou a ativamente da sua aplicação beta.</span><span class="sxs-lookup"><span data-stu-id="0de96-135">This is useful when you want your users toobe able tooopt-into or opt-out of your beta app.</span></span> <span data-ttu-id="0de96-136">toodo isto, utilize Olá `x-ms-routing-name` parâmetro de consulta.</span><span class="sxs-lookup"><span data-stu-id="0de96-136">toodo this, you use hello `x-ms-routing-name` query parameter.</span></span>

<span data-ttu-id="0de96-137">tooreroute utilizadores tooa ranhura específica a utilizar `x-ms-routing-name`, tem de se certificar de que ranhura Olá já foi adicionada a lista de encaminhamento de tráfego toohello.</span><span class="sxs-lookup"><span data-stu-id="0de96-137">tooreroute users tooa specific slot using `x-ms-routing-name`, you must make sure that hello slot is already added toohello Traffic Routing list.</span></span> <span data-ttu-id="0de96-138">Uma vez que pretendem tooroute tooa ranhura explicitamente, não interessa Olá real encaminhamento percentagem de definir.</span><span class="sxs-lookup"><span data-stu-id="0de96-138">Since you want tooroute tooa slot explicitly, hello actual routing percentage you set doesn't matter.</span></span> <span data-ttu-id="0de96-139">Se quiser, pode craft uma "ligação beta" que os utilizadores podem clicar tooaccess Olá aplicação beta.</span><span class="sxs-lookup"><span data-stu-id="0de96-139">If you want, you can craft a "beta link" that users can click tooaccess hello beta app.</span></span>

![](./media/app-service-web-test-in-production/06-enable-x-ms-routing-name.png)

### <a name="opt-users-out-of-beta-app"></a><span data-ttu-id="0de96-140">Optar ativamente por participar utilizadores fora da aplicação de beta</span><span class="sxs-lookup"><span data-stu-id="0de96-140">Opt users out of beta app</span></span>
<span data-ttu-id="0de96-141">optar ativamente por participar toolet utilizadores fora da sua aplicação beta, por exemplo, pode colocar esta ligação na sua página web:</span><span class="sxs-lookup"><span data-stu-id="0de96-141">toolet users opt out of your beta app, for example, you can put this link in your web page:</span></span>

    <a href="<webappname>.azurewebsites.net/?x-ms-routing-name=self">Go back tooproduction app</a>

<span data-ttu-id="0de96-142">Olá cadeia `x-ms-routing-name=self` Especifica a ranhura de produção Olá.</span><span class="sxs-lookup"><span data-stu-id="0de96-142">hello string `x-ms-routing-name=self` specifies hello production slot.</span></span> <span data-ttu-id="0de96-143">Assim hello ligação de Olá do acesso de browser do cliente, não só é redirecionado-toohello ranhura de produção, mas todos os pedidos subsequentes irão conter Olá `x-ms-routing-name=self` cookie que pins ranhura de produção do Olá sessão toohello.</span><span class="sxs-lookup"><span data-stu-id="0de96-143">Once hello client browser access hello link, not only is it redirected toohello production slot, but every subsequent request will contain hello `x-ms-routing-name=self` cookie that pins hello session toohello production slot.</span></span>

![](./media/app-service-web-test-in-production/05-access-production-slot.png)

### <a name="opt-users-in-toobeta-app"></a><span data-ttu-id="0de96-144">Optar ativamente por utilizadores na aplicação toobeta</span><span class="sxs-lookup"><span data-stu-id="0de96-144">Opt users in toobeta app</span></span>
<span data-ttu-id="0de96-145">utilizadores de toolet optar ativamente por participar na aplicação de beta tooyour, conjunto Olá mesmo consultar o nome do parâmetro toohello da ranhura de produção não Olá, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="0de96-145">toolet users opt in tooyour beta app, set hello same query parameter toohello name of hello non-production slot, for example:</span></span>

        <webappname>.azurewebsites.net/?x-ms-routing-name=staging

## <a name="more-resources"></a><span data-ttu-id="0de96-146">Mais recursos</span><span class="sxs-lookup"><span data-stu-id="0de96-146">More resources</span></span>
* [<span data-ttu-id="0de96-147">Configurar ambientes para web apps no App Service do Azure de teste</span><span class="sxs-lookup"><span data-stu-id="0de96-147">Set up staging environments for web apps in Azure App Service</span></span>](web-sites-staged-publishing.md)
* [<span data-ttu-id="0de96-148">Implementar uma aplicação complexa previsibilidade no Azure</span><span class="sxs-lookup"><span data-stu-id="0de96-148">Deploy a complex application predictably in Azure</span></span>](app-service-deploy-complex-application-predictably.md)
* [<span data-ttu-id="0de96-149">Desenvolvimento de software seja ágil App Service do Azure</span><span class="sxs-lookup"><span data-stu-id="0de96-149">Agile software development with Azure App Service</span></span>](app-service-agile-software-development.md)
* [<span data-ttu-id="0de96-150">Utilizar eficazmente os ambientes de DevOps para as suas aplicações web</span><span class="sxs-lookup"><span data-stu-id="0de96-150">Use DevOps environments effectively for your web apps</span></span>](app-service-web-staged-publishing-realworld-scenarios.md)

