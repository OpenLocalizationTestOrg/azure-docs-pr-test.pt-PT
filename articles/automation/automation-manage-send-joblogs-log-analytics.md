---
title: "aaaForward tooOMS de dados de tarefa de automatização do Azure Log Analytics | Microsoft Docs"
description: "Este artigo demonstra como a tarefa de runbook e o estado da tarefa toosend fluxos informações adicionais do tooMicrosoft análise de registos do Operations Management Suite toodeliver e gestão."
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="6138b-103">Reencaminhar o estado da tarefa e fluxos de trabalho de automatização tooLog análise (OMS)</span><span class="sxs-lookup"><span data-stu-id="6138b-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="6138b-104">Automatização pode enviar runbook tarefa estado e tarefa fluxos tooyour análise de registos do Microsoft Operations Management Suite (OMS) área de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6138b-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="6138b-105">Os registos de tarefa e fluxos de trabalho são visíveis no Olá portal do Azure, ou com o PowerShell, para tarefas individuais e Isto permite-lhe as investigações simples de tooperform.</span><span class="sxs-lookup"><span data-stu-id="6138b-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="6138b-106">Agora com a análise de registos, pode:</span><span class="sxs-lookup"><span data-stu-id="6138b-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="6138b-107">Obter conhecimentos aprofundados sobre as tarefas de automatização</span><span class="sxs-lookup"><span data-stu-id="6138b-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="6138b-108">Acionamento um e-mail ou o alerta com base no seu estado de tarefa de runbook (por exemplo, falha ou suspenso)</span><span class="sxs-lookup"><span data-stu-id="6138b-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="6138b-109">Escrever consultas avançadas nos seus fluxos de trabalho</span><span class="sxs-lookup"><span data-stu-id="6138b-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="6138b-110">Correlacionar tarefas em contas de automatização</span><span class="sxs-lookup"><span data-stu-id="6138b-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="6138b-111">Visualizar o histórico do trabalho ao longo do tempo</span><span class="sxs-lookup"><span data-stu-id="6138b-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="6138b-112">Pré-requisitos e considerações de implementação</span><span class="sxs-lookup"><span data-stu-id="6138b-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="6138b-113">toostart enviar a automatização tooLog análise de registos, tem de:</span><span class="sxs-lookup"><span data-stu-id="6138b-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="6138b-114">Olá Novembro de 2016 ou versão posterior do [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="6138b-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="6138b-115">Uma área de trabalho de análise de registos.</span><span class="sxs-lookup"><span data-stu-id="6138b-115">A Log Analytics workspace.</span></span> <span data-ttu-id="6138b-116">Para obter mais informações, consulte [introdução à análise de registos](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="6138b-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="6138b-117">Olá ResourceId para a sua conta de automatização do Azure</span><span class="sxs-lookup"><span data-stu-id="6138b-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="6138b-118">toofind Olá ResourceId para a conta de automatização do Azure e a área de trabalho de análise de registos, execute Olá PowerShell os seguintes:</span><span class="sxs-lookup"><span data-stu-id="6138b-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="6138b-119">Se tiver várias contas de automatização ou áreas de trabalho, resultado Olá Olá precedente comandos, localize Olá *nome* precisar tooconfigure e copie o valor de Olá para *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="6138b-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="6138b-120">Se precisar de toofind Olá *nome* da sua conta de automatização na Olá portal do Azure selecione a conta de automatização de Olá **conta de automatização** painel e selecione **todas as definições**.</span><span class="sxs-lookup"><span data-stu-id="6138b-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="6138b-121">De Olá **todas as definições** painel, em **as definições da conta** selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="6138b-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="6138b-122">No Olá **propriedades** painel, pode ter em atenção estes valores.</span><span class="sxs-lookup"><span data-stu-id="6138b-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="6138b-123">![Propriedades da conta de automatização](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="6138b-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="6138b-124">Configurar a integração com a análise de registos</span><span class="sxs-lookup"><span data-stu-id="6138b-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="6138b-125">No seu computador, inicie **do Windows PowerShell** de Olá **iniciar** ecrã.</span><span class="sxs-lookup"><span data-stu-id="6138b-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="6138b-126">Copiar e colar Olá seguir o PowerShell e editar o valor de Olá para Olá `$workspaceId` e `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="6138b-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="6138b-127">Para Olá `-Environment` parâmetro, os valores válidos são *AzureCloud* ou *AzureUSGovernment* consoante estiver a trabalhar num ambiente de nuvem de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="6138b-128">Depois de executar este script, irá ver registos de análise de registos dentro de 10 minutos de novos JobLogs ou JobStreams que está a ser escrito.</span><span class="sxs-lookup"><span data-stu-id="6138b-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="6138b-129">toosee Olá os registos, executados Olá seguinte de consulta em pesquisa de registos de análise de registos:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="6138b-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="6138b-130">Verifique a configuração</span><span class="sxs-lookup"><span data-stu-id="6138b-130">Verify configuration</span></span>
<span data-ttu-id="6138b-131">tooconfirm que está a sua conta de automatização enviar registos de área de trabalho de análise de registos de tooyour, verifique que diagnóstico está definido corretamente na conta de automatização de Olá com Olá PowerShell os seguintes:</span><span class="sxs-lookup"><span data-stu-id="6138b-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="6138b-132">Na saída de Olá Certifique-se de que:</span><span class="sxs-lookup"><span data-stu-id="6138b-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="6138b-133">Em *registos*, Olá valor para *ativado* é *verdadeiro*</span><span class="sxs-lookup"><span data-stu-id="6138b-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="6138b-134">Olá valor *WorkspaceId* está definido toohello ResourceId da sua área de trabalho de análise de registos</span><span class="sxs-lookup"><span data-stu-id="6138b-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="6138b-135">Registos do Log Analytics</span><span class="sxs-lookup"><span data-stu-id="6138b-135">Log Analytics records</span></span>
<span data-ttu-id="6138b-136">Cria dois tipos de registos de análise de registos de diagnóstico da automatização do Azure e é etiquetado como **tipo = AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="6138b-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="6138b-137">Registos da tarefa</span><span class="sxs-lookup"><span data-stu-id="6138b-137">Job Logs</span></span>
| <span data-ttu-id="6138b-138">Propriedade</span><span class="sxs-lookup"><span data-stu-id="6138b-138">Property</span></span> | <span data-ttu-id="6138b-139">Descrição</span><span class="sxs-lookup"><span data-stu-id="6138b-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6138b-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="6138b-140">TimeGenerated</span></span> |<span data-ttu-id="6138b-141">Data e hora quando executar a tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="6138b-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="6138b-142">RunbookName_s</span></span> |<span data-ttu-id="6138b-143">nome de Olá de Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="6138b-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="6138b-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="6138b-144">Caller_s</span></span> |<span data-ttu-id="6138b-145">Quem iniciou a operação de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-145">Who initiated hello operation.</span></span>  <span data-ttu-id="6138b-146">Os valores possíveis são um endereço de e-mail ou o sistema para trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="6138b-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="6138b-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="6138b-147">Tenant_g</span></span> | <span data-ttu-id="6138b-148">GUID que identifica o inquilino Olá para Olá autor da chamada.</span><span class="sxs-lookup"><span data-stu-id="6138b-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="6138b-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="6138b-149">JobId_g</span></span> |<span data-ttu-id="6138b-150">GUID que é Olá Id da tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="6138b-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="6138b-151">ResultType</span></span> |<span data-ttu-id="6138b-152">Estado da tarefa de runbook Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="6138b-153">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="6138b-153">Possible values are:</span></span><br><span data-ttu-id="6138b-154">- Iniciado</span><span class="sxs-lookup"><span data-stu-id="6138b-154">- Started</span></span><br><span data-ttu-id="6138b-155">- Parado</span><span class="sxs-lookup"><span data-stu-id="6138b-155">- Stopped</span></span><br><span data-ttu-id="6138b-156">- Suspenso</span><span class="sxs-lookup"><span data-stu-id="6138b-156">- Suspended</span></span><br><span data-ttu-id="6138b-157">- Falhado</span><span class="sxs-lookup"><span data-stu-id="6138b-157">- Failed</span></span><br><span data-ttu-id="6138b-158">-Concluída</span><span class="sxs-lookup"><span data-stu-id="6138b-158">- Completed</span></span> |
| <span data-ttu-id="6138b-159">Categoria</span><span class="sxs-lookup"><span data-stu-id="6138b-159">Category</span></span> | <span data-ttu-id="6138b-160">Classificação do tipo de Olá de dados.</span><span class="sxs-lookup"><span data-stu-id="6138b-160">Classification of hello type of data.</span></span>  <span data-ttu-id="6138b-161">Para automatização, o valor de Olá é JobLogs.</span><span class="sxs-lookup"><span data-stu-id="6138b-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="6138b-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="6138b-162">OperationName</span></span> | <span data-ttu-id="6138b-163">Especifica o tipo de Olá da operação efetuada no Azure.</span><span class="sxs-lookup"><span data-stu-id="6138b-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="6138b-164">Para automatização, o valor de Olá é tarefa.</span><span class="sxs-lookup"><span data-stu-id="6138b-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="6138b-165">Recurso</span><span class="sxs-lookup"><span data-stu-id="6138b-165">Resource</span></span> | <span data-ttu-id="6138b-166">Nome da conta de automatização de Olá</span><span class="sxs-lookup"><span data-stu-id="6138b-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="6138b-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="6138b-167">SourceSystem</span></span> | <span data-ttu-id="6138b-168">Como a análise de registos recolhidos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="6138b-169">Sempre *Azure* para diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="6138b-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="6138b-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="6138b-170">ResultDescription</span></span> |<span data-ttu-id="6138b-171">Descreve o estado de resultado da tarefa de runbook de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="6138b-172">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="6138b-172">Possible values are:</span></span><br><span data-ttu-id="6138b-173">- Trabalho iniciado</span><span class="sxs-lookup"><span data-stu-id="6138b-173">- Job is started</span></span><br><span data-ttu-id="6138b-174">- Trabalho falhado</span><span class="sxs-lookup"><span data-stu-id="6138b-174">- Job Failed</span></span><br><span data-ttu-id="6138b-175">- Trabalho Concluído</span><span class="sxs-lookup"><span data-stu-id="6138b-175">- Job Completed</span></span> |
| <span data-ttu-id="6138b-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="6138b-176">CorrelationId</span></span> |<span data-ttu-id="6138b-177">GUID que é Olá Id de correlação da tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="6138b-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="6138b-178">ResourceId</span></span> |<span data-ttu-id="6138b-179">Especifica o id do recurso de conta de automatização do Azure do Olá de Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="6138b-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="6138b-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="6138b-180">SubscriptionId</span></span> | <span data-ttu-id="6138b-181">Olá subscrição do Azure Id (GUID) para Olá conta de automatização.</span><span class="sxs-lookup"><span data-stu-id="6138b-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="6138b-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="6138b-182">ResourceGroup</span></span> | <span data-ttu-id="6138b-183">Nome do grupo de recursos de Olá para Olá conta de automatização.</span><span class="sxs-lookup"><span data-stu-id="6138b-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="6138b-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="6138b-184">ResourceProvider</span></span> | <span data-ttu-id="6138b-185">MICROSOFT. AUTOMATIZAÇÃO</span><span class="sxs-lookup"><span data-stu-id="6138b-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="6138b-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="6138b-186">ResourceType</span></span> | <span data-ttu-id="6138b-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="6138b-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="6138b-188">Fluxos de trabalho</span><span class="sxs-lookup"><span data-stu-id="6138b-188">Job Streams</span></span>
| <span data-ttu-id="6138b-189">Propriedade</span><span class="sxs-lookup"><span data-stu-id="6138b-189">Property</span></span> | <span data-ttu-id="6138b-190">Descrição</span><span class="sxs-lookup"><span data-stu-id="6138b-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6138b-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="6138b-191">TimeGenerated</span></span> |<span data-ttu-id="6138b-192">Data e hora quando executar a tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="6138b-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="6138b-193">RunbookName_s</span></span> |<span data-ttu-id="6138b-194">nome de Olá de Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="6138b-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="6138b-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="6138b-195">Caller_s</span></span> |<span data-ttu-id="6138b-196">Quem iniciou a operação de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-196">Who initiated hello operation.</span></span>  <span data-ttu-id="6138b-197">Os valores possíveis são um endereço de e-mail ou o sistema para trabalhos agendados.</span><span class="sxs-lookup"><span data-stu-id="6138b-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="6138b-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="6138b-198">StreamType_s</span></span> |<span data-ttu-id="6138b-199">tipo de Olá do fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="6138b-199">hello type of job stream.</span></span> <span data-ttu-id="6138b-200">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="6138b-200">Possible values are:</span></span><br><span data-ttu-id="6138b-201">- Em Curso</span><span class="sxs-lookup"><span data-stu-id="6138b-201">-Progress</span></span><br><span data-ttu-id="6138b-202">- Saída</span><span class="sxs-lookup"><span data-stu-id="6138b-202">- Output</span></span><br><span data-ttu-id="6138b-203">- Aviso</span><span class="sxs-lookup"><span data-stu-id="6138b-203">- Warning</span></span><br><span data-ttu-id="6138b-204">- Erro</span><span class="sxs-lookup"><span data-stu-id="6138b-204">- Error</span></span><br><span data-ttu-id="6138b-205">- Depuração</span><span class="sxs-lookup"><span data-stu-id="6138b-205">- Debug</span></span><br><span data-ttu-id="6138b-206">- Verboso</span><span class="sxs-lookup"><span data-stu-id="6138b-206">- Verbose</span></span> |
| <span data-ttu-id="6138b-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="6138b-207">Tenant_g</span></span> | <span data-ttu-id="6138b-208">GUID que identifica o inquilino Olá para Olá autor da chamada.</span><span class="sxs-lookup"><span data-stu-id="6138b-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="6138b-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="6138b-209">JobId_g</span></span> |<span data-ttu-id="6138b-210">GUID que é Olá Id da tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="6138b-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="6138b-211">ResultType</span></span> |<span data-ttu-id="6138b-212">Estado da tarefa de runbook Olá Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="6138b-213">Os valores possíveis são:</span><span class="sxs-lookup"><span data-stu-id="6138b-213">Possible values are:</span></span><br><span data-ttu-id="6138b-214">-Em curso</span><span class="sxs-lookup"><span data-stu-id="6138b-214">- In Progress</span></span> |
| <span data-ttu-id="6138b-215">Categoria</span><span class="sxs-lookup"><span data-stu-id="6138b-215">Category</span></span> | <span data-ttu-id="6138b-216">Classificação do tipo de Olá de dados.</span><span class="sxs-lookup"><span data-stu-id="6138b-216">Classification of hello type of data.</span></span>  <span data-ttu-id="6138b-217">Para automatização, o valor de Olá é JobStreams.</span><span class="sxs-lookup"><span data-stu-id="6138b-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="6138b-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="6138b-218">OperationName</span></span> | <span data-ttu-id="6138b-219">Especifica o tipo de Olá da operação efetuada no Azure.</span><span class="sxs-lookup"><span data-stu-id="6138b-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="6138b-220">Para automatização, o valor de Olá é tarefa.</span><span class="sxs-lookup"><span data-stu-id="6138b-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="6138b-221">Recurso</span><span class="sxs-lookup"><span data-stu-id="6138b-221">Resource</span></span> | <span data-ttu-id="6138b-222">Nome da conta de automatização de Olá</span><span class="sxs-lookup"><span data-stu-id="6138b-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="6138b-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="6138b-223">SourceSystem</span></span> | <span data-ttu-id="6138b-224">Como a análise de registos recolhidos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="6138b-225">Sempre *Azure* para diagnóstico do Azure.</span><span class="sxs-lookup"><span data-stu-id="6138b-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="6138b-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="6138b-226">ResultDescription</span></span> |<span data-ttu-id="6138b-227">Inclui o fluxo de saída de Olá do runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="6138b-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="6138b-228">CorrelationId</span></span> |<span data-ttu-id="6138b-229">GUID que é Olá Id de correlação da tarefa de runbook Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="6138b-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="6138b-230">ResourceId</span></span> |<span data-ttu-id="6138b-231">Especifica o id do recurso de conta de automatização do Azure do Olá de Olá runbook.</span><span class="sxs-lookup"><span data-stu-id="6138b-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="6138b-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="6138b-232">SubscriptionId</span></span> | <span data-ttu-id="6138b-233">Olá subscrição do Azure Id (GUID) para Olá conta de automatização.</span><span class="sxs-lookup"><span data-stu-id="6138b-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="6138b-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="6138b-234">ResourceGroup</span></span> | <span data-ttu-id="6138b-235">Nome do grupo de recursos de Olá para Olá conta de automatização.</span><span class="sxs-lookup"><span data-stu-id="6138b-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="6138b-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="6138b-236">ResourceProvider</span></span> | <span data-ttu-id="6138b-237">MICROSOFT. AUTOMATIZAÇÃO</span><span class="sxs-lookup"><span data-stu-id="6138b-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="6138b-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="6138b-238">ResourceType</span></span> | <span data-ttu-id="6138b-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="6138b-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="6138b-240">Visualizar automatização registos de análise de registos</span><span class="sxs-lookup"><span data-stu-id="6138b-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="6138b-241">Agora que iniciou a enviar o tooLog de registos de tarefa de automatização análise, vamos ver o que pode fazer com estes registos no interior de análise de registos.</span><span class="sxs-lookup"><span data-stu-id="6138b-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="6138b-242">toosee Olá os registos, executados Olá seguinte consulta:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="6138b-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="6138b-243">Envie um e-mail quando uma tarefa de runbook falha ou suspende</span><span class="sxs-lookup"><span data-stu-id="6138b-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="6138b-244">Uma das nossa principal cliente pede-lhe destina-se Olá capacidade toosend um texto ou um e-mail quando algo não bate com uma tarefa de runbook.</span><span class="sxs-lookup"><span data-stu-id="6138b-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="6138b-245">regra de toocreate um alerta, que comece por criar uma pesquisa de registo do runbook Olá registos de tarefa que devem invocar alerta Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="6138b-246">Clique em Olá **alerta** botão toocreate e configurar a regra de alerta de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="6138b-247">Na página de descrição geral da análise do registo de Olá, clique em **pesquisa registo**.</span><span class="sxs-lookup"><span data-stu-id="6138b-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="6138b-248">Criar uma consulta de pesquisa de registo para o alerta, escrevendo Olá seguir pesquisa no campo de consulta Olá: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` também pode agrupar por Olá RunbookName utilizando:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="6138b-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="6138b-249">Se configurou os registos de mais do que uma conta ou a subscrição tooyour área de trabalho automatização, pode agrupar os alertas por subscrição e conta de automatização.</span><span class="sxs-lookup"><span data-stu-id="6138b-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="6138b-250">Nome da conta de automatização pode ser derivado de campo de recursos de Olá na pesquisa de Olá de JobLogs.</span><span class="sxs-lookup"><span data-stu-id="6138b-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="6138b-251">Olá tooopen **Adicionar regra de alerta** ecrã, clique em **alerta** em Olá parte superior da página Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="6138b-252">Para obter mais detalhes sobre o alerta do Olá opções tooconfigure Olá, consulte [alertas na análise de registos](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="6138b-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="6138b-253">Localizar todas as tarefas que foram concluídas com erros</span><span class="sxs-lookup"><span data-stu-id="6138b-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="6138b-254">Além disso tooalerting sobre falhas, pode encontrar quando uma tarefa de runbook tem um erro de não interrupção.</span><span class="sxs-lookup"><span data-stu-id="6138b-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="6138b-255">Nestes casos PowerShell produz uma sequência de erro, mas a erros de não interrupção Olá não fazer com que a tarefa toosuspend ou falhar.</span><span class="sxs-lookup"><span data-stu-id="6138b-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="6138b-256">Na sua área de trabalho de análise de registos, clique em **pesquisa registo**.</span><span class="sxs-lookup"><span data-stu-id="6138b-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="6138b-257">No campo de consulta Olá, escreva `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` e, em seguida, clique em **pesquisa**.</span><span class="sxs-lookup"><span data-stu-id="6138b-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="6138b-258">Fluxos de trabalho de vista de uma tarefa</span><span class="sxs-lookup"><span data-stu-id="6138b-258">View job streams for a job</span></span>
<span data-ttu-id="6138b-259">Quando está a depurar uma tarefa, também poderá toolook em fluxos de trabalho de Olá.</span><span class="sxs-lookup"><span data-stu-id="6138b-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="6138b-260">Olá seguinte consulta apresenta todos os Olá fluxos de uma única tarefa com o GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0:</span><span class="sxs-lookup"><span data-stu-id="6138b-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="6138b-261">Ver o estado do histórico de tarefas</span><span class="sxs-lookup"><span data-stu-id="6138b-261">View historical job status</span></span>
<span data-ttu-id="6138b-262">Por fim, poderá ser útil toovisualize o histórico do trabalho ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="6138b-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="6138b-263">Pode utilizar este toosearch de consulta para o estado de Olá das suas tarefas ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="6138b-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="6138b-264">![Gráfico de estado de tarefa históricos do OMS](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="6138b-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="6138b-265">Resumo</span><span class="sxs-lookup"><span data-stu-id="6138b-265">Summary</span></span>
<span data-ttu-id="6138b-266">Enviando a automatização tarefa estado e o fluxo de dados tooLog análise, pode obter o melhor aprofundadas sobre o estado de Olá das suas tarefas de automatização por:</span><span class="sxs-lookup"><span data-stu-id="6138b-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="6138b-267">Configurar alertas toonotify, quando existe um problema</span><span class="sxs-lookup"><span data-stu-id="6138b-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="6138b-268">Utilizar vistas personalizadas e toovisualize de consultas de pesquisa os resultados de runbook, estado de tarefa de runbook e de outras relacionados com indicadores chaves ou métricas.</span><span class="sxs-lookup"><span data-stu-id="6138b-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="6138b-269">Análise de registos fornece maior visibilidade operacional tooyour tarefas de automatização e pode ajudar a incidentes de endereço mais rápidas.</span><span class="sxs-lookup"><span data-stu-id="6138b-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="6138b-270">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="6138b-270">Next steps</span></span>
* <span data-ttu-id="6138b-271">toolearn mais informações sobre como consultas de pesquisa diferentes tooconstruct e revisão Olá automatização tarefa registos de análise de registos, consulte [pesquisas de registo na análise de registos](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="6138b-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="6138b-272">toounderstand como toocreate e obter resultados mensagens de erro e a partir de runbooks, consulte [Runbook de saída e as mensagens](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="6138b-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="6138b-273">mais sobre a execução do runbook, como as tarefas de runbook toomonitor e outros detalhes técnicos, consulte toolearn [controlar uma tarefa de runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="6138b-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="6138b-274">toolearn mais informações sobre a análise de registos do OMS e origens de recolha de dados, consulte [dados de armazenamento do Azure recolha na descrição geral da análise de registos](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="6138b-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
