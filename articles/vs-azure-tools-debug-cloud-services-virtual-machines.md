---
title: "aaaDebugging do Azure na nuvem, serviço ou máquina virtual no Visual Studio | Microsoft Docs"
description: "A depuração de um serviço em nuvem ou Máquina Virtual no Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 32a326430021ba2ea9317a6a71fa005d4b87c273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="5cb7a-103">A depuração de um serviço em nuvem do Azure ou a máquina virtual no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5cb7a-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="5cb7a-104">Visual Studio fornece-lhe diferentes opções para a depuração de máquinas virtuais e serviços em nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="5cb7a-105">Depurar o seu serviço em nuvem no seu computador local</span><span class="sxs-lookup"><span data-stu-id="5cb7a-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="5cb7a-106">Pode poupar tempo e dinheiro utilizando toodebug de emulador de computação do Azure Olá seu serviço em nuvem num computador local.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-106">You can save time and money by using hello Azure compute emulator toodebug your cloud service on a local machine.</span></span> <span data-ttu-id="5cb7a-107">Por depuração localmente um serviço antes de implementá-lo, pode melhorar a fiabilidade e desempenho sem pagar tempo de computação.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="5cb7a-108">No entanto, poderão ocorrer alguns erros apenas quando executa um serviço em nuvem no Azure em si.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="5cb7a-109">Pode depurar estes erros se ativar a depuração remota quando publicar o serviço e, em seguida, anexar a instância de função Olá depurador tooa.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-109">You can debug these errors if you enable remote debugging when you publish your service and then attach hello debugger tooa role instance.</span></span>

<span data-ttu-id="5cb7a-110">emulador Olá simula o serviço de computação do Azure Olá e é executado no seu ambiente local para que possa testar e depurar o seu serviço em nuvem antes de implementá-lo.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-110">hello emulator simulates hello Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="5cb7a-111">os identificadores de emulador de Olá Olá ciclo de vida das suas instâncias de função e fornece acesso toosimulated recursos, tais como o armazenamento local.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-111">hello emulator handles hello lifecycle of your role instances and provides access toosimulated resources, such as local storage.</span></span> <span data-ttu-id="5cb7a-112">Quando a depuração ou executar o serviço a partir do Visual Studio, inicia o emulador de Olá automaticamente como uma aplicação de segundo plano e, em seguida, implementa o emulador de toohello do serviço.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-112">When you debug or run your service from Visual Studio, it automatically starts hello emulator as a background application and then deploys your service toohello emulator.</span></span> <span data-ttu-id="5cb7a-113">Pode utilizar Olá emulador tooview seu serviço quando for executada no ambiente local Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-113">You can use hello emulator tooview your service when it runs in hello local environment.</span></span> <span data-ttu-id="5cb7a-114">Pode executar a versão completa do Olá ou versão rápida de Olá do emulador de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-114">You can run hello full version or hello express version of hello emulator.</span></span> <span data-ttu-id="5cb7a-115">(A partir do Azure 2.3, Olá rápida versão do emulador de Olá é predefinido Olá.) Consulte [tooRun utilizando o emulador Express e depuração um serviço em nuvem localmente](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-115">(Starting with Azure 2.3, hello express version of hello emulator is hello default.) See [Using Emulator Express tooRun and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="toodebug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="5cb7a-116">toodebug sua nuvem de serviço no seu computador local</span><span class="sxs-lookup"><span data-stu-id="5cb7a-116">toodebug your cloud service on your local computer</span></span>
1. <span data-ttu-id="5cb7a-117">Na barra de menus Olá, escolha **depurar**, **iniciar depuração** toorun projeto de serviço em nuvem do Azure.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-117">On hello menu bar, choose **Debug**, **Start Debugging** toorun your Azure cloud service project.</span></span> <span data-ttu-id="5cb7a-118">Como alternativa, pode premir F5.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="5cb7a-119">Verá uma mensagem que Olá emulador de computação está a iniciar.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-119">You’ll see a message that hello Compute Emulator is starting.</span></span> <span data-ttu-id="5cb7a-120">Quando inicia o emulador de Olá, o ícone de tabuleiro de sistema Olá confirma-lo.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-120">When hello emulator starts, hello system tray icon confirms it.</span></span>

    ![Emulador do Azure no tabuleiro de sistema Olá](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="5cb7a-122">Apresentar o interface de utilizador de Olá para o emulador de computação Olá ao abrir o menu de atalho Olá para Olá Azure ícone na área de notificação de Olá e, em seguida, selecione **mostrar IU do emulador de computação**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-122">Display hello user interface for hello compute emulator by opening hello shortcut menu for hello Azure icon in hello notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="5cb7a-123">painel esquerdo do Olá da Olá IU mostra Olá serviços atualmente implementado toohello computação emulador e Olá instâncias de função que cada serviço está em execução.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-123">hello left pane of hello UI shows hello services that are currently deployed toohello compute emulator and hello role instances that each service is running.</span></span> <span data-ttu-id="5cb7a-124">Pode escolher Olá serviço ou funções toodisplay ciclo de vida, registo e informações de diagnóstico no painel direito Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-124">You can choose hello service or roles toodisplay lifecycle, logging, and diagnostic information in hello right pane.</span></span> <span data-ttu-id="5cb7a-125">Se o put foco Olá na margem superior do Olá de uma janela incluída, que expande painel à direita do toofill Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-125">If you put hello focus in hello top margin of an included window, it expands toofill hello right pane.</span></span>
3. <span data-ttu-id="5cb7a-126">Passo através da aplicação Olá selecionando comandos no Olá **depurar** menu e a definição de pontos de interrupção no seu código.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-126">Step through hello application by selecting commands on hello **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="5cb7a-127">Como passo através da aplicação Olá no depurador Olá, painéis de Olá são atualizados com o estado atual do Olá da aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-127">As you step through hello application in hello debugger, hello panes are updated with hello current status of hello application.</span></span> <span data-ttu-id="5cb7a-128">Quando deixa de depuração, a implementação da aplicação Olá é eliminada.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-128">When you stop debugging, hello application deployment is deleted.</span></span> <span data-ttu-id="5cb7a-129">Se a aplicação inclui uma função da web e definiu Olá arranque ação propriedade toostart Olá browser da web, o Visual Studio inicia a aplicação web no browser Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-129">If your application includes a web role and you've set hello Startup action property toostart hello web browser, Visual Studio starts your web application in hello browser.</span></span> <span data-ttu-id="5cb7a-130">Se alterar o número de Olá de instâncias de uma função da configuração do serviço de Olá, tem de parar o serviço de nuvem e, em seguida, reinicie a depuração para que pode depurar estas novas instâncias da função de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-130">If you change hello number of instances of a role in hello service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of hello role.</span></span>

    <span data-ttu-id="5cb7a-131">**Nota:** quando parar de executar ou depuração do seu serviço, Olá emulador de computação local e o emulador de armazenamento não estão parados.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-131">**Note:** When you stop running or debugging your service, hello local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="5cb7a-132">Tem de pará-los explicitamente partir da área de notificação de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-132">You must stop them explicitly from hello notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="5cb7a-133">Depurar um serviço em nuvem no Azure</span><span class="sxs-lookup"><span data-stu-id="5cb7a-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="5cb7a-134">toodebug um serviço em nuvem a partir de um computador remoto, tem de ativar essa funcionalidade explicitamente quando implementar o serviço de nuvem, para que o necessário serviços (msvsmon.exe, por exemplo) estão instalados em máquinas virtuais Olá que executam as instâncias da função.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-134">toodebug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on hello virtual machines that run your role instances.</span></span> <span data-ttu-id="5cb7a-135">Se não ativar a depuração remota quando publicado serviço Olá, tem de serviço de Olá toorepublish com a depuração remota ativada.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-135">If you didn't enable remote debugging when you published hello service, you have toorepublish hello service with remote debugging enabled.</span></span>

<span data-ttu-id="5cb7a-136">Se ativar a depuração remota para um serviço em nuvem, não apresentem um degradação do desempenho ou implicar custos adicionais.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="5cb7a-137">Não deve utilizar a depuração remota no serviço de produção, porque os clientes que utilizam o serviço de Olá poderão ser afetados negativamente.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-137">You shouldn't use remote debugging on a production service, because clients who use hello service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="5cb7a-138">Quando publica um serviço em nuvem do Visual Studio, pode ativar **IntelliTrace** para quaisquer funções em que esse Olá destino .NET Framework 4 de serviço ou Olá .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target hello .NET Framework 4 or hello .NET Framework 4.5.</span></span> <span data-ttu-id="5cb7a-139">Ao utilizar **IntelliTrace**, pode examinar os eventos que ocorreram numa instância de função no Olá anterior e reproduzir o contexto de Olá do tempo.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in hello past and reproduce hello context from that time.</span></span> <span data-ttu-id="5cb7a-140">Consulte [depuração um serviço de nuvem publicada com IntelliTrace e o Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) e [utilizando IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="tooenable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="5cb7a-141">tooenable remoto de depuração para um serviço em nuvem</span><span class="sxs-lookup"><span data-stu-id="5cb7a-141">tooenable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="5cb7a-142">Abra o menu de atalho Olá para Olá projeto do Azure e, em seguida, selecione **publicar**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-142">Open hello shortcut menu for hello Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="5cb7a-143">Selecione Olá **transição** ambiente e Olá **depurar** configuração.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-143">Select hello **Staging** environment and hello **Debug** configuration.</span></span>

    <span data-ttu-id="5cb7a-144">Isto é apenas uma orientação.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-144">This is only a guideline.</span></span> <span data-ttu-id="5cb7a-145">Pode escolher toorun seus ambientes de teste num ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-145">You can opt toorun your test environments in a Production environment.</span></span> <span data-ttu-id="5cb7a-146">No entanto, pode afetar negativamente os utilizadores se ativar a depuração remota no ambiente de produção Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-146">However, you may adversely affect users if you enable remote debugging on hello Production environment.</span></span> <span data-ttu-id="5cb7a-147">Pode escolher a configuração da versão Olá, mas a configuração de depuração Olá torna mais fácil a depuração.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-147">You can choose hello Release configuration, but hello Debug configuration makes debugging easier.</span></span>

    ![Escolha a configuração de depuração Olá](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="5cb7a-149">Siga os passos habitual Olá, mas Olá selecione **ativar remoto depurador para todas as funções** caixa de verificação Olá **definições avançadas** separador.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-149">Follow hello usual steps, but select hello **Enable Remote Debugger for all roles** check box on hello **Advanced Settings** tab.</span></span>

    ![Configuração de depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="tooattach-hello-debugger-tooa-cloud-service-in-azure"></a><span data-ttu-id="5cb7a-151">tooattach Olá depurador tooa serviço em nuvem do Azure</span><span class="sxs-lookup"><span data-stu-id="5cb7a-151">tooattach hello debugger tooa cloud service in Azure</span></span>
1. <span data-ttu-id="5cb7a-152">No Explorador de servidores, expanda o nó de Olá do serviço em nuvem.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-152">In Server Explorer, expand hello node for your cloud service.</span></span>
2. <span data-ttu-id="5cb7a-153">Menu de atalho Olá aberto para a função de Olá ou toowhich de instância de função que pretende tooattach e, em seguida, selecione **anexar depurador**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-153">Open hello shortcut menu for hello role or role instance toowhich you want tooattach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="5cb7a-154">Se depurar uma função, o depurador do Visual Studio Olá anexa tooeach instância de função.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-154">If you debug a role, hello Visual Studio debugger attaches tooeach instance of that role.</span></span> <span data-ttu-id="5cb7a-155">depurador Olá irá interromper a no ponto de interrupção para Olá primeira instância de função que executa dessa linha de código e cumpre as condições desse ponto de interrupção.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-155">hello debugger will break on a breakpoint for hello first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="5cb7a-156">Se a depuração uma instância, o depurador Olá anexa tooonly que a instância e as quebras de um ponto de interrupção apenas quando a essa instância específica executa dessa linha de código e cumpre Olá condições do ponto de interrupção.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-156">If you debug an instance, hello debugger attaches tooonly that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets hello breakpoint's conditions.</span></span>

    ![Anexar o depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="5cb7a-158">Depois de depurador de Olá anexa tooan instância, depurar como habitualmente.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-158">After hello debugger attaches tooan instance, debug as usual.</span></span> <span data-ttu-id="5cb7a-159">depurador Olá anexa automaticamente toohello o processo de anfitrião adequado para a sua função.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-159">hello debugger automatically attaches toohello appropriate host process for your role.</span></span> <span data-ttu-id="5cb7a-160">Dependendo do que Olá função for, Olá depurador anexa toow3wp.exe, WaWorkerHost.exe ou WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-160">Depending on what hello role is, hello debugger attaches toow3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="5cb7a-161">está ligado tooverify Olá processo toowhich Olá depurador, expanda o nó de instância de Olá no Explorador de servidores.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-161">tooverify hello process toowhich hello debugger is attached, expand hello instance node in Server Explorer.</span></span> <span data-ttu-id="5cb7a-162">Consulte [arquitetura de função do Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) para obter mais informações sobre processos de Azure.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Selecione a caixa de diálogo de tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="5cb7a-164">os processos de Olá tooidentify está ligado toowhich Olá depurador, abra a caixa de diálogo de processos do Olá por, no menu de Olá barra, escolher depuração, Windows, os processos.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-164">tooidentify hello processes toowhich hello debugger is attached, open hello Processes dialog box by, on hello menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="5cb7a-165">(Teclado: Ctrl + Alt + Z) toodetach um processo específico, abra o menu de atalho e, em seguida, selecione **desanexar processo**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-165">(Keyboard: Ctrl+Alt+Z)toodetach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="5cb7a-166">Ou, localizar o nó de instância de Olá no Explorador de servidores, encontrar o processo de Olá, abra o menu de atalho e, em seguida, selecione **desanexar processo**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-166">Or, locate hello instance node in Server Explorer, find hello process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Os processos de depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="5cb7a-168">Evitar deixa de tempo em pontos de interrupção quando remoto depuração.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="5cb7a-169">Azure trata de um processo que é interrompido durante um período superior a alguns minutos enquanto não responde e interrompe a instância de toothat tráfego a enviar.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="5cb7a-170">Se parar há demasiado tempo, msvsmon.exe Desanexa do processo de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-170">If you stop for too long, msvsmon.exe detaches from hello process.</span></span>
>
>

<span data-ttu-id="5cb7a-171">depurador de Olá toodetach de todos os processos na sua instância ou a função, o menu de atalho Olá aberto para a função Olá ou instância que está a depuração e, em seguida, selecione **desanexar depurador**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-171">toodetach hello debugger from all processes in your instance or role, open hello shortcut menu for hello role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="5cb7a-172">Limitações de depuração remota no Azure</span><span class="sxs-lookup"><span data-stu-id="5cb7a-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="5cb7a-173">Do Azure SDK 2.3, depuração remota tem Olá limitações a seguir.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-173">From Azure SDK 2.3, remote debugging has hello following limitations.</span></span>

* <span data-ttu-id="5cb7a-174">Com a depuração remota ativada, não é possível publicar um serviço em nuvem em que qualquer função tem mais de 25 instâncias.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="5cb7a-175">depurador Olá utiliza too30424 30400 portas, 31400 too31424 e 32400 too32424.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-175">hello debugger uses ports 30400 too30424, 31400 too31424 and 32400 too32424.</span></span> <span data-ttu-id="5cb7a-176">Se tentar toouse qualquer um destas portas, não será capaz de toopublish o serviço e uma das seguintes mensagens de erro de Olá aparecerá no registo de atividade Olá para o Azure:</span><span class="sxs-lookup"><span data-stu-id="5cb7a-176">If you try toouse any of these ports, you won't be able toopublish your service, and one of hello following error messages will appear in hello activity log for Azure:</span></span>

  * <span data-ttu-id="5cb7a-177">Erro ao validar ficheiro. cscfg Olá contra o ficheiro. csdef Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-177">Error validating hello .cscfg file against hello .csdef file.</span></span>
    <span data-ttu-id="5cb7a-178">Olá reservado intervalo de portas 'intervalo' para o ponto final que Microsoft.windowsazure.plugins.remotedebugger.Connector da função "função" sobrepõe-se um intervalo ou a porta já definida.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-178">hello reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="5cb7a-179">Falha na alocação.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-179">Allocation failed.</span></span> <span data-ttu-id="5cb7a-180">Tente novamente mais tarde, tente reduzir Olá tamanho da VM ou o número de instâncias de função ou experimente implementar noutra região de tooa.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-180">Please retry later, try reducing hello VM size or number of role instances, or try deploying tooa different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="5cb7a-181">A depuração de máquinas virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="5cb7a-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="5cb7a-182">Pode depurar programas que são executadas em máquinas virtuais do Azure utilizando o Explorador de servidores no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="5cb7a-183">Quando ativar a depuração remota numa máquina virtual do Azure, Azure instala a extensão de depuração remota Olá na máquina virtual de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-183">When you enable remote debugging on an Azure virtual machine, Azure installs hello remote debugging extension on hello virtual machine.</span></span> <span data-ttu-id="5cb7a-184">Em seguida, pode anexar tooprocesses na máquina virtual de Olá e depurar como faria normalmente.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-184">Then, you can attach tooprocesses on hello virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="5cb7a-185">Máquinas virtuais criadas através da pilha de Gestor de recursos do Azure Olá pode ser debugged remotamente através da utilização de Cloud Explorer no Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-185">Virtual machines created through hello Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="5cb7a-186">Para obter mais informações, consulte [gerir recursos do Azure com Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="toodebug-an-azure-virtual-machine"></a><span data-ttu-id="5cb7a-187">toodebug uma máquina virtual do Azure</span><span class="sxs-lookup"><span data-stu-id="5cb7a-187">toodebug an Azure virtual machine</span></span>
1. <span data-ttu-id="5cb7a-188">No Explorador de servidores, expanda o nó de máquinas virtuais de Olá e nó de Olá selecione da máquina virtual de Olá que pretende que o toodebug.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-188">In Server Explorer, expand hello Virtual Machines node and select hello node of hello virtual machine that you want toodebug.</span></span>
2. <span data-ttu-id="5cb7a-189">Abra o menu de contexto de Olá e selecione **ativar a depuração**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-189">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="5cb7a-190">Quando lhe for perguntado se tem a certeza se quiser tooenable depuração na máquina virtual de Olá, selecione **Sim**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-190">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="5cb7a-191">Azure instala a extensão de depuração remota Olá sobre a depuração de tooenable do Olá máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-191">Azure installs hello remote debugging extension on hello virtual machine tooenable debugging.</span></span>

    ![Máquina virtual ativar comando de depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Registo de atividade do Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="5cb7a-194">Após a extensão de depuração remota Olá instalar, abra o menu de contexto da máquina virtual Olá e selecione **anexar depurador...**</span><span class="sxs-lookup"><span data-stu-id="5cb7a-194">After hello remote debugging extension finishes installing, open hello virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="5cb7a-195">Azure obtém uma lista dos processos de Olá na máquina virtual de Olá e mostra-los na caixa de diálogo Olá anexar tooProcess.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-195">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Anexar o comando do depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="5cb7a-197">No Olá **anexar tooProcess** caixa de diálogo, selecione **selecione** resultados de Olá toolimit listam apenas os tipos Olá tooshow de código que pretende toodebug.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-197">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="5cb7a-198">Pode depurar código de 32 ou 64-bits gerido, o código nativo ou ambos.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Selecione a caixa de diálogo de tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="5cb7a-200">Selecione os processos de Olá que pretende toodebug na máquina virtual de Olá e, em seguida, selecione **anexar**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-200">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="5cb7a-201">Por exemplo, poderá escolher o processo de w3wp.exe Olá se pretendesse toodebug uma aplicação web na máquina virtual de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-201">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="5cb7a-202">Consulte [depurar uma ou mais processos no Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) e [arquitetura de função do Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="5cb7a-203">Criar um projeto web e uma máquina virtual para depuração</span><span class="sxs-lookup"><span data-stu-id="5cb7a-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="5cb7a-204">Antes de publicar o projeto do Azure, poderá achar útil tootest-la num ambiente que suporta a depuração e testar cenários e onde pode instalar teste e monitorização programas contido.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-204">Before publishing your Azure project, you might find it useful tootest it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="5cb7a-205">Toodo unidirecional trata tooremotely depurar a aplicação numa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-205">One way toodo this is tooremotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="5cb7a-206">Projetos do Visual Studio ASP.NET oferecem uma opção toocreate uma máquina virtual à mão, que pode utilizar para testar a aplicação.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-206">Visual Studio ASP.NET projects offer an option toocreate a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="5cb7a-207">máquina virtual de Olá inclui pontos finais necessários normalmente como o PowerShell, o ambiente de trabalho remoto e o WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-207">hello virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="toocreate-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="5cb7a-208">toocreate um projeto web e uma máquina virtual para depuração</span><span class="sxs-lookup"><span data-stu-id="5cb7a-208">toocreate a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="5cb7a-209">No Visual Studio, crie uma nova aplicação Web de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="5cb7a-210">Na caixa de diálogo da novo projeto ASP.NET Olá, na secção do Azure, de Olá escolha **Máquina Virtual** na caixa de listagem pendente Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-210">In hello New ASP.NET Project dialog, in hello Azure section, choose **Virtual Machine** in hello dropdown list box.</span></span> <span data-ttu-id="5cb7a-211">Deixe Olá **criar recursos remotos** caixa de verificação selecionada.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-211">Leave hello **Create remote resources** check box selected.</span></span> <span data-ttu-id="5cb7a-212">Selecione **OK** tooproceed.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-212">Select **OK** tooproceed.</span></span>

    <span data-ttu-id="5cb7a-213">Olá **criar máquina virtual no Azure** é apresentada a caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-213">hello **Create virtual machine on Azure** dialog box appears.</span></span>

    ![Criar caixa de diálogo de projeto de web ASP.NET](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="5cb7a-215">**Nota:** irá ser-lhe pedido toosign no tooyour conta do Azure se ainda não tem sessão iniciada.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-215">**Note:** You'll be asked toosign in tooyour Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="5cb7a-216">Selecione Olá várias definições para a máquina virtual de Olá e, em seguida, selecione **OK**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-216">Select hello various settings for hello virtual machine and then select **OK**.</span></span> <span data-ttu-id="5cb7a-217">Consulte [máquinas virtuais](http://go.microsoft.com/fwlink/?LinkId=623033) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="5cb7a-218">nome de Olá que introduziu para nome DNS será o nome de Olá da máquina virtual de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-218">hello name you enter for DNS name will be hello name of hello virtual machine.</span></span>

    ![Criar máquina virtual na caixa de diálogo do Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="5cb7a-220">O Azure cria a máquina virtual de Olá e, em seguida, Aprovisiona e configura pontos finais de Olá, tais como o ambiente de trabalho remoto e o Web Deploy</span><span class="sxs-lookup"><span data-stu-id="5cb7a-220">Azure creates hello virtual machine and then provisions and configures hello endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="5cb7a-221">Depois de máquina virtual de Olá completamente estar configurada, selecione o nó da máquina virtual Olá no Explorador de servidores.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-221">After hello virtual machine is fully configured, select hello virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="5cb7a-222">Abra o menu de contexto de Olá e selecione **ativar a depuração**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-222">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="5cb7a-223">Quando lhe for perguntado se tem a certeza se quiser tooenable depuração na máquina virtual de Olá, selecione **Sim**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-223">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="5cb7a-224">Azure instala Olá depuração extensão toohello máquina virtual tooenable depuração remota.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-224">Azure installs hello remote debugging extension toohello virtual machine tooenable debugging.</span></span>

    ![Máquina virtual ativar comando de depuração](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Registo de atividade do Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="5cb7a-227">Publicar o seu projeto conforme descrito na [como: implementar um projeto através de um clique publicação na Web no Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="5cb7a-228">Porque pretende toodebug numa máquina virtual de Olá, no Olá **definições** página do Olá **publicar Web** assistente, selecione **depurar** como configuração Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-228">Because you want toodebug on hello virtual machine, on hello **Settings** page of hello **Publish Web** wizard, select **Debug** as hello configuration.</span></span> <span data-ttu-id="5cb7a-229">Isto certifica-se de que os símbolos de código estão disponíveis durante a depuração.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Definições de publicação](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="5cb7a-231">No Olá **opções de publicação do ficheiro**, selecione **remover ficheiros adicionais no destino** se projeto Olá já foi implementado cedo.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-231">In hello **File Publish Options**, select **Remove additional files at destination** if hello project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="5cb7a-232">Depois do projeto de Olá publica, no menu de contexto da máquina virtual Olá no Explorador de servidores, selecione **anexar depurador...**</span><span class="sxs-lookup"><span data-stu-id="5cb7a-232">After hello project publishes, on hello virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="5cb7a-233">Azure obtém uma lista dos processos de Olá na máquina virtual de Olá e mostra-los na caixa de diálogo Olá anexar tooProcess.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-233">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Anexar o comando do depurador](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="5cb7a-235">No Olá **anexar tooProcess** caixa de diálogo, selecione **selecione** resultados de Olá toolimit listam apenas os tipos Olá tooshow de código que pretende toodebug.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-235">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="5cb7a-236">Pode depurar código de 32 ou 64-bits gerido, o código nativo ou ambos.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Selecione a caixa de diálogo de tipo de código](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="5cb7a-238">Selecione os processos de Olá que pretende toodebug na máquina virtual de Olá e, em seguida, selecione **anexar**.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-238">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="5cb7a-239">Por exemplo, poderá escolher o processo de w3wp.exe Olá se pretendesse toodebug uma aplicação web na máquina virtual de Olá.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-239">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="5cb7a-240">Consulte [depurar uma ou mais processos no Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5cb7a-241">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="5cb7a-241">Next steps</span></span>
* <span data-ttu-id="5cb7a-242">Utilize **Intellitrace** toocollect um registo de eventos de um servidor de versão e chamadas.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-242">Use **Intellitrace** toocollect a log of calls and events from a release server.</span></span> <span data-ttu-id="5cb7a-243">Consulte [depuração um serviço de nuvem publicada com IntelliTrace e o Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="5cb7a-244">Utilize **diagnósticos do Azure** toolog obter informações detalhadas a execução de código dentro de funções, se as funções de Olá estão em execução no ambiente de desenvolvimento de Olá ou no Azure.</span><span class="sxs-lookup"><span data-stu-id="5cb7a-244">Use **Azure Diagnostics** toolog detailed information from code running within roles, whether hello roles are running in hello development environment or in Azure.</span></span> <span data-ttu-id="5cb7a-245">Consulte [recolher dados de registo utilizando o Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="5cb7a-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
