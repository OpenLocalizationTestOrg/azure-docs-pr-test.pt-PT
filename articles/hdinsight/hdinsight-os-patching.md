---
title: "agenda de aplicação de patches aaaConfigure SO para clusters do HDInsight baseado em Linux - Azure | Microsoft Docs"
description: "Saiba como clusters de agenda de aplicação de patches tooconfigure SO para o HDInsight baseado em Linux."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="80a43-103">Para o HDInsight a aplicação de patches de SO</span><span class="sxs-lookup"><span data-stu-id="80a43-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="80a43-104">Como um serviço gerido do Hadoop, HDInsight encarrega-se de aplicação de patches Olá SO de Olá VMs subjacentes utilizadas pelo clusters do HDInsight.</span><span class="sxs-lookup"><span data-stu-id="80a43-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="80a43-105">A partir de 1 de Agosto de 2016, vamos mudaram política aplicação de patches do SO de convidado de Olá para os clusters do HDInsight baseado em Linux (versão 3.4 ou superior).</span><span class="sxs-lookup"><span data-stu-id="80a43-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="80a43-106">objetivo Olá nova política de Olá é toosignificantly reduzir o número de Olá de reinícios toopatching devida.</span><span class="sxs-lookup"><span data-stu-id="80a43-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="80a43-107">nova política de Olá continuará toopatch as máquinas virtuais (VMs) no Linux clusters cada segunda-feira ou quinta começando UTC 12: 00, de forma escalonada em nós em qualquer cluster especificado.</span><span class="sxs-lookup"><span data-stu-id="80a43-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="80a43-108">No entanto, qualquer VM especificada só será reiniciado no máximo uma vez a cada 30 dias que devem estar tooguest SO a aplicação de patches.</span><span class="sxs-lookup"><span data-stu-id="80a43-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="80a43-109">Além disso, o primeiro reinício de Olá para um cluster recém-criado não acontecerá mais cedo do que 30 dias a partir da data de criação do cluster Olá.</span><span class="sxs-lookup"><span data-stu-id="80a43-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="80a43-110">Correções de erros serão aplicadas depois de VMs de Olá são reiniciadas.</span><span class="sxs-lookup"><span data-stu-id="80a43-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="80a43-111">Como tooconfigure Olá agenda de aplicação de patches de SO para clusters do HDInsight baseado em Linux</span><span class="sxs-lookup"><span data-stu-id="80a43-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="80a43-112">Olá máquinas de virtuais num HDInsight cluster necessário toobe ocasionalmente reiniciado para que podem ser instaladas patches de segurança importantes.</span><span class="sxs-lookup"><span data-stu-id="80a43-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="80a43-113">A partir de 1 de Agosto de 2016, os clusters do HDInsight baseado em Linux novo (versão 3.4 ou superior,) são reiniciados utilizando Olá seguinte agenda:</span><span class="sxs-lookup"><span data-stu-id="80a43-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="80a43-114">Uma máquina virtual no cluster de Olá pode apenas reiniciado para patches no máximo, uma vez num período de 30 dias.</span><span class="sxs-lookup"><span data-stu-id="80a43-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="80a43-115">reinício de Olá ocorre começando em 12: 00 UTC.</span><span class="sxs-lookup"><span data-stu-id="80a43-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="80a43-116">processo de reinício de Olá é escalonado em máquinas virtuais no cluster de Olá, pelo que o cluster de Olá ainda está disponível durante o processo de reinício de Olá o limite de tempo.</span><span class="sxs-lookup"><span data-stu-id="80a43-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="80a43-117">primeiro reinício de Olá para um cluster recém-criado não acontecerá mais cedo do que 30 dias após a data de criação do cluster Olá.</span><span class="sxs-lookup"><span data-stu-id="80a43-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="80a43-118">Através da ação de script de Olá descrita neste artigo, pode modificar agenda de aplicação de patches Olá SO da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="80a43-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="80a43-119">Ativar ou desativar reinícios automáticos</span><span class="sxs-lookup"><span data-stu-id="80a43-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="80a43-120">Frequência Olá conjunto é reiniciado (dias entre reinícios)</span><span class="sxs-lookup"><span data-stu-id="80a43-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="80a43-121">Definir Olá dia da semana de Olá quando ocorre uma reinicialização</span><span class="sxs-lookup"><span data-stu-id="80a43-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="80a43-122">Esta ação de script apenas irá trabalhar com clusters do HDInsight baseado em Linux criados após 1 de Agosto de 2016.</span><span class="sxs-lookup"><span data-stu-id="80a43-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="80a43-123">Correções de erros serão aplicadas apenas quando são reiniciadas, VMs.</span><span class="sxs-lookup"><span data-stu-id="80a43-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="80a43-124">Como toouse Olá script</span><span class="sxs-lookup"><span data-stu-id="80a43-124">How toouse hello script</span></span> 

<span data-ttu-id="80a43-125">Quando utilizar este script requer Olá seguintes informações:</span><span class="sxs-lookup"><span data-stu-id="80a43-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="80a43-126">Olá localização do script: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight utiliza este toofind URI e execute o script de Olá em todas as máquinas de virtuais Olá num cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="80a43-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="80a43-127">Olá tipos de nó de cluster que script Olá é aplicada: headnode, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="80a43-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="80a43-128">Este script tem de ser aplicados tooall tipos de nó no cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="80a43-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="80a43-129">Se não for o tipo de nó tooa aplicados, em seguida, Olá virtual máquinas para esse tipo de nó irão continuar a agenda de aplicação de patches toouse Olá anterior.</span><span class="sxs-lookup"><span data-stu-id="80a43-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="80a43-130">Parâmetro: Este script aceita três parâmetros numérico:</span><span class="sxs-lookup"><span data-stu-id="80a43-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="80a43-131">Parâmetro</span><span class="sxs-lookup"><span data-stu-id="80a43-131">Parameter</span></span> | <span data-ttu-id="80a43-132">Definição</span><span class="sxs-lookup"><span data-stu-id="80a43-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="80a43-133">Ativar/desativar reinícios automáticos</span><span class="sxs-lookup"><span data-stu-id="80a43-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="80a43-134">0 ou 1.</span><span class="sxs-lookup"><span data-stu-id="80a43-134">0 or 1.</span></span> <span data-ttu-id="80a43-135">Um valor de 0 desativa a reinícios automáticos enquanto 1 permite reinícios automáticos.</span><span class="sxs-lookup"><span data-stu-id="80a43-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="80a43-136">Frequência</span><span class="sxs-lookup"><span data-stu-id="80a43-136">Frequency</span></span> |<span data-ttu-id="80a43-137">too90 7 (inclusive).</span><span class="sxs-lookup"><span data-stu-id="80a43-137">7 too90 (inclusive).</span></span> <span data-ttu-id="80a43-138">Olá número toowait de dias antes de ser reiniciado Olá máquinas de virtuais para patches que necessitem de um reinício.</span><span class="sxs-lookup"><span data-stu-id="80a43-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="80a43-139">Dia da semana</span><span class="sxs-lookup"><span data-stu-id="80a43-139">Day of week</span></span> |<span data-ttu-id="80a43-140">1 too7 (inclusive).</span><span class="sxs-lookup"><span data-stu-id="80a43-140">1 too7 (inclusive).</span></span> <span data-ttu-id="80a43-141">Um valor de 1 indica o reinício de Olá deve ocorrer numa segunda-feira e 7 indica um exemplo de Sunday.For, utilizando os parâmetros de 1 60 2 resulta em automático é reiniciado a cada 60 dias (no máximo) na Terça-feira.</span><span class="sxs-lookup"><span data-stu-id="80a43-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="80a43-142">Persistência</span><span class="sxs-lookup"><span data-stu-id="80a43-142">Persistence</span></span> |<span data-ttu-id="80a43-143">Ao aplicar um cluster existente do script ação tooan, é possível marcar o script Olá como persistente.</span><span class="sxs-lookup"><span data-stu-id="80a43-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="80a43-144">Scripts persistentes são aplicadas quando workernodes novas são adicionadas toohello cluster através do dimensionamento operações.</span><span class="sxs-lookup"><span data-stu-id="80a43-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="80a43-145">Tem de marcar este script como persistente ao aplicar tooan cluster existente.</span><span class="sxs-lookup"><span data-stu-id="80a43-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="80a43-146">Caso contrário, quaisquer novos nós criados através do dimensionamento do operations utilizará a predefinição de Olá agenda de aplicação de patches.</span><span class="sxs-lookup"><span data-stu-id="80a43-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="80a43-147">Se aplicar o script de Olá como parte do processo de criação do cluster Olá, este é continuada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="80a43-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="80a43-148">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="80a43-148">Next steps</span></span>

<span data-ttu-id="80a43-149">Para obter passos específicos sobre como utilizar a ação de script de Olá, consulte Olá seguintes secções Olá [clusters do HDInsight baseado em Personalizar Linuz através da ação de script](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="80a43-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="80a43-150">Utilizar uma ação de script durante a criação do cluster</span><span class="sxs-lookup"><span data-stu-id="80a43-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="80a43-151">Aplicar um tooa de ação de script a executar o cluster</span><span class="sxs-lookup"><span data-stu-id="80a43-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
