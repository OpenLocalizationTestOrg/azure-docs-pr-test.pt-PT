---
title: "Atualização da aplicação: serialização de dados | Microsoft Docs"
description: "Melhores práticas para a serialização de dados e a forma como afeta a atualizações graduais de aplicação."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="0a327-103">Como a serialização de dados afeta uma atualização da aplicação</span><span class="sxs-lookup"><span data-stu-id="0a327-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="0a327-104">Num [a atualização da aplicação](service-fabric-application-upgrade.md), atualização Olá é aplicado tooa subconjunto de nós, um domínio de atualização a uma hora.</span><span class="sxs-lookup"><span data-stu-id="0a327-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="0a327-105">Durante este processo, alguns domínios de atualização são numa versão mais recente do Olá da sua aplicação e alguns domínios de atualização são numa versão mais antiga do Olá da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="0a327-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="0a327-106">Durante a implementação de Olá, versão nova do Olá da sua aplicação tem de ser capaz de tooread versão antiga do Olá dos seus dados e versão antiga do Olá da sua aplicação tem de ser capaz de tooread Olá nova versão, dos seus dados.</span><span class="sxs-lookup"><span data-stu-id="0a327-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="0a327-107">Formato de dados de Olá não esteja com versões anteriores e reencaminhar atualização Olá compatível, podem falhar, worse, dados ou pode ser perdido ou corrompido.</span><span class="sxs-lookup"><span data-stu-id="0a327-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="0a327-108">Este artigo descreve o que constitui o formato de dados e oferece melhores práticas para se certificar de que os dados estão a reencaminhar e com versões anteriores compatível.</span><span class="sxs-lookup"><span data-stu-id="0a327-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="0a327-109">O que constitui o formato de dados?</span><span class="sxs-lookup"><span data-stu-id="0a327-109">What makes up your data format?</span></span>
<span data-ttu-id="0a327-110">No Azure Service Fabric, os dados de Olá que é persistente e replicados provém das classes de c#.</span><span class="sxs-lookup"><span data-stu-id="0a327-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="0a327-111">Para aplicações que utilizam [coleções fiável](service-fabric-reliable-services-reliable-collections.md), que dados são objetos Olá dicionários fiável Olá e pelas filas.</span><span class="sxs-lookup"><span data-stu-id="0a327-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="0a327-112">Para aplicações que utilizam [Reliable Actors](service-fabric-reliable-actors-introduction.md), ou seja Olá fazer uma cópia de estado de ator Olá.</span><span class="sxs-lookup"><span data-stu-id="0a327-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="0a327-113">Estas classes c# tem de ser serializáveis toobe persistência e replicação.</span><span class="sxs-lookup"><span data-stu-id="0a327-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="0a327-114">Por conseguinte, o formato dos dados Olá é definido por campos de Olá e propriedades que estão a serializada, bem como a forma como estas são serializadas.</span><span class="sxs-lookup"><span data-stu-id="0a327-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="0a327-115">Por exemplo, num `IReliableDictionary<int, MyClass>` dados Olá são um serializados `int` e um serializados `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="0a327-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="0a327-116">Código de alterações que resultam numa alteração de formato de dados</span><span class="sxs-lookup"><span data-stu-id="0a327-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="0a327-117">Uma vez que o formato dos dados Olá é determinado pelo c# classes, classes de toohello de alterações que podem causar uma alteração de formato de dados.</span><span class="sxs-lookup"><span data-stu-id="0a327-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="0a327-118">Deve ter cuidado tooensure que pode processar uma atualização sem interrupção dados Olá formatar a alteração.</span><span class="sxs-lookup"><span data-stu-id="0a327-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="0a327-119">Exemplos que podem fazer com que as alterações de formato de dados:</span><span class="sxs-lookup"><span data-stu-id="0a327-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="0a327-120">Adicionar ou remover propriedades ou campos</span><span class="sxs-lookup"><span data-stu-id="0a327-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="0a327-121">Mudar o nome de campos ou propriedades</span><span class="sxs-lookup"><span data-stu-id="0a327-121">Renaming fields or properties</span></span>
* <span data-ttu-id="0a327-122">A alteração Olá tipos de campos ou propriedades</span><span class="sxs-lookup"><span data-stu-id="0a327-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="0a327-123">Alterar o nome da classe de Olá ou espaço de nomes</span><span class="sxs-lookup"><span data-stu-id="0a327-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="0a327-124">Contrato de dados como Olá serializador predefinido</span><span class="sxs-lookup"><span data-stu-id="0a327-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="0a327-125">o serializador de Olá é, geralmente, responsável pela leitura de dados de Olá e anular a serialização na versão atual do Olá, mesmo se dados Olá são mais antigo na ou *mais recente* versão.</span><span class="sxs-lookup"><span data-stu-id="0a327-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="0a327-126">Olá serializador predefinido é Olá [serializador de contrato de dados](https://msdn.microsoft.com/library/ms733127.aspx), que tem regras de controlo de versões bem definidos.</span><span class="sxs-lookup"><span data-stu-id="0a327-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="0a327-127">Coleções fiáveis permitem Olá serializador toobe substituído, mas Reliable Actors atualmente não compatíveis.</span><span class="sxs-lookup"><span data-stu-id="0a327-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="0a327-128">o serializador de dados de Olá desempenha um papel importante para ativar atualizações graduais.</span><span class="sxs-lookup"><span data-stu-id="0a327-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="0a327-129">o serializador de contrato de dados de Olá é serializador Olá que recomendamos para aplicações de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="0a327-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="0a327-130">Como o formato dos dados Olá afeta uma atualização sem interrupção</span><span class="sxs-lookup"><span data-stu-id="0a327-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="0a327-131">Durante uma atualização sem interrupção, existem dois cenários principais onde o serializador de Olá poderá encontrar mais antigo ou *mais recente* versão dos dados:</span><span class="sxs-lookup"><span data-stu-id="0a327-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="0a327-132">Depois de um nó é atualizado e inicia a cópia de segurança, serializador novo Olá irá carregar os dados de Olá que foi toodisk persistente por versão antigo Olá.</span><span class="sxs-lookup"><span data-stu-id="0a327-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="0a327-133">Durante a atualização de Olá, cluster Olá irá conter uma combinação de versões de antigos e novos Olá do seu código.</span><span class="sxs-lookup"><span data-stu-id="0a327-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="0a327-134">Uma vez que as réplicas podem ser colocadas em domínios de atualização diferentes e réplicas enviar dados tooeach outras hello novo e/ou antigo versão dos dados pode ser encontrado com a versão nova e/ou antigo Olá do seu serializador.</span><span class="sxs-lookup"><span data-stu-id="0a327-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="0a327-135">Olá "nova versão" e "versão antiga" aqui Consulte toohello versão do seu código que está em execução.</span><span class="sxs-lookup"><span data-stu-id="0a327-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="0a327-136">Olá "novo serializador" refere-se o código de serializador toohello que está a executar a versão nova do Olá da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="0a327-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="0a327-137">Olá "dados novos" refere-se toohello serializado c# classe da nova versão de Olá da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="0a327-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="0a327-138">Olá duas versões de código e o formato de dados tem de ser direta e com versões anteriores compatível.</span><span class="sxs-lookup"><span data-stu-id="0a327-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="0a327-139">Se não forem compatíveis, Olá a atualização poderá falhar ou os dados poderão perder-se.</span><span class="sxs-lookup"><span data-stu-id="0a327-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="0a327-140">Olá, a atualização poderá falhar porque o código de Olá ou serializador pode acionar exceções ou uma falha quando encontra Olá outra versão.</span><span class="sxs-lookup"><span data-stu-id="0a327-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="0a327-141">Dados poderão perder-se se, por exemplo, foi adicionada uma nova propriedade mas serializador antigo Olá elimina-lo durante a desserialização.</span><span class="sxs-lookup"><span data-stu-id="0a327-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="0a327-142">Contrato de dados é Olá recomendado solução para se certificar de que os seus dados são compatíveis.</span><span class="sxs-lookup"><span data-stu-id="0a327-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="0a327-143">Tem regras de controlo de versões definida especificamente para adicionar, remover e alteração dos campos.</span><span class="sxs-lookup"><span data-stu-id="0a327-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="0a327-144">Também tem suporte para lidar com campos desconhecidos, hooking no processo de serialização e a anulação da serialização de Olá e lidar com a herança de classe.</span><span class="sxs-lookup"><span data-stu-id="0a327-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="0a327-145">Para obter mais informações, consulte [através de contrato de dados](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="0a327-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0a327-146">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="0a327-146">Next steps</span></span>
<span data-ttu-id="0a327-147">[Atualizar a aplicação utilizando o Visual Studio](service-fabric-application-upgrade-tutorial.md) orienta-o através de uma atualização da aplicação com o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0a327-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="0a327-148">[Atualizar a sua aplicação através do Powershell](service-fabric-application-upgrade-tutorial-powershell.md) orienta-o através de uma atualização da aplicação através do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0a327-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="0a327-149">Controlar a forma como a aplicação atualiza utilizando [atualizar parâmetros](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="0a327-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="0a327-150">Saiba como toouse avançada funcionalidade ao atualizar a sua aplicação ao referir-se demasiado[tópicos avançados](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="0a327-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="0a327-151">Resolva problemas comuns nas atualizações de aplicações ao referir-se passos toohello [resolução de problemas de atualizações de aplicação ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="0a327-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

