---
title: "aaaAzure análise de eventos de recursos de infraestrutura de serviço com o Application Insights | Microsoft Docs"
description: "Saiba mais sobre como visualizar e analisar eventos utilizando o Application Insights para monitorização e diagnóstico de clusters de Service Fabric do Azure."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 59bb5a409f2951e5b2034049e782dd0da67f933c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="0d2ba-103">Análise de eventos e visualização com o Application Insights</span><span class="sxs-lookup"><span data-stu-id="0d2ba-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="0d2ba-104">Azure Application Insights é uma plataforma extensível para monitorização de aplicações e de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="0d2ba-105">Inclui uma análise poderosa e consultar a ferramenta, dashboard personalizável e visualizações e ainda mais opções, incluindo automática de alertas.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="0d2ba-106">É Olá recomendado plataforma para a monitorização e diagnóstico de serviços e aplicações de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-106">It is hello recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="0d2ba-107">Configurar o Application Insights</span><span class="sxs-lookup"><span data-stu-id="0d2ba-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="0d2ba-108">Criar um recurso de AI</span><span class="sxs-lookup"><span data-stu-id="0d2ba-108">Creating an AI Resource</span></span>

<span data-ttu-id="0d2ba-109">recurso toocreate um AI head através de toohello Azure Marketplace e procurar "Application Insights".</span><span class="sxs-lookup"><span data-stu-id="0d2ba-109">toocreate an AI resource, head over toohello Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="0d2ba-110">Deve aparecer como solução primeiro Olá (está sob a categoria "Web + móvel").</span><span class="sxs-lookup"><span data-stu-id="0d2ba-110">It should show up as hello first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="0d2ba-111">Clique em **criar** quando está a visualizar recursos direita Olá (confirmar que o caminho de corresponde à imagem de Olá abaixo).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-111">Click **Create** when you are looking at hello right resource (confirm that your path matches hello image below).</span></span>

![Novo recurso do Application Insights](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="0d2ba-113">Terá de toofill saída algumas informações tooprovision Olá de recursos corretamente.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-113">You will need toofill out some information tooprovision hello resource correctly.</span></span> <span data-ttu-id="0d2ba-114">No Olá *tipo de aplicação* campo, utilize "Uma aplicação web ASP.NET" se irá utilizar qualquer um dos recursos de infraestrutura de serviço do modelos de programação ou publicação de um cluster de toohello de aplicações de .NET.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-114">In hello *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application toohello cluster.</span></span> <span data-ttu-id="0d2ba-115">Se for implementar convidado executáveis e contentores, utilize "Geral".</span><span class="sxs-lookup"><span data-stu-id="0d2ba-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="0d2ba-116">Em geral, predefinição toousing "Uma aplicação web ASP.NET" tookeep as opções de abrir no Olá futura.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-116">In general, default toousing "ASP.NET web application" tookeep your options open in hello future.</span></span> <span data-ttu-id="0d2ba-117">nome de Olá segurança tooyour preferência e se o grupo de recursos de Olá e subscrição pós-implementação das partições de recurso Olá.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-117">hello name is up tooyour preference, and both hello resource group and subscription are changeable post-deployment of hello resource.</span></span> <span data-ttu-id="0d2ba-118">Recomendamos que o recurso de AI está a ser Olá mesmo grupo de recursos do seu cluster.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-118">We recommend that your AI resource is in hello same resource group as your cluster.</span></span> <span data-ttu-id="0d2ba-119">Se precisar de mais informações, consulte [crie um recurso do Application Insights](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="0d2ba-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="0d2ba-120">Terá de Olá chave de instrumentação AI tooconfigure AI com a ferramenta de agregação de eventos.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-120">You need hello AI Instrumentation Key tooconfigure AI with your event aggregation tool.</span></span> <span data-ttu-id="0d2ba-121">Depois do recurso de AI configurado (demora alguns minutos após a implementação de Olá é validada), navegue até tooit e determinar Olá **propriedades** secção na barra de navegação esquerdo Olá.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-121">Once your AI resource is set up (takes a few minutes after hello deployment is validated), navigate tooit and find hello **Properties** section on hello left navigation bar.</span></span> <span data-ttu-id="0d2ba-122">Um novo painel abre-se que mostra um *chave de instrumentação*.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="0d2ba-123">Se precisar de subscrição de Olá toochange ou grupo de recursos do recurso de Olá, pode ser feita aqui bem.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-123">If you need toochange hello subscription or resource group of hello resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="0d2ba-124">Configurar AI com WAD</span><span class="sxs-lookup"><span data-stu-id="0d2ba-124">Configuring AI with WAD</span></span>

<span data-ttu-id="0d2ba-125">Existem duas formas de primárias toosend dados WAD tooAzure AI, que são conseguidos ao adicionar uma configuração WAD toohello sink de AI, conforme detalhado em [neste artigo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-125">There are two primary ways toosend data from WAD tooAzure AI, which is achieved by adding an AI sink toohello WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="0d2ba-126">Adicionar uma chave de instrumentação AI quando criar um cluster no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="0d2ba-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Adicionar um AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="0d2ba-128">Quando criar um cluster, se Diagnostics está ativada "", um campo opcional tooenter uma chave de instrumentação do Application Insights irá mostrar.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-128">When creating a cluster, if Diagnostics is turned "On", an optional field tooenter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="0d2ba-129">Se colar a IKey AI aqui, sink Olá AI será automaticamente configurada por si no modelo do Resource Manager Olá que é utilizado toodeploy o cluster.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-129">If you paste your AI IKey here, hello AI sink will be automatically configured for you in hello Resource Manager template that is used toodeploy your cluster.</span></span>

#### <a name="add-hello-ai-sink-toohello-resource-manager-template"></a><span data-ttu-id="0d2ba-130">Adicionar Olá modelo de Gestor de recursos de toohello Sink de AI</span><span class="sxs-lookup"><span data-stu-id="0d2ba-130">Add hello AI Sink toohello Resource Manager template</span></span>

<span data-ttu-id="0d2ba-131">No Olá "WadCfg" do modelo do Resource Manager Olá, adicione "Sink", incluindo Olá seguintes duas alterações:</span><span class="sxs-lookup"><span data-stu-id="0d2ba-131">In hello "WadCfg" of hello Resource Manager template, add a "Sink" by including hello following two changes:</span></span>

1. <span data-ttu-id="0d2ba-132">Adicione configuração de receptores de Olá:</span><span class="sxs-lookup"><span data-stu-id="0d2ba-132">Add hello sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="0d2ba-133">Inclua Olá Sink Olá DiagnosticMonitorConfiguration adicionando Olá seguinte linha no "DiagnosticMonitorConfiguration" de Olá "WadCfg":</span><span class="sxs-lookup"><span data-stu-id="0d2ba-133">Include hello Sink in hello DiagnosticMonitorConfiguration by adding hello following line in "DiagnosticMonitorConfiguration" of hello "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="0d2ba-134">Em ambos os fragmentos de código Olá acima, Olá o nome "applicationInsights" era sink de Olá toodescribe utilizados.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-134">In both hello code snippets above, hello name "applicationInsights" was used toodescribe hello sink.</span></span> <span data-ttu-id="0d2ba-135">Não é um requisito e desde que o nome de Olá do sink Olá está incluído no "sinks", pode definir a cadeia de tooany Olá nome.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-135">This is not a requirement and as long as hello name of hello sink is included in "sinks", you can set hello name tooany string.</span></span>

<span data-ttu-id="0d2ba-136">Atualmente, os registos do cluster de Olá irão mostrar como rastreios no Visualizador de registo do AI.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-136">Currently, logs from hello cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="0d2ba-137">Uma vez que a maioria rastreios Olá provenientes da plataforma de Olá de nível "Informativa", pode considerar alterar Olá sink configuração tooonly enviar os registos do tipo "Críticas" ou "Error".</span><span class="sxs-lookup"><span data-stu-id="0d2ba-137">Since most of hello traces coming from hello platform are of level "Informational", you can also consider changing hello sink configuration tooonly send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="0d2ba-138">Isto pode ser feito adicionando o sink de tooyour "Canais de", conforme demonstrado [neste artigo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-138">This can be done by adding "Channels" tooyour sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="0d2ba-139">Se utilizar um IKey AI incorreto no portal ou no seu modelo do Resource Manager, terá toomanually alterar a chave de Olá e atualizar cluster Olá / reimplementá-lo.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have toomanually change hello key and update hello cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="0d2ba-140">Configurar AI com EventFlow</span><span class="sxs-lookup"><span data-stu-id="0d2ba-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="0d2ba-141">Se estiver a utilizar EventFlow tooaggregate eventos, certifique-se de que tooimport Olá `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`pacote NuGet.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-141">If you are using EventFlow tooaggregate events, make sure tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="0d2ba-142">Olá seguinte tem toobe incluído no Olá *produz* secção Olá *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="0d2ba-142">hello following has toobe included in hello *outputs* section of hello *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace hello following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="0d2ba-143">Efetuar alterações de Olá necessário de toomake se os filtros, bem como incluir quaisquer outras entradas (juntamente com os seus respetivos pacotes de NuGet).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-143">Make sure toomake hello required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="0d2ba-144">AI. SDK</span><span class="sxs-lookup"><span data-stu-id="0d2ba-144">AI.SDK</span></span>

<span data-ttu-id="0d2ba-145">Recomenda-se geralmente toouse EventFlow e WAD como soluções de agregação, porque permitem para um toodiagnostics abordagem mais modular e a monitorizar, ou seja, se quiser toochange as saídas da EventFlow, necessita de nenhum tooyour alteração real instrumentação, apenas um ficheiro de configuração de tooyour modificação simples.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-145">It is generally recommended toouse EventFlow and WAD as aggregation solutions, because they allow for a more modular approach toodiagnostics and monitoring, i.e. if you want toochange your outputs from EventFlow, it requires no change tooyour actual instrumentation, just a simple modification tooyour config file.</span></span> <span data-ttu-id="0d2ba-146">Se, no entanto, decidir tooinvest utilizando o Application Insights e não são toochange provável tooa diferentes plataforma, deve ter o aspeto na utilizando novo SDK do AI para agregar eventos e de lhes enviar tooAI.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-146">If, however, you decide tooinvest in using Application Insights and are not likely toochange tooa different platform, you should look into using AI's new SDK for aggregating events and sending them tooAI.</span></span> <span data-ttu-id="0d2ba-147">Isto significa que já não terá tooconfigure EventFlow toosend tooAI os dados, mas em vez disso, irá instalar pacotes de NuGet do Service Fabric do Olá ApplicationInsight.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-147">This means that you will no longer have tooconfigure EventFlow toosend your data tooAI, but instead will install hello ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="0d2ba-148">Podem ser encontrados detalhes no pacote de Olá [aqui](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-148">Details on hello package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="0d2ba-149">[Suportem de Application Insights para micro-serviços e contentores](https://azure.microsoft.com/app-insights-microservices/) mostra algumas das Olá novas funcionalidades que estão a ser trabalhadas (beta ainda atualmente no), que permitem-lhe toohave mais rica out of box opções de monitorização com AI.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of hello new features that are being worked on (currently still in beta), which allow you toohave richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="0d2ba-150">Estes incluem o controlo de dependência (utilizado na criação de um AppMap de todos os seus serviços e aplicações em cluster e Olá comunicação entre elas) e melhor correlação de rastreios dos seus serviços (ajuda-o no melhor pinpointing um problema no Olá do fluxo de trabalho de uma aplicação ou serviço).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and hello communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in hello workflow of an app or service).</span></span>

<span data-ttu-id="0d2ba-151">Se estiver a desenvolver no .NET e será provavelmente estar através de alguns dos modelos de programação do Service Fabric e são disposto toouse AI como a plataforma para visualizar e analisar dados de registo de eventos e, em seguida, recomendamos que leia através de Olá rota AI SDK como a monitorização e fluxo de trabalho do diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing toouse AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via hello AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="0d2ba-152">Leitura [isto](../application-insights/app-insights-asp-net-more.md) e [isto](../application-insights/app-insights-asp-net-trace-logs.md) tooget iniciado com a utilização de AI toocollect e apresentar os seus registos.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) tooget started with using AI toocollect and display your logs.</span></span>

## <a name="navigating-hello-ai-resource-in-azure-portal"></a><span data-ttu-id="0d2ba-153">A navegação em recursos de AI Olá no portal do Azure</span><span class="sxs-lookup"><span data-stu-id="0d2ba-153">Navigating hello AI resource in Azure portal</span></span>

<span data-ttu-id="0d2ba-154">Assim que tiver configurado o AI como uma saída para os eventos e registos, informações devem começar tooshow cópias de segurança no seu recurso AI dentro de alguns minutos.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-154">Once you have configured AI as an output for your events and logs, information should start tooshow up in your AI resource in a few minutes.</span></span> <span data-ttu-id="0d2ba-155">Navegue até o recurso de AI toohello, o que irá demorar, toohello AI dashboard de recursos.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-155">Navigate toohello AI resource, which will take you toohello AI resource dashboard.</span></span> <span data-ttu-id="0d2ba-156">Clique em **pesquisa** Olá AI na barra de tarefas toosee Olá mais recentes rastreios que tiver recebido e toobe toofilter consegue através de-los.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-156">Click **Search** in hello AI taskbar toosee hello latest traces that it has received, and toobe able toofilter through them.</span></span>

<span data-ttu-id="0d2ba-157">*Explorador de métricas* é uma ferramenta útil para a criação de dashboards personalizados com base nas métricas que as aplicações, serviços e cluster podem ser Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="0d2ba-158">Consulte [explorar métricas no Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset segurança alguns gráficos para si com base nos dados de Olá está a recolher.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset up a few charts for yourself based on hello data you are collecting.</span></span>

<span data-ttu-id="0d2ba-159">Ao clicar em **análise** leva-o portal do Application Insights Analytics toohello, onde pode consultar eventos e rastreios com o maior âmbito e optionality.</span><span class="sxs-lookup"><span data-stu-id="0d2ba-159">Clicking **Analytics** will take you toohello Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="0d2ba-160">Saiba mais sobre no [análise no Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="0d2ba-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0d2ba-161">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="0d2ba-161">Next steps</span></span>

* <span data-ttu-id="0d2ba-162">[Configurar alertas no AI](../application-insights/app-insights-alerts.md) toobe notificado sobre as alterações no desempenho ou utilização</span><span class="sxs-lookup"><span data-stu-id="0d2ba-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) toobe notified about changes in performance or usage</span></span>
* <span data-ttu-id="0d2ba-163">[Smart deteção no Application Insights](../application-insights/app-insights-proactive-diagnostics.md) efetua uma análise de telemetria de Olá enviada tooAI toowarn proativa de potenciais problemas de desempenho</span><span class="sxs-lookup"><span data-stu-id="0d2ba-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of hello telemetry being sent tooAI toowarn you of potential performance problems</span></span>
