---
title: "aaaCapacity planeamento para aplicações de Service Fabric | Microsoft Docs"
description: "Descreve como tooidentify Olá número de nós de computação necessária para uma aplicação de Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="7939a-103">Planeamento da capacidade para aplicações de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="7939a-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="7939a-104">Este documento informa como tooestimate Olá a quantidade de recursos (CPU, RAM, armazenamento de disco) terá de toorun as suas aplicações Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="7939a-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="7939a-105">É comum para sua toochange de requisitos de recursos ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="7939a-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="7939a-106">Normalmente, é necessário alguns recursos à medida que o serviço de desenvolve/teste e, em seguida, requerem mais recursos, vá para a produção e a sua aplicação cresce no popularidade.</span><span class="sxs-lookup"><span data-stu-id="7939a-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="7939a-107">Ao conceber a sua aplicação, analisar os requisitos de longa duração Olá e certifique-opções que permitem que o pedido do cliente elevada tooscale toomeet o serviço.</span><span class="sxs-lookup"><span data-stu-id="7939a-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="7939a-108">Quando cria um cluster do Service Fabric, decida que tipos de máquinas virtuais (VMs) constituem cluster Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="7939a-109">Cada VM vem com uma quantidade limitada de recursos na forma de Olá de CPU (núcleos e velocidade), a largura de banda, RAM e armazenamento em disco.</span><span class="sxs-lookup"><span data-stu-id="7939a-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="7939a-110">À medida que cresce o serviço ao longo do tempo, pode atualizar tooVMs que oferecem maiores recursos e/ou adicionar o cluster de tooyour mais VMs.</span><span class="sxs-lookup"><span data-stu-id="7939a-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="7939a-111">Olá de toodo anterior será ignorada, a tem architect seu serviço inicialmente, de modo que pode tirar partido das novas VMs adicionadas dinamicamente toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="7939a-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="7939a-112">Alguns serviços gerem dados toono pouca Olá VMs.</span><span class="sxs-lookup"><span data-stu-id="7939a-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="7939a-113">Por conseguinte, para estes serviços devem focar-se principalmente no desempenho, o que significa selecionar Olá o planeamento de capacidade adequado CPU (núcleos e velocidade) de Olá VMs.</span><span class="sxs-lookup"><span data-stu-id="7939a-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="7939a-114">Além disso, deve considerar a largura de banda de rede, incluindo a frequência das transferências de rede estão a ocorrer e está a ser transferida a quantidade de dados.</span><span class="sxs-lookup"><span data-stu-id="7939a-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="7939a-115">Se o serviço necessitar tooperform bem à medida que aumenta de utilização do serviço, pode adicionar o cluster de toohello VMs mais e a carga de pedidos de rede do saldo Olá em todas as VMs de Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="7939a-116">Para os serviços que gerem grandes quantidades de dados em Olá VMs, planeamento de capacidade deve focar-se principalmente nas tamanho.</span><span class="sxs-lookup"><span data-stu-id="7939a-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="7939a-117">Assim, deve considerar cuidadosamente a capacidade de Olá de armazenamento de RAM e o disco da VM Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="7939a-118">sistema de gestão de memória virtual Olá no Windows faz com que o espaço em disco aspeto RAM tooapplication código.</span><span class="sxs-lookup"><span data-stu-id="7939a-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="7939a-119">Além disso, o tempo de execução do Service Fabric Olá fornece manter apenas os dados na memória e mover toodisk de dados amovíveis Olá a paginação inteligente.</span><span class="sxs-lookup"><span data-stu-id="7939a-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="7939a-120">As aplicações, por conseguinte, podem utilizar mais memória do que é fisicamente disponível no Olá VM.</span><span class="sxs-lookup"><span data-stu-id="7939a-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="7939a-121">Basta ter mais RAM aumenta a desempenho, uma vez que Olá VM pode manter mais armazenamento em disco na RAM.</span><span class="sxs-lookup"><span data-stu-id="7939a-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="7939a-122">Olá VM selecionar deve ter um disco toostore suficientemente grande Olá de dados que pretende ter nos Olá VM.</span><span class="sxs-lookup"><span data-stu-id="7939a-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="7939a-123">Da mesma forma, Olá VM deve ter suficiente tooprovide de RAM, com Olá pretendidos ao nível de desempenho.</span><span class="sxs-lookup"><span data-stu-id="7939a-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="7939a-124">Se o crescimentos de dados do serviço ao longo do tempo, pode adicionar mais VMs toohello cluster e partição Olá dados em todas as VMs de Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="7939a-125">Determinar quantos nós é necessário</span><span class="sxs-lookup"><span data-stu-id="7939a-125">Determine how many nodes you need</span></span>
<span data-ttu-id="7939a-126">O serviço de criação de partições permite-lhe tooscale saída dados do seu serviço.</span><span class="sxs-lookup"><span data-stu-id="7939a-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="7939a-127">Para obter mais informações sobre a criação de partições, consulte [criação de partições de Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="7939a-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="7939a-128">Cada partição deve encaixar-se dentro de uma única VM, mas várias partições (pequenas) podem ser colocadas numa única VM.</span><span class="sxs-lookup"><span data-stu-id="7939a-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="7939a-129">Por isso, ter mais partições pequenas dá-lhe uma maior flexibilidade ao ter alguns partições maior.</span><span class="sxs-lookup"><span data-stu-id="7939a-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="7939a-130">compromisso de Olá é ter muitos partições aumenta a sobrecarga de Service Fabric e não é possível efetuar operações transacionadas em partições.</span><span class="sxs-lookup"><span data-stu-id="7939a-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="7939a-131">É também mais tráfego de rede potenciais se código do serviço tem frequentemente tooaccess peças de dados que residem no partições diferentes.</span><span class="sxs-lookup"><span data-stu-id="7939a-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="7939a-132">Ao conceber o seu serviço, deve considerar cuidadosamente estas tooarrive os profissionais de TI e contras numa estratégia de criação de partições efetiva.</span><span class="sxs-lookup"><span data-stu-id="7939a-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="7939a-133">Vamos assumir que a aplicação tem um único serviço com monitorização de estado que tem um tamanho de arquivo que pode esperar toogrow tooDB_Size GB do ano.</span><span class="sxs-lookup"><span data-stu-id="7939a-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="7939a-134">São tooadd disposto mais aplicações (e as partições) como experiência crescimento além desse ano.</span><span class="sxs-lookup"><span data-stu-id="7939a-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="7939a-135">Olá replicação fator (RF), que determina o número de Olá de réplicas para os impactos de serviço Olá total DB_Size.</span><span class="sxs-lookup"><span data-stu-id="7939a-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="7939a-136">Olá DB_Size total em todas as réplicas é Olá multiplicado pelo DB_Size de fator de replicação.</span><span class="sxs-lookup"><span data-stu-id="7939a-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="7939a-137">Node_Size representa o espaço de disco de Olá/RAM por nó pretende toouse para o seu serviço.</span><span class="sxs-lookup"><span data-stu-id="7939a-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="7939a-138">Para melhor desempenho, Olá DB_Size deve caber na memória em cluster Olá e um Node_Size que está em torno Olá RAM de Olá que VM deve ser selecionada.</span><span class="sxs-lookup"><span data-stu-id="7939a-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="7939a-139">Atribuindo um Node_Size que é maior do que Olá capacidade de RAM, são depender paginação Olá fornecida pelo tempo de execução do Olá Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="7939a-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="7939a-140">Assim, o desempenho pode não ser ideal se os dados completos são considerados a toobe acesso frequente (desde o Olá, em seguida, dados é bloco paginados/out).</span><span class="sxs-lookup"><span data-stu-id="7939a-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="7939a-141">No entanto, para vários serviços onde é frequente apenas uma fração de dados de Olá, é mais económico.</span><span class="sxs-lookup"><span data-stu-id="7939a-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="7939a-142">número de Olá de nós é necessário para o máximo desempenho pode ser calculado da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="7939a-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="7939a-143">Conta para o crescimento</span><span class="sxs-lookup"><span data-stu-id="7939a-143">Account for growth</span></span>
<span data-ttu-id="7939a-144">Poderá pretender toocompute Olá diversas nós com base no Olá DB_Size espera que o toogrow de serviço, além disso toohello DB_Size que começou com.</span><span class="sxs-lookup"><span data-stu-id="7939a-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="7939a-145">Em seguida, aumente o número de Olá de nós à medida que cresce o serviço para que lhe é não sobre-aprovisionar número Olá de nós.</span><span class="sxs-lookup"><span data-stu-id="7939a-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="7939a-146">Mas o número de Olá de partições deve ser baseado no número de Olá de nós que são necessários quando estiver a executar o serviço em crescimento máximo.</span><span class="sxs-lookup"><span data-stu-id="7939a-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="7939a-147">Este é boa toohave algumas máquinas adicionais disponíveis em qualquer altura, para que pode processar qualquer picos inesperados ou a falha (por exemplo, se algumas VMs ficarem Inativos).</span><span class="sxs-lookup"><span data-stu-id="7939a-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="7939a-148">Embora Olá capacidade extra deve ser determinada ao utilizar os picos de esperado, um ponto de partida é tooreserve algumas VMs adicionais (5-10 por cento adicional).</span><span class="sxs-lookup"><span data-stu-id="7939a-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="7939a-149">Olá anterior assume um único serviço com monitorização de estado.</span><span class="sxs-lookup"><span data-stu-id="7939a-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="7939a-150">Se tiver mais do que um serviço com estado, terá tooadd Olá DB_Size associado Olá outros serviços em equação de Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="7939a-151">Em alternativa, pode calcular o número de Olá de nós em separado para cada serviço com monitorização de estado.</span><span class="sxs-lookup"><span data-stu-id="7939a-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="7939a-152">O serviço poderá ter as réplicas ou as partições que não são balanced.</span><span class="sxs-lookup"><span data-stu-id="7939a-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="7939a-153">Tenha em atenção que as partições podem também ter mais de dados que outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="7939a-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="7939a-154">Para obter mais informações sobre a criação de partições, consulte [artigo sobre as melhores práticas de criação de partições](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="7939a-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="7939a-155">No entanto, hello equação anterior é partição e réplica agnóstico relativamente, porque o Service Fabric assegura que as réplicas de Olá são distribuídas entre nós Olá de forma otimizada.</span><span class="sxs-lookup"><span data-stu-id="7939a-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="7939a-156">Utilize uma folha de cálculo de cálculo do custo</span><span class="sxs-lookup"><span data-stu-id="7939a-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="7939a-157">Agora vamos colocar alguns números real na fórmula Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="7939a-158">Um [folha de cálculo de exemplo](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) mostra como tooplan Olá capacidade para uma aplicação que contém três tipos de objetos de dados.</span><span class="sxs-lookup"><span data-stu-id="7939a-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="7939a-159">Para cada objeto, iremos aproximada tamanho e objetos quantos que esperamos toohave.</span><span class="sxs-lookup"><span data-stu-id="7939a-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="7939a-160">Podemos também selecionar réplicas quantos queremos de cada tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="7939a-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="7939a-161">folha de cálculo de Olá calcula a quantidade total de Olá de toobe memória armazenada Olá cluster.</span><span class="sxs-lookup"><span data-stu-id="7939a-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="7939a-162">Em seguida, iremos introduzir um tamanho da VM e o custo mensal.</span><span class="sxs-lookup"><span data-stu-id="7939a-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="7939a-163">Com base no tamanho da VM de Olá, folha de cálculo de Olá indica que Olá número mínimo de partições que tem de utilizar toosplit que se adeque ao seu toophysically dados em nós de Olá.</span><span class="sxs-lookup"><span data-stu-id="7939a-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="7939a-164">Pode pretendidos ao nível um grande número de tooaccommodate partições que necessidades de tráfego de rede e computação específico da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="7939a-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="7939a-165">folha de cálculo de Olá mostra o número de Olá de partições que estiver a gerir objetos de perfil de utilizador Olá aumentou de um toosix.</span><span class="sxs-lookup"><span data-stu-id="7939a-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="7939a-166">Agora, com base em todas estas informações, folha de cálculo de Olá mostra que fisicamente foi possível obter todos os dados de Olá com partições de Olá pretendida e as réplicas num cluster de nó de 26.</span><span class="sxs-lookup"><span data-stu-id="7939a-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="7939a-167">No entanto, este cluster seria possível densely packed, pelo que poderá ser útil algumas falhas de nó de tooaccommodate nós adicionais e atualizações.</span><span class="sxs-lookup"><span data-stu-id="7939a-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="7939a-168">folha de cálculo de Olá também mostra que ter mais do que 57 nós fornece nenhum valor adicional porque terá de nós vazios.</span><span class="sxs-lookup"><span data-stu-id="7939a-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="7939a-169">Novamente, poderá ser útil toogo acima 57 nós mesmo assim falhas de nó tooaccommodate e atualizações.</span><span class="sxs-lookup"><span data-stu-id="7939a-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="7939a-170">Pode otimizar Olá folha de cálculo toomatch necessidades específicas da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="7939a-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Folha de cálculo de cálculo do custo][Image1]

## <a name="next-steps"></a><span data-ttu-id="7939a-172">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="7939a-172">Next steps</span></span>
<span data-ttu-id="7939a-173">Veja [serviços de criação de partições de Service Fabric] [ 10] toolearn mais informações sobre o serviço de criação de partições.</span><span class="sxs-lookup"><span data-stu-id="7939a-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md
