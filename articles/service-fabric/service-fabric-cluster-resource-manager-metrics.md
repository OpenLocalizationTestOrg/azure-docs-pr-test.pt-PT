---
title: "carga de microsserviço Azure aaaManage através de métricas | Microsoft Docs"
description: "Saiba mais sobre como métricas tooconfigure e utilização no Service Fabric toomanage service consumo de recursos."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="45a41-103">Gestão consumo de recursos e a carga no Service Fabric com a métrica</span><span class="sxs-lookup"><span data-stu-id="45a41-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="45a41-104">*Métricas* Olá recursos que o cuidado de serviços sobre e que são fornecidos por nós de Olá no cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="45a41-105">Uma métrica é tudo o que pretende que o toomanage na ordem tooimprove monitor Olá um desempenho ou dos seus serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="45a41-106">Por exemplo, poderá ver tooknow de consumo de memória se o serviço estiver sobrecarregado.</span><span class="sxs-lookup"><span data-stu-id="45a41-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="45a41-107">Utilize outro é toofigure enviados se o serviço de Olá foi possível mover noutro local onde a memória é que inferior restritas na ordem tooget melhorar o desempenho.</span><span class="sxs-lookup"><span data-stu-id="45a41-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="45a41-108">Coisas como a utilização de memória, disco e CPU são exemplos de métricas.</span><span class="sxs-lookup"><span data-stu-id="45a41-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="45a41-109">Estas métricas são métricas físicas, recursos que correspondam toophysical recursos num nó de Olá que necessitam de toobe gerido.</span><span class="sxs-lookup"><span data-stu-id="45a41-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="45a41-110">Métricas também podem ser (e são geralmente) métricas lógicas.</span><span class="sxs-lookup"><span data-stu-id="45a41-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="45a41-111">A métrica de lógica está coisas como "MyWorkQueueDepth" ou "MessagesToProcess" ou "TotalRecords".</span><span class="sxs-lookup"><span data-stu-id="45a41-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="45a41-112">Métricas lógicas são definidas pela aplicação e indiretamente correspondem toosome consumo de recurso físico.</span><span class="sxs-lookup"><span data-stu-id="45a41-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="45a41-113">Métricas lógicas são comuns porque pode ser difícil toomeasure e consumo de relatório de recursos físicos numa base por serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="45a41-114">complexidade Olá de medição e elaboração de relatórios de métricas físicas é também por que motivo o Service Fabric fornece algumas nas métricas predefinidas.</span><span class="sxs-lookup"><span data-stu-id="45a41-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="45a41-115">Nas métricas predefinidas</span><span class="sxs-lookup"><span data-stu-id="45a41-115">Default metrics</span></span>
<span data-ttu-id="45a41-116">Digamos que pretende que o tooget iniciado escrever e implementar o seu serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="45a41-117">Neste momento, não sabe que recursos físicos ou lógicos que consome.</span><span class="sxs-lookup"><span data-stu-id="45a41-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="45a41-118">Que é adequado!</span><span class="sxs-lookup"><span data-stu-id="45a41-118">That’s fine!</span></span> <span data-ttu-id="45a41-119">Olá Gestor de recursos de Cluster do serviço de recursos de infraestrutura utiliza algumas nas métricas predefinidas quando não existem outras métricas são especificadas.</span><span class="sxs-lookup"><span data-stu-id="45a41-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="45a41-120">São:</span><span class="sxs-lookup"><span data-stu-id="45a41-120">They are:</span></span>

  - <span data-ttu-id="45a41-121">PrimaryCount - contagem de réplicas primárias num nó de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="45a41-122">ReplicaCount - contagem de totais réplicas com monitorização de estado do nó de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="45a41-123">Contagem - contagem de todos os objetos do serviço (sem monitorização de estado e com monitorização de estado) no nó de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="45a41-124">Métrica</span><span class="sxs-lookup"><span data-stu-id="45a41-124">Metric</span></span> | <span data-ttu-id="45a41-125">Carga de instância sem monitorização de estado</span><span class="sxs-lookup"><span data-stu-id="45a41-125">Stateless Instance Load</span></span> | <span data-ttu-id="45a41-126">Carga secundária com monitorização de estado</span><span class="sxs-lookup"><span data-stu-id="45a41-126">Stateful Secondary Load</span></span> | <span data-ttu-id="45a41-127">Com monitorização de estado carga primária</span><span class="sxs-lookup"><span data-stu-id="45a41-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="45a41-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="45a41-128">PrimaryCount</span></span> |<span data-ttu-id="45a41-129">0</span><span class="sxs-lookup"><span data-stu-id="45a41-129">0</span></span> |<span data-ttu-id="45a41-130">0</span><span class="sxs-lookup"><span data-stu-id="45a41-130">0</span></span> |<span data-ttu-id="45a41-131">1</span><span class="sxs-lookup"><span data-stu-id="45a41-131">1</span></span> |
| <span data-ttu-id="45a41-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="45a41-132">ReplicaCount</span></span> |<span data-ttu-id="45a41-133">0</span><span class="sxs-lookup"><span data-stu-id="45a41-133">0</span></span> |<span data-ttu-id="45a41-134">1</span><span class="sxs-lookup"><span data-stu-id="45a41-134">1</span></span> |<span data-ttu-id="45a41-135">1</span><span class="sxs-lookup"><span data-stu-id="45a41-135">1</span></span> |
| <span data-ttu-id="45a41-136">Contagem</span><span class="sxs-lookup"><span data-stu-id="45a41-136">Count</span></span> |<span data-ttu-id="45a41-137">1</span><span class="sxs-lookup"><span data-stu-id="45a41-137">1</span></span> |<span data-ttu-id="45a41-138">1</span><span class="sxs-lookup"><span data-stu-id="45a41-138">1</span></span> |<span data-ttu-id="45a41-139">1</span><span class="sxs-lookup"><span data-stu-id="45a41-139">1</span></span> |

<span data-ttu-id="45a41-140">Para cargas de trabalho básicas, nas métricas predefinidas de Olá fornecem uma distribuição decent de trabalho no cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="45a41-141">No seguinte exemplo de Olá, vamos ver o que acontece quando iremos criar dois serviços e baseiam-se nas métricas predefinidas de Olá para balanceamento.</span><span class="sxs-lookup"><span data-stu-id="45a41-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="45a41-142">serviço primeiro Olá é um serviço com monitorização de estado com partições de três e definir o tamanho de três uma réplica de destino.</span><span class="sxs-lookup"><span data-stu-id="45a41-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="45a41-143">serviço segundo Olá é um serviço sem monitorização de estado com uma partição e uma contagem de instâncias de três.</span><span class="sxs-lookup"><span data-stu-id="45a41-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="45a41-144">Eis o que obtém:</span><span class="sxs-lookup"><span data-stu-id="45a41-144">Here's what you get:</span></span>

<span data-ttu-id="45a41-145"><center>
![Esquema de cluster com nas métricas predefinidas][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="45a41-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="45a41-146">Toonote algumas coisas:</span><span class="sxs-lookup"><span data-stu-id="45a41-146">Some things toonote:</span></span>
  - <span data-ttu-id="45a41-147">Réplicas principais de serviço com estado Olá estão distribuídas por vários nós</span><span class="sxs-lookup"><span data-stu-id="45a41-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="45a41-148">Réplicas para Olá mesma partição são em nós diferentes</span><span class="sxs-lookup"><span data-stu-id="45a41-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="45a41-149">número total de Olá de primaries e bases de dados secundárias é distribuído no cluster de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="45a41-150">número total de Olá de objetos de serviço é alocado uniformemente em cada nó</span><span class="sxs-lookup"><span data-stu-id="45a41-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="45a41-151">Boa!</span><span class="sxs-lookup"><span data-stu-id="45a41-151">Good!</span></span>

<span data-ttu-id="45a41-152">nas métricas predefinidas de Olá great funcionam como um início.</span><span class="sxs-lookup"><span data-stu-id="45a41-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="45a41-153">No entanto, nas métricas predefinidas de Olá irão apenas transportar, até ao momento.</span><span class="sxs-lookup"><span data-stu-id="45a41-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="45a41-154">Por exemplo: o que é a probabilidade de Olá que a criação de partições de Olá esquema selecionado resultados no mesmo perfeitamente utilização por todas as partições?</span><span class="sxs-lookup"><span data-stu-id="45a41-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="45a41-155">O que é a possibilidade de Olá Olá carga para um determinado serviço é constante ao longo do tempo, ou mesmo apenas Olá mesmo através de várias partições agora?</span><span class="sxs-lookup"><span data-stu-id="45a41-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="45a41-156">É possível executar com apenas Olá nas métricas predefinidas de.</span><span class="sxs-lookup"><span data-stu-id="45a41-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="45a41-157">No entanto, se o fizer, normalmente, significa que a utilização do cluster inferior e mais desigual que gostaria de.</span><span class="sxs-lookup"><span data-stu-id="45a41-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="45a41-158">Isto acontece porque Olá nas métricas predefinidas não é adaptável e presumem que tudo é equivalente.</span><span class="sxs-lookup"><span data-stu-id="45a41-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="45a41-159">Por exemplo, um site primário que está ocupado e outro que não é ambas contribuem métrica de PrimaryCount toohello "1".</span><span class="sxs-lookup"><span data-stu-id="45a41-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="45a41-160">Olá pior das hipóteses, utilizar apenas Olá nas métricas predefinidas de pode também originar de nós overscheduled, resultando em problemas de desempenho.</span><span class="sxs-lookup"><span data-stu-id="45a41-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="45a41-161">Se estiver interessado em obter Olá a maioria das fora do seu cluster e evitar problemas de desempenho, terá de métricas personalizadas toouse e relatórios de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="45a41-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="45a41-162">Métricas personalizadas</span><span class="sxs-lookup"><span data-stu-id="45a41-162">Custom metrics</span></span>
<span data-ttu-id="45a41-163">As métricas são configuradas numa base por denominado-service-instância quando estiver a criar serviço Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="45a41-164">Qualquer métrica tem algumas propriedades que descrevem este: um nome, uma ponderação e uma carga predefinida.</span><span class="sxs-lookup"><span data-stu-id="45a41-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="45a41-165">: Métrica Olá nome da métrica de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="45a41-166">o nome da métrica Olá é um identificador exclusivo para a métrica de Olá num cluster de Olá perspetiva Olá Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="45a41-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="45a41-167">Peso: Ponderação métrica define como importante esta métrica é relativo toohello outras métricas para este serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="45a41-168">Carga de predefinição: carga predefinido de Olá é representada forma diferente dependendo se o serviço de Olá é sem monitorização de estado ou com monitorização de estado.</span><span class="sxs-lookup"><span data-stu-id="45a41-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="45a41-169">Para os serviços sem monitorização de estado, cada métrica tem uma propriedade de único com o nome DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="45a41-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="45a41-170">Para definir os serviços com monitorização de estado:</span><span class="sxs-lookup"><span data-stu-id="45a41-170">For stateful services you define:</span></span>
    * <span data-ttu-id="45a41-171">PrimaryDefaultLoad: período desta métrica que este serviço consome quando for um site primário predefinido de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="45a41-172">SecondaryDefaultLoad: período desta métrica que este serviço consome quando for uma secundária predefinido de Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="45a41-173">Se definir métricas personalizadas e pretender nas métricas predefinidas de too_also_ utilize Olá, terá de too_explicitly_ adicionar nas métricas predefinidas de Olá criar e definem ponderações e valores para os mesmos.</span><span class="sxs-lookup"><span data-stu-id="45a41-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="45a41-174">Isto acontece porque tem de definir relação Olá entre Olá nas métricas predefinidas e as métricas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="45a41-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="45a41-175">Por exemplo, talvez que mais lhe interessam ConnectionCount ou WorkQueueDepth mais do que a distribuição primária.</span><span class="sxs-lookup"><span data-stu-id="45a41-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="45a41-176">Por ponderação de Olá predefinido de Olá PrimaryCount métrica é elevado, pelo que pretende tooreduce-tooMedium quando adicionar o seu tooensure métricas que têm precedência.</span><span class="sxs-lookup"><span data-stu-id="45a41-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="45a41-177">Definir métricas para o seu serviço - um exemplo</span><span class="sxs-lookup"><span data-stu-id="45a41-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="45a41-178">Vamos supor que quiser Olá a seguinte configuração:</span><span class="sxs-lookup"><span data-stu-id="45a41-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="45a41-179">O serviço de relatórios uma métrica com o nome "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="45a41-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="45a41-180">Também deve nas métricas predefinidas de toouse Olá</span><span class="sxs-lookup"><span data-stu-id="45a41-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="45a41-181">Tiver terminado algumas medidas e saber o que normalmente uma réplica primária do que o serviço demora 20 unidades de "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="45a41-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="45a41-182">Bases de dados secundárias utilizam 5 unidades de "ConnectionCount"</span><span class="sxs-lookup"><span data-stu-id="45a41-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="45a41-183">Sabe que "ConnectionCount" é a métrica mais importante de Olá em termos de gerir o desempenho de Olá deste serviço específico</span><span class="sxs-lookup"><span data-stu-id="45a41-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="45a41-184">Pretender continuar com balanceamento de réplicas primárias.</span><span class="sxs-lookup"><span data-stu-id="45a41-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="45a41-185">Balanceamento de réplicas primárias geralmente é uma boa ideia, independentemente da que.</span><span class="sxs-lookup"><span data-stu-id="45a41-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="45a41-186">Isto ajuda a evitar a perda de Olá de algumas domínio nó ou falhas de afetar a maioria das réplicas primárias juntamente com o mesmo.</span><span class="sxs-lookup"><span data-stu-id="45a41-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="45a41-187">Caso contrário, nas métricas predefinidas de Olá estejam funcionais</span><span class="sxs-lookup"><span data-stu-id="45a41-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="45a41-188">Eis o código de Olá que seria a escrever toocreate um serviço com que a configuração da métrica:</span><span class="sxs-lookup"><span data-stu-id="45a41-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="45a41-189">Código:</span><span class="sxs-lookup"><span data-stu-id="45a41-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="45a41-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="45a41-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="45a41-191">Olá acima exemplos e hello rest deste documento descrevem as métricas de gestão numa base por-nome-service.</span><span class="sxs-lookup"><span data-stu-id="45a41-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="45a41-192">Também é possível toodefine métricas para os serviços no serviço de Olá _tipo_ nível.</span><span class="sxs-lookup"><span data-stu-id="45a41-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="45a41-193">Isto é conseguido através da especificação-los no seu manifestos de serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="45a41-194">Definir as métricas de nível de tipo não é recomendada por vários motivos.</span><span class="sxs-lookup"><span data-stu-id="45a41-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="45a41-195">motivo primeiro Olá é que os nomes de métricos são frequentemente específico do ambiente.</span><span class="sxs-lookup"><span data-stu-id="45a41-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="45a41-196">A menos que exista um contrato sólido no local, não é possível não se esqueça de que métrica Olá "Núcleos" no um ambiente não se encontra "MiliCores" ou "Núcleos" em outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="45a41-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="45a41-197">Se as métricas são definidas no seu manifesto tem toocreate manifestos novo por ambiente.</span><span class="sxs-lookup"><span data-stu-id="45a41-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="45a41-198">Normalmente, isto leva tooa proliferação de manifestos diferentes com apenas diferenças menores, que podem levar toomanagement dificuldades.</span><span class="sxs-lookup"><span data-stu-id="45a41-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="45a41-199">Métricas cargas normalmente são atribuídas numa base por-nome--instância de serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="45a41-200">Por exemplo, vamos supor que cria uma instância de Olá service para CustomerA quem planos toouse apenas ligeiramente.</span><span class="sxs-lookup"><span data-stu-id="45a41-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="45a41-201">Também Digamos que criar outro para CustomerB que tenha uma maior carga de trabalho.</span><span class="sxs-lookup"><span data-stu-id="45a41-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="45a41-202">Neste caso, provavelmente, seria aconselhável predefinido de Olá tootweak carrega para esses serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="45a41-203">Se tiver métricas e carrega definida através de manifestos e quiser toosupport neste cenário, requer diferentes aplicações e tipos de serviço para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="45a41-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="45a41-204">os valores de Olá definidos no momento de criação do serviço substituem as definido no manifesto de Olá, pelo que pode utilizar essa tooset Olá específico as predefinições de.</span><span class="sxs-lookup"><span data-stu-id="45a41-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="45a41-205">No entanto, se o fizer que faz com que os valores de Olá declarados na correspondência de toonot Olá manifestos que esses Olá, na verdade, é executado o serviço com.</span><span class="sxs-lookup"><span data-stu-id="45a41-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="45a41-206">Isto pode levar tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="45a41-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="45a41-207">Como um lembrete: Se pretender apenas nas métricas predefinidas de toouse Olá, não precisa de coleção de métricas de Olá tootouch de todo ou fazer nada especiais ao criar o seu serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="45a41-208">nas métricas predefinidas de Olá obterem utilizadas automaticamente quando não existem outros são definidos.</span><span class="sxs-lookup"><span data-stu-id="45a41-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="45a41-209">Agora, vamos através de cada uma destas definições em mais detalhe e falar sobre o comportamento de Olá que afeta.</span><span class="sxs-lookup"><span data-stu-id="45a41-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="45a41-210">Carregar</span><span class="sxs-lookup"><span data-stu-id="45a41-210">Load</span></span>
<span data-ttu-id="45a41-211">Olá ponto todo de definir a métrica é toorepresent algumas carga.</span><span class="sxs-lookup"><span data-stu-id="45a41-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="45a41-212">*Carga* é a quantidade de uma determinada métrica é consumido por algumas instâncias de serviço ou a réplica de um determinado nó.</span><span class="sxs-lookup"><span data-stu-id="45a41-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="45a41-213">Carga pode ser configurada em praticamente qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="45a41-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="45a41-214">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="45a41-214">For example:</span></span>

  - <span data-ttu-id="45a41-215">Carga pode ser definida quando é criado um serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="45a41-216">Esta opção é denominada _carga predefinido_.</span><span class="sxs-lookup"><span data-stu-id="45a41-216">This is called _default load_.</span></span>
  - <span data-ttu-id="45a41-217">carrega as informações das métricas Olá, incluindo o predefinido, para um serviço podem ser atualizados depois do serviço de Olá é criado.</span><span class="sxs-lookup"><span data-stu-id="45a41-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="45a41-218">Esta opção é denominada _atualizar um serviço_.</span><span class="sxs-lookup"><span data-stu-id="45a41-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="45a41-219">Olá cargas para uma determinada partição podem ser reposição toohello os valores predefinidos, para que o serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="45a41-220">Esta opção é denominada _repor a carga da partição_.</span><span class="sxs-lookup"><span data-stu-id="45a41-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="45a41-221">Pode ser comunicada carga num por base do objeto de serviço dinamicamente durante o tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="45a41-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="45a41-222">Esta opção é denominada _reporting carga_.</span><span class="sxs-lookup"><span data-stu-id="45a41-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="45a41-223">Todas estas estratégias podem ser utilizadas dentro Olá mesmo service longo da respetiva duração.</span><span class="sxs-lookup"><span data-stu-id="45a41-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="45a41-224">Carga predefinido</span><span class="sxs-lookup"><span data-stu-id="45a41-224">Default load</span></span>
<span data-ttu-id="45a41-225">*Predefinição carga* é a quantidade de métrica de Olá consome de cada objeto de serviço (instância sem monitorização de estado ou réplica com monitorização de estado) deste serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="45a41-226">Olá Gestor de recursos de Cluster utiliza este número para a carga Olá do objeto de serviço Olá até receber outras informações, tais como um relatório de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="45a41-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="45a41-227">Para serviços mais simples, a carga de predefinição Olá é uma definição de estática.</span><span class="sxs-lookup"><span data-stu-id="45a41-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="45a41-228">o carregamento da predefinição Olá nunca é atualizado e é utilizado para a duração de Olá do serviço de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="45a41-229">Predefinição carrega ótimo funciona para cenários em que determinados quantidades de recursos dedicado toodifferent cargas de trabalho e não alteram o planeamento de capacidade simple.</span><span class="sxs-lookup"><span data-stu-id="45a41-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="45a41-230">Para obter mais informações sobre a gestão de capacidade e definir as capacidades para nós de Olá no seu cluster, consulte [neste artigo](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="45a41-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="45a41-231">Olá Gestor de recursos de Cluster permite toospecify de serviços com monitorização de estado de carga predefinido diferente Primaries e secundárias.</span><span class="sxs-lookup"><span data-stu-id="45a41-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="45a41-232">Serviços sem monitorização de estado só podem especificar um valor que se aplica tooall instâncias.</span><span class="sxs-lookup"><span data-stu-id="45a41-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="45a41-233">Para os serviços com monitorização de estado, carga de predefinição Olá para réplicas principais e secundários são normalmente diferentes, uma vez que as réplicas fazer diferentes tipos de trabalho em cada função.</span><span class="sxs-lookup"><span data-stu-id="45a41-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="45a41-234">Por exemplo, Primaries normalmente servir leituras e escritas e lidar com a maior parte da carga de computacional Olá, enquanto não secundárias.</span><span class="sxs-lookup"><span data-stu-id="45a41-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="45a41-235">Normalmente, a carga de predefinição Olá para uma réplica primária é superior ao Olá predefinido de carga para as réplicas secundárias.</span><span class="sxs-lookup"><span data-stu-id="45a41-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="45a41-236">Olá real números deve dependem os seus próprios valores.</span><span class="sxs-lookup"><span data-stu-id="45a41-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="45a41-237">Carga dinâmico</span><span class="sxs-lookup"><span data-stu-id="45a41-237">Dynamic load</span></span>
<span data-ttu-id="45a41-238">Imaginemos que tiver sido a executar o seu serviço de tempo.</span><span class="sxs-lookup"><span data-stu-id="45a41-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="45a41-239">Com alguns monitorização, ter reparado que:</span><span class="sxs-lookup"><span data-stu-id="45a41-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="45a41-240">Algumas partições ou instâncias de um determinado serviço consumam mais recursos do que outras pessoas</span><span class="sxs-lookup"><span data-stu-id="45a41-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="45a41-241">Alguns serviços tem carga varia ao longo do tempo.</span><span class="sxs-lookup"><span data-stu-id="45a41-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="45a41-242">Há muitos coisas que pode fazer com que estes tipos de flutuações de carga.</span><span class="sxs-lookup"><span data-stu-id="45a41-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="45a41-243">Por exemplo, diferentes serviços ou partições estão associadas a diferentes clientes com requisitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="45a41-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="45a41-244">Também pode alterar a carga porque a quantidade de Olá de serviço do trabalho Olá varia decorrer Olá do dia de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="45a41-245">Independentemente da razão de Olá, normalmente, não há nenhum número único que pode utilizar para a predefinição.</span><span class="sxs-lookup"><span data-stu-id="45a41-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="45a41-246">Isto é particularmente verdadeiro se quiser tooget Olá mais utilização fora do cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="45a41-247">Qualquer valor que escolha para a carga de predefinição está errada algumas das tempo Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="45a41-248">Predefinição incorreta carrega resultará na Olá Gestor de recursos do Cluster de ativação pós-falha ou em alocar recursos.</span><span class="sxs-lookup"><span data-stu-id="45a41-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="45a41-249">Como resultado, tiver nós que são através de ou em utilizados, apesar de Olá Gestor de recursos do Cluster pensa balanceamento de cluster Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="45a41-250">Predefinição são ainda boa, uma vez que fornecem algumas informações para colocação inicial, mas não ainda é um bloco completo para cargas de trabalho reais.</span><span class="sxs-lookup"><span data-stu-id="45a41-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="45a41-251">captura tooaccurately alterar os requisitos de recursos, Olá Gestor de recursos de Cluster permite que cada tooupdate de objeto de serviço própria carga durante o tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="45a41-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="45a41-252">Esta opção é denominada relatórios de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="45a41-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="45a41-253">Relatórios de carga dinâmico permitir que as réplicas ou instâncias tooadjust respetiva carga comunicadas/alocação de métricas ao longo da respetiva duração.</span><span class="sxs-lookup"><span data-stu-id="45a41-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="45a41-254">Uma réplica de serviço ou a instância que foi frio e não efetuar qualquer trabalho normalmente reportarão que estava a utilizar baixas quantidades de uma métrica indicada.</span><span class="sxs-lookup"><span data-stu-id="45a41-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="45a41-255">Uma réplica ocupada ou instância reportarão que estão a utilizar mais.</span><span class="sxs-lookup"><span data-stu-id="45a41-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="45a41-256">Carga por réplica ou de instância de relatórios permite Olá tooreorganize do Gestor de recursos do Cluster de objetos do serviço de individuais Olá num cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="45a41-257">Reorganizar serviços Olá ajuda a garantir a obtêm recursos Olá necessitam.</span><span class="sxs-lookup"><span data-stu-id="45a41-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="45a41-258">Serviços ocupados eficazmente obter demasiado "recuperar" recursos a partir de outros as réplicas ou instâncias que estão atualmente frio ou fazer menos trabalho.</span><span class="sxs-lookup"><span data-stu-id="45a41-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="45a41-259">Dentro do Reliable Services, carga de tooreport Olá código dinamicamente este aspeto:</span><span class="sxs-lookup"><span data-stu-id="45a41-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="45a41-260">Código:</span><span class="sxs-lookup"><span data-stu-id="45a41-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="45a41-261">Um serviço pode comunicar em qualquer uma das métricas de Olá definidas para o mesmo no momento de criação.</span><span class="sxs-lookup"><span data-stu-id="45a41-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="45a41-262">Se uma carga de relatórios do serviço para uma métrica de que não seja configurado toouse, o Service Fabric ignora desse relatório.</span><span class="sxs-lookup"><span data-stu-id="45a41-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="45a41-263">Se existirem outras métricas comunicadas num Olá mesmo tempo que sejam válidos, esses relatórios são aceites.</span><span class="sxs-lookup"><span data-stu-id="45a41-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="45a41-264">Código do serviço pode medir e gerar relatórios Olá todas as métricas que confie como, e operadores podem especificar Olá configuração da métrica toouse sem ter de código do serviço toochange Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="45a41-265">Atualizar a configuração de métrica de um serviço</span><span class="sxs-lookup"><span data-stu-id="45a41-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="45a41-266">lista Olá das métricas associados ao serviço de Olá, e propriedades Olá desses métricas podem ser atualizadas dinamicamente, enquanto serviço Olá está em direto.</span><span class="sxs-lookup"><span data-stu-id="45a41-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="45a41-267">Isto permite a experimentação e flexibilidade.</span><span class="sxs-lookup"><span data-stu-id="45a41-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="45a41-268">Alguns exemplos de quando isto é útil são:</span><span class="sxs-lookup"><span data-stu-id="45a41-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="45a41-269">desativar uma métrica com um relatório buggy para um serviço específico</span><span class="sxs-lookup"><span data-stu-id="45a41-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="45a41-270">reconfiguração Olá ponderações de métricas com base no comportamento pretendido</span><span class="sxs-lookup"><span data-stu-id="45a41-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="45a41-271">Ativar uma métrica de novo, apenas depois de código Olá já foi implementado e validar através de outros mecanismos</span><span class="sxs-lookup"><span data-stu-id="45a41-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="45a41-272">alterar Olá predefinido de carga para um serviço com base no comportamento observado e consumo</span><span class="sxs-lookup"><span data-stu-id="45a41-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="45a41-273">Olá principais APIs para alterar a configuração da métrica são `FabricClient.ServiceManagementClient.UpdateServiceAsync` em c# e `Update-ServiceFabricService` no PowerShell.</span><span class="sxs-lookup"><span data-stu-id="45a41-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="45a41-274">Qualquer informação especificar com estas APIs substitui Olá existente as informações das métricas para o serviço de Olá imediatamente.</span><span class="sxs-lookup"><span data-stu-id="45a41-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="45a41-275">A combinação de valores de carga predefinido e os relatórios de carga dinâmico</span><span class="sxs-lookup"><span data-stu-id="45a41-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="45a41-276">Carga predefinido e carrega dinâmica pode ser utilizadas para Olá mesmo serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="45a41-277">Quando utiliza um serviço de carregamento predefinido e relatórios de carga dinâmico, carga predefinido funciona como uma estimativa até apareçam relatórios dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="45a41-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="45a41-278">Carregamento predefinido é boa porque proporciona Olá Gestor de recursos do Cluster algo toowork com.</span><span class="sxs-lookup"><span data-stu-id="45a41-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="45a41-279">carga de predefinição Olá permite Olá tooplace do Gestor de recursos do Cluster de objetos do serviço Olá em localizações boas quando forem criados.</span><span class="sxs-lookup"><span data-stu-id="45a41-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="45a41-280">Se não existem informações de carga predefinido, colocação dos serviços é efetivamente aleatória.</span><span class="sxs-lookup"><span data-stu-id="45a41-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="45a41-281">Quando a carga relatórios chegam mais tarde colocação aleatório inicial de Olá é frequentemente errada e Olá Gestor de recursos do Cluster tem toomove serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="45a41-282">Vamos colocar o nosso exemplo anterior e ver o que acontece quando adicionamos alguns métricas personalizadas e, em seguida, relatórios de carga dinâmico.</span><span class="sxs-lookup"><span data-stu-id="45a41-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="45a41-283">Neste exemplo, utilizamos "MemoryInMb" como uma métrica de exemplo.</span><span class="sxs-lookup"><span data-stu-id="45a41-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="45a41-284">Memória é uma das métricas de sistema de Olá Service Fabric pode [recursos governar](service-fabric-resource-governance.md), e relatórios por si é normalmente difícil.</span><span class="sxs-lookup"><span data-stu-id="45a41-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="45a41-285">Não, na verdade, esperamos que tooreport no consumo de memória Memória é utilizado aqui como um toolearning ajuda sobre as capacidades de Olá de Olá Gestor de recursos do Cluster.</span><span class="sxs-lookup"><span data-stu-id="45a41-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="45a41-286">Vamos presumem que criámos inicialmente serviço com estado Olá com Olá os seguintes comandos:</span><span class="sxs-lookup"><span data-stu-id="45a41-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="45a41-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="45a41-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="45a41-288">Como um lembrete, esta sintaxe é ("MetricName MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="45a41-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="45a41-289">Vamos ver que um esquema de cluster possíveis pode ter o seguinte aspeto:</span><span class="sxs-lookup"><span data-stu-id="45a41-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="45a41-290"><center>
![Cluster equilibrado com métricas predefinidos e personalizados][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="45a41-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="45a41-291">Algumas coisas que são vale a pena realçar:</span><span class="sxs-lookup"><span data-stu-id="45a41-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="45a41-292">Cada réplicas secundárias dentro de uma partição podem ter as seus próprios carga</span><span class="sxs-lookup"><span data-stu-id="45a41-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="45a41-293">Em geral métricas Olá parecer equilibradas.</span><span class="sxs-lookup"><span data-stu-id="45a41-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="45a41-294">Para memória, Olá rácio entre Olá máxima e mínima de carga é 1.75 (nó Olá com Olá mais carga é N3, Olá pelo menos, N2 e 28/16 = 1.75).</span><span class="sxs-lookup"><span data-stu-id="45a41-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="45a41-295">Existem algumas coisas que ainda temos tooexplain:</span><span class="sxs-lookup"><span data-stu-id="45a41-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="45a41-296">O que determinou que o se um rácio de 1.75 foi razoável, ou não?</span><span class="sxs-lookup"><span data-stu-id="45a41-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="45a41-297">Como Olá Gestor de recursos do Cluster saber se isto for suficientemente boa ou se houver mais toodo de trabalho?</span><span class="sxs-lookup"><span data-stu-id="45a41-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="45a41-298">Quando balanceamento acontecer?</span><span class="sxs-lookup"><span data-stu-id="45a41-298">When does balancing happen?</span></span>
* <span data-ttu-id="45a41-299">O que, significa que memória foi ponderada "Alto"?</span><span class="sxs-lookup"><span data-stu-id="45a41-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="45a41-300">Métricas ponderações</span><span class="sxs-lookup"><span data-stu-id="45a41-300">Metric weights</span></span>
<span data-ttu-id="45a41-301">Controlo Olá mesmo métricas em diferentes serviços é importante.</span><span class="sxs-lookup"><span data-stu-id="45a41-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="45a41-302">Se a vista global é o que permite Olá consumo de tootrack do Gestor de recursos de Cluster no cluster de Olá, balancear consumo em nós e certifique-se de que nós não passam capacidade.</span><span class="sxs-lookup"><span data-stu-id="45a41-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="45a41-303">No entanto, os serviços podem ter vistas diferentes como toohello importância de Olá métrica do mesma.</span><span class="sxs-lookup"><span data-stu-id="45a41-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="45a41-304">Além disso, num cluster com várias métricas e muitos dos serviços, perfeitamente com balanceamento de soluções podem não existir para todas as métricas.</span><span class="sxs-lookup"><span data-stu-id="45a41-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="45a41-305">Como é que Olá Gestor de recursos de Cluster deve processar estas situações?</span><span class="sxs-lookup"><span data-stu-id="45a41-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="45a41-306">Métricas ponderações permitem Olá toodecide do Gestor de recursos do Cluster como toobalance Olá cluster quando não existe nenhuma resposta perfeita.</span><span class="sxs-lookup"><span data-stu-id="45a41-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="45a41-307">Métricas ponderações também permitem Olá toobalance do Gestor de recursos do Cluster serviços específicos diferente.</span><span class="sxs-lookup"><span data-stu-id="45a41-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="45a41-308">Métricas podem ter quatro níveis diferente ponderação: Zero, baixa, média e alta.</span><span class="sxs-lookup"><span data-stu-id="45a41-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="45a41-309">Uma métrica com uma ponderação igual a zero contribui nada quando ponderar se as coisas são equilibradas ou não.</span><span class="sxs-lookup"><span data-stu-id="45a41-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="45a41-310">No entanto, a sua carga ainda contribuir toocapacity gestão.</span><span class="sxs-lookup"><span data-stu-id="45a41-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="45a41-311">Métricas com Zero ponderação são ainda úteis e são frequentemente utilizadas como parte do comportamento de serviço e a monitorização do desempenho.</span><span class="sxs-lookup"><span data-stu-id="45a41-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="45a41-312">[Este artigo](service-fabric-diagnostics-event-generation-infra.md) fornece mais informações sobre a utilização de Olá de métricas para monitorização e diagnóstico dos seus serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="45a41-313">impacto real de Olá de peso de métrico diferentes no cluster de Olá é que essa Olá Gestor de recursos do Cluster gera diferentes soluções.</span><span class="sxs-lookup"><span data-stu-id="45a41-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="45a41-314">Métricas ponderações dizer Olá Gestor de recursos de Cluster que determinadas métricas são mais importantes do que outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="45a41-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="45a41-315">Quando não existe nenhum Olá solução perfeita Gestor de recursos do Cluster pode preferir soluções que equilibrar Olá superiores ponderado métricas melhor.</span><span class="sxs-lookup"><span data-stu-id="45a41-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="45a41-316">Se um serviço pensa uma métrica específica é indiferente, que pode considerar a utilização dos que métrica imbalanced.</span><span class="sxs-lookup"><span data-stu-id="45a41-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="45a41-317">Isto permite que outro serviço tooget uma distribuição, mesmo que alguns métrica que é importante tooit.</span><span class="sxs-lookup"><span data-stu-id="45a41-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="45a41-318">Vamos ver um exemplo de alguns relatórios de carga e a métrica de forma diferente ponderações resulta em alocações diferentes no cluster de Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="45a41-319">Neste exemplo, Vemos que mudar o peso relativo de Olá das métricas de Olá faz com que Olá toocreate do Gestor de recursos de Cluster diferentes disposição dos serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="45a41-320"><center>
![Exemplo de métrica de ponderação e o seu impacto em soluções de balanceamento][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="45a41-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="45a41-321">Neste exemplo, existem quatro diferentes serviços, todos os valores de diferentes relatórios dois diferentes com base nas métricas, MetricA e MetricB.</span><span class="sxs-lookup"><span data-stu-id="45a41-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="45a41-322">Um cenário, todos os serviços de Olá definem MetricA é mais importante Olá (peso = alta) e MetricB como indiferente (peso = baixa).</span><span class="sxs-lookup"><span data-stu-id="45a41-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="45a41-323">Como resultado, Vemos que Olá Gestor de recursos de Cluster coloca serviços Olá, de modo a que MetricA melhor com balanceamento de MetricB.</span><span class="sxs-lookup"><span data-stu-id="45a41-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="45a41-324">"Melhor equilibrada" significa que MetricA tem um inferior tem um desvio-padrão inferior que MetricB.</span><span class="sxs-lookup"><span data-stu-id="45a41-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="45a41-325">No segundo caso Olá, iremos inverter ponderações métrica Olá.</span><span class="sxs-lookup"><span data-stu-id="45a41-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="45a41-326">Como resultado, Olá Gestor de recursos do Cluster trocas serviços A e B toocome cópias de segurança com uma alocação onde MetricB é melhor com balanceamento de MetricA.</span><span class="sxs-lookup"><span data-stu-id="45a41-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="45a41-327">Métricas ponderações determinam como deve equilibrar Olá Gestor de recursos do Cluster, mas não quando balanceamento deverá ocorrer.</span><span class="sxs-lookup"><span data-stu-id="45a41-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="45a41-328">Para obter mais informações sobre balanceamento, veja [neste artigo](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="45a41-329">Ponderações métricas global</span><span class="sxs-lookup"><span data-stu-id="45a41-329">Global metric weights</span></span>
<span data-ttu-id="45a41-330">Digamos ServiceA define MetricA como importância alta e ServiceB define ponderação Olá para MetricA tooLow ou Zero.</span><span class="sxs-lookup"><span data-stu-id="45a41-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="45a41-331">O que é o peso de real Olá que acaba por ficar obter utilizado?</span><span class="sxs-lookup"><span data-stu-id="45a41-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="45a41-332">Existem vários ponderações que são controladas por cada métrica.</span><span class="sxs-lookup"><span data-stu-id="45a41-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="45a41-333">peso da primeira Olá é Olá definido para a métrica de Olá quando o serviço de Olá é criado.</span><span class="sxs-lookup"><span data-stu-id="45a41-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="45a41-334">Olá outra ponderação é uma ponderação global, que é calculada automaticamente.</span><span class="sxs-lookup"><span data-stu-id="45a41-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="45a41-335">Olá Gestor de recursos de Cluster utiliza ambas estas ponderações quando a classificação de soluções.</span><span class="sxs-lookup"><span data-stu-id="45a41-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="45a41-336">Tendo ambas as ponderações em consideração é importante.</span><span class="sxs-lookup"><span data-stu-id="45a41-336">Taking both weights into account is important.</span></span> <span data-ttu-id="45a41-337">Isto permite Olá toobalance do Gestor de recursos de Cluster em cada serviço tooits de acordo com as prioridades de proprietário e certifique-se também desse cluster Olá como um todo está alocado corretamente.</span><span class="sxs-lookup"><span data-stu-id="45a41-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="45a41-338">O que aconteceria mediante Olá Gestor de recursos do Cluster não se preocupar com saldo global e local?</span><span class="sxs-lookup"><span data-stu-id="45a41-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="45a41-339">Bem, é fácil tooconstruct soluções que são equilibrados globalmente, mas que resultar no equilíbrio de recursos fraca para serviços individuais.</span><span class="sxs-lookup"><span data-stu-id="45a41-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="45a41-340">No seguinte exemplo de Olá, vamos observar um serviço configurado com apenas nas métricas predefinidas Olá e ver o que acontece quando apenas saldo global é considerado:</span><span class="sxs-lookup"><span data-stu-id="45a41-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="45a41-341"><center>
![Olá impacto de uma solução apenas Global][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="45a41-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="45a41-342">No exemplo superior Olá baseado apenas saldo global, cluster Olá como um todo, de facto, é balanceado.</span><span class="sxs-lookup"><span data-stu-id="45a41-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="45a41-343">Todos os nós têm Olá mesmo número de primaries e Olá mesmo número de réplicas totais.</span><span class="sxs-lookup"><span data-stu-id="45a41-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="45a41-344">No entanto, se observar impacto real Olá esta atribuição não é por isso, boa: perda de Olá de qualquer nó afeta uma carga de trabalho específica disproportionately, porque demora enviados todos os respetivos primaries.</span><span class="sxs-lookup"><span data-stu-id="45a41-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="45a41-345">Por exemplo, se o primeiro nó de Olá falhar primaries de três Olá para partições diferentes três Olá de Olá serviço círculo todas seria perdida.</span><span class="sxs-lookup"><span data-stu-id="45a41-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="45a41-346">Por outro lado, Olá triângulo e serviços de Hexagon têm as respetivas partições perder uma réplica.</span><span class="sxs-lookup"><span data-stu-id="45a41-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="45a41-347">Isto faz com que sem interrupção, que não sejam ter toorecover Olá para baixo de réplica.</span><span class="sxs-lookup"><span data-stu-id="45a41-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="45a41-348">Exemplo de inferior Olá, Olá Gestor de recursos do Cluster tiver distribuído réplicas Olá com base em ambos os saldo de Olá global e por serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="45a41-349">Quando se calcular a classificação de Olá da solução de Olá proporciona maior parte da solução global do Olá ponderação toohello e os serviços de tooindividual uma parte (configurável).</span><span class="sxs-lookup"><span data-stu-id="45a41-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="45a41-350">Saldo global para uma métrica é calculado com base em média Olá de peso de métrica de Olá de cada serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="45a41-351">De acordo com tooits própria definido métrica ponderações é com balanceamento de cada serviço.</span><span class="sxs-lookup"><span data-stu-id="45a41-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="45a41-352">Isto garante que os serviços de Olá são equilibrados dentro próprios de acordo com tootheir necessidades próprias.</span><span class="sxs-lookup"><span data-stu-id="45a41-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="45a41-353">Como resultado, se hello mesmo primeiro nó falhar falha Olá é distribuído por todas as partições de todos os serviços.</span><span class="sxs-lookup"><span data-stu-id="45a41-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="45a41-354">Olá impacto tooeach é Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="45a41-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="45a41-355">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="45a41-355">Next steps</span></span>
- <span data-ttu-id="45a41-356">Para obter mais informações sobre como configurar os serviços, [Saiba mais sobre como configurar serviços](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="45a41-357">Definir métricas de desfragmentação é tooconsolidate unidirecional carga em nós em vez de propagando-se este. toolearn como tooconfigure desfragmentação, consulte demasiado[neste artigo](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="45a41-358">toofind saída sobre como Olá Gestor de recursos do Cluster gere e equilibra a carga no cluster de Olá, veja artigo Olá no [balanceamento de carga](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="45a41-359">Partir do início de Olá e [obter uma introdução toohello Gestor de recursos de Cluster do Service Fabric](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="45a41-360">O custo de movimento é uma forma de sinalização toohello Gestor de recursos de Cluster que determinados serviços são mais dispendioso toomove que outros.</span><span class="sxs-lookup"><span data-stu-id="45a41-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="45a41-361">toolearn mais informações sobre o custo de movimento, consulte demasiado[neste artigo](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="45a41-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
