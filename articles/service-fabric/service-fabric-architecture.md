---
title: aaaArchitecture do Service Fabric do Azure | Microsoft Docs
description: "Service Fabric é que uma plataforma de sistemas distribuídos utilizada toobuild dimensionável, fiável e aplicações facilmente geridos para a nuvem de Olá. Este artigo mostra a arquitetura de Olá do Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 0268578094ad1a0010ef44ed940f828b985f6c40
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="b0577-104">Arquitetura do Service Fabric</span><span class="sxs-lookup"><span data-stu-id="b0577-104">Service Fabric architecture</span></span>
<span data-ttu-id="b0577-105">Service Fabric baseia-se com subsistemas em camadas.</span><span class="sxs-lookup"><span data-stu-id="b0577-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="b0577-106">Estes subsistemas de permitem que aplicações toowrite são:</span><span class="sxs-lookup"><span data-stu-id="b0577-106">These subsystems enable you toowrite applications that are:</span></span>

* <span data-ttu-id="b0577-107">Elevada disponibilidade</span><span class="sxs-lookup"><span data-stu-id="b0577-107">Highly available</span></span>
* <span data-ttu-id="b0577-108">Escalável</span><span class="sxs-lookup"><span data-stu-id="b0577-108">Scalable</span></span>
* <span data-ttu-id="b0577-109">Gerível</span><span class="sxs-lookup"><span data-stu-id="b0577-109">Manageable</span></span>
* <span data-ttu-id="b0577-110">Testable</span><span class="sxs-lookup"><span data-stu-id="b0577-110">Testable</span></span>

<span data-ttu-id="b0577-111">Olá seguinte diagrama mostra subsistemas de principais de Olá do Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="b0577-111">hello following diagram shows hello major subsystems of Service Fabric.</span></span>

![Diagrama da arquitetura do Service Fabric](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="b0577-113">Num sistema distribuído, Olá capacidade toosecurely comunicar entre os nós no cluster é fundamental.</span><span class="sxs-lookup"><span data-stu-id="b0577-113">In a distributed system, hello ability toosecurely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="b0577-114">Olá base da pilha de Olá está subsistema de transporte de Olá, que fornece uma comunicação segura entre nós.</span><span class="sxs-lookup"><span data-stu-id="b0577-114">At hello base of hello stack is hello transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="b0577-115">Acima transporte Olá subsistema se situa o subsistema de Federação Olá, os clusters Olá nós diferentes para uma única entidade (com o nome clusters), para que possam detetar falhas, efetuar eleição leader e fornecem encaminhamento consistente Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="b0577-115">Above hello transport subsystem lies hello federation subsystem, which clusters hello different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="b0577-116">o subsistema de fiabilidade Olá, em camadas sobre subsistema de Federação Olá, é responsável por fiabilidade Olá dos serviços do Service Fabric através de mecanismos, tais como a replicação, a gestão de recursos e a ativação pós-falha.</span><span class="sxs-lookup"><span data-stu-id="b0577-116">hello reliability subsystem, layered on top of hello federation subsystem, is responsible for hello reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="b0577-117">o subsistema de Federação Olá também subjacente Olá ativação e que aloja o subsistema, que gere o ciclo de vida de Olá de uma aplicação num único nó.</span><span class="sxs-lookup"><span data-stu-id="b0577-117">hello federation subsystem also underlies hello hosting and activation subsystem, which manages hello lifecycle of an application on a single node.</span></span> <span data-ttu-id="b0577-118">o subsistema de gestão de Olá gere Olá ciclo de vida das aplicações e serviços.</span><span class="sxs-lookup"><span data-stu-id="b0577-118">hello management subsystem manages hello lifecycle of applications and services.</span></span> <span data-ttu-id="b0577-119">o subsistema de teste de Olá ajuda os programadores de aplicações testar os seus serviços através de falhas simuladas antes e após a implementação de ambientes de tooproduction de aplicações e serviços.</span><span class="sxs-lookup"><span data-stu-id="b0577-119">hello testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services tooproduction environments.</span></span> <span data-ttu-id="b0577-120">Service Fabric fornece a capacidade de Olá tooresolve localizações de serviço através do respetivo subsistema de comunicação.</span><span class="sxs-lookup"><span data-stu-id="b0577-120">Service Fabric provides hello ability tooresolve service locations through its communication subsystem.</span></span> <span data-ttu-id="b0577-121">Olá, modelos de programação de aplicações toodevelopers expostas são em camadas sobre estes subsistemas juntamente com as ferramentas de tooenable de modelo de aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-121">hello application programming models exposed toodevelopers are layered on top of these subsystems along with hello application model tooenable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="b0577-122">Subsistema de transporte</span><span class="sxs-lookup"><span data-stu-id="b0577-122">Transport subsystem</span></span>
<span data-ttu-id="b0577-123">o subsistema de transporte de Olá implementa um canal de comunicação de datagrama de ponto a ponto.</span><span class="sxs-lookup"><span data-stu-id="b0577-123">hello transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="b0577-124">Este canal é utilizado para comunicação nos clusters de recursos de infraestrutura de serviço e a comunicação entre clientes e o cluster do Olá service fabric.</span><span class="sxs-lookup"><span data-stu-id="b0577-124">This channel is used for communication within service fabric clusters and communication between hello service fabric cluster and clients.</span></span> <span data-ttu-id="b0577-125">Suporta unidirecional e padrões de comunicação de pedido-resposta, que fornece a base de Olá para implementar a difusão e multicast nas Olá camada de Federação.</span><span class="sxs-lookup"><span data-stu-id="b0577-125">It supports one-way and request-reply communication patterns, which provides hello basis for implementing broadcast and multicast in hello Federation layer.</span></span> <span data-ttu-id="b0577-126">o subsistema de transporte de Olá protege comunicação utilizando X509 certificados ou de segurança do Windows.</span><span class="sxs-lookup"><span data-stu-id="b0577-126">hello transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="b0577-127">Este subsistema é utilizado internamente pelo serviço de recursos de infraestrutura e não está acessível diretamente toodevelopers para a programação de aplicações.</span><span class="sxs-lookup"><span data-stu-id="b0577-127">This subsystem is used internally by Service Fabric and is not directly accessible toodevelopers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="b0577-128">Subsistema de Federação</span><span class="sxs-lookup"><span data-stu-id="b0577-128">Federation subsystem</span></span>
<span data-ttu-id="b0577-129">Ordem tooreason sobre um conjunto de nós num sistema distribuído, terá de toohave uma vista do sistema de Olá consistente.</span><span class="sxs-lookup"><span data-stu-id="b0577-129">In order tooreason about a set of nodes in a distributed system, you need toohave a consistent view of hello system.</span></span> <span data-ttu-id="b0577-130">o subsistema de Federação Olá utiliza primitivos de comunicação de Olá fornecidos pelo subsistema de transporte de Olá e stitches Olá vários nós para um único cluster unificado pode pelo motivo sobre.</span><span class="sxs-lookup"><span data-stu-id="b0577-130">hello federation subsystem uses hello communication primitives provided by hello transport subsystem and stitches hello various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="b0577-131">Fornece Olá distribuída sistemas primitivos necessitam Olá por outros subsistemas - a deteção de falha, eleição leader e encaminhamento consistente.</span><span class="sxs-lookup"><span data-stu-id="b0577-131">It provides hello distributed systems primitives needed by hello other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="b0577-132">o subsistema de Federação Olá é desenvolvido com tabelas hash distribuída com um espaço de token de 128 bits.</span><span class="sxs-lookup"><span data-stu-id="b0577-132">hello federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="b0577-133">o subsistema de Olá cria uma topologia em anel nós Olá, com cada nó em anel Olá que está a ser atribuído um subconjunto de espaço de token de Olá de propriedade.</span><span class="sxs-lookup"><span data-stu-id="b0577-133">hello subsystem creates a ring topology over hello nodes, with each node in hello ring being allocated a subset of hello token space for ownership.</span></span> <span data-ttu-id="b0577-134">Para a deteção de falha, a camada de Olá utiliza um mecanismo de locação com base em heart beating e arbitragem.</span><span class="sxs-lookup"><span data-stu-id="b0577-134">For failure detection, hello layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="b0577-135">o subsistema de Federação Olá também garante que através da associação intricate e protocolos de partida se existe apenas um único proprietário de um token em qualquer altura.</span><span class="sxs-lookup"><span data-stu-id="b0577-135">hello federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="b0577-136">Isto proporciona eleição leader e consistentes garantias de encaminhamento.</span><span class="sxs-lookup"><span data-stu-id="b0577-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="b0577-137">Subsistema de fiabilidade</span><span class="sxs-lookup"><span data-stu-id="b0577-137">Reliability subsystem</span></span>
<span data-ttu-id="b0577-138">Olá subsistema de fiabilidade fornece Olá mecanismo toomake Olá estado de um serviço do Service Fabric altamente disponível através da utilização de Olá de Olá *replicador*, *Failover Manager*, e  *Balanceador de recursos*.</span><span class="sxs-lookup"><span data-stu-id="b0577-138">hello reliability subsystem provides hello mechanism toomake hello state of a Service Fabric service highly available through hello use of hello *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="b0577-139">Olá replicador assegura que as alterações de estado na réplica de serviço principal Olá será automaticamente réplicas toosecondary replicados, manter a consistência entre réplicas primária e secundária Olá num conjunto de réplicas do serviço.</span><span class="sxs-lookup"><span data-stu-id="b0577-139">hello Replicator ensures that state changes in hello primary service replica will automatically be replicated toosecondary replicas, maintaining consistency between hello primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="b0577-140">replicador Olá é responsável pela gestão de quórum entre réplicas Olá no conjunto de réplicas Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-140">hello replicator is responsible for quorum management among hello replicas in hello replica set.</span></span> <span data-ttu-id="b0577-141">Interage com lista Olá tooget de unidade de ativação pós-falha de Olá de tooreplicate de operações e o agente de reconfiguração Olá fornece-o com a configuração de Olá do conjunto de réplicas Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-141">It interacts with hello failover unit tooget hello list of operations tooreplicate, and hello reconfiguration agent provides it with hello configuration of hello replica set.</span></span> <span data-ttu-id="b0577-142">Se a configuração indica as operações de Olá réplicas necessário toobe replicado.</span><span class="sxs-lookup"><span data-stu-id="b0577-142">That configuration indicates which replicas hello operations need toobe replicated.</span></span> <span data-ttu-id="b0577-143">O Service Fabric fornece um replicador predefinido denominado replicador de recursos de infraestrutura, o que pode ser utilizado por Olá modelo API toomake Olá estado do serviço de elevada disponibilidade e fiável de programação.</span><span class="sxs-lookup"><span data-stu-id="b0577-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by hello programming model API toomake hello service state highly available and reliable.</span></span>
* <span data-ttu-id="b0577-144">Olá Failover Manager assegura que quando são adicionados nós tooor removida do cluster de Olá, carga Olá é automaticamente redistribuída entre os nós disponíveis Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-144">hello Failover Manager ensures that when nodes are added tooor removed from hello cluster, hello load is automatically redistributed across hello available nodes.</span></span> <span data-ttu-id="b0577-145">Se falhar um nó de cluster Olá, cluster Olá será automaticamente reconfigurar a disponibilidade do Olá serviço réplicas toomaintain.</span><span class="sxs-lookup"><span data-stu-id="b0577-145">If a node in hello cluster fails, hello cluster will automatically reconfigure hello service replicas toomaintain availability.</span></span>
* <span data-ttu-id="b0577-146">Olá Resource Manager coloca réplicas serviço através de domínio de falha no cluster de Olá e assegura que todas as unidades de ativação pós-falha estão operacionais.</span><span class="sxs-lookup"><span data-stu-id="b0577-146">hello Resource Manager places service replicas across failure domain in hello cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="b0577-147">Olá Gestor de recursos também equilibra a recursos do serviço em Olá subjacente agrupamento partilhado de distribuição de carga uniform ideal de tooachieve de nós de cluster.</span><span class="sxs-lookup"><span data-stu-id="b0577-147">hello Resource Manager also balances service resources across hello underlying shared pool of cluster nodes tooachieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="b0577-148">Subsistema de gestão</span><span class="sxs-lookup"><span data-stu-id="b0577-148">Management subsystem</span></span>
<span data-ttu-id="b0577-149">o subsistema de gestão de Olá fornece ponto-a-ponto serviço e gestão de ciclo de vida de aplicações.</span><span class="sxs-lookup"><span data-stu-id="b0577-149">hello management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="b0577-150">Cmdlets do PowerShell e APIs administrativas permitem-lhe tooprovision, implementar, patches, a atualização e anular o aprovisionamento aplicações sem perda de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="b0577-150">PowerShell cmdlets and administrative APIs enable you tooprovision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="b0577-151">o subsistema de gestão de Olá efetua este através de Olá os seguintes serviços.</span><span class="sxs-lookup"><span data-stu-id="b0577-151">hello management subsystem performs this through hello following services.</span></span>

* <span data-ttu-id="b0577-152">**Gestor de clusters**: Este é o serviço primário Olá que interage com Olá Gestor de ativação pós-falha a partir de aplicações de Olá tooplace fiabilidade em nós de Olá com base nas restrições de posicionamento do serviço de Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-152">**Cluster Manager**: This is hello primary service that interacts with hello Failover Manager from reliability tooplace hello applications on hello nodes based on hello service placement constraints.</span></span> <span data-ttu-id="b0577-153">Olá Gestor de recursos no subsistema de ativação pós-falha assegura que as restrições de Olá nunca sejam interrompidas.</span><span class="sxs-lookup"><span data-stu-id="b0577-153">hello Resource Manager in failover subsystem ensures that hello constraints are never broken.</span></span> <span data-ttu-id="b0577-154">Gestor de clusters de Olá gere Olá ciclo de vida das aplicações de Olá de aprovisionar toode-aprovisionar.</span><span class="sxs-lookup"><span data-stu-id="b0577-154">hello cluster manager manages hello lifecycle of hello applications from provision toode-provision.</span></span> <span data-ttu-id="b0577-155">É integrado com tooensure de Gestor de estado de funcionamento de Olá que de disponibilidade de aplicações não é perdida numa perspetiva de estado de funcionamento semântica durante as atualizações.</span><span class="sxs-lookup"><span data-stu-id="b0577-155">It integrates with hello health manager tooensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="b0577-156">**Gestor de estado de funcionamento**: este serviço permite a monitorização de estado de funcionamento de aplicações, serviços e entidades do cluster.</span><span class="sxs-lookup"><span data-stu-id="b0577-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="b0577-157">Entidades de cluster (por exemplo, nós, partições de serviço e as réplicas) podem comunicar informações de estado de funcionamento, o que são agregadas, em seguida, no arquivo de estado de funcionamento centralizada Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into hello centralized health store.</span></span> <span data-ttu-id="b0577-158">Estas informações de estado de funcionamento fornecem um instantâneo do Estado de funcionamento geral ponto no tempo dos serviços de Olá e nós distribuídas por vários nós num cluster de Olá, permitindo-lhe tootake quaisquer ações corretivas necessárias.</span><span class="sxs-lookup"><span data-stu-id="b0577-158">This health information provides an overall point-in-time health snapshot of hello services and nodes distributed across multiple nodes in hello cluster, enabling you tootake any needed corrective actions.</span></span> <span data-ttu-id="b0577-159">Consulta de estado de funcionamento que APIs permitem-lhe eventos de estado de funcionamento de Olá tooquery comunicadas toohello subsistema de estado de funcionamento.</span><span class="sxs-lookup"><span data-stu-id="b0577-159">Health query APIs enable you tooquery hello health events reported toohello health subsystem.</span></span> <span data-ttu-id="b0577-160">consulta de estado de funcionamento de Olá APIs devolver do arquivo de dados de estado de funcionamento não processados Olá armazenados no estado de funcionamento de Olá ou Olá agregados, interpretado dados de estado de funcionamento para uma entidade de cluster específicos.</span><span class="sxs-lookup"><span data-stu-id="b0577-160">hello health query APIs return hello raw health data stored in hello health store or hello aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="b0577-161">**Arquivo de imagens**: este serviço fornece armazenamento e a distribuição da Olá os binários da aplicação.</span><span class="sxs-lookup"><span data-stu-id="b0577-161">**Image Store**: This service provides storage and distribution of hello application binaries.</span></span> <span data-ttu-id="b0577-162">Este serviço fornece um arquivo de ficheiros distribuído simples em que aplicações Olá são carregado tooand transferido a partir do.</span><span class="sxs-lookup"><span data-stu-id="b0577-162">This service provides a simple distributed file store where hello applications are uploaded tooand downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="b0577-163">Subsistema de alojamento</span><span class="sxs-lookup"><span data-stu-id="b0577-163">Hosting subsystem</span></span>
<span data-ttu-id="b0577-164">Gestor de clusters de Olá informa Olá subsistema (em execução em cada nó) que repara de alojamento tem toomanage para um determinado nó.</span><span class="sxs-lookup"><span data-stu-id="b0577-164">hello cluster manager informs hello hosting subsystem (running on each node) which services it needs toomanage for a particular node.</span></span> <span data-ttu-id="b0577-165">Olá subsistema de alojamento, em seguida, gere Olá ciclo de vida da aplicação Olá nesse nó.</span><span class="sxs-lookup"><span data-stu-id="b0577-165">hello hosting subsystem then manages hello lifecycle of hello application on that node.</span></span> <span data-ttu-id="b0577-166">Interage com Olá fiabilidade e o estado de funcionamento componentes tooensure que réplicas Olá são colocadas corretamente e que estão em bom estadas.</span><span class="sxs-lookup"><span data-stu-id="b0577-166">It interacts with hello reliability and health components tooensure that hello replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="b0577-167">Subsistema de comunicação</span><span class="sxs-lookup"><span data-stu-id="b0577-167">Communication subsystem</span></span>
<span data-ttu-id="b0577-168">Este subsistema fornece mensagens fiáveis dentro da deteção de cluster e o serviço de Olá através do serviço de nomes de Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-168">This subsystem provides reliable messaging within hello cluster and service discovery through hello Naming service.</span></span> <span data-ttu-id="b0577-169">Olá Naming service resolve localização tooa de nomes de serviço no cluster de Olá e permite que os utilizadores toomanage serviço nomes e propriedades.</span><span class="sxs-lookup"><span data-stu-id="b0577-169">hello Naming service resolves service names tooa location in hello cluster and enables users toomanage service names and properties.</span></span> <span data-ttu-id="b0577-170">Utilizar o serviço de nomes de Olá, os clientes podem em segurança comunicar com qualquer nó do Olá cluster tooresolve um nome de serviço e obter metadados do serviço.</span><span class="sxs-lookup"><span data-stu-id="b0577-170">Using hello Naming service, clients can securely communicate with any node in hello cluster tooresolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="b0577-171">Utilizar um cliente de nomenclatura simple API, os utilizadores do Service Fabric podem desenvolver serviços e clientes com capacidade de resolver Olá localização de rede atual, não obstante dynamism do nó ou Olá novamente o dimensionamento de clusters de Olá.</span><span class="sxs-lookup"><span data-stu-id="b0577-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving hello current network location despite node dynamism or hello re-sizing of hello cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="b0577-172">Subsistema de teste</span><span class="sxs-lookup"><span data-stu-id="b0577-172">Testability subsystem</span></span>
<span data-ttu-id="b0577-173">Teste é um conjunto de ferramentas que tenham sido concebidas especificamente para fins de teste de serviços incorporados no Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="b0577-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="b0577-174">Olá ferramentas permitir que um programador facilmente induce falhas significativas e executar tooexercise de cenários de teste e validar Olá vários Estados e transições que um serviço irá ocorrer ao longo da respetiva duração, todos os de forma controlada e segura.</span><span class="sxs-lookup"><span data-stu-id="b0577-174">hello tools let a developer easily induce meaningful faults and run test scenarios tooexercise and validate hello numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="b0577-175">Teste também fornece um mecanismo toorun mais testes que podem iterar através de vários possíveis falhas sem perda de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="b0577-175">Testability also provides a mechanism toorun longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="b0577-176">Isto fornece um ambiente de teste em produção.</span><span class="sxs-lookup"><span data-stu-id="b0577-176">This provides you with a test-in-production environment.</span></span>

