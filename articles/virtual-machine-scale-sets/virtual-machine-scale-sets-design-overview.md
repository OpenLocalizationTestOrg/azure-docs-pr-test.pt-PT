---
title: "aaaDesign considerações para conjuntos de dimensionamento de Máquina Virtual do Azure | Microsoft Docs"
description: "Saiba mais sobre as considerações de design para os conjuntos de dimensionamento de Máquina Virtual do Azure"
keywords: "conjuntos de dimensionamento de máquina virtual de máquina virtual do Linux,"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: f8644d36fe5903bd4b74df26dca5dc3211ee3516
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="d988b-104">Considerações de design para conjuntos de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="d988b-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="d988b-105">Este tópico descreve considerações de design para conjuntos de dimensionamento de Máquina Virtual.</span><span class="sxs-lookup"><span data-stu-id="d988b-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="d988b-106">Para obter informações sobre quais são os conjuntos de dimensionamento de Máquina Virtual, consulte demasiado[descrição geral de conjuntos de dimensionamento de Máquina Virtual](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d988b-106">For information about what Virtual Machine Scale Sets are, refer too[Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-toouse-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="d988b-107">Quando toouse conjuntos de dimensionamento em vez de máquinas virtuais?</span><span class="sxs-lookup"><span data-stu-id="d988b-107">When toouse scale sets instead of virtual machines?</span></span>
<span data-ttu-id="d988b-108">Geralmente, conjuntos de dimensionamento são úteis para implementar a infraestrutura de elevada disponibilidade em que um conjunto de máquinas têm configuração semelhante.</span><span class="sxs-lookup"><span data-stu-id="d988b-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="d988b-109">No entanto, algumas funcionalidades só estão disponíveis nos conjuntos de dimensionamento enquanto outras funcionalidades só estão disponíveis nas VMs.</span><span class="sxs-lookup"><span data-stu-id="d988b-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="d988b-110">Na ordem toomake uma decisão informada sobre quando toouse cada tecnologia, iremos deve primeiro Observe algumas das funcionalidades de Olá utilizada frequentemente que estão disponíveis em conjuntos de dimensionamento, mas não VMs:</span><span class="sxs-lookup"><span data-stu-id="d988b-110">In order toomake an informed decision about when toouse each technology, we should first take a look at some of hello commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="d988b-111">Funcionalidades de específicas do conjunto de dimensionamento</span><span class="sxs-lookup"><span data-stu-id="d988b-111">Scale set-specific features</span></span>

- <span data-ttu-id="d988b-112">Depois de especificar a configuração de conjunto de dimensionamento de Olá, pode simplesmente atualizar Olá "capacidade" propriedade toodeploy mais VMs em paralelo.</span><span class="sxs-lookup"><span data-stu-id="d988b-112">Once you specify hello scale set configuration, you can simply update hello "capacity" property toodeploy more VMs in parallel.</span></span> <span data-ttu-id="d988b-113">Isto é muito mais simples do que escrever um tooorchestrate script implementar várias VMs individuais em paralelo.</span><span class="sxs-lookup"><span data-stu-id="d988b-113">This is much simpler than writing a script tooorchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="d988b-114">Pode [um conjunto de dimensionamento de escala de utilização do Azure de dimensionamento automático tooautomatically](./virtual-machine-scale-sets-autoscale-overview.md) mas VMs não individuais.</span><span class="sxs-lookup"><span data-stu-id="d988b-114">You can [use Azure Autoscale tooautomatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="d988b-115">Pode [VMs de conjunto de dimensionamento de recriação de imagem](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) mas [VMs individuais não](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="d988b-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="d988b-116">Pode [bandeira](./virtual-machine-scale-sets-design-overview.md) conjunto de dimensionamento de VMs para uma maior fiabilidade e tempos de implementação mais rápidos.</span><span class="sxs-lookup"><span data-stu-id="d988b-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="d988b-117">Não é possível fazê-com VMs individuais, a menos que escrever código personalizado toodo isto.</span><span class="sxs-lookup"><span data-stu-id="d988b-117">You cannot do this with individual VMs unless you write custom code toodo this.</span></span>
- <span data-ttu-id="d988b-118">Pode especificar um [atualizar política](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake-tooroll fácil saída atualizações entre VMs no seu conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake it easy tooroll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="d988b-119">Com VMs individuais, é necessário orquestrar atualizações por si.</span><span class="sxs-lookup"><span data-stu-id="d988b-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="d988b-120">Funcionalidades específicas do VM</span><span class="sxs-lookup"><span data-stu-id="d988b-120">VM-specific features</span></span>

<span data-ttu-id="d988b-121">No Olá por outro lado, algumas funcionalidades só estão disponíveis em VMs (pelo menos para a hora de Olá):</span><span class="sxs-lookup"><span data-stu-id="d988b-121">On hello other hand, some features are only available in VMs (at least for hello time being):</span></span>

- <span data-ttu-id="d988b-122">Pode anexar toospecific de discos de dados VMs individuais, mas os dados anexados discos estão configurados para todas as VMs num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-122">You can attach data disks toospecific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="d988b-123">Pode anexar tooindividual de discos de dados não vazios VMs, mas não as VMs num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-123">You can attach non-empty data disks tooindividual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="d988b-124">Pode instantâneos de uma VM individual, mas não uma VM num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="d988b-125">Pode capturar uma imagem de uma VM individual, mas não a partir de uma VM num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="d988b-126">Pode migrar uma VM individual de discos de toomanaged nativo de discos, mas não o conseguir fazer para as VMs num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-126">You can migrate an individual VM from native disks toomanaged disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="d988b-127">Pode atribuir endereços IP públicos do IPv6 tooindividual VM nics mas não é possível fazer para as VMs num conjunto de dimensionamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-127">You can assign IPv6 public IP addresses tooindividual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="d988b-128">Tenha em atenção que pode atribuir endereços IP públicos do IPv6 balanceadores tooload à frente de qualquer uma das VMs individuais ou conjunto de dimensionamento de VMs.</span><span class="sxs-lookup"><span data-stu-id="d988b-128">Note that you can assign IPv6 public IP addresses tooload balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="d988b-129">Armazenamento</span><span class="sxs-lookup"><span data-stu-id="d988b-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="d988b-130">Conjuntos de dimensionamento com discos gerida do Azure</span><span class="sxs-lookup"><span data-stu-id="d988b-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="d988b-131">Podem ser criados conjuntos de dimensionamento com [Azure geridos discos](../virtual-machines/windows/managed-disks-overview.md) em vez de contas do storage do Azure tradicional.</span><span class="sxs-lookup"><span data-stu-id="d988b-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="d988b-132">Os discos geridos fornecem Olá seguintes vantagens:</span><span class="sxs-lookup"><span data-stu-id="d988b-132">Managed Disks provide hello following benefits:</span></span>
- <span data-ttu-id="d988b-133">Não dispõe de toopre-criar um conjunto de contas do storage do Azure para as VMs de conjunto de dimensionamento de Olá.</span><span class="sxs-lookup"><span data-stu-id="d988b-133">You do not have toopre-create a set of Azure storage accounts for hello scale set VMs.</span></span>
- <span data-ttu-id="d988b-134">Pode definir [discos de dados ligados](virtual-machine-scale-sets-attached-disks.md) para Olá VMs no seu dimensionamento definido.</span><span class="sxs-lookup"><span data-stu-id="d988b-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for hello VMs in your scale set.</span></span>
- <span data-ttu-id="d988b-135">Conjuntos de dimensionamento podem ser configurados demasiado[suporta se too1, 000 VMs num conjunto](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="d988b-135">Scale sets can be configured too[support up too1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="d988b-136">Se tiver um modelo existente, também pode [atualizar Olá modelo toouse discos geridos](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="d988b-136">If you have an existing template, you can also [update hello template toouse Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="d988b-137">Armazenamento gerida pelo utilizador</span><span class="sxs-lookup"><span data-stu-id="d988b-137">User-managed Storage</span></span>
<span data-ttu-id="d988b-138">Um conjunto de dimensionamento não está definido com discos gerida do Azure baseia-se nos discos SO Olá de toostore de contas de armazenamento criados pelo utilizador de Olá VMs no conjunto de Olá.</span><span class="sxs-lookup"><span data-stu-id="d988b-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts toostore hello OS disks of hello VMs in hello set.</span></span> <span data-ttu-id="d988b-139">Um rácio de 20 VMs por conta de armazenamento ou menos recomenda tooachieve máximo e/s bem como tirar partido das _provocam um aprovisionamento_ (ver abaixo).</span><span class="sxs-lookup"><span data-stu-id="d988b-139">A ratio of 20 VMs per storage account or less is recommended tooachieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="d988b-140">Também é recomendável que distribuídos carateres de início de Olá dos nomes de conta de armazenamento Olá por Olá por letras do alfabeto.</span><span class="sxs-lookup"><span data-stu-id="d988b-140">It is also recommended that you spread hello beginning characters of hello storage account names across hello alphabet.</span></span> <span data-ttu-id="d988b-141">Se o fizer, ajuda a propagar-se a carga em sistemas diferentes de internos.</span><span class="sxs-lookup"><span data-stu-id="d988b-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="d988b-142">Provocam um aprovisionamento</span><span class="sxs-lookup"><span data-stu-id="d988b-142">Overprovisioning</span></span>
<span data-ttu-id="d988b-143">Conjuntos de dimensionamento atualmente predefinido demasiado "provocam um aprovisionamento" VMs.</span><span class="sxs-lookup"><span data-stu-id="d988b-143">Scale sets currently default too"overprovisioning" VMs.</span></span> <span data-ttu-id="d988b-144">Com provocam um aprovisionamento de ativada, escala Olá defina realmente spins mais VMS que pediu, em seguida, elimina Olá VMs Extras assim que o número de VMs de pedido de Olá são aprovisionadas com êxito.</span><span class="sxs-lookup"><span data-stu-id="d988b-144">With overprovisioning turned on, hello scale set actually spins up more VMs than you asked for, then deletes hello extra VMs once hello requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="d988b-145">Provocam um aprovisionamento melhora aprovisionamento taxas de êxito e reduz o tempo de implementação.</span><span class="sxs-lookup"><span data-stu-id="d988b-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="d988b-146">Não são cobradas para hello VMs Extras e não é considerado os limites de quota.</span><span class="sxs-lookup"><span data-stu-id="d988b-146">You are not billed for hello extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="d988b-147">Enquanto provocam um aprovisionamento melhorar as taxas de êxito de aprovisionamento, pode causar confuso comportamento para uma aplicação que é não concebida toohandle VMs Extras apresentação e, em seguida, disappearing.</span><span class="sxs-lookup"><span data-stu-id="d988b-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed toohandle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="d988b-148">tooturn provocam um aprovisionamento desligada, certifique-se de que tem Olá seguir cadeia no modelo: `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="d988b-148">tooturn overprovisioning off, ensure you have hello following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="d988b-149">Podem encontrar mais detalhes no Olá [documentação da API de REST de conjunto de dimensionamento](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="d988b-149">More details can be found in hello [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="d988b-150">Se o conjunto de dimensionamento utiliza armazenamento gerida pelo utilizador, e desativar provocam um aprovisionamento, pode ter mais de 20 VMs por conta de armazenamento, mas não se recomenda toogo acima 40 por motivos de desempenho de e/s.</span><span class="sxs-lookup"><span data-stu-id="d988b-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended toogo above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="d988b-151">Limites</span><span class="sxs-lookup"><span data-stu-id="d988b-151">Limits</span></span>
<span data-ttu-id="d988b-152">Um conjunto de dimensionamento incorporado numa imagem do Marketplace (também conhecido como uma imagem de plataforma) e configurado toouse que discos gerida do Azure suporta uma capacidade de cópia de segurança too1, 000 VMs.</span><span class="sxs-lookup"><span data-stu-id="d988b-152">A scale set built on a Marketplace image (also known as a platform image) and configured toouse Azure Managed Disks supports a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="d988b-153">Se configurar o seu toosupport de conjunto de dimensionamento mais do que 100 VMs, nem todos os cenários trabalho Olá mesmo (por exemplo o balanceamento de carga).</span><span class="sxs-lookup"><span data-stu-id="d988b-153">If you configure your scale set toosupport more than 100 VMs, not all scenarios work hello same (for example load balancing).</span></span> <span data-ttu-id="d988b-154">Para obter mais informações, consulte [trabalhar com conjuntos de dimensionamento de máquina virtual grande](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="d988b-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="d988b-155">Um conjunto configurado com as contas de armazenamento gerida pelo utilizador de dimensionamento é limitado too100 VMs (e 5 contas do storage são recomendadas para desta escala).</span><span class="sxs-lookup"><span data-stu-id="d988b-155">A scale set configured with user-managed storage accounts is currently limited too100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="d988b-156">Um conjunto de dimensionamento incorporado numa imagem personalizada (um criadas por si) pode ter uma capacidade de segurança de VMs too100 quando configurado com discos gerida do Azure.</span><span class="sxs-lookup"><span data-stu-id="d988b-156">A scale set built on a custom image (one built by you) can have a capacity of up too100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="d988b-157">Se o conjunto de dimensionamento de Olá está configurado com as contas de armazenamento gerida pelo utilizador, tem de criar todos os VHDs de disco de SO dentro de uma conta de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="d988b-157">If hello scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="d988b-158">Como resultado, máximo Olá recomendado número de VMs num conjunto de dimensionamento incorporado numa imagem personalizada e armazenamento gerida pelo utilizador é 20.</span><span class="sxs-lookup"><span data-stu-id="d988b-158">As a result, hello maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="d988b-159">Se desativar provocam um aprovisionamento, pode aceder a cópia de segurança too40.</span><span class="sxs-lookup"><span data-stu-id="d988b-159">If you turn off overprovisioning, you can go up too40.</span></span>

<span data-ttu-id="d988b-160">Para obter mais VMs que estes limites permitem, terá de toodeploy conjuntos de dimensionamento vários conforme mostrado no [este modelo](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="d988b-160">For more VMs than these limits allow, you need toodeploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

