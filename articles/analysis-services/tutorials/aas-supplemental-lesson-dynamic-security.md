---
<span data-ttu-id="a0fd7-101">Título: aaa "lesson de suplementar tutorial Azure Analysis Services: segurança dinâmica | Descrição da Microsoft Docs": descreve como toouse segurança dinâmico utilizando a linha filtra tutorial do Olá Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="a0fd7-102">serviços: documentationcenter do Analysis Services: ' autor: Gestor minewiskan: erikre editor: ' etiquetas: '</span><span class="sxs-lookup"><span data-stu-id="a0fd7-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="a0fd7-103">MS. AssetID: MS. Service: devlang do Analysis Services: MS. topic de NA: get-started-article tgt_pltfrm: NA workload: na MS. Date: 05/26/2017 Author: owend</span><span class="sxs-lookup"><span data-stu-id="a0fd7-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="a0fd7-104">Lição suplementar - Segurança dinâmica</span><span class="sxs-lookup"><span data-stu-id="a0fd7-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="a0fd7-105">Nesta lição suplementar, vai criar uma função adicional que implementa a segurança dinâmica.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="a0fd7-106">Segurança dinâmica fornece segurança ao nível da linha com base no Olá nome ou o início de sessão id de utilizador do utilizador Olá atualmente com sessão iniciada.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="a0fd7-107">segurança dinâmico de tooimplement, adicione um modelo de tooyour de tabela que contém nomes de utilizador de Olá dos utilizadores que podem ligar toohello modelo e procurar dados e objetos de modelo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="a0fd7-108">modelo de Olá que criar a utilizar neste tutorial está no contexto de Olá do Adventure Works; No entanto, toocomplete isto lesson, tem de adicionar uma tabela que contém os utilizadores do seu próprio domínio.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="a0fd7-109">Não precisa de palavras-passe de Olá para nomes de utilizador de Olá que são adicionados.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="a0fd7-110">toocreate uma tabela de EmployeeSecurity, com um exemplo pequeno de utilizadores do seu próprio domínio, utilizar Olá colar funcionalidade, colagem de dados de empregado da folha de cálculo do Excel.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="a0fd7-111">Um cenário do mundo real, que contém nomes de utilizador de tabela de Olá, normalmente, seria uma tabela a partir de uma base de dados real como uma origem de dados; Por exemplo, uma tabela de DimEmployee real.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="a0fd7-112">segurança de dinâmica tooimplement, utilizar duas funções DAX: [função de nome de utilizador (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) e [função LOOKUPVALUE (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="a0fd7-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="a0fd7-113">Estas funções, aplicadas a uma fórmula de filtro de linha, são definidas numa função nova.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="a0fd7-114">Ao utilizar a função LOOKUPVALUE Olá, a fórmula Olá Especifica um valor de tabela de EmployeeSecurity Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="a0fd7-115">a fórmula Olá, em seguida, passa a que a função de nome de utilizador do valor toohello, que especifica o nome de utilizador de Olá do utilizador Olá iniciada pertence toothis função.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="a0fd7-116">utilizador Olá, em seguida, pode procurar apenas os dados especificados pelos filtros de linha da função de Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="a0fd7-117">Neste cenário, pode especificar que os funcionários vendas só podem procurar dados de vendas da Internet para zonas de vendas Olá nos quais forem um membro.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="a0fd7-118">As tarefas necessárias que são exclusivos toothis cenário de modelo em tabela do Adventure Works, mas seriam não se aplicam necessariamente cenário do mundo real de tooa são identificadas como tal.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="a0fd7-119">Cada tarefa inclui informações adicionais que descreve a finalidade Olá tarefas Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="a0fd7-120">Estimado tempo toocomplete este lesson: **30 minutos**</span><span class="sxs-lookup"><span data-stu-id="a0fd7-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="a0fd7-121">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="a0fd7-121">Prerequisites</span></span>  
<span data-ttu-id="a0fd7-122">Este tópico de lição suplementar faz parte de um tutorial de modelação em tabela, que deve ser concluído por ordem.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="a0fd7-123">Antes de executar tarefas de Olá neste lesson suplementar, deve concluir todas as lições anteriores.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="a0fd7-124">Adicionar Olá DimSalesTerritory tabela toohello AW Internet vendas tabela modelo de projeto</span><span class="sxs-lookup"><span data-stu-id="a0fd7-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="a0fd7-125">tooimplement segurança dinâmico para este cenário Adventure Works, tem de adicionar o modelo de tooyour duas tabelas adicionais.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="a0fd7-126">tabela primeiro Olá adicionar é DimSalesTerritory (como vendas Oceano Índico) de Olá mesma base de dados AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="a0fd7-127">Mais tarde aplicam-se uma tabela de SalesTerritory de toohello de filtro de linha que define os dados de específica de Olá Olá utilizador com sessão iniciada pode navegar.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="a0fd7-128">tabela de DimSalesTerritory tooadd Olá</span><span class="sxs-lookup"><span data-stu-id="a0fd7-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="a0fd7-129">No Explorador de Modelos em Tabela > **Origens de Dados**, clique com o botão direito do rato na sua ligação e clique em **Importar Tabelas Novas**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="a0fd7-130">Se for apresentada a caixa de diálogo de credenciais de representação de Olá, escreva as credenciais de representação de Olá utilizou Lesson 2: adicionar dados.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="a0fd7-131">No navegador, selecione Olá **DimSalesTerritory** tabela e, em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="a0fd7-132">No Editor de consultas, clique em Olá **DimSalesTerritory** consultar e, em seguida, remova **SalesTerritoryAlternateKey** coluna.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="a0fd7-133">Clique em **importar**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="a0fd7-134">nova tabela de Olá é adicionada a área de trabalho do toohello modelo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="a0fd7-135">Objetos e dados da tabela de DimSalesTerritory Olá origem, em seguida, são importados para o modelo de tabela de vendas do AW Internet.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="a0fd7-136">Depois de tabela Olá foi importada com êxito, clique em **fechar**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="a0fd7-137">Adicionar tabela com dados de nome de utilizador</span><span class="sxs-lookup"><span data-stu-id="a0fd7-137">Add a table with user name data</span></span>  
<span data-ttu-id="a0fd7-138">tabela de DimEmployee Olá na base de dados de exemplo Olá AdventureWorksDW contém os utilizadores do domínio de AdventureWorks Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="a0fd7-139">Estes nomes de utilizador não existem no seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="a0fd7-140">Tem de criar uma tabela no seu ambiente que contenha uma pequena amostra (pelo menos, três) de utilizadores reais da sua organização.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="a0fd7-141">Em seguida, adicione esses utilizadores como nova função de membros toohello.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="a0fd7-142">Não precisa de palavras-passe de Olá para nomes de utilizador de exemplo de Olá, mas tem nomes de utilizador reais do Windows do seu próprio domínio.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="a0fd7-143">tooadd uma tabela de EmployeeSecurity</span><span class="sxs-lookup"><span data-stu-id="a0fd7-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="a0fd7-144">Abra o Microsoft Excel e crie uma folha de cálculo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="a0fd7-145">Copie Olá seguinte tabela, incluindo a linha de cabeçalho de Olá e, em seguida, cole-o folha de cálculo de Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="a0fd7-146">Substitua o nome do próprio Olá, o apelido e o domínio ome de utilizador com nomes de Olá e ids de início de sessão de três utilizadores na sua organização.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="a0fd7-147">Colocar Olá mesmo utilizador no Olá primeiras duas linhas, para o campo IDdeEmpregado 1, que mostra este utilizador pertence toomore que um território de venda.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="a0fd7-148">Deixe Olá campos campo IDdeEmpregado e SalesTerritoryId como estão.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="a0fd7-149">Guardar a folha de cálculo de Olá como **SampleEmployee**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="a0fd7-150">Na folha de cálculo de Olá, selecione todas as células de Olá com dados de empregado, incluindo os cabeçalhos de Olá, em seguida, faça duplo clique dados Olá selecionado e, em seguida, clique em **cópia**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="a0fd7-151">No SSDT, clique em Olá **editar** e, em seguida, clique em **colar**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="a0fd7-152">Se colar fica a cinzento, clique em qualquer coluna no qualquer tabela na janela estruturador do Olá modelo e tente novamente.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="a0fd7-153">No Olá **pré-visualização de colar** caixa de diálogo **nome da tabela**, tipo **EmployeeSecurity**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="a0fd7-154">No **toobe dados colado**, certifique-se de que os dados de Olá incluem todos os dados de utilizador de Olá e cabeçalhos da folha de cálculo do Olá SampleEmployee.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="a0fd7-155">Verifique se **Utilizar primeira linha como cabeçalhos de coluna** está marcado e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="a0fd7-156">É criada uma nova tabela com o nome EmployeeSecurity com dados de empregado copiados da folha de cálculo do Olá SampleEmployee.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="a0fd7-157">Criar relações entre as tabelas FactInternetSales, DimGeography e DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="a0fd7-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="a0fd7-158">Olá FactInternetSales, DimGeography e DimSalesTerritory tabela todos os conter uma coluna comuns, SalesTerritoryId.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="a0fd7-159">coluna de SalesTerritoryId Olá na tabela de DimSalesTerritory Olá contém valores com um Id diferente para cada território de venda.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="a0fd7-160">toocreate relações entre Olá FactInternetSales DimGeography, tabela e Olá DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="a0fd7-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="a0fd7-161">Na vista de diagrama, no Olá **DimGeography** tabela, clique e espere Olá **SalesTerritoryId** coluna, em seguida, arraste Olá cursor toohello **SalesTerritoryId** coluna na Olá **DimSalesTerritory** tabela e, em seguida, da versão.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="a0fd7-162">No Olá **FactInternetSales** tabela, clique e espere Olá **SalesTerritoryId** coluna, em seguida, arraste Olá cursor toohello **SalesTerritoryId** coluna na Olá  **DimSalesTerritory** tabela e, em seguida, da versão.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="a0fd7-163">Olá aviso propriedade ativa para esta relação é False, o que significa que está inativo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="a0fd7-164">tabela FactInternetSales de Olá já tem outra relação de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="a0fd7-165">Ocultar Olá EmployeeSecurity tabela a partir de aplicações de cliente</span><span class="sxs-lookup"><span data-stu-id="a0fd7-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="a0fd7-166">Nesta tarefa, ocultar Olá EmployeeSecurity tabela, o mantê-la a apresentação na lista de campos de uma aplicação de cliente.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="a0fd7-167">Tenha em conta que a ocultação de tabelas não as protege.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="a0fd7-168">Os utilizadores continuam a poder consultar os dados da tabela EmployeeSecurity, se souberem como fazê-lo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="a0fd7-169">toosecure Olá EmployeeSecurity os dados da tabela, impedindo que os utilizadores sejam capaz tooquery qualquer um dos respetivos dados, aplicar um filtro numa tarefa posterior.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="a0fd7-170">tabela de EmployeeSecurity Olá toohide de aplicações de cliente</span><span class="sxs-lookup"><span data-stu-id="a0fd7-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="a0fd7-171">No estruturador de modelo de Olá, na vista de diagrama, faça duplo clique Olá **empregado** no cabeçalho de tabela e, em seguida, clique em **ocultar ferramentas de cliente**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="a0fd7-172">Criar uma função de utilizador Colaboradores de Vendas por Região</span><span class="sxs-lookup"><span data-stu-id="a0fd7-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="a0fd7-173">Nesta tarefa, vai criar uma função de utilizador.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-173">In this task, you create a user role.</span></span> <span data-ttu-id="a0fd7-174">Esta função inclui um filtro de linha definir que linhas da tabela de DimSalesTerritory Olá são toousers visível.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="a0fd7-175">Olá filtro é então aplicado numa relação um-para-muitos de Olá direção tooall outras tabelas tooDimSalesTerritory relacionado.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="a0fd7-176">Também se aplicam um filtro que protege tabela EmployeeSecurity completa Olá sejam consultável por qualquer utilizador que seja membro da função de Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="a0fd7-177">Olá funcionários de vendas por função território que criar este lesson restringe membros toobrowse (ou consulta) apenas dados de vendas para Olá território vendas toowhich pertencem.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="a0fd7-178">Se adicionar um utilizador como um toohello membro funcionários de vendas por função de território que também existe como um membro numa função criados no [Lesson 11: criar funções](../tutorials/aas-lesson-11-create-roles.md), obtenha uma combinação de permissões.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="a0fd7-179">Quando um utilizador é um membro de várias funções, permissões de Olá e definidos para cada função de filtros de linha são cumulativos.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="a0fd7-180">Ou seja, o utilizador de Olá tem permissões de maiores Olá determinadas pela combinação de Olá de funções.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="a0fd7-181">toocreate um funcionários de vendas por função de utilizador do Oceano Índico</span><span class="sxs-lookup"><span data-stu-id="a0fd7-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="a0fd7-182">No SSDT, clique em Olá **modelo** e, em seguida, clique em **funções**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="a0fd7-183">No **Gestor de Funções**, clique em **Nova**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="a0fd7-184">Uma nova função com Olá nenhum permissão é adicionado toohello lista.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="a0fd7-185">Clique em nova função de Olá e, em seguida, no Olá **nome** coluna, mude o nome de função de Olá demasiado**funcionários de vendas por território**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="a0fd7-186">No Olá **permissões** coluna, clique na lista pendente Olá e, em seguida, selecione Olá **leitura** permissão.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="a0fd7-187">Clique em Olá **membros** separador e, em seguida, clique em **adicionar**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="a0fd7-188">No Olá **selecionar utilizador ou grupo** caixa de diálogo **objeto de Olá Enter denominado tooselect**, tipo Olá primeiro exemplo nome de utilizador que utilizou quando criar Olá EmployeeSecurity tabela.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="a0fd7-189">Clique em **verificar nomes** nome de utilizador de Olá tooverify é válido e, em seguida, clique em **Ok**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="a0fd7-190">Repita este passo, adicionar Olá outros exemplos de nomes de utilizador que utilizou quando criar Olá EmployeeSecurity tabela.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="a0fd7-191">Clique em Olá **filtros de linha** separador.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="a0fd7-192">Para Olá **EmployeeSecurity** tabela, Olá **DAX filtro** coluna, Olá tipo seguinte fórmula:</span><span class="sxs-lookup"><span data-stu-id="a0fd7-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="a0fd7-193">Esta fórmula Especifica que todas as colunas resolver toohello de condição booleana FALSO.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="a0fd7-194">Não existem colunas da tabela de EmployeeSecurity Olá podem ser consultadas por um membro do Olá funcionários de vendas por função de utilizador do Oceano Índico.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="a0fd7-195">Para Olá **DimSalesTerritory** tabela, Olá tipo seguinte fórmula:</span><span class="sxs-lookup"><span data-stu-id="a0fd7-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="a0fd7-196">Esta fórmula Olá a função LOOKUPVALUE devolve todos os valores de coluna de Olá DimEmployeeSecurity [SalesTerritoryId] onde hello EmployeeSecurity [LoginId] é Olá mesmo como Olá atual com sessão iniciada num nome de utilizador do Windows e EmployeeSecurity [ SalesTerritoryId] é Olá igual Olá DimSalesTerritory [SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="a0fd7-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="a0fd7-197">Olá conjunto de IDs de vendas Oceano Índico devolvido pelo LOOKUPVALUE é, em seguida, utilizado toorestrict Olá linhas apresentadas no Olá DimSalesTerritory tabela.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="a0fd7-198">Apenas as linhas onde hello SalesTerritoryID para linha Olá está no conjunto de Olá de IDs devolvido pela função LOOKUPVALUE Olá são apresentadas.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="a0fd7-199">No Gestor de Funções, clique em **Ok**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="a0fd7-200">Testar Olá funcionários de vendas por função de utilizador do Oceano Índico</span><span class="sxs-lookup"><span data-stu-id="a0fd7-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="a0fd7-201">Nesta tarefa, utilize Olá analisar na funcionalidade de Excel efficacy de Olá tootest SSDT de Olá funcionários de vendas por função de utilizador do Oceano Índico.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="a0fd7-202">Especifique um dos nomes de utilizador Olá adicionou toohello EmployeeSecurity tabela e como um membro da função de Olá.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="a0fd7-203">Este nome de utilizador, em seguida, é utilizado como nome de utilizador Efetivo Olá na ligação de Olá criada entre o Excel e Olá modelo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="a0fd7-204">tootest Olá funcionários de vendas por função de utilizador do Oceano Índico</span><span class="sxs-lookup"><span data-stu-id="a0fd7-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="a0fd7-205">No SSDT, clique em Olá **modelo** e, em seguida, clique em **analisar no Excel**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="a0fd7-206">No Olá **analisar no Excel** caixa de diálogo **especifique Olá utilizador nome ou função toouse tooconnect toohello modelo**, selecione **outro utilizador do Windows**e, em seguida, clique em **Procurar**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="a0fd7-207">No Olá **selecionar utilizador ou grupo** caixa de diálogo **introduza tooselect de nome de objeto Olá**, escreva um nome de utilizador incluído na tabela de EmployeeSecurity Olá e, em seguida, clique em **verificar nomes**.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="a0fd7-208">Clique em **Ok** tooclose Olá **selecionar utilizador ou grupo** caixa de diálogo e, em seguida, clique em **Ok** tooclose Olá **analisar no Excel** caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="a0fd7-209">O Excel abre-se com um livro novo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="a0fd7-210">É criada automaticamente uma Tabela Dinâmica.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="a0fd7-211">Olá lista de campos PivotTable inclui a maioria dos campos de dados de Olá disponíveis no seu modelo de novo.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="a0fd7-212">Tabela de EmployeeSecurity Olá de aviso não é visível no Olá lista de campos da tabela dinâmica.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="a0fd7-213">Tal deve-se a tê-la ocultado das ferramentas de cliente numa tarefa anterior.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="a0fd7-214">No Olá **campos** , na área **∑ Internet vendas** (medidas), selecione Olá **InternetTotalSales** medidas.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="a0fd7-215">medida de Olá introduzida na Olá **valores** campos.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="a0fd7-216">Selecione Olá **SalesTerritoryId** coluna Olá **DimSalesTerritory** tabela.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="a0fd7-217">coluna Olá introduzida na Olá **etiquetas de linha** campos.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="a0fd7-218">Internet de aviso do volume de vendas são apresentadas apenas para Olá uma região toowhich Olá nome de utilizador Efetivo utilizou pertence.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="a0fd7-219">Se selecionar outra coluna, como a cidade da tabela de DimGeography Olá como o campo de etiqueta de linha, cidades apenas num utilizador Efetivo do Olá território vendas toowhich Olá pertence são apresentados.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="a0fd7-220">Este utilizador não é possível procurar ou consultar quaisquer dados de vendas da Internet para zonas que não sejam Olá um pertencem a.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="a0fd7-221">Esta restrição é porque hello filtro da linha definido para a tabela de DimSalesTerritory Olá, no Olá funcionários de vendas por função de utilizador do Oceano Índico, protege os dados para todos os dados relacionados com tooother zonas de vendas.</span><span class="sxs-lookup"><span data-stu-id="a0fd7-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a0fd7-222">Veja Também</span><span class="sxs-lookup"><span data-stu-id="a0fd7-222">See Also</span></span>  
[<span data-ttu-id="a0fd7-223">Função USERNAME (DAX)</span><span class="sxs-lookup"><span data-stu-id="a0fd7-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="a0fd7-224">Função LOOKUPVALUE (DAX)</span><span class="sxs-lookup"><span data-stu-id="a0fd7-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="a0fd7-225">Função CUSTOMDATA (DAX)</span><span class="sxs-lookup"><span data-stu-id="a0fd7-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  