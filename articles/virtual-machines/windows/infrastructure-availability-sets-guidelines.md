---
title: aaaAvailability define para VMs do Windows no Azure | Microsoft Docs
description: "Saiba mais sobre Olá chaves design e implementação diretrizes para a implementação de conjuntos de disponibilidade nos serviços de infraestrutura do Azure."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: f9449f58-664b-4d5d-82f6-84c5d083047f
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: cc35fd1e913434d9facb94116edb1b1c30447c71
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-availability-sets-guidelines-for-windows-vms"></a><span data-ttu-id="fcd29-103">Diretrizes de conjuntos de disponibilidade do Azure para as VMs do Windows</span><span class="sxs-lookup"><span data-stu-id="fcd29-103">Azure availability sets guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="fcd29-104">Este artigo incida no Olá compreender necessário passos de planeamento para conjuntos de disponibilidade tooensure as aplicações permanecem acessíveis durante eventos planeados ou imprevistos.</span><span class="sxs-lookup"><span data-stu-id="fcd29-104">This article focuses on understanding hello required planning steps for availability sets tooensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="fcd29-105">Diretrizes de implementação para conjuntos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="fcd29-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="fcd29-106">Decisões:</span><span class="sxs-lookup"><span data-stu-id="fcd29-106">Decisions:</span></span>

* <span data-ttu-id="fcd29-107">Quantos conjuntos de disponibilidade necessita para Olá vários escalões e funções na sua infraestrutura de aplicação?</span><span class="sxs-lookup"><span data-stu-id="fcd29-107">How many availability sets do you need for hello various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="fcd29-108">Tarefas:</span><span class="sxs-lookup"><span data-stu-id="fcd29-108">Tasks:</span></span>

* <span data-ttu-id="fcd29-109">Defina o número de Olá de VMs em cada camada de aplicação que necessita.</span><span class="sxs-lookup"><span data-stu-id="fcd29-109">Define hello number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="fcd29-110">Determine se necessita de tooadjust Olá diversas toobe de domínios de falhas ou atualização utilizado para a sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="fcd29-110">Determine if you need tooadjust hello number of fault or update domains toobe used for your application.</span></span>
* <span data-ttu-id="fcd29-111">Definir os conjuntos de disponibilidade de Olá necessário utilizar a Convenção de nomenclatura e que as VMs residem nos mesmos.</span><span class="sxs-lookup"><span data-stu-id="fcd29-111">Define hello required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="fcd29-112">Uma VM só pode residir num conjunto de disponibilidade de um.</span><span class="sxs-lookup"><span data-stu-id="fcd29-112">A VM can only reside in one availability set.</span></span>

## <a name="availability-sets"></a><span data-ttu-id="fcd29-113">Conjuntos de disponibilidade</span><span class="sxs-lookup"><span data-stu-id="fcd29-113">Availability sets</span></span>
<span data-ttu-id="fcd29-114">No Azure, as máquinas virtuais (VMs) podem ser colocadas num agrupamento lógico tooa chamado um conjunto de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="fcd29-114">In Azure, virtual machines (VMs) can be placed in tooa logical grouping called an availability set.</span></span> <span data-ttu-id="fcd29-115">Quando criar as VMs dentro de um conjunto de disponibilidade, Olá plataforma Azure distribui colocação Olá dessas VMS Olá subjacente infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="fcd29-115">When you create VMs within an availability set, hello Azure platform distributes hello placement of those VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="fcd29-116">Não existe deve ser um toohello de evento de manutenção planeada plataforma do Azure ou um hardware subjacente / falhas de infraestrutura, utilização de Olá de conjuntos de disponibilidade garante que, pelo menos, uma VM permanece em execução.</span><span class="sxs-lookup"><span data-stu-id="fcd29-116">Should there be a planned maintenance event toohello Azure platform or an underlying hardware / infrastructure fault, hello use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="fcd29-117">Como melhor prática, aplicações não devem residir numa única VM.</span><span class="sxs-lookup"><span data-stu-id="fcd29-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="fcd29-118">Um conjunto de disponibilidade que contém uma única VM não obtém qualquer proteção a partir de eventos planeadas ou imprevistas dentro Olá plataforma Azure.</span><span class="sxs-lookup"><span data-stu-id="fcd29-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within hello Azure platform.</span></span> <span data-ttu-id="fcd29-119">Olá [SLA do Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) requer dois ou mais VMs dentro de uma disponibilidade conjunto tooallow Olá distribuição de VMs entre Olá subjacente infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="fcd29-119">hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set tooallow hello distribution of VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="fcd29-120">Se estiver a utilizar [Premium Storage do Azure](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), Olá SLA do Azure aplica-se tooa única VM.</span><span class="sxs-lookup"><span data-stu-id="fcd29-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure SLA applies tooa single VM.</span></span>

<span data-ttu-id="fcd29-121">infraestrutura subjacente do Olá no Azure está dividida em clusters de hardware toomultiple.</span><span class="sxs-lookup"><span data-stu-id="fcd29-121">hello underlying infrastructure in Azure is divided in toomultiple hardware clusters.</span></span> <span data-ttu-id="fcd29-122">Cada cluster de hardware pode suportar um tamanhos de intervalo de VM.</span><span class="sxs-lookup"><span data-stu-id="fcd29-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="fcd29-123">Um conjunto de disponibilidade só pode ser alojado num cluster único hardware em qualquer ponto no tempo.</span><span class="sxs-lookup"><span data-stu-id="fcd29-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="fcd29-124">Por conseguinte, tamanhos de intervalo de VM de Olá que podem existir num conjunto de disponibilidade único é tamanhos de intervalo de VM de toohello limitado suportados pelo cluster de hardware Olá.</span><span class="sxs-lookup"><span data-stu-id="fcd29-124">Therefore, hello range of VM sizes that can exist in a single availability set is limited toohello range of VM sizes supported by hello hardware cluster.</span></span> <span data-ttu-id="fcd29-125">cluster de hardware Olá Olá para conjunto de disponibilidade está selecionada quando hello primeira implementação da VM no conjunto de disponibilidade de Olá ou quando iniciar Olá primeira VM num conjunto de disponibilidade em que todas as VMs estão atualmente no estado parado-desalocada de Olá.</span><span class="sxs-lookup"><span data-stu-id="fcd29-125">hello hardware cluster for hello availability set is selected when hello first VM in hello availability set is deployed or when starting hello first VM in an availability set where all VMs are currently in hello stopped-deallocated state.</span></span> <span data-ttu-id="fcd29-126">Olá seguinte comando do PowerShell pode ser utilizados toodetermine Olá intervalo de VM tamanhos disponíveis para um conjunto de disponibilidade: "Get-AzureRmVMSize - ResourceGroupName \<cadeia\> - AvailabilitySetName \<cadeia\> "</span><span class="sxs-lookup"><span data-stu-id="fcd29-126">hello following PowerShell command can be used toodetermine hello range of VM sizes available for an availability set: "Get-AzureRmVMSize -ResourceGroupName \<string\> -AvailabilitySetName \<string\>"</span></span>

<span data-ttu-id="fcd29-127">Cada cluster de hardware está dividido em domínios de atualização de toomultiple e domínios de falhas.</span><span class="sxs-lookup"><span data-stu-id="fcd29-127">Each hardware cluster is divided in toomultiple update domains and fault domains.</span></span> <span data-ttu-id="fcd29-128">Estes domínios são definidos pelos quais anfitriões partilhar um ciclo de actualização da comuns ou partilha semelhante infraestrutura física, tais como a rede e de energia.</span><span class="sxs-lookup"><span data-stu-id="fcd29-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="fcd29-129">Azure distribui automaticamente as VMs dentro de um conjunto de disponibilidade de toomaintain de domínios e tolerância a falhas de disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="fcd29-129">Azure automatically distributes your VMs within an availability set across domains toomaintain availability and fault tolerance.</span></span> <span data-ttu-id="fcd29-130">Dependendo do tamanho de Olá da sua aplicação e o número de Olá de VMs dentro de um conjunto de disponibilidade, pode ajustar o número de Olá dos domínios desejar toouse.</span><span class="sxs-lookup"><span data-stu-id="fcd29-130">Depending on hello size of your application and hello number of VMs within an availability set, you can adjust hello number of domains you wish toouse.</span></span> <span data-ttu-id="fcd29-131">Pode ler mais sobre [gerir a disponibilidade e a utilização de domínios de atualização e falhas](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="fcd29-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="fcd29-132">Ao conceber a sua infraestrutura de aplicação, planeie camadas da aplicação Olá que utilizar.</span><span class="sxs-lookup"><span data-stu-id="fcd29-132">When designing your application infrastructure, plan hello application tiers that you use.</span></span> <span data-ttu-id="fcd29-133">VMs de grupo que servem Olá mesmo objetivo tooavailability conjuntos, tais como um conjunto de disponibilidade para as VMs de front-end que executa o IIS.</span><span class="sxs-lookup"><span data-stu-id="fcd29-133">Group VMs that serve hello same purpose in tooavailability sets, such as an availability set for your front-end VMs running IIS.</span></span> <span data-ttu-id="fcd29-134">Crie uma separado conjunto de disponibilidade para as VMs do back-end com o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="fcd29-134">Create a separate availability set for your back-end VMs running SQL Server.</span></span> <span data-ttu-id="fcd29-135">o objetivo de Olá é tooensure que cada componente da aplicação está protegido por um conjunto de disponibilidade e, pelo menos, uma vez instância sempre permanece em execução.</span><span class="sxs-lookup"><span data-stu-id="fcd29-135">hello goal is tooensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="fcd29-136">Balanceadores de carga podem ser utilizados à frente de cada toowork de camada de aplicação juntamente com um conjunto de disponibilidade e certifique-se de que o tráfego sempre pode ser encaminhada tooa executar instância.</span><span class="sxs-lookup"><span data-stu-id="fcd29-136">Load balancers can be utilized in front of each application tier toowork alongside an availability set and ensure traffic can always be routed tooa running instance.</span></span> <span data-ttu-id="fcd29-137">Sem um balanceador de carga, as suas VMs podem continuar a ser executado em todos os eventos de manutenção planeado e imprevisto, mas o utilizador final não pode ser capaz de tooresolve os se hello VM principal não está disponível.</span><span class="sxs-lookup"><span data-stu-id="fcd29-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able tooresolve them if hello primary VM is unavailable.</span></span>

<span data-ttu-id="fcd29-138">Crie uma aplicação para elevada disponibilidade na camada de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="fcd29-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="fcd29-139">Olá procedimento recomendado é demasiado[utilizar discos geridos para as VMs num conjunto de disponibilidade](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="fcd29-139">hello best practice is too[use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="fcd29-140">Se estiver a utilizar discos não geridos, recomendamos vivamente demasiado[converter VMs no conjunto de disponibilidade toouse geridos discos](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="fcd29-140">If you are currently using unmanaged disks, we highly recommend you too[convert VMs in Availability Set toouse Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="fcd29-141">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="fcd29-141">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]
