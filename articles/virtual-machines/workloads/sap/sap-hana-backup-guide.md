---
title: Guia de aaaBackup para SAP HANA em Azure Virtual Machines | Microsoft Docs
description: "Guia de cópia de segurança para SAP HANA fornece duas principais possibilidades de cópia de segurança para SAP HANA em máquinas virtuais do Azure"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="15ece-103">Guia de segurança para SAP HANA em Máquinas Virtuais do Azure</span><span class="sxs-lookup"><span data-stu-id="15ece-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="15ece-104">Introdução</span><span class="sxs-lookup"><span data-stu-id="15ece-104">Getting Started</span></span>

<span data-ttu-id="15ece-105">Guia de cópia de segurança de Olá para SAP HANA em execução em máquinas virtuais do Azure apenas descrevem tópicos específicos do Azure.</span><span class="sxs-lookup"><span data-stu-id="15ece-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="15ece-106">Para gerais SAP HANA cópia de segurança itens relacionados, consulte a documentação de SAP HANA Olá (consulte _documentação de cópia de segurança de SAP HANA_ posteriormente neste artigo).</span><span class="sxs-lookup"><span data-stu-id="15ece-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="15ece-107">Olá foco este artigo é dois principais cópia de segurança as possibilidades de SAP HANA em máquinas virtuais do Azure:</span><span class="sxs-lookup"><span data-stu-id="15ece-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="15ece-108">Sistema de ficheiros de cópia de segurança toohello HANA numa máquina de Virtual do Linux do Azure (consulte [SAP HANA Backup do Azure no nível de ficheiro](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="15ece-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="15ece-109">Cópia de segurança HANA com base nos instantâneos de armazenamento utilizando a funcionalidade de instantâneos de blob de armazenamento do Azure Olá manualmente ou o serviço de cópia de segurança do Azure (consulte [cópia de segurança de SAP HANA com base nos instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="15ece-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="15ece-110">SAP HANA oferece uma cópia de segurança API, o que permite que as ferramentas de cópia de segurança de terceiros toointegrate diretamente com SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="15ece-111">(Que não está dentro do âmbito deste guia Olá.) Não há nenhum integração direta de SAP HANA com o serviço de cópia de segurança do Azure direito disponível com base nesta API.</span><span class="sxs-lookup"><span data-stu-id="15ece-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="15ece-112">SAP HANA é oficialmente suportado no tipo de VM do Azure GS5 como única instância com cargas de trabalho de tooOLAP uma restrição adicional (consulte [localizar plataformas IaaS certificadas](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) no Web site SAP Olá).</span><span class="sxs-lookup"><span data-stu-id="15ece-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="15ece-113">Este artigo será atualizado como novas ofertas de SAP HANA no Azure fique disponível.</span><span class="sxs-lookup"><span data-stu-id="15ece-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="15ece-114">Há também uma solução híbrida de SAP HANA disponíveis no Azure, onde SAP HANA é executada não virtualizados em servidores físicos.</span><span class="sxs-lookup"><span data-stu-id="15ece-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="15ece-115">No entanto, este guia de cópia de segurança de SAP HANA Azure inclui um ambiente do Azure puro onde SAP HANA é executado numa VM do Azure, não SAP HANA em execução no &quot;instâncias grandes.&quot; Consulte [descrição geral de SAP HANA (instâncias de grandes dimensões) e arquitetura no Azure](hana-overview-architecture.md) para obter mais informações sobre esta solução de cópia de segurança no &quot;instâncias grande&quot; com base nos instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="15ece-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="15ece-116">Informações gerais sobre os produtos SAP suportadas no Azure podem ser encontradas no [1928533 de nota SAP](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="15ece-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="15ece-117">Olá seguintes três figuras dar uma descrição geral de Olá opções de cópia de segurança de SAP HANA atualmente a utilizar as capacidades do Azure nativas e também mostram três cenários de cópia de segurança futuros potenciais.</span><span class="sxs-lookup"><span data-stu-id="15ece-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="15ece-118">Olá artigos relacionados [SAP HANA Backup do Azure no nível de ficheiro](sap-hana-backup-file-level.md) e [cópia de segurança de SAP HANA com base nos instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md) descrevem estas opções em mais detalhe, incluindo as considerações de desempenho e de tamanho para SAP HANA cópias de segurança que são várias-terabytes de tamanho.</span><span class="sxs-lookup"><span data-stu-id="15ece-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Esta ilustração mostra duas possibilidades para guardar o estado de VM Olá atual](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="15ece-120">Esta ilustração mostra a possibilidade de Olá de guardar Olá VM estado atual, ou através do serviço de cópia de segurança do Azure ou manual instantâneos de discos VM.</span><span class="sxs-lookup"><span data-stu-id="15ece-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="15ece-121">Com esta abordagem, um &#39; t ter cópias de segurança do toomanage SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="15ece-122">desafio Olá do cenário de instantâneo de disco Olá é consistência do sistema de ficheiros e um Estado de disco com consistência de aplicações.</span><span class="sxs-lookup"><span data-stu-id="15ece-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="15ece-123">tópico de consistência Olá mencionado na secção de Olá _consistência de dados SAP HANA quando tirar instantâneos de armazenamento_ posteriormente neste artigo.</span><span class="sxs-lookup"><span data-stu-id="15ece-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="15ece-124">Funcionalidades e restrições do serviço de cópia de segurança do Azure relacionados com tooSAP HANA as cópias de segurança também são abordadas neste artigo.</span><span class="sxs-lookup"><span data-stu-id="15ece-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Esta ilustração mostra as opções para colocar um SAP HANA ficheiro de cópia de segurança dentro Olá VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="15ece-126">Esta ilustração mostra as opções para colocar uma cópia de segurança de ficheiros de SAP HANA dentro Olá VM e, em seguida, armazenar ficheiros de cópia de segurança HANA algures senão utilizando ferramentas diferentes.</span><span class="sxs-lookup"><span data-stu-id="15ece-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="15ece-127">Fazer uma cópia de segurança HANA necessita de mais tempo do que uma solução de cópia de segurança baseada em instantâneo, mas tem vantagens relativamente a integridade e consistência.</span><span class="sxs-lookup"><span data-stu-id="15ece-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="15ece-128">Obter mais detalhes são fornecidos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="15ece-128">More details are provided later in this article.</span></span>

![Este figura mostra um potencial futuro SAP HANA cópia de segurança cenário](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="15ece-130">Este figura mostra um potencial futuro SAP HANA cópia de segurança cenário.</span><span class="sxs-lookup"><span data-stu-id="15ece-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="15ece-131">Se SAP HANA permitido fazer cópias de segurança de uma replicação secundária, deverá adicionar a opções adicionais para estratégias de cópia de segurança.</span><span class="sxs-lookup"><span data-stu-id="15ece-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="15ece-132">Atualmente, não é possível tooa post no Olá SAP HANA Wiki de acordo com:</span><span class="sxs-lookup"><span data-stu-id="15ece-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="15ece-133">_&quot;É possível tootake cópias de segurança no lado secundário Olá?_</span><span class="sxs-lookup"><span data-stu-id="15ece-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="15ece-134">_Não, atualmente pode apenas colocar dados e iniciar as cópias de segurança no lado primário Olá. Se estiver ativada a cópia de segurança automática de registos, após toohello alimentar de lado secundária, cópias de segurança de registo de Olá automaticamente serão escritas não existe.&quot;_</span><span class="sxs-lookup"><span data-stu-id="15ece-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="15ece-135">Recursos SAP para cópia de segurança HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="15ece-136">Documentação de cópia de segurança de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="15ece-137">Introdução tooSAP HANA administração</span><span class="sxs-lookup"><span data-stu-id="15ece-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="15ece-138">Planear a sua estratégia de recuperação e cópia de segurança</span><span class="sxs-lookup"><span data-stu-id="15ece-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="15ece-139">Agendar cópia de segurança HANA utilizando ABAP DBACOCKPIT</span><span class="sxs-lookup"><span data-stu-id="15ece-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="15ece-140">Cópias de segurança de dados agendadas (SAP HANA Cockpit)</span><span class="sxs-lookup"><span data-stu-id="15ece-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="15ece-141">FAQ sobre SAP HANA de cópia de segurança no [1642148 de nota SAP](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="15ece-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="15ece-142">FAQ sobre instantâneos de base de dados e armazenamento de SAP HANA no [2039883 de nota SAP](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="15ece-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="15ece-143">Sistemas de ficheiros de rede unsuitable para cópia de segurança e recuperação no [1820529 de nota SAP](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="15ece-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="15ece-144">Por que motivo SAP cópia de segurança HANA?</span><span class="sxs-lookup"><span data-stu-id="15ece-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="15ece-145">Storage do Azure oferece a disponibilidade e fiabilidade Box Olá (consulte [introdução tooMicrosoft Storage do Azure](../../../storage/common/storage-introduction.md) para obter mais informações sobre o storage do Azure).</span><span class="sxs-lookup"><span data-stu-id="15ece-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="15ece-146">Olá mínimo para &quot;cópia de segurança&quot; é toorely no Olá SLA do Azure, Olá manter ficheiros de registo e dados de SAP HANA no servidor de SAP HANA Azure VHDs toohello anexado VM.</span><span class="sxs-lookup"><span data-stu-id="15ece-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="15ece-147">Esta abordagem abrange falhas VM, mas não potenciais danos toohello SAP HANA dados e ficheiros de registo ou erros lógicos, como a eliminação de dados ou ficheiros acidentalmente.</span><span class="sxs-lookup"><span data-stu-id="15ece-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="15ece-148">As cópias de segurança também são necessárias para compatibilidade ou motivos legais.</span><span class="sxs-lookup"><span data-stu-id="15ece-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="15ece-149">Em suma, não há sempre uma necessidade para cópias de segurança de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="15ece-150">Como tooverify correcção de cópia de segurança de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="15ece-151">Quando é recomendado utilizar instantâneos de armazenamento, executar um restauro de teste num sistema diferente.</span><span class="sxs-lookup"><span data-stu-id="15ece-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="15ece-152">Esta abordagem fornece uma forma tooensure uma cópia de segurança está corretos e internos processos de trabalho de cópia de segurança e restauro, conforme esperado.</span><span class="sxs-lookup"><span data-stu-id="15ece-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="15ece-153">Apesar de ser um impacto significativo hurdle no local, é muito mais fácil tooaccomplish na nuvem de Olá, fornecendo temporariamente os recursos necessários para esta finalidade.</span><span class="sxs-lookup"><span data-stu-id="15ece-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="15ece-154">Tenha em atenção que efetuar um restauro simple e a verificar se HANA está ativo e em execução não são suficiente.</span><span class="sxs-lookup"><span data-stu-id="15ece-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="15ece-155">Idealmente, um deve executar um toobe de verificação de consistência de tabela se que a base de dados de Olá restaurada é adequado.</span><span class="sxs-lookup"><span data-stu-id="15ece-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="15ece-156">SAP HANA oferece vários tipos de verificações de consistência descritos [1977584 de nota SAP](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="15ece-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="15ece-157">Também pode encontrar informações sobre a verificação de consistência de tabela Olá no site SAP Olá em [tabela e verificações de consistência do catálogo](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="15ece-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="15ece-158">Para cópias de segurança de ficheiros padrão, um restauro de teste não é necessário.</span><span class="sxs-lookup"><span data-stu-id="15ece-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="15ece-159">Existem duas ferramentas de SAP HANA ajudam toocheck que cópia de segurança pode ser utilizada para restauro: hdbbackupdiag e hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="15ece-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="15ece-160">Consulte [manualmente a verificar se a recuperação é possível](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) para obter mais informações sobre estas ferramentas.</span><span class="sxs-lookup"><span data-stu-id="15ece-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="15ece-161">Os profissionais de TI e contras de cópia de segurança HANA versus instantâneos de armazenamento</span><span class="sxs-lookup"><span data-stu-id="15ece-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="15ece-162">SAP & #39 t conceder preferência tooeither HANA cópia de segurança; versus instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="15ece-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="15ece-163">Lista os respetivos os profissionais de TI e contras, para que um pode determinar que toouse dependendo da situação de Olá e tecnologia de armazenamento disponível (consulte [planear a cópia de segurança e a estratégia de recuperação](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="15ece-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="15ece-164">No Azure, lembre-se de que de facto de Olá Olá não de funcionalidade de instantâneos do blob do Azure &#39; t garantir a consistência do sistema de ficheiros (consulte [utilizar instantâneos de blob com o PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="15ece-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="15ece-165">Olá secção seguinte, _consistência de dados SAP HANA quando tirar instantâneos de armazenamento_, descreve algumas considerações relativas a esta funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="15ece-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="15ece-166">Além disso, tem um toounderstand Olá implicações de faturação ao trabalhar com frequência com instantâneos do blob, conforme descrito neste artigo: [compreender como instantâneos acumular encargos](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)— se encontra &#39; t como óbvios como utilizar o Azure discos virtuais.</span><span class="sxs-lookup"><span data-stu-id="15ece-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="15ece-167">Consistência de dados SAP HANA quando tirar instantâneos de armazenamento</span><span class="sxs-lookup"><span data-stu-id="15ece-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="15ece-168">Consistência de aplicações e de sistema de ficheiros é um problema complexo quando tirar instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="15ece-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="15ece-169">problemas de tooavoid de forma mais fácil Olá iriam ser tooshut para baixo de SAP HANA ou, talvez mesmo Olá máquina todo.</span><span class="sxs-lookup"><span data-stu-id="15ece-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="15ece-170">Um encerramento pode ser doable com uma demonstração ou criar protótipos ou até mesmo um sistema de desenvolvimento, mas não é uma opção para um sistema de produção.</span><span class="sxs-lookup"><span data-stu-id="15ece-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="15ece-171">No Azure, um tem tookeep em atenção que Olá não de funcionalidade de instantâneos do blob do Azure &#39; t garantir a consistência do sistema de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="15ece-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="15ece-172">Ajustar funciona no entanto, utilizando Olá SAP HANA instantâneo funcionalidade, desde que não há um único disco virtual envolvidos.</span><span class="sxs-lookup"><span data-stu-id="15ece-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="15ece-173">Mas, mesmo com um único disco itens adicionais têm toobe marcada.</span><span class="sxs-lookup"><span data-stu-id="15ece-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="15ece-174">[SAP nota 2039883](https://launchpad.support.sap.com/#/notes/2039883) tem informações importantes sobre as cópias de segurança de SAP HANA através de instantâneos de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="15ece-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="15ece-175">Por exemplo, menciona que, com o sistema de ficheiros XFS Olá, é necessário toorun **xfs\_fixar** antes de iniciar um armazenamento de instantâneos tooguarantee consistência (consulte [xfs\_freeze(8) - man do Linux página](https://linux.die.net/man/8/xfs_freeze) para obter detalhes sobre **xfs\_fixar**).</span><span class="sxs-lookup"><span data-stu-id="15ece-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="15ece-176">tópico de Olá de consistência fica ainda mais difícil caso em que um sistema de ficheiro único abranja vários discos/volumes.</span><span class="sxs-lookup"><span data-stu-id="15ece-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="15ece-177">Por exemplo, ao utilizar mdadm ou LVM e striping.</span><span class="sxs-lookup"><span data-stu-id="15ece-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="15ece-178">Olá nota SAP mencionado Estados:</span><span class="sxs-lookup"><span data-stu-id="15ece-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="15ece-179">_&quot;Mas tenha em atenção que o sistema de armazenamento Olá tem consistência tooguarantee e/s ao criar um instantâneo de armazenamento por volume de dados SAP HANA, ou seja, tem de ser uma operação atómica snapshotting de um volume de dados específicos do serviço de SAP HANA.&quot;_</span><span class="sxs-lookup"><span data-stu-id="15ece-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="15ece-180">Pressupondo que há um sistema de ficheiros XFS expansão quatro discos virtuais do Azure, hello passos seguintes fornecem um instantâneo consistente que representa a área de dados HANA Olá:</span><span class="sxs-lookup"><span data-stu-id="15ece-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="15ece-181">Preparar o instantâneo HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="15ece-182">Fixar o sistema de ficheiros de Olá (por exemplo, utilizar **xfs\_fixar**)</span><span class="sxs-lookup"><span data-stu-id="15ece-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="15ece-183">Criar todos os instantâneos do blob necessários no Azure</span><span class="sxs-lookup"><span data-stu-id="15ece-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="15ece-184">Libertar poder por sistema de ficheiros de Olá</span><span class="sxs-lookup"><span data-stu-id="15ece-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="15ece-185">Confirme o instantâneo HANA Olá</span><span class="sxs-lookup"><span data-stu-id="15ece-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="15ece-186">Recomenda-se toouse Olá procedimento acima todos os casos toobe no lado seguro Olá, independentemente do sistema de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="15ece-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="15ece-187">Ou, se se tratar de um único disco ou striping, através de mdadm ou LVM entre múltiplos discos.</span><span class="sxs-lookup"><span data-stu-id="15ece-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="15ece-188">É importante tooconfirm Olá HANA instantâneo.</span><span class="sxs-lookup"><span data-stu-id="15ece-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="15ece-189">Toohello devida &quot;cópia ao escrever,&quot; SAP HANA poderão não requerer o espaço em disco adicional nisto preparar instantâneo modo.</span><span class="sxs-lookup"><span data-stu-id="15ece-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="15ece-190">&#39; s toostart também não é possível novas cópias de segurança até que o instantâneo de SAP HANA Olá é confirmado.</span><span class="sxs-lookup"><span data-stu-id="15ece-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="15ece-191">Serviço de cópia de segurança do Azure utiliza tootake de extensões de VM do Azure care of Olá consistência do sistema de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="15ece-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="15ece-192">Estas extensões VM não estão disponíveis para utilização autónoma.</span><span class="sxs-lookup"><span data-stu-id="15ece-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="15ece-193">Um ainda tem toomanage consistência de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="15ece-194">Consulte o artigo relacionado Olá [SAP HANA Azure Backup no nível de ficheiro](sap-hana-backup-file-level.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="15ece-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="15ece-195">Estratégia de agendamento de cópia de segurança de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="15ece-196">artigo de SAP HANA Olá [planear a cópia de segurança e a estratégia de recuperação](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) Estados uma basic planear toodo cópias de segurança:</span><span class="sxs-lookup"><span data-stu-id="15ece-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="15ece-197">Armazenamento de instantâneos (diário)</span><span class="sxs-lookup"><span data-stu-id="15ece-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="15ece-198">Cópia de segurança de dados completo com o formato de ficheiro ou bacint (uma vez por semana)</span><span class="sxs-lookup"><span data-stu-id="15ece-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="15ece-199">Cópias de segurança do registo automática</span><span class="sxs-lookup"><span data-stu-id="15ece-199">Automatic log backups</span></span>

<span data-ttu-id="15ece-200">Opcionalmente, um foi possível ir completamente sem instantâneos de armazenamento pode ser substituídos HANA diferenças das cópias de segurança, como as cópias de segurança incrementais ou diferenciais (consulte [cópias de segurança diferencial](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="15ece-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="15ece-201">Guia de administração de HANA Olá fornece uma lista de exemplo.</span><span class="sxs-lookup"><span data-stu-id="15ece-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="15ece-202">-Sugere que um recuperar ponto do SAP HANA tooa específico no tempo utilizando Olá seguinte sequência das cópias de segurança:</span><span class="sxs-lookup"><span data-stu-id="15ece-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="15ece-203">Cópia de segurança de dados completa</span><span class="sxs-lookup"><span data-stu-id="15ece-203">Full data backup</span></span>
2. <span data-ttu-id="15ece-204">Cópia de segurança diferencial</span><span class="sxs-lookup"><span data-stu-id="15ece-204">Differential backup</span></span>
3. <span data-ttu-id="15ece-205">Cópia de segurança incremental 1</span><span class="sxs-lookup"><span data-stu-id="15ece-205">Incremental backup 1</span></span>
4. <span data-ttu-id="15ece-206">Cópia de segurança incremental 2</span><span class="sxs-lookup"><span data-stu-id="15ece-206">Incremental backup 2</span></span>
5. <span data-ttu-id="15ece-207">Cópias de segurança do registo</span><span class="sxs-lookup"><span data-stu-id="15ece-207">Log backups</span></span>

<span data-ttu-id="15ece-208">Relativamente a um agendamento exato como toowhen e com que frequência deverá ocorrer um tipo específico de cópia de segurança, não é possível toogive orientação geral — é demasiado específicas do cliente e depende ocorrem quantos alterações de dados no sistema de Olá.</span><span class="sxs-lookup"><span data-stu-id="15ece-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="15ece-209">Uma recomendação básica do lado do SAP, que pode ser visto como orientação geral, é toomake um HANA cópia de segurança completa, uma vez por semana.</span><span class="sxs-lookup"><span data-stu-id="15ece-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="15ece-210">Sobre cópias de segurança de registo, consulte a documentação de SAP HANA Olá [cópias de segurança do registo](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="15ece-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="15ece-211">SAP recomenda também fazer alguma manutenção de Olá catálogo cópia de segurança tookeep a crescer infinitamente (consulte [Housekeeping de catálogo de cópias de segurança e de armazenamento de cópia de segurança](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="15ece-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="15ece-212">Ficheiros de configuração de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-212">SAP HANA configuration files</span></span>

<span data-ttu-id="15ece-213">Conforme indicado na Olá FAQ no [1642148 de nota SAP](https://launchpad.support.sap.com/#/notes/1642148), ficheiros de configuração de SAP HANA Olá não fazem parte de uma cópia de segurança HANA padrão.</span><span class="sxs-lookup"><span data-stu-id="15ece-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="15ece-214">Não são essencial toorestore um sistema.</span><span class="sxs-lookup"><span data-stu-id="15ece-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="15ece-215">Olá HANA foi possível alterar a configuração manualmente após o restauro de Olá.</span><span class="sxs-lookup"><span data-stu-id="15ece-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="15ece-216">No caso de um gostaria tooget Olá configuração personalizada mesma durante o processo de restauro de Olá, é necessário tooback dos ficheiros de configuração de HANA Olá separadamente.</span><span class="sxs-lookup"><span data-stu-id="15ece-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="15ece-217">Se padrão HANA as cópias de segurança são tooa dedicado sistema de ficheiros de cópia de segurança de HANA, um também pode copiar toohello de ficheiros de configuração de Olá mesmo sistema de ficheiros de cópia de segurança e, em seguida, copie tudo como destino de armazenamento final toohello em conjunto esporádico armazenamento de Blobs.</span><span class="sxs-lookup"><span data-stu-id="15ece-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="15ece-218">SAP HANA Cockpit</span><span class="sxs-lookup"><span data-stu-id="15ece-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="15ece-219">SAP HANA Cockpit oferece a possibilidade de Olá da monitorização e gestão de SAP HANA através de um browser.</span><span class="sxs-lookup"><span data-stu-id="15ece-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="15ece-220">Também permite que o processamento de cópias de segurança de SAP HANA e, por conseguinte, podem ser utilizado como uma alternativa tooSAP HANA Studio e ABAP DBACOCKPIT (consulte [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) para obter mais informações).</span><span class="sxs-lookup"><span data-stu-id="15ece-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Esta ilustração mostra Olá ecrã de administração do SAP HANA Cockpit da base de dados](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="15ece-222">Este figura mostra Olá ecrã de administração do SAP HANA Cockpit da base de dados e o mosaico de cópia de segurança de Olá no Olá à esquerda.</span><span class="sxs-lookup"><span data-stu-id="15ece-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="15ece-223">Mosaico de cópia de segurança Olá ver necessita de permissões de utilizador adequada para a conta de início de sessão.</span><span class="sxs-lookup"><span data-stu-id="15ece-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![As cópias de segurança podem ser monitorizadas no SAP HANA Cockpit enquanto estiverem em curso](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="15ece-225">As cópias de segurança podem ser monitorizadas no SAP HANA Cockpit enquanto estiverem em curso e, assim que estiver concluído, todos os detalhes de cópia de segurança de Olá estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="15ece-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Um exemplo utilizando o Firefox numa VM do Azure SLES 12 com ambiente de trabalho Gnome](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="15ece-227">capturas de ecrã anterior Olá foram efetuadas a partir de uma VM do Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="15ece-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="15ece-228">Este é um exemplo utilizando o Firefox numa VM do Azure SLES 12 com ambiente de trabalho Gnome.</span><span class="sxs-lookup"><span data-stu-id="15ece-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="15ece-229">Mostra agendas cópia de segurança de SAP HANA toodefine de opção Olá no Cockpit do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="15ece-230">Como um também pode ver, sugere data/hora como um prefixo para ficheiros de cópia de segurança de Olá.</span><span class="sxs-lookup"><span data-stu-id="15ece-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="15ece-231">No Studio do SAP HANA, Olá predefinido prefixo é constituído pelos &quot;concluída\_dados\_cópia de segurança&quot; ao efetuar uma cópia de segurança completa.</span><span class="sxs-lookup"><span data-stu-id="15ece-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="15ece-232">É recomendado utilizar um prefixo exclusivo.</span><span class="sxs-lookup"><span data-stu-id="15ece-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="15ece-233">Encriptação de cópias de segurança de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="15ece-234">SAP HANA oferece a encriptação de dados e de registo.</span><span class="sxs-lookup"><span data-stu-id="15ece-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="15ece-235">Se os dados de SAP HANA e de registo não estão encriptados, em seguida, as cópias de segurança Olá também não estão encriptadas.</span><span class="sxs-lookup"><span data-stu-id="15ece-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="15ece-236">Está a funcionar toohello cliente toouse alguma forma de cópias de segurança de solução de terceiros tooencrypt Olá SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="15ece-237">Consulte [dados e encriptação de Volume de registo](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind mais informações sobre a encriptação de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="15ece-238">No Microsoft Azure, um cliente poderia utilizar Olá tooencrypt de funcionalidade de encriptação de VM do IaaS.</span><span class="sxs-lookup"><span data-stu-id="15ece-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="15ece-239">Por exemplo, um utilizar dados dedicado discos anexados toohello VM, que são utilizado toostore cópias de segurança de SAP HANA, em seguida, faça cópias destes discos.</span><span class="sxs-lookup"><span data-stu-id="15ece-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="15ece-240">Serviço de cópia de segurança do Azure pode processar VMs/discos encriptados (consulte [como tooback cópias de segurança e restauro encriptados máquinas virtuais com o Backup do Azure](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="15ece-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="15ece-241">Outra opção teria de ser toomaintain Olá SAP HANA VM e os respetivos discos sem encriptação e armazenar ficheiros de cópia de segurança de SAP HANA Olá numa conta do storage para o qual foi ativada a encriptação (consulte [encriptação do serviço de armazenamento do Azure para dados Inativos](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="15ece-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="15ece-242">Configuração de teste</span><span class="sxs-lookup"><span data-stu-id="15ece-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="15ece-243">Máquina Virtual de teste no Azure</span><span class="sxs-lookup"><span data-stu-id="15ece-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="15ece-244">Uma instalação de SAP HANA na VM do Azure GS5 foi utilizada para Olá seguintes testes de cópia de segurança/restauro.</span><span class="sxs-lookup"><span data-stu-id="15ece-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Esta ilustração mostra parte Olá descrição geral do portal do Azure para a VM de teste HANA Olá](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="15ece-246">Esta ilustração mostra parte Olá descrição geral do portal do Azure para a VM de teste do Olá HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="15ece-247">Tamanho de cópia de segurança de teste</span><span class="sxs-lookup"><span data-stu-id="15ece-247">Test backup size</span></span>

![Este figura foi executada a partir da consola de cópia de segurança de Olá no HANA Studio e mostra o tamanho do ficheiro de cópia de segurança Olá de 229 GB para o servidor de índice HANA Olá](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="15ece-249">Uma tabela fictício foi preenchida cópias de segurança com dados tooget um tamanho de cópia de segurança de dados total mais de 200 GB tooderive realistas de dados de desempenho.</span><span class="sxs-lookup"><span data-stu-id="15ece-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="15ece-250">figura Olá foi executada a partir da consola de cópia de segurança de Olá no HANA Studio e mostra o tamanho do ficheiro de cópia de segurança Olá de 229 GB para o servidor de índice Olá HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="15ece-251">Para testes de Olá, foi utilizado o prefixo de cópia de segurança Olá predefinido "COMPLETE_DATA_BACKUP" no Studio do SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="15ece-252">Nos sistemas de produção real, deve ser definido um prefixo mais útil.</span><span class="sxs-lookup"><span data-stu-id="15ece-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="15ece-253">SAP HANA Cockpit sugere data/hora.</span><span class="sxs-lookup"><span data-stu-id="15ece-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="15ece-254">Teste ferramenta toocopy diretamente ficheiros tooAzure armazenamento</span><span class="sxs-lookup"><span data-stu-id="15ece-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="15ece-255">ficheiros de cópia de segurança de SAP HANA de tootransfer diretamente o armazenamento de BLOBs de tooAzure ou partilhas de ficheiros do Azure, Olá blobxfer ferramenta foi utilizada porque suporta tanto destinos e podem ser facilmente integrados em scripts de automatização devido tooits interface de linha de comandos.</span><span class="sxs-lookup"><span data-stu-id="15ece-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="15ece-256">Olá blobxfer ferramenta está disponível em [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="15ece-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="15ece-257">Estimativa do tamanho de cópia de segurança de teste</span><span class="sxs-lookup"><span data-stu-id="15ece-257">Test backup size estimation</span></span>

<span data-ttu-id="15ece-258">É importante tooestimate Olá cópia de segurança o tamanho de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="15ece-259">Esta estimativa ajuda tooimprove desempenho ao definir o tamanho de ficheiro de cópia de segurança máximo Olá para um número de ficheiros de cópia de segurança, tooparallelism devida durante uma cópia de ficheiros.</span><span class="sxs-lookup"><span data-stu-id="15ece-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="15ece-260">(Os detalhes são explicados posteriormente neste artigo.) Um também tem de decidir se toodo um completo de cópia de segurança ou de um delta de cópia de segurança (incremental ou diferencial).</span><span class="sxs-lookup"><span data-stu-id="15ece-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="15ece-261">Felizmente, há uma instrução SQL simple que calcula o tamanho de Olá dos ficheiros de cópia de segurança de Olá: **selecione \* do M\_cópia de segurança\_tamanho\_estimativas** (consulte [ Olá estimativa espaço necessário no hello sistema de ficheiros para uma cópia de segurança de dados](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="15ece-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![saída de Olá da declaração SQL corresponde quase exatamente Olá real tamanho da cópia de segurança de dados completa de Olá no disco](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="15ece-263">Sistema de teste de Olá, saída Olá da declaração SQL corresponde quase exatamente Olá real tamanho da cópia de segurança de dados completa de Olá no disco.</span><span class="sxs-lookup"><span data-stu-id="15ece-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="15ece-264">Tamanho do ficheiro de cópia de segurança de HANA de teste</span><span class="sxs-lookup"><span data-stu-id="15ece-264">Test HANA backup file size</span></span>

![consola de cópia de segurança do Olá HANA Studio permite um tamanho de ficheiro máximo de Olá de toorestrict dos ficheiros de cópia de segurança HANA](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="15ece-266">consola de cópia de segurança do Olá HANA Studio permite um tamanho de ficheiro máximo de Olá de toorestrict dos ficheiros de cópia de segurança HANA.</span><span class="sxs-lookup"><span data-stu-id="15ece-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="15ece-267">Num ambiente de exemplo de Olá, essa funcionalidade torna possível tooget várias cópias de segurança mais pequenas ficheiros em vez de um ficheiro de cópia de segurança de 230 GB.</span><span class="sxs-lookup"><span data-stu-id="15ece-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="15ece-268">Ficheiro mais pequeno tem um impacto significativo no desempenho (consulte o artigo relacionado Olá [SAP HANA Azure Backup no nível de ficheiro](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="15ece-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="15ece-269">Resumo</span><span class="sxs-lookup"><span data-stu-id="15ece-269">Summary</span></span>

<span data-ttu-id="15ece-270">Com base nos resultados de teste de Olá Olá tabelas a seguir mostra os profissionais de TI e contras de soluções tooback segurança uma base de dados SAP HANA em execução em máquinas virtuais do Azure.</span><span class="sxs-lookup"><span data-stu-id="15ece-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="15ece-271">**Cópia de segurança sistema de ficheiros do SAP HANA toohello e copie cópia de segurança, posteriormente, ficheiros toohello final destino de cópia de segurança**</span><span class="sxs-lookup"><span data-stu-id="15ece-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="15ece-272">Solução</span><span class="sxs-lookup"><span data-stu-id="15ece-272">Solution</span></span>                                           |<span data-ttu-id="15ece-273">Profissionais de TI</span><span class="sxs-lookup"><span data-stu-id="15ece-273">Pros</span></span>                                 |<span data-ttu-id="15ece-274">Contras</span><span class="sxs-lookup"><span data-stu-id="15ece-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="15ece-275">Manter cópias de segurança HANA em discos VM</span><span class="sxs-lookup"><span data-stu-id="15ece-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="15ece-276">Sem esforços de gestão adicional</span><span class="sxs-lookup"><span data-stu-id="15ece-276">No additional management efforts</span></span>     |<span data-ttu-id="15ece-277">Eats local espaço em disco VM</span><span class="sxs-lookup"><span data-stu-id="15ece-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="15ece-278">Armazenamento de tooblob Blobxfer ferramenta toocopy ficheiros de cópia de segurança</span><span class="sxs-lookup"><span data-stu-id="15ece-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="15ece-279">Paralelismo toocopy vários ficheiros, armazenamento de BLOBs frios toouse de escolha</span><span class="sxs-lookup"><span data-stu-id="15ece-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="15ece-280">Manutenção de ferramenta adicionais e de script personalizado</span><span class="sxs-lookup"><span data-stu-id="15ece-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="15ece-281">Cópia de BLOBs através do Powershell ou a CLI</span><span class="sxs-lookup"><span data-stu-id="15ece-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="15ece-282">Nenhuma ferramenta adicional necessária, pode ser efetuada através do Azure Powershell ou a CLI</span><span class="sxs-lookup"><span data-stu-id="15ece-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="15ece-283">processo manual, o cliente tem tootake care of scripting e a gestão de blobs copiados do restauro</span><span class="sxs-lookup"><span data-stu-id="15ece-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="15ece-284">Copiar tooNFS partilha</span><span class="sxs-lookup"><span data-stu-id="15ece-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="15ece-285">Pós-processamento de ficheiros de cópia de segurança em outro VM sem impacto no servidor HANA Olá</span><span class="sxs-lookup"><span data-stu-id="15ece-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="15ece-286">Processo de cópia lenta</span><span class="sxs-lookup"><span data-stu-id="15ece-286">Slow copy process</span></span>|
|<span data-ttu-id="15ece-287">Blobxfer cópia tooAzure serviço de ficheiros</span><span class="sxs-lookup"><span data-stu-id="15ece-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="15ece-288">Não eat espaço no locais discos VM</span><span class="sxs-lookup"><span data-stu-id="15ece-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="15ece-289">Não existem direta escrever suporte por restrição de cópia de segurança, tamanho HANA da partilha de ficheiros atualmente em 5 TB</span><span class="sxs-lookup"><span data-stu-id="15ece-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="15ece-290">Agente de cópia de segurança do Azure</span><span class="sxs-lookup"><span data-stu-id="15ece-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="15ece-291">Seria solução preferencial</span><span class="sxs-lookup"><span data-stu-id="15ece-291">Would be preferred solution</span></span>         | <span data-ttu-id="15ece-292">Atualmente não está disponível no Linux</span><span class="sxs-lookup"><span data-stu-id="15ece-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="15ece-293">**Cópia de segurança SAP HANA com base nos instantâneos de armazenamento**</span><span class="sxs-lookup"><span data-stu-id="15ece-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="15ece-294">Solução</span><span class="sxs-lookup"><span data-stu-id="15ece-294">Solution</span></span>                                           |<span data-ttu-id="15ece-295">Profissionais de TI</span><span class="sxs-lookup"><span data-stu-id="15ece-295">Pros</span></span>                                 |<span data-ttu-id="15ece-296">Contras</span><span class="sxs-lookup"><span data-stu-id="15ece-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="15ece-297">Serviço de cópia de segurança do Azure</span><span class="sxs-lookup"><span data-stu-id="15ece-297">Azure Backup Service</span></span>                               | <span data-ttu-id="15ece-298">Permite a cópia de segurança VM com base nos instantâneos do blob</span><span class="sxs-lookup"><span data-stu-id="15ece-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="15ece-299">Quando não utilizar o restauro ao nível do ficheiro, necessita de criação de Olá de uma nova VM para o processo de restauro de Olá, em seguida, implica necessidade de Olá de uma nova chave de licença de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="15ece-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="15ece-300">Instantâneos do manual blob</span><span class="sxs-lookup"><span data-stu-id="15ece-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="15ece-301">Flexibilidade toocreate e restauro VM discos específicos sem alterar Olá ID exclusivo da VM</span><span class="sxs-lookup"><span data-stu-id="15ece-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="15ece-302">Todas as tarefas manuais, que tem toobe efetuada pelo cliente de Olá</span><span class="sxs-lookup"><span data-stu-id="15ece-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="15ece-303">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="15ece-303">Next steps</span></span>
* <span data-ttu-id="15ece-304">[SAP HANA Backup do Azure no nível de ficheiro](sap-hana-backup-file-level.md) descreve a opção de cópia de segurança baseada em ficheiros de Olá.</span><span class="sxs-lookup"><span data-stu-id="15ece-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="15ece-305">[Cópia de segurança de SAP HANA com base nos instantâneos de armazenamento](sap-hana-backup-storage-snapshots.md) descreve Olá baseado no instantâneo cópia de segurança opção de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="15ece-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="15ece-306">toolearn como tooestablish elevada disponibilidade e o plano de recuperação de desastres do SAP HANA no Azure (instâncias de grande), consulte [SAP HANA (instâncias de grande) elevada disponibilidade e recuperação após desastre no Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="15ece-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
