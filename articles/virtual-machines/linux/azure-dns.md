---
title: "aaaDNS opções de resolução de nome de computadores virtuais Linux no Azure"
description: "Serviços de DNS de cenários para computadores virtuais Linux no IaaS do Azure, incluindo fornecidos de resolução de nome, o servidor DNS e traga a sua própria DNS externo no híbrida."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="bebce-103">Opções de resolução de nomes DNS para computadores virtuais Linux no Azure</span><span class="sxs-lookup"><span data-stu-id="bebce-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="bebce-104">O Azure oferece resolução do nome DNS por predefinição para todas as máquinas virtuais que estão numa única rede virtual.</span><span class="sxs-lookup"><span data-stu-id="bebce-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="bebce-105">Pode implementar a sua própria solução de resolução de nome DNS ao configurar os seus próprios serviços DNS no seu máquinas virtuais que aloja do Azure.</span><span class="sxs-lookup"><span data-stu-id="bebce-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="bebce-106">Olá seguintes cenários devem ajudar a escolher Olá que funciona para a sua situação.</span><span class="sxs-lookup"><span data-stu-id="bebce-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="bebce-107">Resolução de nome fornecidos pelo Azure</span><span class="sxs-lookup"><span data-stu-id="bebce-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="bebce-108">Resolução de nomes utilizando o seu próprio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="bebce-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="bebce-109">tipo de Olá de resolução de nomes que utiliza depende de como as máquinas virtuais e instâncias de função necessitam toocommunicate entre si.</span><span class="sxs-lookup"><span data-stu-id="bebce-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="bebce-110">Olá tabela que se segue ilustra cenários e soluções de resolução de nome correspondente:</span><span class="sxs-lookup"><span data-stu-id="bebce-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="bebce-111">**Cenário**</span><span class="sxs-lookup"><span data-stu-id="bebce-111">**Scenario**</span></span> | <span data-ttu-id="bebce-112">**Solução**</span><span class="sxs-lookup"><span data-stu-id="bebce-112">**Solution**</span></span> | <span data-ttu-id="bebce-113">**Sufixo**</span><span class="sxs-lookup"><span data-stu-id="bebce-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bebce-114">Nome resolução entre instâncias de função ou máquinas virtuais no Olá mesma rede virtual</span><span class="sxs-lookup"><span data-stu-id="bebce-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="bebce-115">Resolução de nome fornecidos pelo Azure</span><span class="sxs-lookup"><span data-stu-id="bebce-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="bebce-116">nome de anfitrião ou nome de domínio completamente qualificado (FQDN)</span><span class="sxs-lookup"><span data-stu-id="bebce-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="bebce-117">Resolução de nome entre instâncias de função ou máquinas virtuais em redes virtuais diferentes</span><span class="sxs-lookup"><span data-stu-id="bebce-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="bebce-118">Gerida pelo cliente servidores DNS que reencaminham consultas entre redes virtuais para a resolução pelo Azure (proxy DNS).</span><span class="sxs-lookup"><span data-stu-id="bebce-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="bebce-119">Consulte [resolução de nomes utilizando o seu próprio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="bebce-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="bebce-120">Apenas FQDN</span><span class="sxs-lookup"><span data-stu-id="bebce-120">FQDN only</span></span> |
| <span data-ttu-id="bebce-121">Resolução de nomes de serviço de instâncias de função ou máquinas virtuais no Azure e computadores no local</span><span class="sxs-lookup"><span data-stu-id="bebce-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="bebce-122">Gerida pelo cliente servidores DNS (por exemplo, o controlador de domínio no local, controlador de domínio só de leitura local ou um DNS secundário sincronizada com êxito utilizando transferências de zona).</span><span class="sxs-lookup"><span data-stu-id="bebce-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="bebce-123">Consulte [resolução de nomes utilizando o seu próprio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="bebce-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="bebce-124">Apenas FQDN</span><span class="sxs-lookup"><span data-stu-id="bebce-124">FQDN only</span></span> |
| <span data-ttu-id="bebce-125">Resolução de nomes de anfitrião do Azure a partir de computadores no local</span><span class="sxs-lookup"><span data-stu-id="bebce-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="bebce-126">Reencaminhar consultas tooa gerida pelo cliente proxy servidor DNS na rede virtual correspondente de Olá.</span><span class="sxs-lookup"><span data-stu-id="bebce-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="bebce-127">servidor de proxy de Olá reencaminha tooAzure de consultas para a resolução.</span><span class="sxs-lookup"><span data-stu-id="bebce-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="bebce-128">Consulte [resolução de nomes utilizando o seu próprio servidor DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="bebce-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="bebce-129">Apenas FQDN</span><span class="sxs-lookup"><span data-stu-id="bebce-129">FQDN only</span></span> |
| <span data-ttu-id="bebce-130">Inversa de DNS para IPs interno</span><span class="sxs-lookup"><span data-stu-id="bebce-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="bebce-131">Resolução de nomes utilizando o seu próprio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="bebce-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="bebce-132">n/d</span><span class="sxs-lookup"><span data-stu-id="bebce-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="bebce-133">Resolução de nome fornecidos pelo Azure</span><span class="sxs-lookup"><span data-stu-id="bebce-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="bebce-134">Juntamente com a resolução de nomes DNS públicos, o Azure oferece resolução dos nomes internos para máquinas virtuais e Olá de instâncias de função que estão na mesma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="bebce-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="bebce-135">Em redes virtuais que são baseadas no Azure Resource Manager, o sufixo DNS Olá é consistente entre a rede virtual Olá; Olá FQDN não é necessária.</span><span class="sxs-lookup"><span data-stu-id="bebce-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="bebce-136">Nomes DNS podem ser atribuídos tooboth placas de interface de rede (NICs) e as máquinas virtuais.</span><span class="sxs-lookup"><span data-stu-id="bebce-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="bebce-137">Apesar de resolução de nomes de Olá fornecidos pelo Azure necessita de qualquer configuração, não é Olá adequado opção para todos os cenários de implementação, conforme visto no Olá anterior a tabela.</span><span class="sxs-lookup"><span data-stu-id="bebce-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="bebce-138">Funcionalidades e considerações</span><span class="sxs-lookup"><span data-stu-id="bebce-138">Features and considerations</span></span>
<span data-ttu-id="bebce-139">**Funcionalidades:**</span><span class="sxs-lookup"><span data-stu-id="bebce-139">**Features:**</span></span>

* <span data-ttu-id="bebce-140">Nenhuma configuração é necessária toouse resolução de nome fornecidos pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="bebce-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="bebce-141">serviço de resolução de nome Olá fornecidos pelo Azure está altamente disponível.</span><span class="sxs-lookup"><span data-stu-id="bebce-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="bebce-142">Não precisa de toocreate e gerir clusters dos seus servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="bebce-143">serviço de resolução de nome Olá fornecidos pelo Azure pode ser utilizado juntamente com o seus próprios tooresolve de servidores DNS no local e os nomes de anfitrião do Azure.</span><span class="sxs-lookup"><span data-stu-id="bebce-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="bebce-144">Resolução de nomes é fornecida entre máquinas virtuais nas redes virtuais sem necessidade de Olá FQDN.</span><span class="sxs-lookup"><span data-stu-id="bebce-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="bebce-145">Pode utilizar nomes de anfitriões que melhor descrevem as implementações em vez de trabalhar com nomes gerado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="bebce-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="bebce-146">**Considerações:**</span><span class="sxs-lookup"><span data-stu-id="bebce-146">**Considerations:**</span></span>

* <span data-ttu-id="bebce-147">Não é possível modificar o sufixo DNS Olá que o Azure cria.</span><span class="sxs-lookup"><span data-stu-id="bebce-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="bebce-148">Não é possível registar manualmente os seus próprios registos.</span><span class="sxs-lookup"><span data-stu-id="bebce-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="bebce-149">WINS e NetBIOS não são suportados.</span><span class="sxs-lookup"><span data-stu-id="bebce-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="bebce-150">Os nomes de anfitrião tem de ser compatível com o DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="bebce-151">Nomes têm de utilizar apenas 0-9, a-z, e '-', e não pode começar nem terminar com um '-'.</span><span class="sxs-lookup"><span data-stu-id="bebce-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="bebce-152">Consulte RFC 3696 secção 2.</span><span class="sxs-lookup"><span data-stu-id="bebce-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="bebce-153">O tráfego de consulta DNS está limitado para cada máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="bebce-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="bebce-154">Limitação não deve afetar a maioria das aplicações.</span><span class="sxs-lookup"><span data-stu-id="bebce-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="bebce-155">Se a limitação do pedido é observado, certifique-se de que a colocação em cache do lado do cliente está ativada.</span><span class="sxs-lookup"><span data-stu-id="bebce-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="bebce-156">Para obter mais informações, consulte [obter Olá maioria da resolução de nome fornecidos pelo Azure](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="bebce-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="bebce-157">Introdução ao hello mais da resolução de nome fornecidos pelo Azure</span><span class="sxs-lookup"><span data-stu-id="bebce-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="bebce-158">**A colocação em cache do lado do cliente:**</span><span class="sxs-lookup"><span data-stu-id="bebce-158">**Client-side caching:**</span></span>

<span data-ttu-id="bebce-159">Algumas consultas DNS não são enviadas através de rede de Olá.</span><span class="sxs-lookup"><span data-stu-id="bebce-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="bebce-160">Colocação em cache do lado do cliente ajuda a reduzir a latência e melhorar inconsistências de toonetwork resiliência ao resolver as consultas DNS periódicas a partir de uma cache local.</span><span class="sxs-lookup"><span data-stu-id="bebce-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="bebce-161">Registos DNS contêm uma Time-To-Live (TTL), que permite Olá cache toostore Olá registo desde possíveis sem afetar a actualização de registo.</span><span class="sxs-lookup"><span data-stu-id="bebce-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="bebce-162">Como resultado, a colocação em cache do lado do cliente é adequada para a maioria das situações.</span><span class="sxs-lookup"><span data-stu-id="bebce-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="bebce-163">Algumas distribuições de Linux não incluem a colocação em cache por predefinição.</span><span class="sxs-lookup"><span data-stu-id="bebce-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="bebce-164">Recomendamos que adicione uma máquina virtual do cache tooeach Linux depois de verificar a que não é uma cache local já.</span><span class="sxs-lookup"><span data-stu-id="bebce-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="bebce-165">Estão disponíveis várias DNS diferentes pacotes, tais como dnsmasq, a colocação em cache.</span><span class="sxs-lookup"><span data-stu-id="bebce-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="bebce-166">Seguem-se Olá passos tooinstall dnsmasq no distribuições mais comuns Olá:</span><span class="sxs-lookup"><span data-stu-id="bebce-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="bebce-167">**Ubuntu (utiliza resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="bebce-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="bebce-168">Instale Olá dnsmasq pacote ("sudo apt get instalação dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="bebce-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="bebce-169">**SUSE (utiliza netconf)**:</span><span class="sxs-lookup"><span data-stu-id="bebce-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="bebce-170">Instale Olá dnsmasq pacote ("sudo zypper instalação dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="bebce-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="bebce-171">Ative o serviço de dnsmasq Olá ("systemctl ativar dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="bebce-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="bebce-172">Inicie o serviço de dnsmasq Olá ("systemctl início dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="bebce-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="bebce-173">Editar "/ etc/sysconfig/rede/configuração" e alterar NETCONFIG_DNS_FORWARDER = "" demasiado "dnsmasq".</span><span class="sxs-lookup"><span data-stu-id="bebce-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="bebce-174">Atualize o resolv.conf ("netconfig update") tooset Olá cache como Olá local resolução DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="bebce-175">**CentOS pelo Software de Wave não autorizado (anteriormente OpenLogic; utiliza NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="bebce-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="bebce-176">Instale Olá dnsmasq pacote ("sudo yum instalação dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="bebce-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="bebce-177">Ative o serviço de dnsmasq Olá ("systemctl ativar dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="bebce-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="bebce-178">Inicie o serviço de dnsmasq Olá ("systemctl início dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="bebce-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="bebce-179">Adicionar "preceder nome-servidores domínio 127.0.0.1;" too"/etc/dhclient-eth0.conf".</span><span class="sxs-lookup"><span data-stu-id="bebce-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="bebce-180">Reiniciar cache Olá de tooset ("serviço rede restart") Olá rede serviço conforme Olá local resolução DNS</span><span class="sxs-lookup"><span data-stu-id="bebce-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="bebce-181">: pacote de 'dnsmasq' Olá é apenas uma das Olá DNS muitos coloca em cache que estão disponíveis para o Linux.</span><span class="sxs-lookup"><span data-stu-id="bebce-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="bebce-182">Antes de o utilizar, verifique a respetiva adequação para as suas necessidades e outro cache não está instalado.</span><span class="sxs-lookup"><span data-stu-id="bebce-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="bebce-183">**Tentativas de lado do cliente**</span><span class="sxs-lookup"><span data-stu-id="bebce-183">**Client-side retries**</span></span>

<span data-ttu-id="bebce-184">O DNS é principalmente um protocolo UDP.</span><span class="sxs-lookup"><span data-stu-id="bebce-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="bebce-185">Porque Olá protocolo UDP não garante a entrega de mensagens, Olá protocolo DNS próprio processa a lógica de repetição.</span><span class="sxs-lookup"><span data-stu-id="bebce-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="bebce-186">Cada cliente DNS (sistema operativo) pode apresentem um lógica de repetição diferentes consoante preferência do criador de Olá:</span><span class="sxs-lookup"><span data-stu-id="bebce-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="bebce-187">Sistemas operativos Windows novamente depois de um segundo e, em seguida, novamente após outro duas, quatro e outro quatro segundos.</span><span class="sxs-lookup"><span data-stu-id="bebce-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="bebce-188">Olá predefinido Linux configuração tentativas após cinco segundos.</span><span class="sxs-lookup"><span data-stu-id="bebce-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="bebce-189">Deve alterar esta tooretry cinco vezes em intervalos de um segundo.</span><span class="sxs-lookup"><span data-stu-id="bebce-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="bebce-190">toocheck Olá definições atuais numa máquina virtual Linux, 'cat /etc/resolv.conf' e observe a linha de "Opções" Olá, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="bebce-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="bebce-191">ficheiro de resolv.conf Olá é gerado automaticamente e não deve ser editado.</span><span class="sxs-lookup"><span data-stu-id="bebce-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="bebce-192">Olá passos específicos que adicionar Olá 'Opções' linha variam consoante a distribuição:</span><span class="sxs-lookup"><span data-stu-id="bebce-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="bebce-193">**Ubuntu** (utiliza resolvconf)</span><span class="sxs-lookup"><span data-stu-id="bebce-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="bebce-194">Adicionar Olá opções linha too'/etc/resolveconf/resolv.conf.d/head'.</span><span class="sxs-lookup"><span data-stu-id="bebce-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="bebce-195">Execute tooupdate 'resolvconf -u'.</span><span class="sxs-lookup"><span data-stu-id="bebce-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="bebce-196">**SUSE** (utiliza netconf)</span><span class="sxs-lookup"><span data-stu-id="bebce-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="bebce-197">Adicionar 'timeout:1 tentativas: 5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = "" parâmetro de '/ etc/sysconfig/rede/configuração'.</span><span class="sxs-lookup"><span data-stu-id="bebce-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="bebce-198">Execute tooupdate 'netconfig actualizar'.</span><span class="sxs-lookup"><span data-stu-id="bebce-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="bebce-199">**CentOS pelo Software de Wave não autorizado (anteriormente OpenLogic)** (utiliza NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="bebce-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="bebce-200">Adicionar too'/etc/NetworkManager/dispatcher.d/11-dhclient 'eco "opções timeout:1 tentativas: 5" ' '.</span><span class="sxs-lookup"><span data-stu-id="bebce-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="bebce-201">Execute tooupdate 'reinício do serviço de rede'.</span><span class="sxs-lookup"><span data-stu-id="bebce-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="bebce-202">Resolução de nomes utilizando o seu próprio servidor DNS</span><span class="sxs-lookup"><span data-stu-id="bebce-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="bebce-203">Necessidades de resolução de nome poderão ponha funcionalidades Olá fornecidos pelo Azure.</span><span class="sxs-lookup"><span data-stu-id="bebce-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="bebce-204">Por exemplo, poderá necessitar de resolução de DNS entre redes virtuais.</span><span class="sxs-lookup"><span data-stu-id="bebce-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="bebce-205">toocover neste cenário, pode utilizar os seus próprios servidores DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="bebce-206">Olá, servidores DNS no pode rede virtual DNS reencaminhar consulta toorecursive resoluções de nomes de anfitrião do Azure tooresolve que estão na mesma rede virtual.</span><span class="sxs-lookup"><span data-stu-id="bebce-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="bebce-207">Por exemplo, um servidor DNS que é executada no Azure pode responder tooDNS consultas para o seu próprio DNS ficheiros de zona e reencaminhar todos os outro tooAzure de consultas.</span><span class="sxs-lookup"><span data-stu-id="bebce-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="bebce-208">Esta funcionalidade permite toosee de máquinas virtuais tanto as suas entradas nos seus ficheiros de zona e os nomes de anfitrião que o Azure oferece (através do reencaminhador de Olá).</span><span class="sxs-lookup"><span data-stu-id="bebce-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="bebce-209">Resoluções de recursiva toohello acesso do Azure é fornecido através de IP virtual de Olá 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="bebce-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="bebce-210">Reencaminhamento de DNS também permite a resolução de DNS entre redes virtuais e permite que os nomes de anfitrião tooresolve no local do máquinas que o Azure oferece.</span><span class="sxs-lookup"><span data-stu-id="bebce-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="bebce-211">tooresolve nome de anfitrião de uma máquina virtual, máquina virtual do Olá DNS server têm de residir no Olá a mesma rede virtual e ser tooAzure de consultas de nome de anfitrião tooforward configurado.</span><span class="sxs-lookup"><span data-stu-id="bebce-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="bebce-212">Porque o sufixo DNS de Olá é diferente em cada rede virtual, pode utilizar o reencaminhamento condicional regras toosend DNS consulta toohello corrigir a rede virtual para a resolução.</span><span class="sxs-lookup"><span data-stu-id="bebce-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="bebce-213">Olá imagem seguinte mostra duas redes virtuais e uma rede no local ao executar a resolução de DNS entre redes virtuais através deste método:</span><span class="sxs-lookup"><span data-stu-id="bebce-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Resolução de DNS entre redes virtuais](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="bebce-215">Quando utilizar a resolução de nome fornecidos pelo Azure, o sufixo DNS interno do Olá é fornecido tooeach máquina através de DHCP.</span><span class="sxs-lookup"><span data-stu-id="bebce-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="bebce-216">Quando utilizar a sua própria solução de resolução de nome, este sufixo não é fornecido toovirtual máquinas porque o sufixo de Olá interfere com outras arquiteturas DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="bebce-217">toorefer toomachines pelo FQDN ou tooconfigure sufixo Olá nas suas máquinas virtuais, pode utilizar o PowerShell ou Olá sufixo de Olá toodetermine API:</span><span class="sxs-lookup"><span data-stu-id="bebce-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="bebce-218">Para as redes virtuais que são geridos pelo Gestor de recursos do Azure, está disponível através de Olá sufixo Olá [cartão de interface de rede](https://msdn.microsoft.com/library/azure/mt163668.aspx) recursos.</span><span class="sxs-lookup"><span data-stu-id="bebce-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="bebce-219">Também pode executar Olá `azure network public-ip show <resource group> <pip name>` comando toodisplay Olá detalhes sobre o IP público, que inclui Olá FQDN do Olá NIC.</span><span class="sxs-lookup"><span data-stu-id="bebce-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="bebce-220">Se o reencaminhamento de consultas tooAzure não conforme as suas necessidades, terá de tooprovide sua própria solução DNS.</span><span class="sxs-lookup"><span data-stu-id="bebce-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="bebce-221">A solução DNS tem de:</span><span class="sxs-lookup"><span data-stu-id="bebce-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="bebce-222">Fornecer a resolução de nome de anfitrião adequado, por exemplo [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="bebce-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="bebce-223">Se utilizar DDNS, poderá ser necessário a eliminação do registo DNS da toodisable.</span><span class="sxs-lookup"><span data-stu-id="bebce-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="bebce-224">Concessões DHCP do Azure são muito longos e eliminação poderá remover registos DNS prematuramente.</span><span class="sxs-lookup"><span data-stu-id="bebce-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="bebce-225">Resolução recursiva adequado resolução tooallow de nomes de domínio externo.</span><span class="sxs-lookup"><span data-stu-id="bebce-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="bebce-226">Estar acessível (TCP e UDP na porta 53) a partir de clientes de Olá serve e ser capaz de tooaccess Olá Internet.</span><span class="sxs-lookup"><span data-stu-id="bebce-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="bebce-227">Estar protegida contra o acesso a partir de Olá Internet toomitigate ameaças colocada por agentes externos.</span><span class="sxs-lookup"><span data-stu-id="bebce-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="bebce-228">Para melhor desempenho, quando utilizar máquinas virtuais em servidores de DNS do Azure, desative o IPv6 e atribuir um [IP público de nível de instância](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual máquina.</span><span class="sxs-lookup"><span data-stu-id="bebce-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>
