---
title: "aaaUse tooaccess de autenticação do Azure AD API de serviços de suporte de dados do Azure com o resto | Microsoft Docs"
description: "Saiba como tooaccess API de serviços de suporte de dados do Azure com a autenticação do Azure Active Directory utilizando REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="c6444-103">Utilização do Azure AD authentication tooaccess Olá API de serviços de suporte de dados do Azure com REST</span><span class="sxs-lookup"><span data-stu-id="c6444-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="c6444-104">equipa de Media Services do Azure Olá lançou suporte de autenticação do Azure Active Directory (Azure AD) para acesso de Media Services do Azure.</span><span class="sxs-lookup"><span data-stu-id="c6444-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="c6444-105">Anunciou também a autenticação do serviço de planos toodeprecate controlo de acesso do Azure para o acesso de Media Services.</span><span class="sxs-lookup"><span data-stu-id="c6444-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="c6444-106">Uma vez cada subscrição do Azure e cada conta de Media Services, são inquilino tooan ligado do Azure AD, o suporte de autenticação do Azure AD tem muitas vantagens de segurança.</span><span class="sxs-lookup"><span data-stu-id="c6444-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="c6444-107">Para obter detalhes sobre esta alteração e a migração (se utilizar Olá SDK .NET dos Media Services para a sua aplicação), consulte o artigo seguinte Olá blogue mensagens e os artigos:</span><span class="sxs-lookup"><span data-stu-id="c6444-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="c6444-108">Media Services do Azure announces suporte para o Azure AD e descontinuação de autenticação de controlo de acesso</span><span class="sxs-lookup"><span data-stu-id="c6444-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="c6444-109">API dos serviços de suporte de dados de Azure do acesso através da autenticação do Azure AD</span><span class="sxs-lookup"><span data-stu-id="c6444-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="c6444-110">Utilizar o Azure AD authentication tooaccess API de serviços de suporte de dados do Azure com o Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="c6444-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="c6444-111">Introdução à autenticação do Azure AD utilizando Olá portal do Azure</span><span class="sxs-lookup"><span data-stu-id="c6444-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="c6444-112">Alguns clientes necessário toodevelop as soluções de Media Services em Olá seguintes restrições:</span><span class="sxs-lookup"><span data-stu-id="c6444-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="c6444-113">Utilizam uma linguagem de programação que não é o Microsoft .NET ou c# ou ambiente de tempo de execução de Olá não é Windows.</span><span class="sxs-lookup"><span data-stu-id="c6444-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="c6444-114">Azure AD bibliotecas, tais como bibliotecas de autenticação do Active Directory não estão disponíveis para Olá linguagem de programação ou não podem ser utilizadas para o respetivo ambiente de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="c6444-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="c6444-115">Alguns clientes tem programado aplicações utilizando a REST API para autenticação de controlo de acesso e acesso de Media Services do Azure.</span><span class="sxs-lookup"><span data-stu-id="c6444-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="c6444-116">Para estes clientes, é necessário um Olá-apenas de toouse de forma REST API para a autenticação do Azure AD e aceder a subsequentes Media Services do Azure.</span><span class="sxs-lookup"><span data-stu-id="c6444-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="c6444-117">Terá de toonot baseiam-se em qualquer uma das bibliotecas de Olá do Azure AD ou Olá SDK .NET dos Media Services.</span><span class="sxs-lookup"><span data-stu-id="c6444-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="c6444-118">Neste artigo, vamos descrevem uma solução e forneça o código de exemplo para este cenário.</span><span class="sxs-lookup"><span data-stu-id="c6444-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="c6444-119">Porque o código de Olá é todas as chamadas da REST API, com nenhuma dependência em qualquer do Azure AD ou biblioteca de Media Services do Azure, código de Olá pode facilmente ser tooany traduzida outra linguagem de programação.</span><span class="sxs-lookup"><span data-stu-id="c6444-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c6444-120">Atualmente, os Media Services suportam o modelo de autenticação de serviços de controlo de acesso do Azure Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="c6444-121">No entanto, vai ser preterida a autenticação de controlo de acesso 1 de Junho de 2018.</span><span class="sxs-lookup"><span data-stu-id="c6444-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="c6444-122">Recomendamos que migre o modelo de autenticação toohello do Azure AD logo que possível.</span><span class="sxs-lookup"><span data-stu-id="c6444-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="c6444-123">Design</span><span class="sxs-lookup"><span data-stu-id="c6444-123">Design</span></span>

<span data-ttu-id="c6444-124">Neste artigo, utilizamos Olá seguir a estrutura de autenticação e autorização:</span><span class="sxs-lookup"><span data-stu-id="c6444-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="c6444-125">Protocolo de autorização: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c6444-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="c6444-126">OAuth 2.0 é uma norma de segurança de web que abrange a autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="c6444-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="c6444-127">É suportada pela Google, Microsoft, Facebook e PayPal.</span><span class="sxs-lookup"><span data-stu-id="c6444-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="c6444-128">-Foi ratified Outubro de 2012.</span><span class="sxs-lookup"><span data-stu-id="c6444-128">It was ratified October 2012.</span></span> <span data-ttu-id="c6444-129">Microsoft corretas oferece suporte a OAuth 2.0 e o OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c6444-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="c6444-130">Ambos estes padrões são suportados em vários serviços e bibliotecas de cliente, incluindo o Azure Active Directory, Open Web Interface para Katana .NET (OWIN) e bibliotecas do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c6444-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="c6444-131">Tipo de conceder: tipo de conceder de credenciais do cliente.</span><span class="sxs-lookup"><span data-stu-id="c6444-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="c6444-132">Credenciais do cliente é um dos tipos de concessão de quatro Olá OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c6444-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="c6444-133">Muitas vezes, é utilizado para acesso ao Microsoft Azure AD Graph API.</span><span class="sxs-lookup"><span data-stu-id="c6444-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="c6444-134">Modo de autenticação: principal de serviço.</span><span class="sxs-lookup"><span data-stu-id="c6444-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="c6444-135">Olá outro modo de autenticação é utilizador ou a autenticação interativa.</span><span class="sxs-lookup"><span data-stu-id="c6444-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="c6444-136">Um total de quatro aplicações ou serviços envolvidas no fluxo de autenticação e autorização Olá do Azure AD para utilizando os Media Services.</span><span class="sxs-lookup"><span data-stu-id="c6444-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="c6444-137">Serviços e aplicações de Olá e fluxo de Olá, descritas Olá a tabela seguinte:</span><span class="sxs-lookup"><span data-stu-id="c6444-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="c6444-138">Tipo de aplicação</span><span class="sxs-lookup"><span data-stu-id="c6444-138">Application type</span></span> |<span data-ttu-id="c6444-139">Aplicação</span><span class="sxs-lookup"><span data-stu-id="c6444-139">Application</span></span> |<span data-ttu-id="c6444-140">Fluxo</span><span class="sxs-lookup"><span data-stu-id="c6444-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="c6444-141">Cliente</span><span class="sxs-lookup"><span data-stu-id="c6444-141">Client</span></span> | <span data-ttu-id="c6444-142">Aplicação de cliente ou solução</span><span class="sxs-lookup"><span data-stu-id="c6444-142">Customer app or solution</span></span> | <span data-ttu-id="c6444-143">Esta aplicação (na realidade, o proxy) está registada no inquilino do Azure AD Olá no qual Olá Media Services do Azure de subscrição e Olá residem conta de serviço.</span><span class="sxs-lookup"><span data-stu-id="c6444-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="c6444-144">Olá principal de serviço da aplicação Olá registado é, em seguida, concedida a função de proprietário ou contribuinte na Olá controlo de acesso (IAM) da conta de serviço de suporte de dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="c6444-145">o principal de serviço Olá é representado por Olá app ID de cliente e o segredo do cliente.</span><span class="sxs-lookup"><span data-stu-id="c6444-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="c6444-146">Fornecedor de identidade (IDP)</span><span class="sxs-lookup"><span data-stu-id="c6444-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="c6444-147">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="c6444-147">Azure AD as IDP</span></span> | <span data-ttu-id="c6444-148">principal de serviço de aplicação registada Olá (ID de cliente e segredo do cliente) é autenticado pelo Azure AD como Olá IDP.</span><span class="sxs-lookup"><span data-stu-id="c6444-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="c6444-149">Esta autenticação é efetuada internamente e implicitamente.</span><span class="sxs-lookup"><span data-stu-id="c6444-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="c6444-150">Como no fluxo de credenciais do cliente, o cliente de Olá está autenticado em vez de utilizador de Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="c6444-151">Proteger o serviço de Token (STS) / servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="c6444-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="c6444-152">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="c6444-152">Azure AD as STS</span></span> | <span data-ttu-id="c6444-153">Após a autenticação por Olá IDP (ou servidor de OAuth em termos de OAuth 2.0), um token de acesso ou um Token Web JSON (JWT) é emitido pelo Azure AD como servidor de STS/OAuth para o recurso de camada média do acesso toohello: no nosso caso, Olá ponto final de API de REST dos serviços de suporte de dados.</span><span class="sxs-lookup"><span data-stu-id="c6444-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="c6444-154">Recurso</span><span class="sxs-lookup"><span data-stu-id="c6444-154">Resource</span></span> | <span data-ttu-id="c6444-155">API REST dos Serviços de Multimédia</span><span class="sxs-lookup"><span data-stu-id="c6444-155">Media Services REST API</span></span> | <span data-ttu-id="c6444-156">Cada chamada de API de REST dos serviços de suporte de dados está autorizada por um token de acesso que é emitido pelo Azure AD como STS ou servidor de OAuth Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="c6444-157">Se executar o código de exemplo de Olá e capturar um JWT ou um token de acesso, Olá JWT tem Olá seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="c6444-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="c6444-158">Seguem-se os mapeamentos de Olá entre atributos Olá Olá JWT e Olá quatro aplicações ou serviços na Olá anterior a tabela:</span><span class="sxs-lookup"><span data-stu-id="c6444-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="c6444-159">Tipo de aplicação</span><span class="sxs-lookup"><span data-stu-id="c6444-159">Application type</span></span> |<span data-ttu-id="c6444-160">Aplicação</span><span class="sxs-lookup"><span data-stu-id="c6444-160">Application</span></span> |<span data-ttu-id="c6444-161">Atributo JWT</span><span class="sxs-lookup"><span data-stu-id="c6444-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="c6444-162">Cliente</span><span class="sxs-lookup"><span data-stu-id="c6444-162">Client</span></span> |<span data-ttu-id="c6444-163">Aplicação de cliente ou solução</span><span class="sxs-lookup"><span data-stu-id="c6444-163">Customer app or solution</span></span> |<span data-ttu-id="c6444-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="c6444-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="c6444-165">ID de cliente Olá de uma aplicação irá registar tooAzure AD na secção seguinte, Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="c6444-166">Fornecedor de identidade (IDP)</span><span class="sxs-lookup"><span data-stu-id="c6444-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="c6444-167">Azure AD como IDP</span><span class="sxs-lookup"><span data-stu-id="c6444-167">Azure AD as IDP</span></span> |<span data-ttu-id="c6444-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="c6444-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="c6444-169">Olá GUID é inquilino de ID do Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="c6444-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="c6444-170">Cada inquilino tem um ID próprio, exclusivo.</span><span class="sxs-lookup"><span data-stu-id="c6444-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="c6444-171">Proteger o serviço de Token (STS) / servidor OAuth</span><span class="sxs-lookup"><span data-stu-id="c6444-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="c6444-172">Azure AD como STS</span><span class="sxs-lookup"><span data-stu-id="c6444-172">Azure AD as STS</span></span> | <span data-ttu-id="c6444-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="c6444-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="c6444-174">Olá GUID é inquilino de ID do Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="c6444-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="c6444-175">Recurso</span><span class="sxs-lookup"><span data-stu-id="c6444-175">Resource</span></span> | <span data-ttu-id="c6444-176">API REST dos Serviços de Multimédia</span><span class="sxs-lookup"><span data-stu-id="c6444-176">Media Services REST API</span></span> |<span data-ttu-id="c6444-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="c6444-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="c6444-178">destinatário Olá ou o público-alvo de token de acesso de Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="c6444-179">Passos de configuração</span><span class="sxs-lookup"><span data-stu-id="c6444-179">Steps for setup</span></span>

<span data-ttu-id="c6444-180">tooregister e configurar uma aplicação do Azure AD para autenticação do Azure AD e tooobtain um token de acesso para chamar o ponto final de API de REST dos serviços de suporte de dados do Azure Olá, Olá concluir os seguintes passos:</span><span class="sxs-lookup"><span data-stu-id="c6444-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="c6444-181">No Olá [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885), registar um inquilino de toohello do Azure AD de aplicação (por exemplo, wzmediaservice) do Azure AD (por exemplo, microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="c6444-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="c6444-182">Não interessa se registado como aplicação web ou aplicação nativa.</span><span class="sxs-lookup"><span data-stu-id="c6444-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="c6444-183">Além disso, pode escolher qualquer URL de início de sessão e o URL de resposta (por exemplo, http://wzmediaservice.com para ambos).</span><span class="sxs-lookup"><span data-stu-id="c6444-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="c6444-184">No Olá [portal clássico do Azure](http://go.microsoft.com/fwlink/?LinkID=213885), aceda a toohello **configurar** separador da sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="c6444-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="c6444-185">Olá nota **ID de cliente**.</span><span class="sxs-lookup"><span data-stu-id="c6444-185">Note hello **client ID**.</span></span> <span data-ttu-id="c6444-186">Em seguida, em **chaves**, gerar uma **chave cliente** (segredo do cliente).</span><span class="sxs-lookup"><span data-stu-id="c6444-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="c6444-187">Tome nota do segredo do cliente Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-187">Take note of hello client secret.</span></span> <span data-ttu-id="c6444-188">Este não será apresentado novamente.</span><span class="sxs-lookup"><span data-stu-id="c6444-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="c6444-189">No Olá [portal do Azure](http://ms.portal.azure.com), aceda a conta de Media Services toohello.</span><span class="sxs-lookup"><span data-stu-id="c6444-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="c6444-190">Selecione Olá **controlo de acesso** painel (IAM).</span><span class="sxs-lookup"><span data-stu-id="c6444-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="c6444-191">Adicione um novo membro que tem Olá proprietário ou função de contribuinte Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="c6444-192">Para o principal de Olá, procure o nome da aplicação Olá que registou no passo 1 (neste exemplo, wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="c6444-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="c6444-193">Informações toocollect</span><span class="sxs-lookup"><span data-stu-id="c6444-193">Info toocollect</span></span>

<span data-ttu-id="c6444-194">tooprepare REST codificação, recolher Olá tooinclude de pontos de dados no código Olá os seguintes:</span><span class="sxs-lookup"><span data-stu-id="c6444-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="c6444-195">Azure AD como um ponto final STS: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="c6444-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="c6444-196">Deste ponto final, é pedido um token de acesso JWT.</span><span class="sxs-lookup"><span data-stu-id="c6444-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="c6444-197">Além disso tooserving como um IDP, do Azure AD também serve como um STS.</span><span class="sxs-lookup"><span data-stu-id="c6444-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="c6444-198">O Azure AD emite um JWT para acesso a recursos (um token de acesso).</span><span class="sxs-lookup"><span data-stu-id="c6444-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="c6444-199">Um token JWT tem várias afirmações.</span><span class="sxs-lookup"><span data-stu-id="c6444-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="c6444-200">API de REST do suporte de dados dos serviços do Azure como recursos ou o público-alvo: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="c6444-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="c6444-201">ID de cliente: Ver passo 2 [passos para a configuração](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="c6444-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="c6444-202">Segredo do cliente: ver passo 2 [passos para a configuração](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="c6444-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="c6444-203">Os serviços de suporte de dados de conta de ponto final de REST API no Olá seguinte formato:</span><span class="sxs-lookup"><span data-stu-id="c6444-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="c6444-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="c6444-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="c6444-205">Este é o ponto final de Olá com que todas as API de REST de serviços de suporte de dados são efetuadas chamadas na sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="c6444-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="c6444-206">Por exemplo, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="c6444-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="c6444-207">Em seguida, pode colocar estes cinco parâmetros no seu ficheiro Web. config ou o App. config, toouse no seu código.</span><span class="sxs-lookup"><span data-stu-id="c6444-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="c6444-208">Código de exemplo</span><span class="sxs-lookup"><span data-stu-id="c6444-208">Sample code</span></span>

<span data-ttu-id="c6444-209">Pode encontrar o código de exemplo de Olá no [do Azure AD Authentication para acesso de serviços de suporte de dados do Azure: ambos através da REST API](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="c6444-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="c6444-210">código de exemplo de Olá tem duas partes:</span><span class="sxs-lookup"><span data-stu-id="c6444-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="c6444-211">Um projeto de biblioteca DLL, que tem todo Olá REST API o código de autorização e autenticação do Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c6444-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="c6444-212">Também tem um método para efetuar a REST API chamadas toohello API de REST dos serviços de suporte de dados ponto final, com o token de acesso de Olá.</span><span class="sxs-lookup"><span data-stu-id="c6444-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="c6444-213">Um cliente de teste da consola, que inicia a autenticação do Azure AD e chama a API de REST de serviços de suporte de dados diferentes.</span><span class="sxs-lookup"><span data-stu-id="c6444-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="c6444-214">projeto de exemplo de Olá tem três funcionalidades:</span><span class="sxs-lookup"><span data-stu-id="c6444-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="c6444-215">Azure AD as autenticações através de credenciais do cliente Olá conceder ao utilizar apenas Olá REST API.</span><span class="sxs-lookup"><span data-stu-id="c6444-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="c6444-216">Acesso de Media Services do Azure utilizando apenas Olá REST API.</span><span class="sxs-lookup"><span data-stu-id="c6444-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="c6444-217">Acesso de armazenamento do Azure utilizando Olá apenas a REST API (como toocreate utilizada uma conta de Media Services, utilizando a REST API).</span><span class="sxs-lookup"><span data-stu-id="c6444-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="c6444-218">Onde está o token de atualização de Olá?</span><span class="sxs-lookup"><span data-stu-id="c6444-218">Where is hello refresh token?</span></span>

<span data-ttu-id="c6444-219">Poderão pedir-lhe algumas leitores: onde está o token de atualização de Olá?</span><span class="sxs-lookup"><span data-stu-id="c6444-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="c6444-220">Por que motivo não utilizar um token de atualização aqui?</span><span class="sxs-lookup"><span data-stu-id="c6444-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="c6444-221">objetivo Olá um token de atualização não é toorefresh um token de acesso.</span><span class="sxs-lookup"><span data-stu-id="c6444-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="c6444-222">Em vez disso, é concebida toobypass intervenção do utilizador ou de autenticação de utilizador final e receber um token de acesso válido quando expira um token de anterior.</span><span class="sxs-lookup"><span data-stu-id="c6444-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="c6444-223">Um nome melhor para um token de atualização poderá ser algo como "Ignorar re-sessão-no token de utilizador do".</span><span class="sxs-lookup"><span data-stu-id="c6444-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="c6444-224">Se utilizar Olá fluxo (nome de utilizador e palavra-passe, agir em nome de um utilizador) de concessão de autorização do OAuth 2.0, um token de atualização ajuda a obter um acesso renovado token sem pedir intervenção do utilizador.</span><span class="sxs-lookup"><span data-stu-id="c6444-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="c6444-225">No entanto, para Olá OAuth 2.0 fluxo dita neste artigo de concessão de credenciais do cliente, o cliente de Olá funciona no seu próprio nome.</span><span class="sxs-lookup"><span data-stu-id="c6444-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="c6444-226">Não precisa de intervenção do utilizador de todo, e servidor de autorização de Olá não necessita de demasiado (e não serão) dão-lhe um token de atualização.</span><span class="sxs-lookup"><span data-stu-id="c6444-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="c6444-227">Se a depuração Olá **GetUrlEncodedJWT** método, tenha em atenção que a resposta de Olá do ponto final de tokens Olá tem um token de acesso, mas nenhum token de atualização.</span><span class="sxs-lookup"><span data-stu-id="c6444-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c6444-228">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="c6444-228">Next steps</span></span>

<span data-ttu-id="c6444-229">Introdução ao [carregar ficheiros tooyour conta](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="c6444-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
