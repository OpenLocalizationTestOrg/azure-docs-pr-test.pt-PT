---
title: "os registos de aaaIIS na análise de registos | Microsoft Docs"
description: "Serviços de informação Internet (IIS) armazena atividade do utilizador nos ficheiros de registo que podem ser recolhidos através da análise de registos.  Este artigo descreve como tooconfigure coleção de registos IIS e os detalhes de registos de Olá criarem no repositório do Olá OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: cec5ff0a-01f5-4262-b2e8-e3db7b7467d2
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: bwren
ms.openlocfilehash: c5575351090cdabaf651bcb49867794ee3a4b6e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="iis-logs-in-log-analytics"></a><span data-ttu-id="0f8d4-104">Registo do IIS na análise de registos</span><span class="sxs-lookup"><span data-stu-id="0f8d4-104">IIS logs in Log Analytics</span></span>
<span data-ttu-id="0f8d4-105">Serviços de informação Internet (IIS) armazena atividade do utilizador nos ficheiros de registo que podem ser recolhidos através da análise de registos.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-105">Internet Information Services (IIS) stores user activity in log files that can be collected by Log Analytics.</span></span>  

![Registos do IIS](media/log-analytics-data-sources-iis-logs/overview.png)

## <a name="configuring-iis-logs"></a><span data-ttu-id="0f8d4-107">Configurar o IIS regista</span><span class="sxs-lookup"><span data-stu-id="0f8d4-107">Configuring IIS logs</span></span>
<span data-ttu-id="0f8d4-108">Análise de registos recolhe as entradas de ficheiros de registo criados pelo IIS, por isso, tem de [configurar o IIS para o registo](https://technet.microsoft.com/library/hh831775.aspx).</span><span class="sxs-lookup"><span data-stu-id="0f8d4-108">Log Analytics collects entries from log files created by IIS, so you must [configure IIS for logging](https://technet.microsoft.com/library/hh831775.aspx).</span></span>

<span data-ttu-id="0f8d4-109">Análise de registos só suporta ficheiros de registo do IIS armazenados num formato de W3C e não suporta campos personalizados ou avançados registo do IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-109">Log Analytics only supports IIS log files stored in W3C format and does not support custom fields or IIS Advanced Logging.</span></span>  
<span data-ttu-id="0f8d4-110">Análise de registos não recolhe registos no formato nativo NCSA nem o IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-110">Log Analytics does not collect logs in NCSA or IIS native format.</span></span>

<span data-ttu-id="0f8d4-111">Configurar os registos do IIS na análise de registos de Olá [menu dados nas definições de análise do registo](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="0f8d4-111">Configure IIS logs in Log Analytics from hello [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>  <span data-ttu-id="0f8d4-112">Não há nenhuma configuração necessária à seleção **ficheiros de registo de W3C recolher formato IIS**.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-112">There is no configuration required other than selecting **Collect W3C format IIS log files**.</span></span>

<span data-ttu-id="0f8d4-113">Recomendamos que quando ativar a recolha de registos do IIS, deve configurar definição de rollover de registo IIS Olá em cada servidor.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-113">We recommend that when you enable IIS log collection, you should configure hello IIS log rollover setting on each server.</span></span>

## <a name="data-collection"></a><span data-ttu-id="0f8d4-114">Recolha de dados</span><span class="sxs-lookup"><span data-stu-id="0f8d4-114">Data collection</span></span>
<span data-ttu-id="0f8d4-115">Análise de registos recolhe entradas de registo do IIS de cada origem ligada aproximadamente a cada 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-115">Log Analytics collects IIS log entries from each connected source approximately every 15 minutes.</span></span>  <span data-ttu-id="0f8d4-116">agente de Olá regista seu lugar em cada registo de eventos que recolhe a partir de.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-116">hello agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="0f8d4-117">Se o agente de Olá ficar offline, em seguida, análise de registos recolhe os eventos de onde pela última vez foi deixada, mesmo que esses eventos foram criados ao agente Olá foi offline.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-117">If hello agent goes offline, then Log Analytics collects events from where it last left off, even if those events were created while hello agent was offline.</span></span>

## <a name="iis-log-record-properties"></a><span data-ttu-id="0f8d4-118">Propriedades de registo de registo do IIS</span><span class="sxs-lookup"><span data-stu-id="0f8d4-118">IIS log record properties</span></span>
<span data-ttu-id="0f8d4-119">Registos do IIS tem um tipo de **W3CIISLog** e ter propriedades de Olá Olá a tabela seguinte:</span><span class="sxs-lookup"><span data-stu-id="0f8d4-119">IIS log records have a type of **W3CIISLog** and have hello properties in hello following table:</span></span>

| <span data-ttu-id="0f8d4-120">Propriedade</span><span class="sxs-lookup"><span data-stu-id="0f8d4-120">Property</span></span> | <span data-ttu-id="0f8d4-121">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f8d4-121">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0f8d4-122">Computador</span><span class="sxs-lookup"><span data-stu-id="0f8d4-122">Computer</span></span> |<span data-ttu-id="0f8d4-123">Nome do computador de Olá que Olá evento foi recolhido a partir de.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-123">Name of hello computer that hello event was collected from.</span></span> |
| <span data-ttu-id="0f8d4-124">cIP</span><span class="sxs-lookup"><span data-stu-id="0f8d4-124">cIP</span></span> |<span data-ttu-id="0f8d4-125">Endereço IP do cliente de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-125">IP address of hello client.</span></span> |
| <span data-ttu-id="0f8d4-126">csMethod</span><span class="sxs-lookup"><span data-stu-id="0f8d4-126">csMethod</span></span> |<span data-ttu-id="0f8d4-127">Método de pedido de Olá, tal como GET ou POST.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-127">Method of hello request such as GET or POST.</span></span> |
| <span data-ttu-id="0f8d4-128">csReferer</span><span class="sxs-lookup"><span data-stu-id="0f8d4-128">csReferer</span></span> |<span data-ttu-id="0f8d4-129">Site que Olá utilizador abriu uma hiperligação toohello site atual.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-129">Site that hello user followed a link from toohello current site.</span></span> |
| <span data-ttu-id="0f8d4-130">csUserAgent</span><span class="sxs-lookup"><span data-stu-id="0f8d4-130">csUserAgent</span></span> |<span data-ttu-id="0f8d4-131">Tipo de browser do cliente de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-131">Browser type of hello client.</span></span> |
| <span data-ttu-id="0f8d4-132">csUserName</span><span class="sxs-lookup"><span data-stu-id="0f8d4-132">csUserName</span></span> |<span data-ttu-id="0f8d4-133">Nome do Olá autenticar o utilizador aceder ao servidor de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-133">Name of hello authenticated user that accessed hello server.</span></span> <span data-ttu-id="0f8d4-134">Utilizadores anónimos são indicados por um hífen.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-134">Anonymous users are indicated by a hyphen.</span></span> |
| <span data-ttu-id="0f8d4-135">csUriStem</span><span class="sxs-lookup"><span data-stu-id="0f8d4-135">csUriStem</span></span> |<span data-ttu-id="0f8d4-136">Destino do pedido de Olá, tal como uma página web.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-136">Target of hello request such as a web page.</span></span> |
| <span data-ttu-id="0f8d4-137">csUriQuery</span><span class="sxs-lookup"><span data-stu-id="0f8d4-137">csUriQuery</span></span> |<span data-ttu-id="0f8d4-138">Consulta, se existirem, esse cliente Olá foi tentar tooperform.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-138">Query, if any, that hello client was trying tooperform.</span></span> |
| <span data-ttu-id="0f8d4-139">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="0f8d4-139">ManagementGroupName</span></span> |<span data-ttu-id="0f8d4-140">Nome do grupo de gestão de Olá para agentes do Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-140">Name of hello management group for Operations Manager agents.</span></span>  <span data-ttu-id="0f8d4-141">Para outros agentes, o que é AOI -\<ID da área de trabalho\></span><span class="sxs-lookup"><span data-stu-id="0f8d4-141">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="0f8d4-142">RemoteIPCountry</span><span class="sxs-lookup"><span data-stu-id="0f8d4-142">RemoteIPCountry</span></span> |<span data-ttu-id="0f8d4-143">País do endereço IP de hello do cliente de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-143">Country of hello IP address of hello client.</span></span> |
| <span data-ttu-id="0f8d4-144">RemoteIPLatitude</span><span class="sxs-lookup"><span data-stu-id="0f8d4-144">RemoteIPLatitude</span></span> |<span data-ttu-id="0f8d4-145">Latitude do endereço IP do cliente Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-145">Latitude of hello client IP address.</span></span> |
| <span data-ttu-id="0f8d4-146">RemoteIPLongitude</span><span class="sxs-lookup"><span data-stu-id="0f8d4-146">RemoteIPLongitude</span></span> |<span data-ttu-id="0f8d4-147">Longitude do endereço IP do cliente Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-147">Longitude of hello client IP address.</span></span> |
| <span data-ttu-id="0f8d4-148">scStatus</span><span class="sxs-lookup"><span data-stu-id="0f8d4-148">scStatus</span></span> |<span data-ttu-id="0f8d4-149">Código de estado HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-149">HTTP status code.</span></span> |
| <span data-ttu-id="0f8d4-150">scSubStatus</span><span class="sxs-lookup"><span data-stu-id="0f8d4-150">scSubStatus</span></span> |<span data-ttu-id="0f8d4-151">Código de erro de subestado.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-151">Substatus error code.</span></span> |
| <span data-ttu-id="0f8d4-152">scWin32Status</span><span class="sxs-lookup"><span data-stu-id="0f8d4-152">scWin32Status</span></span> |<span data-ttu-id="0f8d4-153">Código de estado do Windows.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-153">Windows status code.</span></span> |
| <span data-ttu-id="0f8d4-154">sIP</span><span class="sxs-lookup"><span data-stu-id="0f8d4-154">sIP</span></span> |<span data-ttu-id="0f8d4-155">Endereço IP do servidor de web de Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-155">IP address of hello web server.</span></span> |
| <span data-ttu-id="0f8d4-156">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="0f8d4-156">SourceSystem</span></span> |<span data-ttu-id="0f8d4-157">OpsMgr</span><span class="sxs-lookup"><span data-stu-id="0f8d4-157">OpsMgr</span></span> |
| <span data-ttu-id="0f8d4-158">Porta</span><span class="sxs-lookup"><span data-stu-id="0f8d4-158">sPort</span></span> |<span data-ttu-id="0f8d4-159">Porta do cliente de hello do servidor de Olá ligada a.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-159">Port on hello server hello client connected to.</span></span> |
| <span data-ttu-id="0f8d4-160">sSiteName</span><span class="sxs-lookup"><span data-stu-id="0f8d4-160">sSiteName</span></span> |<span data-ttu-id="0f8d4-161">Nome do site do IIS Olá.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-161">Name of hello IIS site.</span></span> |
| <span data-ttu-id="0f8d4-162">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="0f8d4-162">TimeGenerated</span></span> |<span data-ttu-id="0f8d4-163">Data e hora de entrada de Olá foi registada.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-163">Date and time hello entry was logged.</span></span> |
| <span data-ttu-id="0f8d4-164">timeTaken</span><span class="sxs-lookup"><span data-stu-id="0f8d4-164">TimeTaken</span></span> |<span data-ttu-id="0f8d4-165">Solicitar comprimento de Olá tooprocess de tempo em milissegundos.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-165">Length of time tooprocess hello request in milliseconds.</span></span> |

## <a name="log-searches-with-iis-logs"></a><span data-ttu-id="0f8d4-166">Registo de pesquisas com registos IIS</span><span class="sxs-lookup"><span data-stu-id="0f8d4-166">Log searches with IIS logs</span></span>
<span data-ttu-id="0f8d4-167">Olá tabela seguinte fornece exemplos diferentes de consultas de registo que obter registos IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-167">hello following table provides different examples of log queries that retrieve IIS log records.</span></span>

| <span data-ttu-id="0f8d4-168">Consulta</span><span class="sxs-lookup"><span data-stu-id="0f8d4-168">Query</span></span> | <span data-ttu-id="0f8d4-169">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f8d4-169">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0f8d4-170">Tipo = W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="0f8d4-170">Type=W3CIISLog</span></span> |<span data-ttu-id="0f8d4-171">Todos os registos de registo do IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-171">All IIS log records.</span></span> |
| <span data-ttu-id="0f8d4-172">Tipo = W3CIISLog scStatus = 500</span><span class="sxs-lookup"><span data-stu-id="0f8d4-172">Type=W3CIISLog scStatus=500</span></span> |<span data-ttu-id="0f8d4-173">Todos os registos de registo IIS com o estado devolvido 500.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-173">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="0f8d4-174">Tipo = W3CIISLog &#124; Medida existente pelo cIP</span><span class="sxs-lookup"><span data-stu-id="0f8d4-174">Type=W3CIISLog &#124; Measure count() by cIP</span></span> |<span data-ttu-id="0f8d4-175">Contagem dos IIS entradas de registo por endereço IP do cliente.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-175">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="0f8d4-176">Tipo = W3CIISLog csHost = "www.contoso.com" &#124; Medida existente pelo csUriStem</span><span class="sxs-lookup"><span data-stu-id="0f8d4-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span></span> |<span data-ttu-id="0f8d4-177">Entradas pelo URL para Olá anfitrião www.contoso.com de registo de contagem de IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-177">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="0f8d4-178">Tipo = W3CIISLog &#124; Medidas Sum(csBytes) pelo computador &#124; parte superior 500000</span><span class="sxs-lookup"><span data-stu-id="0f8d4-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span></span> |<span data-ttu-id="0f8d4-179">Total de bytes recebidos por cada computador do IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-179">Total bytes received by each IIS computer.</span></span> |

>[!NOTE]
> <span data-ttu-id="0f8d4-180">Se a sua área de trabalho tiver sido atualizado toohello [idioma de consulta de análise de registos nova](log-analytics-log-search-upgrade.md), em seguida, Olá acima consultas alteraria toohello seguinte.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-180">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above queries would change toohello following.</span></span>

> | <span data-ttu-id="0f8d4-181">Consulta</span><span class="sxs-lookup"><span data-stu-id="0f8d4-181">Query</span></span> | <span data-ttu-id="0f8d4-182">Descrição</span><span class="sxs-lookup"><span data-stu-id="0f8d4-182">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0f8d4-183">W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="0f8d4-183">W3CIISLog</span></span> |<span data-ttu-id="0f8d4-184">Todos os registos de registo do IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-184">All IIS log records.</span></span> |
| <span data-ttu-id="0f8d4-185">W3CIISLog &#124; onde scStatus = = 500</span><span class="sxs-lookup"><span data-stu-id="0f8d4-185">W3CIISLog &#124; where scStatus==500</span></span> |<span data-ttu-id="0f8d4-186">Todos os registos de registo IIS com o estado devolvido 500.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-186">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="0f8d4-187">W3CIISLog &#124; resumir existente pelo cIP</span><span class="sxs-lookup"><span data-stu-id="0f8d4-187">W3CIISLog &#124; summarize count() by cIP</span></span> |<span data-ttu-id="0f8d4-188">Contagem dos IIS entradas de registo por endereço IP do cliente.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-188">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="0f8d4-189">W3CIISLog &#124; onde csHost = = "www.contoso.com" &#124; resumir existente pelo csUriStem</span><span class="sxs-lookup"><span data-stu-id="0f8d4-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span></span> |<span data-ttu-id="0f8d4-190">Entradas pelo URL para Olá anfitrião www.contoso.com de registo de contagem de IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-190">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="0f8d4-191">W3CIISLog &#124; resumir sum(csBytes) pelo computador &#124; tirar 500000</span><span class="sxs-lookup"><span data-stu-id="0f8d4-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span></span> |<span data-ttu-id="0f8d4-192">Total de bytes recebidos por cada computador do IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-192">Total bytes received by each IIS computer.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="0f8d4-193">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="0f8d4-193">Next steps</span></span>
* <span data-ttu-id="0f8d4-194">Configurar a análise de registos toocollect outros [origens de dados](log-analytics-data-sources.md) para análise.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-194">Configure Log Analytics toocollect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="0f8d4-195">Saiba mais sobre [pesquisas de registo](log-analytics-log-searches.md) dados de Olá tooanalyze recolhidos a partir de origens de dados e soluções.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-195">Learn about [log searches](log-analytics-log-searches.md) tooanalyze hello data collected from data sources and solutions.</span></span>
* <span data-ttu-id="0f8d4-196">Configure alertas no Log Analytics tooproactively notificá-lo de condições importantes encontradas nos registos IIS.</span><span class="sxs-lookup"><span data-stu-id="0f8d4-196">Configure alerts in Log Analytics tooproactively notify you of important conditions found in IIS logs.</span></span>
