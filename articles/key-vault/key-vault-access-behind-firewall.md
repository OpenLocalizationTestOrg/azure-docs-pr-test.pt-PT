---
title: "aaaAccess Cofre de chaves atrás de uma firewall | Microsoft Docs"
description: "Saiba como tooaccess chave do Azure do cofre a partir de uma aplicação atrás de uma firewall"
services: key-vault
documentationcenter: 
author: amitbapat
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 50d21774-2ee1-4212-8995-570c9de603c5
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 01/07/2017
ms.author: ambapat
ms.openlocfilehash: ab4bb0c27a41fef878a20dace6cab203df04e579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="access-azure-key-vault-behind-a-firewall"></a><span data-ttu-id="9d751-103">Aceder ao Cofre de Chaves do Azure protegido por firewall</span><span class="sxs-lookup"><span data-stu-id="9d751-103">Access Azure Key Vault behind a firewall</span></span>
### <a name="q-my-key-vault-client-application-needs-toobe-behind-a-firewall-what-ports-hosts-or-ip-addresses-should-i-open-tooenable-access-tooa-key-vault"></a><span data-ttu-id="9d751-104">P: a minha aplicação de cliente do Cofre de chaves tem toobe atrás de uma firewall.</span><span class="sxs-lookup"><span data-stu-id="9d751-104">Q: My key vault client application needs toobe behind a firewall.</span></span> <span data-ttu-id="9d751-105">As portas, anfitriões ou IP endereços deve abro Cofre de chaves tooenable acesso tooa?</span><span class="sxs-lookup"><span data-stu-id="9d751-105">What ports, hosts, or IP addresses should I open tooenable access tooa key vault?</span></span>
<span data-ttu-id="9d751-106">tooaccess um cofre de chaves, a aplicação de cliente do Cofre de chaves tem tooaccess vários pontos finais para várias funcionalidades:</span><span class="sxs-lookup"><span data-stu-id="9d751-106">tooaccess a key vault, your key vault client application has tooaccess multiple endpoints for various functionalities:</span></span>

* <span data-ttu-id="9d751-107">Autenticação através do Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="9d751-107">Authentication via Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="9d751-108">Gestão do Cofre de Chaves do Azure.</span><span class="sxs-lookup"><span data-stu-id="9d751-108">Management of Azure Key Vault.</span></span> <span data-ttu-id="9d751-109">Isto inclui criar, ler, atualizar, eliminar e definir políticas de acesso através do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="9d751-109">This includes creating, reading, updating, deleting, and setting access policies through Azure Resource Manager.</span></span>
* <span data-ttu-id="9d751-110">Aceder e gerir objetos (chaves e segredos) armazenados no Cofre de chaves em si, passar Olá endpoint específicos de Cofre de chave (por exemplo, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span><span class="sxs-lookup"><span data-stu-id="9d751-110">Accessing and managing objects (keys and secrets) stored in Key Vault itself, going through hello Key Vault-specific endpoint (for example, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span></span>  

<span data-ttu-id="9d751-111">Dependendo da configuração e do ambiente, existem algumas variações.</span><span class="sxs-lookup"><span data-stu-id="9d751-111">Depending on your configuration and environment, there are some variations.</span></span>   

## <a name="ports"></a><span data-ttu-id="9d751-112">Portas</span><span class="sxs-lookup"><span data-stu-id="9d751-112">Ports</span></span>
<span data-ttu-id="9d751-113">Todos os tráfego tooa Cofre de chaves para todos os três funções (autenticação, gestão e dados acesso plane) passa através de HTTPS: porta 443.</span><span class="sxs-lookup"><span data-stu-id="9d751-113">All traffic tooa key vault for all three functions (authentication, management, and data plane access) goes over HTTPS: port 443.</span></span> <span data-ttu-id="9d751-114">No entanto, existirá ocasionalmente tráfego HTTP (porta 80) para CRL.</span><span class="sxs-lookup"><span data-stu-id="9d751-114">However, there will occasionally be HTTP (port 80) traffic for CRL.</span></span> <span data-ttu-id="9d751-115">Os clientes que suportem OCSP, não devem atingir o CRL, mas, ocasionalmente, poderão alcançar [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span><span class="sxs-lookup"><span data-stu-id="9d751-115">Clients that support OCSP shouldn't reach CRL, but may occasionally reach [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span></span>  

## <a name="authentication"></a><span data-ttu-id="9d751-116">Autenticação</span><span class="sxs-lookup"><span data-stu-id="9d751-116">Authentication</span></span>
<span data-ttu-id="9d751-117">Aplicações de cliente do Cofre de chaves serão necessário tooaccess pontos finais do Azure Active Directory para autenticação.</span><span class="sxs-lookup"><span data-stu-id="9d751-117">Key vault client applications will need tooaccess Azure Active Directory endpoints for authentication.</span></span> <span data-ttu-id="9d751-118">ponto final de Olá utilizado depende Olá configuração de inquilinos do Azure AD, o tipo de Olá de principal (principal de utilizador ou principal de serviço) e Olá tipo de conta – por exemplo, uma conta Microsoft ou de um trabalho conta escolar ou profissional.</span><span class="sxs-lookup"><span data-stu-id="9d751-118">hello endpoint used depends on hello Azure AD tenant configuration, hello type of principal (user principal or service principal), and hello type of account--for example, a Microsoft account or a work or school account.</span></span>  

| <span data-ttu-id="9d751-119">Tipo de principal</span><span class="sxs-lookup"><span data-stu-id="9d751-119">Principal type</span></span> | <span data-ttu-id="9d751-120">Ponto final:porta</span><span class="sxs-lookup"><span data-stu-id="9d751-120">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="9d751-121">Utilizador com conta Microsoft</span><span class="sxs-lookup"><span data-stu-id="9d751-121">User using Microsoft account</span></span><br> <span data-ttu-id="9d751-122">(por exemplo, user@hotmail.com)</span><span class="sxs-lookup"><span data-stu-id="9d751-122">(for example, user@hotmail.com)</span></span> |<span data-ttu-id="9d751-123">**Global:**</span><span class="sxs-lookup"><span data-stu-id="9d751-123">**Global:**</span></span><br> <span data-ttu-id="9d751-124">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-124">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="9d751-125">**Azure China:**</span><span class="sxs-lookup"><span data-stu-id="9d751-125">**Azure China:**</span></span><br> <span data-ttu-id="9d751-126">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="9d751-126">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="9d751-127">**Azure US Government:**</span><span class="sxs-lookup"><span data-stu-id="9d751-127">**Azure US Government:**</span></span><br> <span data-ttu-id="9d751-128">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-128">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="9d751-129">**Azure Alemanha:**</span><span class="sxs-lookup"><span data-stu-id="9d751-129">**Azure Germany:**</span></span><br> <span data-ttu-id="9d751-130">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="9d751-130">login.microsoftonline.de:443</span></span><br><br> <span data-ttu-id="9d751-131">e</span><span class="sxs-lookup"><span data-stu-id="9d751-131">and</span></span> <br><span data-ttu-id="9d751-132">login.live.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-132">login.live.com:443</span></span> |
| <span data-ttu-id="9d751-133">Utilizador ou principal de serviço com uma conta escolar ou profissional com o Azure AD (por exemplo, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="9d751-133">User or service principal using a work or school account with Azure AD (for example, user@contoso.com)</span></span> |<span data-ttu-id="9d751-134">**Global:**</span><span class="sxs-lookup"><span data-stu-id="9d751-134">**Global:**</span></span><br> <span data-ttu-id="9d751-135">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-135">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="9d751-136">**Azure China:**</span><span class="sxs-lookup"><span data-stu-id="9d751-136">**Azure China:**</span></span><br> <span data-ttu-id="9d751-137">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="9d751-137">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="9d751-138">**Azure US Government:**</span><span class="sxs-lookup"><span data-stu-id="9d751-138">**Azure US Government:**</span></span><br> <span data-ttu-id="9d751-139">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-139">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="9d751-140">**Azure Alemanha:**</span><span class="sxs-lookup"><span data-stu-id="9d751-140">**Azure Germany:**</span></span><br> <span data-ttu-id="9d751-141">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="9d751-141">login.microsoftonline.de:443</span></span> |
| <span data-ttu-id="9d751-142">Utilizador ou principal de serviço com um ou conta profissional, e os serviços de Federação do Active Directory (AD FS) ou outro ponto final da Federado (por exemplo, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="9d751-142">User or service principal using a work or school account, plus Active Directory Federation Services (AD FS) or other federated endpoint (for example, user@contoso.com)</span></span> |<span data-ttu-id="9d751-143">Todos os pontos finais para uma conta escolar ou profissional, mais AD FS ou outros pontos finais federados</span><span class="sxs-lookup"><span data-stu-id="9d751-143">All endpoints for a work or school account, plus AD FS or other federated endpoints</span></span> |

<span data-ttu-id="9d751-144">Existem outros cenários possíveis complexos.</span><span class="sxs-lookup"><span data-stu-id="9d751-144">There are other possible complex scenarios.</span></span> <span data-ttu-id="9d751-145">Consulte demasiado[do Azure Active Directory Authentication fluxo](/documentation/articles/active-directory-authentication-scenarios/), [integrar aplicações com o Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), e [protocolos de autenticação do Active Directory](https://msdn.microsoft.com/library/azure/dn151124.aspx) Para obter informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="9d751-145">Refer too[Azure Active Directory Authentication Flow](/documentation/articles/active-directory-authentication-scenarios/), [Integrating Applications with Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), and [Active Directory Authentication Protocols](https://msdn.microsoft.com/library/azure/dn151124.aspx) for additional information.</span></span>  

## <a name="key-vault-management"></a><span data-ttu-id="9d751-146">Gestão do Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="9d751-146">Key Vault management</span></span>
<span data-ttu-id="9d751-147">Para a gestão de Cofre de chaves (CRUD e definição de política de acesso), a aplicação de cliente do Cofre de chaves Olá tem tooaccess um ponto final do Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="9d751-147">For Key Vault management (CRUD and setting access policy), hello key vault client application needs tooaccess an Azure Resource Manager endpoint.</span></span>  

| <span data-ttu-id="9d751-148">Tipo de operação</span><span class="sxs-lookup"><span data-stu-id="9d751-148">Type of operation</span></span> | <span data-ttu-id="9d751-149">Ponto final:porta</span><span class="sxs-lookup"><span data-stu-id="9d751-149">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="9d751-150">Operações do painel de controlo do Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="9d751-150">Key Vault control plane operations</span></span><br> <span data-ttu-id="9d751-151">através do Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9d751-151">via Azure Resource Manager</span></span> |<span data-ttu-id="9d751-152">**Global:**</span><span class="sxs-lookup"><span data-stu-id="9d751-152">**Global:**</span></span><br> <span data-ttu-id="9d751-153">management.azure.com:443</span><span class="sxs-lookup"><span data-stu-id="9d751-153">management.azure.com:443</span></span><br><br> <span data-ttu-id="9d751-154">**Azure China:**</span><span class="sxs-lookup"><span data-stu-id="9d751-154">**Azure China:**</span></span><br> <span data-ttu-id="9d751-155">management.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="9d751-155">management.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="9d751-156">**Azure US Government:**</span><span class="sxs-lookup"><span data-stu-id="9d751-156">**Azure US Government:**</span></span><br> <span data-ttu-id="9d751-157">management.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="9d751-157">management.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="9d751-158">**Azure Alemanha:**</span><span class="sxs-lookup"><span data-stu-id="9d751-158">**Azure Germany:**</span></span><br> <span data-ttu-id="9d751-159">management.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="9d751-159">management.microsoftazure.de:443</span></span> |
| <span data-ttu-id="9d751-160">Graph API do Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="9d751-160">Azure Active Directory Graph API</span></span> |<span data-ttu-id="9d751-161">**Global:**</span><span class="sxs-lookup"><span data-stu-id="9d751-161">**Global:**</span></span><br> <span data-ttu-id="9d751-162">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="9d751-162">graph.windows.net:443</span></span><br><br> <span data-ttu-id="9d751-163">**Azure China:**</span><span class="sxs-lookup"><span data-stu-id="9d751-163">**Azure China:**</span></span><br> <span data-ttu-id="9d751-164">graph.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="9d751-164">graph.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="9d751-165">**Azure US Government:**</span><span class="sxs-lookup"><span data-stu-id="9d751-165">**Azure US Government:**</span></span><br> <span data-ttu-id="9d751-166">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="9d751-166">graph.windows.net:443</span></span><br><br> <span data-ttu-id="9d751-167">**Azure Alemanha:**</span><span class="sxs-lookup"><span data-stu-id="9d751-167">**Azure Germany:**</span></span><br> <span data-ttu-id="9d751-168">graph.cloudapi.de:443</span><span class="sxs-lookup"><span data-stu-id="9d751-168">graph.cloudapi.de:443</span></span> |

## <a name="key-vault-operations"></a><span data-ttu-id="9d751-169">Operações do Cofre de Chaves</span><span class="sxs-lookup"><span data-stu-id="9d751-169">Key Vault operations</span></span>
<span data-ttu-id="9d751-170">Para todos os gestão de objeto (chaves e segredos) do Cofre de chaves e operações de criptografia, o cliente do Cofre de chaves de Olá tem ponto final do tooaccess Olá Cofre de chaves.</span><span class="sxs-lookup"><span data-stu-id="9d751-170">For all key vault object (keys and secrets) management and cryptographic operations, hello key vault client needs tooaccess hello key vault endpoint.</span></span> <span data-ttu-id="9d751-171">sufixo DNS do ponto final de Olá varia dependendo da localização de Olá do seu Cofre de chaves.</span><span class="sxs-lookup"><span data-stu-id="9d751-171">hello endpoint DNS suffix varies depending on hello location of your key vault.</span></span> <span data-ttu-id="9d751-172">ponto final do Cofre de chaves de Olá tem um formato Olá *nome do cofre*. *região---o sufixo dns específico*, conforme descrito nas Olá a tabela seguinte.</span><span class="sxs-lookup"><span data-stu-id="9d751-172">hello key vault endpoint is of hello format *vault-name*.*region-specific-dns-suffix*, as described in hello following table.</span></span>  

| <span data-ttu-id="9d751-173">Tipo de operação</span><span class="sxs-lookup"><span data-stu-id="9d751-173">Type of operation</span></span> | <span data-ttu-id="9d751-174">Ponto final:porta</span><span class="sxs-lookup"><span data-stu-id="9d751-174">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="9d751-175">Operações, incluindo operações criptográficas em chaves; criar, ler, atualizar e eliminar chaves e segredos; definir ou obter etiquetas e outros atributos de objetos de cofre de chaves (chaves ou segredos)</span><span class="sxs-lookup"><span data-stu-id="9d751-175">Operations including cryptographic operations on keys; creating, reading, updating, and deleting keys and secrets; setting or getting tags and other attributes on key vault objects (keys or secrets)</span></span> |<span data-ttu-id="9d751-176">**Global:**</span><span class="sxs-lookup"><span data-stu-id="9d751-176">**Global:**</span></span><br> <span data-ttu-id="9d751-177">&lt;vault-name&gt;.vault.azure.net:443</span><span class="sxs-lookup"><span data-stu-id="9d751-177">&lt;vault-name&gt;.vault.azure.net:443</span></span><br><br> <span data-ttu-id="9d751-178">**Azure China:**</span><span class="sxs-lookup"><span data-stu-id="9d751-178">**Azure China:**</span></span><br> <span data-ttu-id="9d751-179">&lt;vault-name&gt;.vault.azure.cn:443</span><span class="sxs-lookup"><span data-stu-id="9d751-179">&lt;vault-name&gt;.vault.azure.cn:443</span></span><br><br> <span data-ttu-id="9d751-180">**Azure US Government:**</span><span class="sxs-lookup"><span data-stu-id="9d751-180">**Azure US Government:**</span></span><br> <span data-ttu-id="9d751-181">&lt;vault-name&gt;.vault.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="9d751-181">&lt;vault-name&gt;.vault.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="9d751-182">**Azure Alemanha:**</span><span class="sxs-lookup"><span data-stu-id="9d751-182">**Azure Germany:**</span></span><br> <span data-ttu-id="9d751-183">&lt;vault-name&gt;.vault.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="9d751-183">&lt;vault-name&gt;.vault.microsoftazure.de:443</span></span> |

## <a name="ip-address-ranges"></a><span data-ttu-id="9d751-184">Intervalos de endereços IP</span><span class="sxs-lookup"><span data-stu-id="9d751-184">IP address ranges</span></span>
<span data-ttu-id="9d751-185">Olá serviço Cofre de chaves utiliza outros recursos do Azure, como a infraestrutura de PaaS.</span><span class="sxs-lookup"><span data-stu-id="9d751-185">hello Key Vault service uses other Azure resources like PaaS infrastructure.</span></span> <span data-ttu-id="9d751-186">Para que não seja possível tooprovide um específico intervalo de endereços IP que o Cofre de chaves tem pontos finais do serviço em qualquer altura específica.</span><span class="sxs-lookup"><span data-stu-id="9d751-186">So it's not possible tooprovide a specific range of IP addresses that Key Vault service endpoints will have at any particular time.</span></span> <span data-ttu-id="9d751-187">Se a firewall suporta apenas os intervalos de endereços IP, consulte toohello [intervalos de IP de centro de dados do Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653) documento.</span><span class="sxs-lookup"><span data-stu-id="9d751-187">If your firewall supports only IP address ranges, refer toohello [Microsoft Azure Datacenter IP Ranges](https://www.microsoft.com/download/details.aspx?id=41653) document.</span></span> <span data-ttu-id="9d751-188">Para autenticação e identidade (Azure Active Directory), a aplicação tem de ser pontos finais de toohello tooconnect capaz de descrito [endereços de autenticação e identidade](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="9d751-188">For authentication and identity (Azure Active Directory), your application must be able tooconnect toohello endpoints described in [Authentication and identity addresses](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span>

## <a name="next-steps"></a><span data-ttu-id="9d751-189">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="9d751-189">Next steps</span></span>
<span data-ttu-id="9d751-190">Se tiver dúvidas sobre o Cofre de chaves, visite Olá [nos fóruns do Cofre de chaves do Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span><span class="sxs-lookup"><span data-stu-id="9d751-190">If you have questions about Key Vault, visit hello [Azure Key Vault Forums](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span></span>

