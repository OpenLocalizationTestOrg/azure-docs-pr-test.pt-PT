# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="75205-101">Começar a utilizar o Azure Stream Analytics: deteção de fraudes em tempo real</span><span class="sxs-lookup"><span data-stu-id="75205-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="75205-102">Este tutorial fornece uma ilustração de ponto a ponto sobre como toouse Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="75205-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="75205-103">Saiba como:</span><span class="sxs-lookup"><span data-stu-id="75205-103">You learn how to:</span></span> 

* <span data-ttu-id="75205-104">Traga a transmissão em fluxo de eventos para uma instância de Event Hubs do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="75205-105">Neste tutorial, irá utilizar uma aplicação que fornecemos que simula uma sequência de registos de metadados telemóvel.</span><span class="sxs-lookup"><span data-stu-id="75205-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="75205-106">Como o SQL Server Stream Analytics consultas tootransform dados, Agregar informações ou à procura de padrões de escrita.</span><span class="sxs-lookup"><span data-stu-id="75205-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="75205-107">Verá como toouse tooexamine uma consulta Olá fluxo de entrada e procure chamadas que poderão ser fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="75205-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="75205-108">Envie Olá resultados tooan sink de saída (armazenamento) que pode analisar informações adicionais.</span><span class="sxs-lookup"><span data-stu-id="75205-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="75205-109">Neste caso, irá enviar o armazenamento de Blobs do Olá chamada suspeita dados tooAzure.</span><span class="sxs-lookup"><span data-stu-id="75205-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="75205-110">Neste tutorial, utilizamos o exemplo de Olá de deteção de fraudes em tempo real com base nos dados de chamada telefónica.</span><span class="sxs-lookup"><span data-stu-id="75205-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="75205-111">Mas técnica Olá que é ilustrar é também adequada para outros tipos de deteção de fraudes, tais como o roubo de fraudes ou a identidade do cartão de crédito.</span><span class="sxs-lookup"><span data-stu-id="75205-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="75205-112">Cenário: Deteção de fraudes de telecomunicações e SIM em tempo real</span><span class="sxs-lookup"><span data-stu-id="75205-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="75205-113">Uma empresa de telecomunicações tem um grande volume de dados de chamadas recebidas.</span><span class="sxs-lookup"><span data-stu-id="75205-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="75205-114">empresa de Olá pretende toodetect fraudulenta chama em tempo real, para que podem notificar os clientes ou encerrar o serviço para um número específico.</span><span class="sxs-lookup"><span data-stu-id="75205-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="75205-115">Um tipo de fraude SIM envolve várias chamadas de Olá mesma identidade em torno Olá o mesmo tempo, mas em localizações geograficamente diferentes.</span><span class="sxs-lookup"><span data-stu-id="75205-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="75205-116">toodetect este tipo de fraudes, Olá registos de telefone da empresa necessidades tooexamine recebidos e procure padrões específicos, neste caso, para chamadas efetuadas em torno Olá simultâneo em diferentes países.</span><span class="sxs-lookup"><span data-stu-id="75205-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="75205-117">Os registos de telefone que inseridas nesta categoria são escritos toostorage para análise subsequente.</span><span class="sxs-lookup"><span data-stu-id="75205-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="75205-118">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="75205-118">Prerequisites</span></span>

<span data-ttu-id="75205-119">Neste tutorial, irá simular dados de chamada telefónica através da utilização de uma aplicação de cliente que gera os metadados de chamada telefónica de exemplo.</span><span class="sxs-lookup"><span data-stu-id="75205-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="75205-120">Alguns dos registos de Olá Olá aplicação produz o aspeto das chamadas fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="75205-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="75205-121">Antes de começar, certifique-se de que tem o seguinte Olá:</span><span class="sxs-lookup"><span data-stu-id="75205-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="75205-122">Uma conta do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-122">An Azure account.</span></span>
* <span data-ttu-id="75205-123">aplicação do gerador de eventos de chamada de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-123">hello call-event generator app.</span></span> <span data-ttu-id="75205-124">Pode obter esta transferindo Olá [TelcoGenerator.zip ficheiro](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) de Olá Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="75205-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="75205-125">Deszipe o pacote para uma pasta no seu computador.</span><span class="sxs-lookup"><span data-stu-id="75205-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="75205-126">Se pretender que o código de origem do toosee Olá e aplicação Olá execução num depurador, pode obter o código de origem da aplicação Olá de [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="75205-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="75205-127">Windows poderão bloquear o ficheiro. zip de Olá transferido.</span><span class="sxs-lookup"><span data-stu-id="75205-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="75205-128">Se não é possível descomprimi-lo, clique no ficheiro de Olá e selecione **propriedades**.</span><span class="sxs-lookup"><span data-stu-id="75205-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="75205-129">Se vir Olá mensagem "este ficheiro provém de outro computador e poderá ser bloqueado toohelp proteger neste computador", selecione de Olá **desbloqueio** opção e, em seguida, clique em **aplicar**.</span><span class="sxs-lookup"><span data-stu-id="75205-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="75205-130">Se pretender que os resultados de Olá tooexamine da tarefa de análise de transmissão em fluxo Olá, terá também uma ferramenta para visualizar conteúdo Olá de um contentor do Blob Storage do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="75205-131">Se utilizar o Visual Studio, pode utilizar [ferramentas do Azure para Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) ou [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="75205-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="75205-132">Em alternativa, pode instalar as ferramentas autónomas como [Explorador de armazenamento do Azure](http://storageexplorer.com/) ou [Explorador do Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="75205-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="75205-133">Criar um evento do Azure eventos de tooingest hubs</span><span class="sxs-lookup"><span data-stu-id="75205-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="75205-134">tooanalyze um fluxo de dados, *inserção* -lo no Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="75205-135">Dados de tooingest uma forma típico são toouse [Event Hubs do Azure](../event-hubs/event-hubs-what-is-event-hubs.md), que lhe permite ingestão de milhões de eventos por segundo e, em seguida, processar e armazenar informações de evento Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="75205-136">Para este tutorial, criar um hub de eventos e, em seguida, tiver Olá eventos de chamada gerador aplicação enviar chamada dados toothat hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="75205-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="75205-137">Para obter mais informações sobre os event hubs, consulte Olá [documentação do Service Bus do Azure](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="75205-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="75205-138">Para uma versão mais detalhada deste procedimento, consulte [criar um espaço de nomes de Event Hubs e um hub de eventos utilizando Olá portal do Azure](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="75205-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="75205-139">Criar um hub de espaço de nomes e eventos</span><span class="sxs-lookup"><span data-stu-id="75205-139">Create a namespace and event hub</span></span>
<span data-ttu-id="75205-140">Neste procedimento, tem primeiro de criar um espaço de nome de hub de eventos e, em seguida, adicionar um namepsace de toothat do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="75205-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="75205-141">Espaços de nomes de hub de eventos são utilizados instâncias de barramento de eventos relacionados com o grupo toologically.</span><span class="sxs-lookup"><span data-stu-id="75205-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="75205-142">Inicie sessão no portal do Azure de Olá e clique em **novo** > **Internet das coisas** > **Hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="75205-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="75205-143">No Olá **criar espaço de nomes** painel, introduza um nome de espaço de nomes, como `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="75205-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="75205-144">Pode utilizar qualquer nome de espaço de nomes de Olá, mas Olá nome tem de ser válido para um URL e tem de ser exclusivo em todo o Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="75205-145">Selecionar uma subscrição e crie ou escolha um grupo de recursos e clique em **criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Criar um espaço de nomes do hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="75205-147">Quando o espaço de nomes de Olá tiver concluído a implementação, localize o espaço de nomes de hub de eventos de Olá na sua lista de recursos do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="75205-148">Clique em novo Olá de espaço de nomes e, no painel de espaço de nomes de Olá, clique em  **+ &nbsp;Hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="75205-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="75205-149">botão Adicionar Hub de eventos de Olá para criar um novo hub de eventos</span><span class="sxs-lookup"><span data-stu-id="75205-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="75205-150">Nome Olá novo hub de eventos `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="75205-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="75205-151">Pode utilizar um nome diferente.</span><span class="sxs-lookup"><span data-stu-id="75205-151">You can use a different name.</span></span> <span data-ttu-id="75205-152">Se o fizer, tome nota do mesmo, porque tem o nome de Olá mais tarde.</span><span class="sxs-lookup"><span data-stu-id="75205-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="75205-153">Não precisa de tooset quaisquer outras opções para o hub de eventos de Olá neste momento.</span><span class="sxs-lookup"><span data-stu-id="75205-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Painel para criar um novo hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="75205-155">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="75205-156">Conceda o hub de eventos do acesso toohello e obter uma cadeia de ligação</span><span class="sxs-lookup"><span data-stu-id="75205-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="75205-157">Antes de um processo pode enviar o hub de eventos de tooan de dados, o hub de eventos de Olá tem de ter uma política que permite o acesso adequado.</span><span class="sxs-lookup"><span data-stu-id="75205-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="75205-158">política de acesso de Olá produz uma cadeia de ligação que inclui as informações de autorização.</span><span class="sxs-lookup"><span data-stu-id="75205-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="75205-159">No painel de espaço de nomes de evento Olá, clique em **Event Hubs** e, em seguida, clique no nome de Olá do seu hub de eventos novos.</span><span class="sxs-lookup"><span data-stu-id="75205-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="75205-160">No painel do hub de eventos de Olá, clique em **políticas de acesso partilhado** e, em seguida, clique em  **+ &nbsp;adicionar**.</span><span class="sxs-lookup"><span data-stu-id="75205-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="75205-161">Certifique-se de que está a trabalhar com o hub de eventos de Olá, não Olá event hub espaço de nomes.</span><span class="sxs-lookup"><span data-stu-id="75205-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="75205-162">Adicionar uma política com o nome `sa-policy-manage-demo` e para **afirmação**, selecione **gerir**.</span><span class="sxs-lookup"><span data-stu-id="75205-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Painel para criar uma nova política de acesso do hub de eventos](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="75205-164">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-164">Click **Create**.</span></span>

5.  <span data-ttu-id="75205-165">Após ter sido implementada a política de Olá, clique na mesma na lista de Olá de políticas de acesso partilhado.</span><span class="sxs-lookup"><span data-stu-id="75205-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="75205-166">Caixa de Olá localizar etiquetada **chave primária de cadeia de ligação** e clique em Olá cópia no botão seguinte toohello cadeia de ligação.</span><span class="sxs-lookup"><span data-stu-id="75205-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Copiar a chave de cadeia de ligação principal Olá da política de acesso de Olá](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="75205-168">Cole a cadeia de ligação de Olá num editor de texto.</span><span class="sxs-lookup"><span data-stu-id="75205-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="75205-169">Precisa esta cadeia de ligação para a secção seguinte Olá, depois de efetuar alguns tooit edições pequeno.</span><span class="sxs-lookup"><span data-stu-id="75205-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="75205-170">cadeia de ligação de Olá tem o seguinte aspeto:</span><span class="sxs-lookup"><span data-stu-id="75205-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="75205-171">Tenha em atenção que a cadeia de ligação de Olá contém vários pares chave-valor, separadas por ponto e vírgula: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, e `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="75205-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="75205-172">Configurar e iniciar a aplicação de gerador de evento Olá</span><span class="sxs-lookup"><span data-stu-id="75205-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="75205-173">Antes de iniciar a aplicação de TelcoGenerator Olá, configurá-lo de modo a que irá enviar hub eventos chamada registos toohello que acabou de criar.</span><span class="sxs-lookup"><span data-stu-id="75205-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="75205-174">Configurar Olá TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="75205-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="75205-175">No editor de olá onde copiou cadeia de ligação de Olá, anote Olá `EntityPath` valor e, em seguida, remova Olá `EntityPath` par (não se esqueça tooremove Olá ponto e vírgula que precede-lo).</span><span class="sxs-lookup"><span data-stu-id="75205-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="75205-176">Na pasta de olá onde que deszipada ficheiros de TelcoGenerator.zip Olá, abra o ficheiro de telcodatagen.exe.config Olá num editor.</span><span class="sxs-lookup"><span data-stu-id="75205-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="75205-177">(Há mais de um ficheiro. config, por isso, certifique-se que abrir o direito de Olá um.)</span><span class="sxs-lookup"><span data-stu-id="75205-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="75205-178">No Olá `<appSettings>` elemento, fazê-lo:</span><span class="sxs-lookup"><span data-stu-id="75205-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="75205-179">Defina o valor de Olá de Olá `EventHubName` o nome do hub de eventos da chave toohello (ou seja, o valor toohello do caminho de entidade Olá).</span><span class="sxs-lookup"><span data-stu-id="75205-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="75205-180">Defina o valor de Olá de Olá `Microsoft.ServiceBus.ConnectionString` toohello cadeia de ligação da chave.</span><span class="sxs-lookup"><span data-stu-id="75205-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="75205-181">Olá `<appSettings>` secção terá um aspeto semelhante Olá seguinte exemplo.</span><span class="sxs-lookup"><span data-stu-id="75205-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="75205-182">(Para efeitos de clareza, iremos encapsulada linhas Olá e removido alguns carateres do token de autorização de Olá.)</span><span class="sxs-lookup"><span data-stu-id="75205-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Ficheiro de configuração de aplicação TelcoGenerator Mostrar Olá event hub nome e a cadeia ligação](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="75205-184">Guarde o ficheiro de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="75205-185">Iniciar a aplicação Olá</span><span class="sxs-lookup"><span data-stu-id="75205-185">Start hello app</span></span>
1.  <span data-ttu-id="75205-186">Abra uma janela de comandos e altere toohello pasta em que Olá TelcoGenerator aplicação deszipada.</span><span class="sxs-lookup"><span data-stu-id="75205-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="75205-187">Introduza Olá os seguintes comandos:</span><span class="sxs-lookup"><span data-stu-id="75205-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="75205-188">Olá parâmetros são:</span><span class="sxs-lookup"><span data-stu-id="75205-188">hello parameters are:</span></span> 

    * <span data-ttu-id="75205-189">Número de CDRs por hora.</span><span class="sxs-lookup"><span data-stu-id="75205-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="75205-190">Probabilidade de fraude de cartões SIM: Frequência, como uma percentagem de todas as chamadas, essa aplicação Olá deve simular uma chamada fraudulenta.</span><span class="sxs-lookup"><span data-stu-id="75205-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="75205-191">o valor de Olá.2 significa que cerca de 20% dos registos de chamada de Olá procurará fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="75205-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="75205-192">Duração em horas.</span><span class="sxs-lookup"><span data-stu-id="75205-192">Duration in hours.</span></span> <span data-ttu-id="75205-193">número de Olá de horas que Olá aplicação deve ser executada.</span><span class="sxs-lookup"><span data-stu-id="75205-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="75205-194">Também pode parar aplicação Olá qualquer altura ao premir Ctrl + C na linha de comandos Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="75205-195">Após alguns segundos, a aplicação Olá inicia a apresentar os registos de chamada telefónica no ecrã de Olá como envia-as toohello hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="75205-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="75205-196">Alguns dos campos de chave Olá que irá utilizar nesta aplicação de deteção de fraudes em tempo real são seguinte Olá:</span><span class="sxs-lookup"><span data-stu-id="75205-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="75205-197">**Registo**</span><span class="sxs-lookup"><span data-stu-id="75205-197">**Record**</span></span>|<span data-ttu-id="75205-198">**Definição**</span><span class="sxs-lookup"><span data-stu-id="75205-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="75205-199">Olá carimbo de hora de início de chamada de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="75205-200">comutador de telefone Olá utilizado chamada de Olá tooconnect.</span><span class="sxs-lookup"><span data-stu-id="75205-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="75205-201">Neste exemplo, comutadores Olá são cadeias que representam país Olá de origem (E.U.A., China, RU, Datacenters ou Austrália).</span><span class="sxs-lookup"><span data-stu-id="75205-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="75205-202">número de telefone de Olá de autor da chamada Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="75205-203">Olá Mobile subscritor identidade IMSI (International).</span><span class="sxs-lookup"><span data-stu-id="75205-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="75205-204">Este é o identificador exclusivo do Olá do autor da chamada Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="75205-205">número de telefone de Olá de destinatário da chamada de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="75205-206">Identidade do subscritor móveis internacional (IMSI).</span><span class="sxs-lookup"><span data-stu-id="75205-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="75205-207">Este é o identificador exclusivo do Olá do destinatário da chamada de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="75205-208">Criar um toomanage de tarefa do Stream Analytics dados de transmissão em fluxo</span><span class="sxs-lookup"><span data-stu-id="75205-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="75205-209">Agora que tem um fluxo de eventos de chamada, pode configurar uma tarefa de Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="75205-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="75205-210">tarefa de Olá irá ler os dados do hub de eventos de Olá que configurou.</span><span class="sxs-lookup"><span data-stu-id="75205-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="75205-211">Criar tarefa de Olá</span><span class="sxs-lookup"><span data-stu-id="75205-211">Create hello job</span></span> 

1. <span data-ttu-id="75205-212">No portal do Azure Olá, clique em **novo** > **Internet das coisas** > **tarefa do Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="75205-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="75205-213">Tarefa de Olá nome `sa_frauddetection_job_demo`, especifique uma subscrição, o grupo de recursos e a localização.</span><span class="sxs-lookup"><span data-stu-id="75205-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="75205-214">É uma boa ideia tooplace Olá tarefa e Olá hub de eventos no Olá mesma região para melhor desempenho e que não paga tootransfer dados entre regiões.</span><span class="sxs-lookup"><span data-stu-id="75205-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Criar nova tarefa de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="75205-216">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-216">Click **Create**.</span></span>

    <span data-ttu-id="75205-217">Olá tarefa é criada e portal Olá apresenta os detalhes da tarefa.</span><span class="sxs-lookup"><span data-stu-id="75205-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="75205-218">Nada se encontra em execução, embora — tiver tarefa de Olá tooconfigure antes que possa ser iniciado.</span><span class="sxs-lookup"><span data-stu-id="75205-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="75205-219">Configurar a entrada da tarefa</span><span class="sxs-lookup"><span data-stu-id="75205-219">Configure job input</span></span>

1. <span data-ttu-id="75205-220">No dashboard de Olá ou Olá **todos os recursos** painel, localize e selecione Olá `sa_frauddetection_job_demo` tarefa do Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="75205-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="75205-221">No Olá **tarefa topologia** secção Olá painel de tarefas do Stream Analytics, clique em Olá **entrada** caixa.</span><span class="sxs-lookup"><span data-stu-id="75205-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Caixa de entrada em topologia no painel de tarefas de transmissão em fluxo análise Olá](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="75205-223">Clique em  **+ &nbsp;adicionar** e, em seguida, preencha painel Olá com estes valores:</span><span class="sxs-lookup"><span data-stu-id="75205-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="75205-224">**Alias de entrada**: Utilize o nome de Olá `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="75205-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="75205-225">Se utilizar um nome diferente, tome nota do mesmo porque precisará dela mais tarde.</span><span class="sxs-lookup"><span data-stu-id="75205-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="75205-226">**Tipo de origem**: selecione **fluxo de dados**.</span><span class="sxs-lookup"><span data-stu-id="75205-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="75205-227">(**Referência a dados** refere-se os dados de pesquisa de toostatic, que não irão utilizar neste tutorial.)</span><span class="sxs-lookup"><span data-stu-id="75205-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="75205-228">**Origem**: selecione **hub de eventos**.</span><span class="sxs-lookup"><span data-stu-id="75205-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="75205-229">**Opção de importar**: selecione **hub de eventos de utilização da subscrição atual**.</span><span class="sxs-lookup"><span data-stu-id="75205-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="75205-230">**O espaço de nomes do Service bus**: selecione Olá event hub espaço de nomes que criou anteriormente (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="75205-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="75205-231">**Hub de eventos**: hub de eventos de Olá selecione que criou anteriormente (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="75205-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="75205-232">**Nome de política do hub de eventos**: selecione a política de acesso de Olá que criou anteriormente (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="75205-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Criar nova entrada para a tarefa de análise de transmissão em fluxo](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="75205-234">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="75205-235">Criar consultas tootransform de dados em tempo real</span><span class="sxs-lookup"><span data-stu-id="75205-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="75205-236">Neste momento, tem uma tarefa de Stream Analytics configurar tooread um fluxo de dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="75205-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="75205-237">Olá passo seguinte consiste em toocreate uma transformação que analisa os dados de Olá em tempo real.</span><span class="sxs-lookup"><span data-stu-id="75205-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="75205-238">Fazê-lo através da criação de uma consulta.</span><span class="sxs-lookup"><span data-stu-id="75205-238">You do this by creating a query.</span></span> <span data-ttu-id="75205-239">Stream Analytics suporta um modelo de consulta simples e declarativo que descreve transformações de processamento em tempo real.</span><span class="sxs-lookup"><span data-stu-id="75205-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="75205-240">consultas de Olá utilizam um idioma de como o SQL Server que tem alguma análise de toostream específico de extensões.</span><span class="sxs-lookup"><span data-stu-id="75205-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="75205-241">Uma consulta muito simple simplesmente pode ler todos os dados de entrada de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="75205-242">No entanto, muitas vezes, criar consultas que ter um aspeto de dados específicos ou relações nos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="75205-243">Nesta secção do tutorial Olá, irá criar e testar várias consultas toolearn algumas formas em que pode transformar um fluxo de entrada para análise.</span><span class="sxs-lookup"><span data-stu-id="75205-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="75205-244">consultas Olá que criar aqui apenas irão apresentar o ecrã de toohello Olá dados transformados.</span><span class="sxs-lookup"><span data-stu-id="75205-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="75205-245">Numa secção posterior, irá configurar um sink de saída e uma consulta que escreve Olá dados transformados toothat sink.</span><span class="sxs-lookup"><span data-stu-id="75205-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="75205-246">toolearn mais informações sobre idiomas de Olá, consulte Olá [referência de linguagem de consulta do Azure Stream Analytics](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="75205-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="75205-247">Obter dados de exemplo para consultas de teste</span><span class="sxs-lookup"><span data-stu-id="75205-247">Get sample data for testing queries</span></span>

<span data-ttu-id="75205-248">Olá TelcoGenerator aplicação está a enviar registos de chamada toohello hub de eventos e a tarefa de Stream Analytics é configurado tooread do hub de eventos de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="75205-249">Pode utilizar uma consulta tootest Olá tarefa toomake certificar-se de que está a ler corretamente.</span><span class="sxs-lookup"><span data-stu-id="75205-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="75205-250">teste demasiado uma consulta no Olá consola do Azure, terá de dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="75205-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="75205-251">Nestas instruções, irá extrair dados de exemplo de uma sequência de Olá que estará disponível para o hub de eventos de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="75205-252">Certifique-se de que aplicações de TelcoGenerator Olá está a executar e a produzir registos de chamada.</span><span class="sxs-lookup"><span data-stu-id="75205-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="75205-253">No portal de Olá, devolva toohello painel de tarefas de análise de transmissão em fluxo.</span><span class="sxs-lookup"><span data-stu-id="75205-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="75205-254">(Se tiver fechado painel Olá, procure `sa_frauddetection_job_demo` no Olá **todos os recursos** painel.)</span><span class="sxs-lookup"><span data-stu-id="75205-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="75205-255">Clique em Olá **consulta** caixa.</span><span class="sxs-lookup"><span data-stu-id="75205-255">Click hello **Query** box.</span></span> <span data-ttu-id="75205-256">Azure apresenta uma lista de entradas de Olá e saídas que estão configuradas para a tarefa de Olá e permite-lhe criar uma consulta que permite-lhe transformar o fluxo de entrada Olá, é enviado toohello saída.</span><span class="sxs-lookup"><span data-stu-id="75205-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="75205-257">No Olá **consulta** painel, clique em Olá pontos seguinte toohello `CallStream` de entrada e, em seguida, selecione **dados de entrada de exemplo**.</span><span class="sxs-lookup"><span data-stu-id="75205-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Menu Opções toouse dados de exemplo de Olá entrada da tarefa de análise de transmissão em fluxo, com "Dados de exemplo de entrada" selecionados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="75205-259">Esta ação abre um painel que lhe permite especificar quanto tooget de dados de exemplo, definido em termos de quanto tooread Olá entrada fluxo.</span><span class="sxs-lookup"><span data-stu-id="75205-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="75205-260">Definir **minutos** too3 e, em seguida, clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="75205-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Opções para a amostragem Olá o fluxo de entrada, com "3 minutos" selecionados.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="75205-262">Azure amostras de visão de 3 minutos de dados a partir do fluxo de entrada Olá e notifica-o quando os dados de exemplo de Olá estão prontos.</span><span class="sxs-lookup"><span data-stu-id="75205-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="75205-263">(Esta ação demora algum.)</span><span class="sxs-lookup"><span data-stu-id="75205-263">(This takes a short while.)</span></span> 

<span data-ttu-id="75205-264">dados de exemplo de Olá são temporariamente armazenados e estão disponíveis enquanto tiver janela de consulta Olá abrir.</span><span class="sxs-lookup"><span data-stu-id="75205-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="75205-265">Se fechar a janela de consulta Olá, dados de exemplo de Olá são rejeitados e terá toocreate um novo conjunto de dados de exemplo.</span><span class="sxs-lookup"><span data-stu-id="75205-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="75205-266">Como alternativa, pode obter um ficheiro. JSON que tenha dados de exemplo na mesma [a partir do GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)e, em seguida, carregue esse toouse de ficheiro. JSON como dados de exemplo de Olá `CallStream` entrada.</span><span class="sxs-lookup"><span data-stu-id="75205-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="75205-267">Testar uma consulta pass-through</span><span class="sxs-lookup"><span data-stu-id="75205-267">Test using a pass-through query</span></span>

<span data-ttu-id="75205-268">Se quiser tooarchive cada evento, pode utilizar uma consulta pass-through tooread todos os campos de Olá no payload Olá do evento de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="75205-269">Na janela de consulta Olá, introduza esta consulta:</span><span class="sxs-lookup"><span data-stu-id="75205-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="75205-270">Tal como acontece com o SQL Server, palavras-chave não são sensíveis a maiúsculas e minúsculas e espaços em branco não é significativo.</span><span class="sxs-lookup"><span data-stu-id="75205-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="75205-271">Esta consulta, `CallStream` é Olá alias que especificou quando criou Olá entrada.</span><span class="sxs-lookup"><span data-stu-id="75205-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="75205-272">Se utilizou um alias diferente, utilize esse nome em vez disso.</span><span class="sxs-lookup"><span data-stu-id="75205-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="75205-273">Clique em **teste**.</span><span class="sxs-lookup"><span data-stu-id="75205-273">Click **Test**.</span></span>

    <span data-ttu-id="75205-274">tarefa de Stream Analytics Olá executa Olá consulta em relação a dados de exemplo de Olá e apresenta uma saída Olá em Olá parte inferior da janela de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="75205-275">Isto indica que o hub de eventos de Olá e a tarefa de análise de transmissão em fluxo Olá estão corretamente configuradas.</span><span class="sxs-lookup"><span data-stu-id="75205-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="75205-276">(Conforme indicado, mais tarde irá criar um sink de saída que Olá consulta pode escrever dados.)</span><span class="sxs-lookup"><span data-stu-id="75205-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Tarefa de Stream Analytics uma saída, que mostra 73 registos gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="75205-278">Olá exato diversas registos que vir dependerá registos quantos tiverem sido capturados num seu exemplo de 3 minutos.</span><span class="sxs-lookup"><span data-stu-id="75205-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="75205-279">Reduzir o número de Olá de campos utilizando uma projeção de coluna</span><span class="sxs-lookup"><span data-stu-id="75205-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="75205-280">Em muitos casos, a análise não necessita de todas as colunas de Olá do fluxo de entrada Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="75205-281">Pode utilizar um tooproject consulta um conjunto mais pequeno de devolvidos os campos que na consulta pass-through Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="75205-282">Consulta de Olá seguir de toohello Olá código editor de alteração:</span><span class="sxs-lookup"><span data-stu-id="75205-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="75205-283">Clique em **teste** novamente.</span><span class="sxs-lookup"><span data-stu-id="75205-283">Click **Test** again.</span></span> 

    ![Tarefa de Stream Analytics uma saída de projeção, que mostra 25 registos gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="75205-285">Contagem de receber chamadas por região: janela em cascata com agregação</span><span class="sxs-lookup"><span data-stu-id="75205-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="75205-286">Suponha que pretende que o número de Olá toocount de chamadas recebidas por região.</span><span class="sxs-lookup"><span data-stu-id="75205-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="75205-287">Dados de transmissão em fluxo, se pretender que as funções de agregação tooperform como contar, terá de fluxo de Olá toosegment em unidades temporais (uma vez que o fluxo de dados de Olá em si é efetivamente endless).</span><span class="sxs-lookup"><span data-stu-id="75205-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="75205-288">Fazê-lo utilizando uma análise de transmissão em fluxo [função de janela](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="75205-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="75205-289">Em seguida, pode trabalhar com dados de Olá dentro dessa janela como uma unidade.</span><span class="sxs-lookup"><span data-stu-id="75205-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="75205-290">Para esta transformação, pretende uma sequência de temporais windows que não se sobreponham — cada janela terá um conjunto de dados que pode agrupar e agregado discreto.</span><span class="sxs-lookup"><span data-stu-id="75205-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="75205-291">Este tipo de janela é referenciado tooas um *janela em cascata* .</span><span class="sxs-lookup"><span data-stu-id="75205-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="75205-292">Na janela em cascata de Olá, pode obter uma contagem de chamadas recebidas de Olá agrupados por `SwitchNum`, que representa o país olá onde chamada Olá teve origem.</span><span class="sxs-lookup"><span data-stu-id="75205-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="75205-293">Consulta de Olá seguir de toohello Olá código editor de alteração:</span><span class="sxs-lookup"><span data-stu-id="75205-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="75205-294">Esta consulta utiliza Olá `Timestamp By` palavra-chave na Olá `FROM` toospecify cláusula o campo que timestamp no Olá janela do fluxo toouse toodefine Olá em cascata de entrada.</span><span class="sxs-lookup"><span data-stu-id="75205-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="75205-295">Neste caso, o janela Olá divide dados Olá em segmentos por Olá `CallRecTime` campo em cada registo.</span><span class="sxs-lookup"><span data-stu-id="75205-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="75205-296">(Não se for especificado nenhum campo, operação de modos de janela Olá utiliza Olá hora que cada evento chegar ao hub de eventos de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="75205-297">Consulte "Tempo Vs aplicação hora da chegada de" em [referência de linguagem de consulta de análise de sequência](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="75205-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="75205-298">projecção de Olá inclui `System.Timestamp`, que devolve um carimbo para o end Olá de cada janela.</span><span class="sxs-lookup"><span data-stu-id="75205-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="75205-299">toospecify que pretende que o toouse uma janela em cascata, utilizar Olá [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) funcionar em Olá `GROUP BY `cláusula.</span><span class="sxs-lookup"><span data-stu-id="75205-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="75205-300">Na função Olá, especifique uma unidade de tempo (em qualquer lugar a partir de um dia de tooa aos microssegundos) e um tamanho de janela (unidades quantos).</span><span class="sxs-lookup"><span data-stu-id="75205-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="75205-301">Neste exemplo, janela em cascata de Olá consiste em intervalos de 5 segundos, pelo que irá obter uma contagem por país para visão de cada 5 segundos de chamadas.</span><span class="sxs-lookup"><span data-stu-id="75205-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="75205-302">Clique em **teste** novamente.</span><span class="sxs-lookup"><span data-stu-id="75205-302">Click **Test** again.</span></span> <span data-ttu-id="75205-303">Nos resultados de Olá, tenha em atenção que carimbos Olá em **WindowEnd** são em incrementos de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="75205-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Tarefa de Stream Analytics uma saída de agregação, que mostra 13 registos gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="75205-305">Detetar fraude SIM através de uma associação automática</span><span class="sxs-lookup"><span data-stu-id="75205-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="75205-306">Neste exemplo, pode considerar a utilização fraudulenta toobe chamadas provenientes Olá mesmo utilizador, mas em diferentes localizações dentro de 5 segundos um do outro.</span><span class="sxs-lookup"><span data-stu-id="75205-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="75205-307">Por exemplo, hello mesmo utilizador não é possível legitimamente efetuar uma chamada de Olá E.U.A. e da Austrália em Olá mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="75205-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="75205-308">toocheck nestes casos, pode utilizar uma associação automática de Olá transmissão em fluxo de dados toojoin Olá tooitself de fluxo com base no Olá `CallRecTime` valor.</span><span class="sxs-lookup"><span data-stu-id="75205-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="75205-309">Em seguida, pode ver para chamada regista onde hello `CallingIMSI` valor (Olá originadas número) é Olá mesmo, mas Olá `SwitchNum` valor (país de origem) não é Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="75205-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="75205-310">Quando utiliza uma associação com dados de transmissão em fluxo, a associação de Olá tem de fornecer Olá para que correspondam a linhas alguns limites podem ser separados no tempo.</span><span class="sxs-lookup"><span data-stu-id="75205-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="75205-311">(Conforme indicado anteriormente, Olá dados de transmissão em fluxo é efetivamente endless.) limites de tempo de Olá para a relação de Olá são especificados no interior Olá `ON` cláusula de associação de Olá, utilizando Olá `DATEDIFF` função.</span><span class="sxs-lookup"><span data-stu-id="75205-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="75205-312">Neste caso, a associação Olá baseia-se num intervalo de 5 segundos de dados de chamada.</span><span class="sxs-lookup"><span data-stu-id="75205-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="75205-313">Consulta de Olá seguir de toohello Olá código editor de alteração:</span><span class="sxs-lookup"><span data-stu-id="75205-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="75205-314">Esta consulta é como qualquer associação do SQL Server, exceto Olá `DATEDIFF` função na União Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="75205-315">Esta é uma versão de `DATEDIFF` tooStreaming específico análise, e tem de aparecer no Olá `ON...BETWEEN` cláusula.</span><span class="sxs-lookup"><span data-stu-id="75205-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="75205-316">parâmetros de Olá são uma unidade de tempo (segundos neste exemplo) e os aliases de Olá de duas origens de Olá para associar Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="75205-317">(Isto é diferente do Olá SQL padrão `DATEDIFF` função.)</span><span class="sxs-lookup"><span data-stu-id="75205-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="75205-318">Olá `WHERE` cláusula inclui condição Olá que sinalizadores chamada fraudulentas Olá: comutadores origem Olá não são Olá mesmo.</span><span class="sxs-lookup"><span data-stu-id="75205-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="75205-319">Clique em **teste** novamente.</span><span class="sxs-lookup"><span data-stu-id="75205-319">Click **Test** again.</span></span> 

    ![Tarefa de Stream Analytics uma saída de associação automática, que mostra 6 registos gerados](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="75205-321">Clique em **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="75205-321">Click **Save**.</span></span> <span data-ttu-id="75205-322">Isto poupa a consulta de associação automática Olá como parte da tarefa de análise de transmissão em fluxo Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="75205-323">(Se não guardar os dados de exemplo de Olá.)</span><span class="sxs-lookup"><span data-stu-id="75205-323">(It doesn't save hello sample data.)</span></span>

    ![Guardar a tarefa de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="75205-325">Criar dados de toostore transformado sink de saída</span><span class="sxs-lookup"><span data-stu-id="75205-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="75205-326">Definiu um fluxo de eventos, eventos de entrada tooingest do hub de eventos e uma consulta tooperform uma transformação através de fluxo de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="75205-327">último passo de Olá é toodefine um sink de saída para a tarefa de Olá — ou seja, um Olá de toowrite local transformados fluxo para.</span><span class="sxs-lookup"><span data-stu-id="75205-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="75205-328">Pode utilizar muitos recursos como saída sinks — uma base de dados do SQL Server, o table storage, armazenamento do Data Lake, Power BI e até mesmo outro hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="75205-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="75205-329">Para este tutorial, irá escrever Olá fluxo tooAzure Blob Storage, o que é uma escolha típica para recolher informações de eventos para análise posterior, uma vez que o se adapta a dados não estruturados.</span><span class="sxs-lookup"><span data-stu-id="75205-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="75205-330">Se tiver uma conta de armazenamento de blob existente, pode utilizar isso.</span><span class="sxs-lookup"><span data-stu-id="75205-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="75205-331">Para este tutorial, vamos mostrar-lhe como toocreate um novo armazenamento conta apenas para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="75205-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="75205-332">Criar uma conta do Blob Storage do Azure</span><span class="sxs-lookup"><span data-stu-id="75205-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="75205-333">No portal do Azure Olá, devolva toohello painel de tarefas de análise de transmissão em fluxo.</span><span class="sxs-lookup"><span data-stu-id="75205-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="75205-334">(Se tiver fechado painel Olá, procure `sa_frauddetection_job_demo` no Olá **todos os recursos** painel.)</span><span class="sxs-lookup"><span data-stu-id="75205-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="75205-335">No Olá **tarefa topologia** secção, clique em Olá **saída** caixa.</span><span class="sxs-lookup"><span data-stu-id="75205-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="75205-336">No Olá **saídas** painel, clique em  **+ &nbsp;adicionar** e, em seguida, preencha painel Olá com estes valores:</span><span class="sxs-lookup"><span data-stu-id="75205-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="75205-337">**O alias de saída**: Utilize o nome de Olá `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="75205-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="75205-338">**Sink**: selecione **armazenamento de BLOBs**.</span><span class="sxs-lookup"><span data-stu-id="75205-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="75205-339">**Importar opções**: selecione **armazenamento de BLOBs de utilização da subscrição atual**.</span><span class="sxs-lookup"><span data-stu-id="75205-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="75205-340">**Conta de armazenamento**.</span><span class="sxs-lookup"><span data-stu-id="75205-340">**Storage account**.</span></span> <span data-ttu-id="75205-341">Selecione **criar nova conta de armazenamento.**</span><span class="sxs-lookup"><span data-stu-id="75205-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="75205-342">**Conta de armazenamento** (segunda caixa).</span><span class="sxs-lookup"><span data-stu-id="75205-342">**Storage account** (second box).</span></span> <span data-ttu-id="75205-343">Introduza `YOURNAMEsademo`, onde `YOURNAME` é o nome ou de outra cadeia exclusiva.</span><span class="sxs-lookup"><span data-stu-id="75205-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="75205-344">nome de Olá pode utilizar apenas letras minúsculas e números, e tem de ser exclusivo em todo o Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="75205-345">**Contentor**.</span><span class="sxs-lookup"><span data-stu-id="75205-345">**Container**.</span></span> <span data-ttu-id="75205-346">Introduza `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="75205-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="75205-347">o nome de conta do storage Olá e nome do contentor são tooprovide em conjunto utilizado um URI para armazenamento de BLOBs de Olá, como esta:</span><span class="sxs-lookup"><span data-stu-id="75205-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Painel "Novo de saída" para a tarefa de Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="75205-349">Clique em **Criar**.</span><span class="sxs-lookup"><span data-stu-id="75205-349">Click **Create**.</span></span> 

    <span data-ttu-id="75205-350">O Azure cria a conta de armazenamento Olá e gera automaticamente uma chave.</span><span class="sxs-lookup"><span data-stu-id="75205-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="75205-351">Fechar Olá **saídas** painel.</span><span class="sxs-lookup"><span data-stu-id="75205-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="75205-352">Iniciar a tarefa de análise de transmissão em fluxo Olá</span><span class="sxs-lookup"><span data-stu-id="75205-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="75205-353">tarefa de Olá está agora configurada.</span><span class="sxs-lookup"><span data-stu-id="75205-353">hello job is now configured.</span></span> <span data-ttu-id="75205-354">Já especificou uma entrada (hub de eventos de Olá), uma transformação (Olá toolook de consulta para chamadas fraudulentas) e um resultado (armazenamento de BLOBs).</span><span class="sxs-lookup"><span data-stu-id="75205-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="75205-355">Agora pode iniciar a tarefa de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="75205-356">Certifique-se a aplicação de TelcoGenerator Olá está em execução.</span><span class="sxs-lookup"><span data-stu-id="75205-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="75205-357">No painel de tarefas Olá, clique em **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="75205-357">In hello job blade, click **Start**.</span></span>

    ![Iniciar a tarefa de Stream Analytics Olá](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="75205-359">No Olá **iniciar tarefa** painel, tarefa saída hora de início, selecione **agora**.</span><span class="sxs-lookup"><span data-stu-id="75205-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="75205-360">Clique em **iniciar**.</span><span class="sxs-lookup"><span data-stu-id="75205-360">Click **Start**.</span></span> 

    ![Painel "Iniciar a tarefa" para a tarefa de Stream Analytics Olá](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="75205-362">Azure notifica-o quando a tarefa de Olá foi iniciado e, no painel de tarefas Olá, é apresentado o estado de Olá como **executar**.</span><span class="sxs-lookup"><span data-stu-id="75205-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Tarefa de Stream Analytics Estado, mostrar "Em execução"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="75205-364">Examine os dados de Olá transformado</span><span class="sxs-lookup"><span data-stu-id="75205-364">Examine hello transformed data</span></span>

<span data-ttu-id="75205-365">Tem agora uma tarefa de transmissão em fluxo análise completa.</span><span class="sxs-lookup"><span data-stu-id="75205-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="75205-366">tarefa Olá examinar um fluxo de metadados de chamada telefónica, à procura de chamadas telefónicas fraudulentas em tempo real e escrever informações sobre essas toostorage chamadas fraudulentas.</span><span class="sxs-lookup"><span data-stu-id="75205-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="75205-367">toocomplete neste tutorial, é aconselhável toolook dados Olá que está a ser capturadas pela tarefa de análise de transmissão em fluxo Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="75205-368">dados Olá estão a ser escritos tooAzure blogue armazenamento segmentos (ficheiros).</span><span class="sxs-lookup"><span data-stu-id="75205-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="75205-369">Pode utilizar qualquer ferramenta que lê o Blob Storage do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="75205-370">Conforme indicado na secção pré-requisitos de Olá, pode utilizar extensões do Azure no Visual Studio, ou pode utilizar uma ferramenta como o [Explorador de armazenamento do Azure](http://storageexplorer.com/) ou [Explorador do Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="75205-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="75205-371">Ao examinar o conteúdo de Olá de um ficheiro no armazenamento de BLOBs, verá algo semelhante Olá seguinte:</span><span class="sxs-lookup"><span data-stu-id="75205-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Armazenamento de Blobs do Azure com a análise de transmissão em fluxo de saída](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="75205-373">Limpar recursos</span><span class="sxs-lookup"><span data-stu-id="75205-373">Clean up resources</span></span>

<span data-ttu-id="75205-374">Temos de artigos adicionais que continuar com o cenário de deteção de fraudes Olá e que utilizam recursos Olá que criou neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="75205-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="75205-375">Se quiser toocontinue, consulte Sugestões Olá em **passos** mais tarde.</span><span class="sxs-lookup"><span data-stu-id="75205-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="75205-376">No entanto, se tiver terminado e não precisa de recursos de Olá que criou, pode eliminá-los para que poderá não pagar desnecessários do Azure.</span><span class="sxs-lookup"><span data-stu-id="75205-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="75205-377">Nesse caso, sugerimos que Olá a seguir:</span><span class="sxs-lookup"><span data-stu-id="75205-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="75205-378">Pare a tarefa de análise de transmissão em fluxo de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="75205-379">No Olá **tarefas** painel, clique em **parar** na parte superior do Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="75205-380">Pare a aplicação de Telco gerador de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="75205-381">Na janela de comando de olá onde começou aplicação Olá, prima Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="75205-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="75205-382">Se tiver criado uma nova conta de armazenamento de blob apenas para este tutorial, elimine-o.</span><span class="sxs-lookup"><span data-stu-id="75205-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="75205-383">Elimine a tarefa de análise de transmissão em fluxo Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="75205-384">Elimine o hub de eventos de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="75205-385">Elimine o espaço de nomes de hub de eventos de Olá.</span><span class="sxs-lookup"><span data-stu-id="75205-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="75205-386">Obter suporte</span><span class="sxs-lookup"><span data-stu-id="75205-386">Get support</span></span>

<span data-ttu-id="75205-387">Para obter mais assistência, experimente a nossa [fórum do Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="75205-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="75205-388">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="75205-388">Next steps</span></span>

<span data-ttu-id="75205-389">Pode continuar a este tutorial com Olá seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="75205-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="75205-390">[Stream Analytics e o Power BI: um dashboard de análise em tempo real para dados de transmissão em fluxo](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="75205-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="75205-391">Este artigo mostra como toosend Olá resultado TelCo Olá Stream Analytics tarefa tooPower BI para visualização em tempo real e análise.</span><span class="sxs-lookup"><span data-stu-id="75205-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="75205-392">[Como toostore dados do Azure Stream Analytics numa Cache de Redis do Azure com as funções do Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="75205-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="75205-393">Este artigo mostra como toouse das funções do Azure toowrite fraudulenta chama tooan a cache de Redis do Azure através de uma fila do Service Bus.</span><span class="sxs-lookup"><span data-stu-id="75205-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="75205-394">Para obter mais informações sobre o Stream Analytics em geral, tente nestes artigos:</span><span class="sxs-lookup"><span data-stu-id="75205-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="75205-395">Introdução tooAzure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="75205-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="75205-396">Tarefas de escala do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="75205-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="75205-397">Referência do idioma de consulta do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="75205-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="75205-398">Referência de API do REST de gestão do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="75205-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
