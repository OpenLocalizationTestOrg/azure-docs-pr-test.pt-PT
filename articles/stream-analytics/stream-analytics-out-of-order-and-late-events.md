---
title: aaaHandling ordem de eventos e lateness Azure Stream Analytics | Microsoft Docs
description: Saiba mais sobre como funciona o Stream Analytics com eventos fora de ordem ou enlace tardio em fluxos de dados.
keywords: fora de ordem, eventos
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 87c028662fbafbf4f72f57f215d017f65bb649f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="adb01-104">Processamento de ordem de eventos do Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="adb01-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="adb01-105">Numa transmissão em fluxo temporal dados de eventos, cada evento é registado com a hora de Olá esse evento Olá é recebido.</span><span class="sxs-lookup"><span data-stu-id="adb01-105">In a temporal data stream of events, each event is recorded with hello time that hello event is received.</span></span> <span data-ttu-id="adb01-106">Algumas condições poderão fazer com que os fluxos de eventos toooccasionally receber alguns eventos por uma ordem diferente, a qual foram enviadas.</span><span class="sxs-lookup"><span data-stu-id="adb01-106">Some conditions might cause event streams toooccasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="adb01-107">Retransmitir uma TCP simple ou até mesmo um desfasamento de relógio entre Olá enviar hello a receber de hub de eventos e de dispositivos pode causar este toooccur.</span><span class="sxs-lookup"><span data-stu-id="adb01-107">A simple TCP retransmit, or even a clock skew between hello sending device and hello receiving event hub might cause this toooccur.</span></span> <span data-ttu-id="adb01-108">Eventos de "Pontuação" também são adicionados tooreceived fluxos de eventos, tempo de Olá tooadvance na ausência Olá arrivals de eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-108">“Punctuation” events also are added tooreceived event streams, tooadvance hello time in hello absence of event arrivals.</span></span> <span data-ttu-id="adb01-109">Estas são necessárias em cenários como "Notificar-me quando não existem inícios de sessão ocorrer para 3 minutos."</span><span class="sxs-lookup"><span data-stu-id="adb01-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="adb01-110">Fluxos de entrada que não estão na ordem são:</span><span class="sxs-lookup"><span data-stu-id="adb01-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="adb01-111">Ordenada (e, por isso **atrasada**).</span><span class="sxs-lookup"><span data-stu-id="adb01-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="adb01-112">Tendo em conta pelo sistema Olá, de acordo com a política de utilizador especificado tooa.</span><span class="sxs-lookup"><span data-stu-id="adb01-112">Adjusted by hello system, according tooa user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="adb01-113">Tolerância lateness</span><span class="sxs-lookup"><span data-stu-id="adb01-113">Lateness tolerance</span></span>
<span data-ttu-id="adb01-114">Do Stream Analytics tolerates estes tipos de cenários.</span><span class="sxs-lookup"><span data-stu-id="adb01-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="adb01-115">Análise de fluxo tem o processamento de eventos "fora de ordem" e "dinâmico".</span><span class="sxs-lookup"><span data-stu-id="adb01-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="adb01-116">Processa a estes eventos no Olá seguintes formas:</span><span class="sxs-lookup"><span data-stu-id="adb01-116">It handles these events in hello following ways:</span></span>

* <span data-ttu-id="adb01-117">Os eventos que chegam desordenados mas dentro Olá definir tolerância são **reordenados por timestamp**.</span><span class="sxs-lookup"><span data-stu-id="adb01-117">Events that arrive out of order but within hello set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="adb01-118">Os eventos que chegam posterior tolerância são **removido ou ajustado**.</span><span class="sxs-lookup"><span data-stu-id="adb01-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="adb01-119">**Tendo em conta**: tooappear ajustada toohave chegou momento Olá mais recente aceitável.</span><span class="sxs-lookup"><span data-stu-id="adb01-119">**Adjusted**: Adjusted tooappear toohave arrived at hello latest acceptable time.</span></span>
    * <span data-ttu-id="adb01-120">**Removido**: rejeitados.</span><span class="sxs-lookup"><span data-stu-id="adb01-120">**Dropped**: Discarded.</span></span>

![Processamento de eventos do Stream Analytics](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-hello-number-of-out-of-order-events"></a><span data-ttu-id="adb01-122">Reduza o número de Olá de eventos de fora de ordem</span><span class="sxs-lookup"><span data-stu-id="adb01-122">Reduce hello number of out-of-order events</span></span>

<span data-ttu-id="adb01-123">Porque o Stream Analytics aplica uma transformação temporal quando processa eventos de entrada (por exemplo, para as agregações ou associações temporais), o Stream Analytics ordena os eventos recebidos por ordem de timestamp.</span><span class="sxs-lookup"><span data-stu-id="adb01-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="adb01-124">Quando estiver a palavra-chave de Olá "timestamp por" **não** utilizado, tempo de colocar em fila de eventos do Olá Event Hubs do Azure é utilizado por predefinição.</span><span class="sxs-lookup"><span data-stu-id="adb01-124">When hello “timestamp by” keyword is **not** used, hello Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="adb01-125">Os Event Hubs garante monotonicity de Olá timestamp em cada partição Olá do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-125">Event Hubs guarantees monotonicity of hello timestamp on each partition of hello event hub.</span></span> <span data-ttu-id="adb01-126">Esta ação garante também que os eventos a partir de todas as partições serão Unidos timestamp por ordem.</span><span class="sxs-lookup"><span data-stu-id="adb01-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="adb01-127">Estes dois garantias de Event Hubs Certifique-se não há eventos fora de ordem.</span><span class="sxs-lookup"><span data-stu-id="adb01-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="adb01-128">Por vezes, é importante para timestamp toouse Olá do remetente.</span><span class="sxs-lookup"><span data-stu-id="adb01-128">Sometimes, it’s important for you toouse hello sender’s timestamp.</span></span> <span data-ttu-id="adb01-129">Nesse caso, um carimbo do payload do evento Olá é escolhido utilizando "timestamp por".</span><span class="sxs-lookup"><span data-stu-id="adb01-129">In that case, a timestamp from hello event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="adb01-130">Nestes cenários, poderão ser introduzidas um ou mais origens de misorder de evento:</span><span class="sxs-lookup"><span data-stu-id="adb01-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="adb01-131">Os produtores de eventos tem skews relógio.</span><span class="sxs-lookup"><span data-stu-id="adb01-131">Event producers have clock skews.</span></span> <span data-ttu-id="adb01-132">Isto é comum quando produtores de computadores diferentes, pelo que têm relógios diferentes.</span><span class="sxs-lookup"><span data-stu-id="adb01-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="adb01-133">Não há um atraso de rede a partir da origem de Olá Olá eventos toohello destino do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-133">There's a network delay from hello source of hello events toohello destination event hub.</span></span>
* <span data-ttu-id="adb01-134">O relógio skews existem entre as partições do hub de eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="adb01-135">Do Stream Analytics pela primeira vez ordena eventos a partir de todas as partições do hub de eventos por hora de colocar em fila de eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="adb01-136">Em seguida, examina a sequência de dados de Olá misordered eventos.</span><span class="sxs-lookup"><span data-stu-id="adb01-136">Then, it examines hello data stream for misordered events.</span></span>

<span data-ttu-id="adb01-137">No separador de configuração de Olá, consulte Olá seguintes predefinições:</span><span class="sxs-lookup"><span data-stu-id="adb01-137">On hello configuration tab, you see hello following defaults:</span></span>

![Processamento do Stream Analytics fora de ordem](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="adb01-139">Se utilizar 0 segundos como período de tolerância de fora de ordem de Olá, afirma que todos os eventos são, por ordem, tempo Olá.</span><span class="sxs-lookup"><span data-stu-id="adb01-139">If you use 0 seconds as hello out-of-order tolerance window, you are asserting that all events are in order all hello time.</span></span> <span data-ttu-id="adb01-140">Tendo em conta Olá três as origens de eventos misordered, é provável que este é verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="adb01-140">Given hello three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="adb01-141">tooallow Stream Analytics toocorrect misorder um evento, pode especificar um período de tolerância fora de ordem de diferente de zero.</span><span class="sxs-lookup"><span data-stu-id="adb01-141">tooallow Stream Analytics toocorrect an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="adb01-142">Stream Analytics coloca os eventos de cópia de segurança toothat janela e, em seguida, reordena-los utilizando Olá timestamp que escolheu.</span><span class="sxs-lookup"><span data-stu-id="adb01-142">Stream Analytics buffers events up toothat window, and then reorders them by using hello timestamp you chose.</span></span> <span data-ttu-id="adb01-143">Em seguida, aplica-se transformação temporal Olá.</span><span class="sxs-lookup"><span data-stu-id="adb01-143">It then applies hello temporal transformation.</span></span> <span data-ttu-id="adb01-144">Pode começar com uma janela de 3-segundo e otimizar Olá valor tooreduce Olá diversas eventos que são hora ajustada.</span><span class="sxs-lookup"><span data-stu-id="adb01-144">You can start with a 3-second window, and tune hello value tooreduce hello number of events that are time-adjusted.</span></span> 

<span data-ttu-id="adb01-145">Um efeito de colocação em memória intermédia Olá está saída Olá **atrasada pelo Olá mesmo período de tempo**.</span><span class="sxs-lookup"><span data-stu-id="adb01-145">A side effect of hello buffering is that hello output is **delayed by hello same amount of time**.</span></span> <span data-ttu-id="adb01-146">Pode otimizar Olá valor tooreduce Olá número fora de ordem eventos e manter a latência de tarefa Olá baixa.</span><span class="sxs-lookup"><span data-stu-id="adb01-146">You can tune hello value tooreduce hello number of out-of-order events, and keep hello job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="adb01-147">Obter ajuda</span><span class="sxs-lookup"><span data-stu-id="adb01-147">Get help</span></span>
<span data-ttu-id="adb01-148">Para obter assistência adicional, experimente a nossa [fórum do Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="adb01-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="adb01-149">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="adb01-149">Next steps</span></span>
* [<span data-ttu-id="adb01-150">Introdução tooStream análise</span><span class="sxs-lookup"><span data-stu-id="adb01-150">Introduction tooStream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="adb01-151">Introdução ao Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="adb01-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="adb01-152">Dimensionar tarefas do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="adb01-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="adb01-153">Referência de linguagem de consulta do Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="adb01-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="adb01-154">Referência da REST API de gestão de análise de fluxo</span><span class="sxs-lookup"><span data-stu-id="adb01-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)