---
title: "aaaHow distribuída funciona de dados no Azure SQL Data Warehouse | Microsoft Docs"
description: "Saiba como os dados são distribuídos para em massa paralelas processamento (MPP) e Olá opções de distribuição de tabelas do Azure SQL Data Warehouse e Parallel Data Warehouse."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 9a712d8d5251e4391ede245105918283aaa4b193
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="d27fc-103">Dados distribuídos e tabelas distribuídas para em massa paralelas processamento (MPP)</span><span class="sxs-lookup"><span data-stu-id="d27fc-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="d27fc-104">Saiba como os dados de utilizador são distribuídos no Azure SQL Data Warehouse e Parallel Data Warehouse, que são os sistemas de em massa paralelas processamento (MPP) da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d27fc-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="d27fc-105">Conceber a sua toouse do armazém de dados dados distribuídos eficazmente ajuda-o a tooachieve Olá processamento de consultas vantagens de Olá arquitetura MPP.</span><span class="sxs-lookup"><span data-stu-id="d27fc-105">Designing your data warehouse toouse distributed data effectively helps you tooachieve hello query processing benefits of hello MPP architecture.</span></span> <span data-ttu-id="d27fc-106">Algumas opções de design de base de dados podem ter um impacto significativo em melhorar o desempenho das consultas.</span><span class="sxs-lookup"><span data-stu-id="d27fc-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="d27fc-107">O Azure SQL Data Warehouse e Olá de utilização de Parallel Data Warehouse mesmo processamento paralelo em grande escala (MPP) design, mas têm algumas diferenças devido a Olá subjacente plataforma.</span><span class="sxs-lookup"><span data-stu-id="d27fc-107">Azure SQL Data Warehouse and Parallel Data Warehouse use hello same Massively Parallel Processing (MPP) design, but they have a few differences because of hello underlying platform.</span></span> <span data-ttu-id="d27fc-108">O SQL Data Warehouse é uma plataforma como serviço (PaaS) que é executado no Azure.</span><span class="sxs-lookup"><span data-stu-id="d27fc-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="d27fc-109">Parallel Data Warehouse é executado no sistema de plataforma de análise (APS) que é uma aplicação no local que é executado no Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d27fc-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="d27fc-110">O que é distribuídos dados?</span><span class="sxs-lookup"><span data-stu-id="d27fc-110">What is distributed data?</span></span>
<span data-ttu-id="d27fc-111">No SQL Data Warehouse e Parallel Data Warehouse, dados distribuídos refere-se dados toouser que são armazenados em várias localizações em Olá sistema MPP.</span><span class="sxs-lookup"><span data-stu-id="d27fc-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers toouser data that is stored in multiple locations across hello MPP system.</span></span> <span data-ttu-id="d27fc-112">Cada uma dessas localizações funciona como um armazenamento independente e a unidade de processamento que executa as consultas no respetivo parte dos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of hello data.</span></span> <span data-ttu-id="d27fc-113">Dados distribuídos são fundamental toorunning consultas no desempenho de consulta elevado tooachieve paralela.</span><span class="sxs-lookup"><span data-stu-id="d27fc-113">Distributed data is fundamental toorunning queries in parallel tooachieve high query performance.</span></span>

<span data-ttu-id="d27fc-114">toodistribute dados, o armazém de dados de Olá atribui cada linha de uma tabela tooone distribuída da localização do utilizador.</span><span class="sxs-lookup"><span data-stu-id="d27fc-114">toodistribute data, hello data warehouse assigns each row of a user table tooone distributed location.</span></span>  <span data-ttu-id="d27fc-115">Pode distribuir tabelas com um método de distribuição hash nem um método de round robin.</span><span class="sxs-lookup"><span data-stu-id="d27fc-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="d27fc-116">método de distribuição Olá é especificado em Olá instrução CREATE TABLE.</span><span class="sxs-lookup"><span data-stu-id="d27fc-116">hello distribution method is specified in hello CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="d27fc-117">Tabelas hash distribuída</span><span class="sxs-lookup"><span data-stu-id="d27fc-117">Hash-distributed tables</span></span>
<span data-ttu-id="d27fc-118">Olá seguinte diagrama ilustra como um completo (tabela não distribuído) obtém armazenado como uma tabela hash distribuída.</span><span class="sxs-lookup"><span data-stu-id="d27fc-118">hello following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="d27fc-119">Uma função determinista atribui a distribuição de tooone de toobelong cada linha.</span><span class="sxs-lookup"><span data-stu-id="d27fc-119">A deterministic function assigns each row toobelong tooone distribution.</span></span> <span data-ttu-id="d27fc-120">Na definição da tabela Olá, uma das colunas de Olá está designada como coluna de distribuição Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-120">In hello table definition, one of hello columns is designated as hello distribution column.</span></span> <span data-ttu-id="d27fc-121">função de hash de Olá utiliza o valor de Olá no Olá distribuição coluna tooassign distribuição de tooa cada linha.</span><span class="sxs-lookup"><span data-stu-id="d27fc-121">hello hash function uses hello value in hello distribution column tooassign each row tooa distribution.</span></span>

<span data-ttu-id="d27fc-122">Existem considerações de desempenho para a seleção de Olá de uma coluna de distribuição, como distinctness, desfasamento de dados e tipos de Olá de consultas executadas num sistema Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-122">There are performance considerations for hello selection of a distribution column, such as distinctness, data skew, and hello types of queries run on hello system.</span></span>

<span data-ttu-id="d27fc-123">![Tabela de distribuídas](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "tabela distribuídas")</span><span class="sxs-lookup"><span data-stu-id="d27fc-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="d27fc-124">Cada linha pertence tooone distribuição.</span><span class="sxs-lookup"><span data-stu-id="d27fc-124">Each row belongs tooone distribution.</span></span>  
* <span data-ttu-id="d27fc-125">Um algoritmo de hash determinista atribui a distribuição de tooone cada linha.</span><span class="sxs-lookup"><span data-stu-id="d27fc-125">A deterministic hash algorithm assigns each row tooone distribution.</span></span>  
* <span data-ttu-id="d27fc-126">número de Olá de linhas de tabela por distribuição varia conforme exibido tamanhos diferentes de Olá de tabelas.</span><span class="sxs-lookup"><span data-stu-id="d27fc-126">hello number of table rows per distribution varies as shown by hello different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="d27fc-127">Tabelas distribuídas round robin</span><span class="sxs-lookup"><span data-stu-id="d27fc-127">Round-robin distributed tables</span></span>
<span data-ttu-id="d27fc-128">Uma tabela distribuída round robin distribui linhas Olá atribuindo a distribuição de tooa cada linha de uma forma sequencial.</span><span class="sxs-lookup"><span data-stu-id="d27fc-128">A round-robin distributed table distributes hello rows by assigning each row tooa distribution in a sequential manner.</span></span> <span data-ttu-id="d27fc-129">É dados tooload rápido numa tabela round robin, mas o desempenho de consulta pode ser mais lento.</span><span class="sxs-lookup"><span data-stu-id="d27fc-129">It is quick tooload data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="d27fc-130">Associar uma tabela de round robin, normalmente, requer reshuffling Olá linhas tooenable Olá consulta tooproduce um resultado preciso, que demora tempo.</span><span class="sxs-lookup"><span data-stu-id="d27fc-130">Joining a round-robin table usually requires reshuffling hello rows tooenable hello query tooproduce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="d27fc-131">Localizações de armazenamento distribuído são denominadas distribuições</span><span class="sxs-lookup"><span data-stu-id="d27fc-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="d27fc-132">Cada localização distribuída é designada uma distribuição.</span><span class="sxs-lookup"><span data-stu-id="d27fc-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="d27fc-133">Quando executa uma consulta em paralelo, cada distribuição executa uma consulta SQL na sua parte dos dados de Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-133">When a query runs in parallel, each distribution performs a SQL query on its portion of hello data.</span></span> <span data-ttu-id="d27fc-134">SQL Data Warehouse utiliza a consulta de Olá toorun de base de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="d27fc-134">SQL Data Warehouse uses SQL Database toorun hello query.</span></span> <span data-ttu-id="d27fc-135">Parallel Data Warehouse utiliza a consulta do SQL Server toorun Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-135">Parallel Data Warehouse uses SQL Server toorun hello query.</span></span> <span data-ttu-id="d27fc-136">Esta estrutura de arquitetura de nada partilhado é fundamental tooachieving Escalamento horizontal computação paralela.</span><span class="sxs-lookup"><span data-stu-id="d27fc-136">This shared-nothing architecture design is fundamental tooachieving scale-out parallel computing.</span></span>

### <a name="can-i-view-hello-distributions"></a><span data-ttu-id="d27fc-137">Pode ver as distribuições de Olá?</span><span class="sxs-lookup"><span data-stu-id="d27fc-137">Can I view hello distributions?</span></span>
<span data-ttu-id="d27fc-138">Cada distribuição tem um ID de distribuição e fica visível em vistas de sistema que dizem respeito tooSQL do armazém de dados e Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="d27fc-138">Each distribution has a distribution ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="d27fc-139">Pode utilizar o desempenho das consultas tootroubleshoot Olá distribuição ID e outros problemas.</span><span class="sxs-lookup"><span data-stu-id="d27fc-139">You can use hello distribution ID tootroubleshoot query performance and other problems.</span></span> <span data-ttu-id="d27fc-140">Para obter uma lista de vistas de sistema Olá, consulte Olá [vista de sistema MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="d27fc-140">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="d27fc-141">Diferença entre uma distribuição e um nó de computação</span><span class="sxs-lookup"><span data-stu-id="d27fc-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="d27fc-142">Uma distribuição é a unidade básica de Olá para armazenar dados distribuídos e processamento de consultas paralelas.</span><span class="sxs-lookup"><span data-stu-id="d27fc-142">A distribution is hello basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="d27fc-143">Distribuições estão agrupadas em nós de computação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="d27fc-144">Cada nó de computação controla as distribuições de um ou mais.</span><span class="sxs-lookup"><span data-stu-id="d27fc-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="d27fc-145">Analytics Platform System usa nós de computação como um componente central das capacidades de arquitetura e escalável de hardware de Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-145">Analytics Platform System uses Compute nodes as a central component of hello hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="d27fc-146">Utiliza sempre oito distribuições por nó de computação, conforme mostrado no diagrama de Olá para tabelas hash distribuída.</span><span class="sxs-lookup"><span data-stu-id="d27fc-146">It always uses eight distributions per Compute node, as shown in hello diagram for hash-distributed tables.</span></span> <span data-ttu-id="d27fc-147">Olá, número de nós de computação e Olá, por conseguinte, o número de distribuições, é determinado pelo número de Olá de nós de computação que comprar para aplicação Olá.</span><span class="sxs-lookup"><span data-stu-id="d27fc-147">hello number of Compute nodes, and therefore hello number of distributions, is determined by hello number of Compute nodes you purchase for hello appliance.</span></span> <span data-ttu-id="d27fc-148">Por exemplo, se comprar oito nós de computação, obter 64 distribuições (8 nós x 8 distribuições/nó de computação).</span><span class="sxs-lookup"><span data-stu-id="d27fc-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="d27fc-149">Armazém de dados do SQL Server tem um número fixo de 60 Distribuições e um número de nós de computação flexível.</span><span class="sxs-lookup"><span data-stu-id="d27fc-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="d27fc-150">nós de computação Olá são implementados com recursos de computação e armazenamento do Azure.</span><span class="sxs-lookup"><span data-stu-id="d27fc-150">hello Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="d27fc-151">Pode alterar o número de Olá de nós de computação de acordo com toohello back-end serviço carga de trabalho e a capacidade de computação de Olá (DWUs) Especifique Olá do armazém de dados.</span><span class="sxs-lookup"><span data-stu-id="d27fc-151">hello number of Compute nodes can change according toohello backend service workload and hello computing capacity (DWUs) you specify for hello data warehouse.</span></span> <span data-ttu-id="d27fc-152">Quando altera o número de Olá de nós de computação, número de Olá de distribuições por nó de computação também é alterado.</span><span class="sxs-lookup"><span data-stu-id="d27fc-152">When hello number of Compute nodes changes, hello number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-hello-compute-nodes"></a><span data-ttu-id="d27fc-153">Pode ver nós de computação de Olá?</span><span class="sxs-lookup"><span data-stu-id="d27fc-153">Can I view hello Compute nodes?</span></span>
<span data-ttu-id="d27fc-154">Cada nó de computação tem um ID de nó e fica visível em vistas de sistema que dizem respeito tooSQL do armazém de dados e Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="d27fc-154">Each Compute node has a node ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="d27fc-155">Pode ver o nó de computação Olá ao procurar pela coluna de node_id Olá nas vistas de sistema cujos nomes começam por sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="d27fc-155">You can see hello Compute node by looking for hello node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="d27fc-156">Para obter uma lista de vistas de sistema Olá, consulte Olá [vista de sistema MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="d27fc-156">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="d27fc-157"><a name="Replicated"></a>Tabelas replicadas</span><span class="sxs-lookup"><span data-stu-id="d27fc-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="d27fc-158">Uma tabela que é replicada tem um totalmente cópia da tabela de Olá armazenados em cada nó de computação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-158">A table that is replicated has a fully copy of hello table stored on each Compute node.</span></span> <span data-ttu-id="d27fc-159">Uma tabela a ser replicada remove os dados de tootransfer de necessidade de Olá entre nós de computação antes de uma associação ou agregação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-159">Replicating a table removes hello need tootransfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="d27fc-160">As tabelas replicadas não são apenas exequível com tabelas pequenas devido a Olá tabela completa do armazenamento adicional necessário toostore Olá em cada nó de computação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-160">Replicated tables are only feasible with small tables because of hello extra storage required toostore hello full table on each compute node.</span></span>  

<span data-ttu-id="d27fc-161">Olá diagrama seguinte mostra uma tabela não replicada que está armazenada em cada nó de computação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-161">hello following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="d27fc-162">Para o SQL Data Warehouse, tabela replicada Olá é totalmente copiados tooa a base de dados de distribuição em cada nó de computação.</span><span class="sxs-lookup"><span data-stu-id="d27fc-162">For SQL Data Warehouse, hello replicated table is fully copied tooa distribution database on each Compute node.</span></span> <span data-ttu-id="d27fc-163">Para Parallel Data Warehouse, tabela replicada Olá é armazenada em todos os discos atribuídos nó de computação toohello.</span><span class="sxs-lookup"><span data-stu-id="d27fc-163">For Parallel Data Warehouse, hello replicated table is stored across all disks assigned toohello Compute node.</span></span>  <span data-ttu-id="d27fc-164">Esta estratégia de disco é implementada através da utilização de grupos de ficheiros do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d27fc-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="d27fc-165">![Tabela de replicados](media/sql-data-warehouse-distributed-data/replicated-table.png "replicados tabela")</span><span class="sxs-lookup"><span data-stu-id="d27fc-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="d27fc-166">Passos seguintes</span><span class="sxs-lookup"><span data-stu-id="d27fc-166">Next steps</span></span>
<span data-ttu-id="d27fc-167">tabelas de toouse distribuído de forma eficaz, consulte [distribuir tabelas no armazém de dados do SQL Server](sql-data-warehouse-tables-distribute.md)</span><span class="sxs-lookup"><span data-stu-id="d27fc-167">toouse distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  

